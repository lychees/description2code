#include<bits/stdc++.h>
#define ll long long 
using namespace std;
ll a[1<<20],b[1<<20],c[1<<20];
ll parent[1<<20];
vector< pair<ll,ll > >v;
ll n,m,k;
ll get(ll i)
{
    while(parent[i]!=i)
    {
        parent[i]=parent[parent[i]];
        i=parent[i];//data compression technique
    }
    return i;
}
void merge(ll a,ll b)
{
    ll parent_a=get(a);
    ll parent_b=get(b);
    parent[parent_b]=parent_a;
    return;
}
int main()
{
    scanf("%lld %lld %lld",&n,&m,&k);
    for(ll  i=1;i<=n;++i)
        parent[i]=i;
    for(ll i=1;i<=m;++i)
    {
        ll temp1,temp2,temp3;
        scanf("%lld %lld %lld",&temp1,&temp2,&temp3);
        a[i]=temp1;
        b[i]=temp2;
        v.push_back(make_pair(temp3,i));
    }
    sort(v.begin(),v.end());
    ll  j=0;
    ll sum=n-1;
    ll ans=n-1;
    if(sum>k)puts("-1");
    else
    {
        for(ll  i=0;i<m;++i)
        {
            int idx=v[i].second;
            if(get(a[idx])!=get(b[idx]))
            {
                if(sum-1+v[i].first<=k)
                {
                    sum+=v[i].first-1;
                    ans--;
                }
                    merge(a[idx],b[idx]);
                    j++;
            }
        }
        if(j!=n-1)puts("-1");
        else 
         printf("%lld\n",ans);
    }
    return 0;
}
