#include <bits/stdc++.h>
using namespace std;
int main()
{
    int n,m;
    cin>>n>>m;
    int arr[n],arr1[n];
    for(int i=0;i<n;i++)
    {
    	cin>>arr1[i];
    }
    for(int i=0;i<n;i++)
    	cin>>arr[i];
    int pos;
    for(int i=0;i<n;i++)
    {
    	if(arr1[i]==arr[0])
    	{
    		bool flag=true;
    		for(int j=0;j<n;j++)
    		{
    			if(arr[j]!=arr1[(i+j)%n])
    			{
    				flag=false;
    				break;
    			}
    		}
    		if(flag)
    		{
    			pos=i;
    			break;
    		}
    	}
    }
    char t;
    int tt;
    bool flag=true;
    int position=-2;
    //cout<<pos<<"sdasd"<<endl;
    for(int i=0;i<m;i++)
    {
    	cin>>t>>tt;
    	tt=tt%n;
    	if(t=='L')
    	{
    		if(pos>=tt)
    		{
    			pos=pos-tt;
    		}
    		else{
    			pos=n-tt+pos;
    		}
    	}
    	else{
    		pos=(pos+tt)%n;
    	}
    	if(pos==0 && flag)
    	{
    		position=i;
    		flag=false;
    	}
    	//cout<<pos<<endl;
    }
    cout<<position+1<<endl;
    return 0;
}
