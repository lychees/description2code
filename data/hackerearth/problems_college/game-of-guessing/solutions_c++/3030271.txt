#include <bits/stdc++.h>
 
void MAIN() {
    int n;
    scanf("%d", &n);
    std::vector<std::pair<int, int> > events;
    char ch[2], str[4];
    int val;
    for(int i = 0; i < n; ++ i) {
        scanf("%s%d%s", ch, &val, str);
        if(str[0] == 'Y') {
            if(ch[0] == '<') {
                events.push_back(std::make_pair(1, 0));
                events.push_back(std::make_pair(val, 1));
            } else if(ch[0] == '>') {
                events.push_back(std::make_pair(val + 1, 0));
                events.push_back(std::make_pair(1e9 + 1, 1));
            } else {
                events.push_back(std::make_pair(val, 0));
                events.push_back(std::make_pair(val + 1, 1));
            }
        } else {
            if(ch[0] == '<') {
                events.push_back(std::make_pair(val, 0));
                events.push_back(std::make_pair(1e9 + 1, 1));
            } else if(ch[0] == '>') {
                events.push_back(std::make_pair(1, 0));
                events.push_back(std::make_pair(val + 1, 1));
            } else {
                events.push_back(std::make_pair(1, 0));
                events.push_back(std::make_pair(val + 1, 0));
                events.push_back(std::make_pair(val, 1));
                events.push_back(std::make_pair(1e9 + 1, 1));
            }
        }
    }
    std::sort(events.begin(), events.end());
    int ans = 0, now = 0;
    for(int i = 0, j; i < (int)events.size(); i = j) {
        for(j = i; j < (int)events.size() && events[i].first == events[j].first; ++ j) {
            if(events[j].second == 0) {
                ++ now;
            } else {
                -- now;
            }
        }
        ans = std::max(ans, now);
    }
    printf("%d\n", n - ans);
}
 
int main() {
    int n;
    scanf("%d", &n);
    while(n --) {
        MAIN();
    }
    return 0;
}