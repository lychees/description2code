#include <bits/stdc++.h>
using namespace std;

int main()
{
	int i,j,k;
	int adj[101][101];
    int n,m,d,q;
    map<string,int> mp;
    string str,str1,str2;
    cin>>n>>m;

    for(i=0;i<n;i++)
        for(j=0;j<n;j++)
            adj[i][j]=0;


    for(i=0;i<n;i++)
    {
    	cin>>str;
    	mp[str]=i;
    }

    for(i=0;i<m;i++)
    {
    	cin>>str1>>str2>>d;
    	adj[mp[str1]][mp[str2]]=d;
    	adj[mp[str2]][mp[str1]]=d;
    }

/*
    for(i=0;i<n;i++)
    {
    	for(j=0;j<n;j++)
    	{
    		cout<<adj[i][j]<<" ";
    	}
    	cout<<endl;
    }
*/


    // flyod warshall algo
    long long int dist[n+1][n+1];
    for(i=0;i<n;i++)
    for(j=0;j<n;j++)
     dist[i][j] = 100000;

    for(i=0;i<n;i++)
    {

    	dist[i][i]=0;
    	for(j=0;j<n;j++)
    	{


    		if(adj[i][j]!=0)
    			dist[i][j] = adj[i][j];

    	}
    }

    for(k=0;k<n;k++)
    {
    	for(i=0;i<n;i++)
    	{
    		for(j=0;j<n;j++)
    		{
    			if(dist[i][j]>dist[i][k]+dist[k][j])
    			{
    				dist[i][j]= dist[i][k]+dist[k][j];
    			}
    		}
    	}
    }


    cin>>q;
    for(i=0;i<q;i++)
    {
    	cin>>str1>>str2;
    	cout<<dist[mp[str1]][mp[str2]]<<endl;
    }

    return 0;
}
