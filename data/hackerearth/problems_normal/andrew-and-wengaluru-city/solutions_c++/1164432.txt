#include <iostream>
using namespace std;
#define MOD 1000000007

int main()
{  int i,m,t,n,num,lmax,water=0;;


	cin>>t;
	for(m=0;m<t;m++){
		water=0;
		cin>>n;
		int b[n],rm[n];
		for(i=0;i<n;i++){
		cin>>b[i];
	}
	num=b[n-1];
	for(i=n-2;i>=0;i--){
	  if(b[i]>num){
	   rm[i]=b[i];
	   num=rm[i];
	  }
	  else{ rm[i]=num;}


	}
	lmax=b[0];
    for(i=1;i<n-1;i++){
    	if(lmax>b[i]&&b[i]<rm[i]){
    	  if(lmax<rm[i])
    	 water=water+lmax-b[i];
    	 else
    	  water=water+rm[i]-b[i];
    	}
    	 else{
    	 	if(b[i]>lmax)
    	 	lmax=b[i];
    	 }
    	 water=water%MOD;
    }
    cout<<water<<"\n";
	}
    return 0;
}