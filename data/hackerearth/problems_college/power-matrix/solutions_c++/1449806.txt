#include<iostream>
#define mod 1000000007
using namespace std;
long long a[51][51],m,n;
long long mul(long long x[][51],long long y[][51] )
{
	long long tmp[m+1][m+1],i,j,k;
	for(i = 0 ; i < m ; ++i  ){
		for(j = 0 ; j < m ; ++j )
		{
			tmp[i][j]=0;
			for(k = 0 ; k < m ; ++k )
			tmp[i][j]=(tmp[i][j]+(x[i][k]*y[k][j]))%mod;
			
		}
	}
   for(i = 0 ; i < m ; ++i){
   	for(j = 0 ; j < m ; ++j )
   	   x[i][j]=tmp[i][j];
   }	
}
long long solve()
{
	long long idd[51][51],i,j;
	for(i = 0 ; i < m ; ++i ){
		for( j =  0 ; j < m ; ++j )
		{
			if(i  == j)
			idd[i][j]=1;
			else
			idd[i][j]=0;
		}
	}
      while(n)
	  {
  		if(n&1)
  		 mul(idd,a);
  		n = n >> 1;
  		 mul(a,a);
  	}
	  for(i = 0 ; i < m ; ++i ){
  		for(j = 0 ; j < m ; ++j  )
  		cout <<  idd[i][j]<<" ";
  		cout << endl;
  	}	
}
int main()
{
	  int t,i,j;
	  cin >> t;
	  while(t--)
	  {
  		cin >> m >> n;
  		for(i = 0 ; i < m ; ++i ){
		  	for(j = 0 ; j < m ; ++j )
		  	cin >> a[i][j];
		  }
		  solve();
  	}
}