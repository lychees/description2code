#include <bits/stdc++.h>
using namespace std;

typedef long long ll;

const int N=1000002;
const ll mod=1000000007ll;
const ll inf=1000000000000000009ll;

	
#define sc(x) scanf("%d",&(x))
#define scl(x) scanf("%lld",&x)
#define pb push_back
#define mp make_pair
#define F first
#define S second

typedef  pair<ll,int> myp;
typedef vector<myp> myv;


myv adj[N];
int vis[N];
ll tcost=0;
ll cost=0;
ll a[N];
int visCount=0;



void prim(int t2){
	priority_queue<myp> mypq;
	vis[t2]=1;
	//visCount=1;
	for(int i=0;i<adj[t2].size();i++){
		if(vis[adj[t2][i].S]==0)mypq.push(adj[t2][i]);
	}
	while(!mypq.empty()){
		myp p1=mypq.top();
		mypq.pop();	
		ll cost=inf-p1.F;
		int t1=p1.S;	
		if(vis[t1]==0){
			vis[t1]=1;
			a[visCount]=cost;
			tcost+=cost;
			visCount++;
			for(int i=0;i<adj[t1].size();i++){
				if(vis[adj[t1][i].S]==0)mypq.push(adj[t1][i]);
			}
		}
	}
}

////************
int main()
{
	//freopen("input.txt","r",stdin);
	int n,m;
	ll k;
	sc(n);sc(m);
	scl(k);
	int t1,t2;ll t3;
	for(int i=0;i<m;i++){		
		sc(t1);sc(t2);scl(t3);
		myp p1=mp(inf-t3,t2);
		adj[t1].push_back(p1);
		myp p2=mp(inf-t3,t1);
		adj[t2].push_back(p2);
	}
	//cout<<"here"<<endl;
	prim(t1);
	// for(int i=0;i<=n;i++){
	// 	cout<<vis[i]<<" ";
	// }
	// cout<<endl;
	// cout<<visCount<<endl;
	// for(int i=0;i<visCount;i++){
	// 	cout<<a[i]<<" ";
	// }
	// cout<<endl;
	if(visCount!=n-1 || k<visCount){
		printf("%s\n","-1");
	}
	else{
		//cout<<tcost<<endl;
		sort(a,a+visCount);
		if(tcost<=k){cout<<"0"<<endl;}
		else{
			int j=0;
			for(int i=visCount-1;i>=0;i--){
				j++;
				tcost-=a[i];
				tcost+=1;
				if(tcost<=k){cout<<j<<endl;break;}
			}
		}		
	}




	
	


}