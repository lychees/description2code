#include <cstdio>
#include <cstdlib>
#include <climits>
#include <cmath>
#include <cstring>
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

#define s(a)    scanf("%d",&a)
#define p(a)    printf("%d",a)
#define nl              printf("\n");
#define sp              printf(" ");

typedef long long ll;

inline void ifast(int &x)
{
        register int c = getchar_unlocked();x = 0;int neg = 0;
        for (; ((c<48 || c>57) && c != '-'); c = getchar_unlocked());
        if (c=='-') { neg = 1;c = getchar_unlocked();}
        for (; c>47 && c<58 ; c = getchar_unlocked()) x = (x<<1) + (x<<3) + c - 48;
        if (neg) x = -x;
}

int main()
{
        int T;
        ifast(T);
        while(T--) {
                int n;
                ifast(n);
                char str[1000005];
                scanf("%s",str);
                ll ans=0ll;
                ll tmp=1ll;
                for(int i=1;i<n;i++) {
                        if(str[i]<str[i-1]) {
                                ans+=(tmp*(tmp+1ll))/2ll;
                                tmp=1;
                        } else tmp++;
                }
                ans+=(tmp*(tmp+1ll))/2ll;
                printf("%lld\n",ans);
        }
        return 0;
}