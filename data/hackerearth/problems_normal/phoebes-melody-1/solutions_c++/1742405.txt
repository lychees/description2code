#include<bits/stdc++.h>
#define rep(i, a, b) for(int i = (int)a; i < (int)b; i++)
#define RED true
#define BLACK false
#define pb push_back
#define mk make_pair
#define fi first
#define se second
using namespace std;
typedef pair<int, int> ii;
typedef long long ll;
typedef pair<ii, int> iii;
typedef vector<int> vi;
const int N = 2e5 + 7;
const int M = 1e9;
const int inf = 1e9 + 7;
const ll base = 1e18;
const double pi = acos(-1);
const double ep = 1e-9;


int Le[N], Ri[N];
int pos[N];
int n, k;

int main(){
    //freopen("in.txt", "r", stdin);
    //int test, n, m;
    //init();
    int test;
    cin >> test;
    while (test-- > 0){
        cin >> n >> k;
        rep(i, 0, n){
            int u;
            scanf("%d", &u);
            pos[u] = i + 1;
        }
        rep(i, 0, N){
            Le[i] = inf;
            Ri[i] = -1;
        }
        ll res = 0;
        rep(i, 1, n + 1){
            int c = inf;
            int l = inf, r = -1;
            for(int t = pos[i] + k; t <= n; t += t & (-t))
                l = min(Le[t], l);
            for(int t = pos[i] - k; t > 0; t -= t & -t)
                r = max(r, Ri[t]);
            if (l < inf)
                c = min(c, l - pos[i]);
            if (r > -1)
                c = min(c, pos[i] - r);
            if (c != inf)
                res += c;
            //cout<<l<<" "<<r<<" "<<c<<endl;
            for(int t = pos[i]; t > 0; t -= t & -t)
                Le[t] = min(Le[t], pos[i]);
            for(int t = pos[i]; t <= n; t += t & -t)
                Ri[t] = max(Ri[t], pos[i]);
        }
        cout<<res<<endl;
    }
}
