#include<bits/stdc++.h>

using namespace std;

int n,m;
int mat[101][101];
int child[101][101];

int main(){
        //freopen("input.txt","r",stdin);
        int n,m;
        cin>>n>>m;
        for(int i=0;i<m;++i){
                int st,en,va;
                cin>>st>>en>>va;
                mat[st-1][en-1] = va;
                mat[en-1][st-1] = va;
                child[st-1][en-1] = en-1;
                child[en-1][st-1] = st-1;
        }

        int st, en, num;
        cin>>st>>en>>num;

        for(int k=0;k<n;++k){
                for(int i=0;i<n;++i){
                        for(int j=0;j<n;++j){

//                                mat[i][j] = max(mat[i][j], min(mat[k][j],mat[i][k]));
                                if(min(mat[k][j], mat[i][k])!=0)
                                if(mat[i][j]<min(mat[k][j], mat[i][k])){
                                       if(mat[k][j]<mat[i][k]){
                                                mat[i][j] = mat[k][j];
                                                child[i][j] = child[i][k];
                                        }
                                        else {
                                                mat[i][j] = mat[i][k];
                                                child[i][j] = child[i][k];
                                        }
                                }
                        }
                }
        }

        //cout<<mat[st-1][en-1]<<endl;
        int now = st-1;
        cout<<now+1<<" ";
        while(now!=en-1){
                now = child[now][en-1];
                cout<<now+1<<" ";
        }
        cout<<endl;
//        for(int i=0;i<n;++i){
//                for(int j=0;j<n;++j)
//                        cout<<child[i][j]<<" ";
//                cout<<endl;
//        }
       cout<<num/(mat[st-1][en-1]-1) + (num%(mat[st-1][en-1] -1 )==0?0:1);
//        for(int i=0;i<n;++i){
//                for(int j=0;j<n;++j)
//                        cout<<mat[i][j]<<" ";
//                cout<<endl;
//        }
}
