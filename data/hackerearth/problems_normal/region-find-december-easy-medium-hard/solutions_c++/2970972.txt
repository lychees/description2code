#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
ll n;
ll w[2000];
vector<ll> ed[2000];
ll mod=1000000000+7;
ll k;
ll ans[2000][3];
 void solve(ll in,ll par){
     
  for(ll i=0;i<ed[in].size();i++){
      if(ed[in][i]==par)continue;
      solve(ed[in][i],in);
      
  }   
  if(w[in]<k){
      ans[in][1]=ans[in][2]=0;
      ll tmp=1;
      for(ll i=0;i<ed[in].size();i++){
      if(ed[in][i]==par)continue;
      tmp*=(ans[ed[in][i]][0]+ans[ed[in][i]][1]+ans[ed[in][i]][2]+1);
      tmp%=mod;
      
  } ans[in][0]=tmp;
      return;
  }
     if(w[in]==k){
         ans[in][2]=0;
         ll tmp=1;
      for(ll i=0;i<ed[in].size();i++){
      if(ed[in][i]==par)continue;
      tmp*=(ans[ed[in][i]][1]+ans[ed[in][i]][2]+1);
      tmp%=mod;
    
  } ans[in][1]=tmp;
        
        int tmp1=1;
      for(ll i=0;i<ed[in].size();i++){
      if(ed[in][i]==par)continue;
      tmp1*=(ans[ed[in][i]][0]+ans[ed[in][i]][1]+ans[ed[in][i]][2]+1);
      tmp1%=mod;
      
  } 
         tmp1-=tmp;;
         if(tmp1<0)tmp1+=mod;
         ans[in][0]=tmp1;
         return;
     }
  if(w[in]>k){
      ll tmp1=1,tmp2=1,tmp3=1;
      for(ll i=0;i<ed[in].size();i++){
      if(ed[in][i]==par)continue;
      tmp1*=(ans[ed[in][i]][0]+ans[ed[in][i]][1]+ans[ed[in][i]][2]+1);
      tmp2*=(ans[ed[in][i]][1]+ans[ed[in][i]][2]+1);
      tmp3*=(ans[ed[in][i]][2]+1);
     
      tmp1%=mod,tmp2%=mod,tmp3%=mod;
    
  }
  tmp1-=tmp2;
  tmp2-=tmp3;
  if(tmp1<0)tmp1+=mod;
  if(tmp2<0)tmp2+=mod;
  ans[in][0]=tmp1;
  ans[in][1]=tmp2;
  ans[in][2]=tmp3;
      
      
      
      
      
      return;
  }
  
  
  
 }
 
int main()
{ ios_base::sync_with_stdio(0); cin.tie(NULL);

cin>>n;
for(ll i=0;i<n;i++)cin>>w[i];

for(ll i=0;i<n-1;i++){
   ll x,y;
    cin>>x>>y;
    x--,y--;
    ed[x].push_back(y);
    ed[y].push_back(x);
}
ll q;
cin>>q;
while(q--){
   
    cin>>k;
    ll f=0;
    solve(0,-1);
    
    for(ll  i=0;i<n;i++){f+=ans[i][1];f%=mod;}
    cout<<f<<endl;
   // for(int  i=0;i<n;i++){cout<<ans[i][0]<<' '<<ans[i][1]<<' '<<ans[i][2]<<endl;}
    
    for(ll  i=0;i<n;i++){ans[i][0]=ans[i][1]=ans[i][2]=0;}
}


return 0;
}