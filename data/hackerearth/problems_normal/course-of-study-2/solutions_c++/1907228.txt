#include<bits/stdc++.h>
using namespace std;
long long int MOD=1000000007;
#define min(a,b) a<b?a:b
#define max(a,b) a>b?a:b
//long long int MOD=pow(10,6)+3;
long long int check(long long int a) 
{
return a%MOD;
}
long long int fact[100005]={0};
void ff()
{
	long long int i;
	fact[0]=1;
	for(i=1;i<=100005;i++)
	fact[i]=check(check(i)*check(fact[i-1]));
}
long long int POW(long long int a,long long int b)
{
    long long x=1,y=a; 
    while(b > 0)
    {
        if(b%2 == 1)
        {
            x=(x*y);
            if(x>MOD) x%=MOD;
        }
        y = (y*y);
        if(y>MOD) y%=MOD; 
        b /= 2;
    }
    return x;
}
long long int cal(long long int x,long long int q)
{
	long long int ppp,pp,zz,z,i,a,b,f,ff,pppp,fff;
	a=min(x-q,q);
	b=max(x-q,q);
	if(x<=100005)
	{
	f=check(fact[x]);
	ff=check(fact[a]);
	fff=check(fact[b]);
	pp=POW(ff,MOD-2);
	ppp=POW(fff,MOD-2);
	pppp=check(check(pp)*check(ppp));
	zz=check(check(f)*check(pppp));
	return zz;
	}
	else
	{
		int first[5]={0},second[5]={0};
		int z=0;
		while(x!=0)
		{
			first[z]=x%MOD;
			z++;
			x=x/MOD;
		}
		int zz=0;
		while(a!=0)
		{
			second[zz]=a%MOD;
			zz++;
			a=a/MOD;
		}
		long long int cal=1;
		for(i=0;i<z;i++)
		{
			if(first[i]<second[i])
			return MOD;
			cal=check(check(cal)*check(fact[first[i]]));
			f=check(fact[second[i]]);
			f=check(POW(f,MOD-2));
			ff=check(fact[first[i]-second[i]]);
			ff=check(POW(ff,MOD-2));
			fff=check(check(f)*check(ff));
			cal=check(check(cal)*check(fff));
		}
		
		return cal;
	}
}

int main()
{
	
	long long int i,t,x,sum=0,k;
	ff();
	scanf("%lld",&t);
	long long int a[t],f[t];
	//int fac[t][];
	long long int j,kk,z,sum1=1,zzz=1,cc,xx;
	for(int i=0;i<t;i++)
	{
		scanf("%lld",&a[i]);
		sum=sum+a[i];
		x=a[i];
		long long facul[x];
		for(j=0;j<x;j++)
		scanf("%lld",&facul[j]);
		sort(facul,facul+x);
		cc=1;
		zzz=1;
		for(kk=1;kk<x;kk++)
		{
			if(facul[kk]==facul[kk-1])
			{
			cc++;
			if(kk==x-1)
			{
				zzz=check(check(zzz)*check(fact[cc]));
				cc=1;
			}
			}
			else
			{
				zzz=check(check(zzz)*check(fact[cc]));
				cc=1;
			}
		}
			f[i]=zzz;
	}
	
		for(i=0;i<t;i++)
		{
		x=a[i];
					z=cal(sum,a[i]);
			sum=sum-a[i];
			sum1=(sum1%MOD)*(z%MOD)%MOD;
			sum1=(sum1%MOD)*(f[i]%MOD)%MOD;
		}
		
		printf("%lld",sum1);
	return 0;
}