#include <bits/stdc++.h>

using namespace std;

const int maxn = 2e6;

int len[maxn], link[maxn], cnt[maxn];
map<char, int> to[maxn];
int sz = 1, last;

void add_letter(char c)
{
	int p = last;
	last = sz++;
	len[last] = len[p] + 1;
	cnt[last] = 1;
	for(; to[p][c] == 0; p = link[p])
		to[p][c] = last;
	if(to[p][c] == last)
		return;
	int q = to[p][c];
	if(len[q] == len[p] + 1)
	{
		link[last] = q;
		return;
	}
	int cl = sz++;
	to[cl] = to[q];
	link[cl] = link[q];
	len[cl] = len[p] + 1;
	link[last] = link[q] = cl;
	for(; to[p][c] == q; p = link[p])
		to[p][c] = cl;
}
vector<int> g[maxn];

signed main()
{
	//freopen("input.txt", "r", stdin);
    ios::sync_with_stdio(0);
    cin.tie(0);
    int k, n;
    cin >> k >> n;
    string s;
    cin >> s;
    for(auto c: s)
		add_letter(c);
	for(int i = 1; i < sz; i++)
		g[len[i]].push_back(i);
	int ans = 0;
	for(int i = maxn - 1; i >= 0; i--)
		for(auto v: g[i])
		{
			cnt[link[v]] += cnt[v];
			if(cnt[v] >= k)
				ans = max(ans, len[v]);
		}
	cout << ans << "\n";
    return 0;
}
