#include <bits/stdc++.h>
#define ll long long
#define MAX 100100

using namespace std;

vector <pair <ll,ll> > v[1000010];

class comparos {

	public :
		bool  operator()(pair <ll,ll> a ,pair <ll,ll> b) {
			return a.second > b.second;
		}

};

priority_queue < pair <ll,ll> , vector < pair <ll,ll> > , comparos > pq;
vector <ll> vp;

int mark[1000010];
ll m,n,k;

void kruskal()
{
	memset(mark,-1,sizeof mark);

	pq.push(make_pair(1,0));

	ll count =0,tsum  =0;

	pair <ll,ll > pr ;
 
	ll yoo =0;

	while(count < n){

		pr = pq.top();
		pq.pop();

		while(!pq.empty() and  	mark[pr.first] == 1){
				
				pr = pq.top();
				pq.pop();
		}

		

		if(pq.empty() and pr.first != 1){
			yoo = 1;
			break;
		}


		mark[pr.first] = 1;

		for(int i =0;i < v[pr.first].size();i++){
		
			if(mark[v[pr.first][i].first] == -1) {
				pq.push(make_pair(v[pr.first][i].first,v[pr.first][i].second));
			}
		}

		vp.push_back(pr.second);
		tsum += pr.second;
		count++;


		
	
	}

	sort(vp.begin(),vp.end());
	reverse(vp.begin(),vp.end());

	ll final = 0;

	for(int i =0;i < vp.size();i++) {
		if(tsum <= k)
			break;
		else{
			final++;
			tsum -= vp[i];
			tsum++;
		}
	}

	
	if(tsum > k || yoo )
		cout << "-1" << endl;
	else
	cout << final << endl;

}

int main()
{
	#ifndef ONLINE_JUDGE
	freopen("/home/sameer/sameer/sam.sam","r",stdin);
	#endif


	ios_base::sync_with_stdio(false);
	ll i,j,t,cont,a,b,c;
	
	cin >> n >> m >> k;

	for(i =0;i < m;i++){
		cin >>a  >> b >> c;

		v[a].push_back(make_pair(b,c));
		v[b].push_back(make_pair(a,c));
	}
	
	kruskal();

	return 0;
}
