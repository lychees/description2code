#include <iostream>
#include<algorithm>
using namespace std;

int main()
{
    int t;
    cin>>t;
    while(t--)
     {
     	int64_t l,n,k,ans=0,i;
     	cin>>l>>n>>k;
     	int64_t a[10005];
     	for(i=1;i<=n;i++)
     	  cin>>a[i];
     	sort(a+1,a+n+1);
     	for(i=2;i<=n;i++)
     	 {
     	 	if(l-a[i]>k)
     	 	 ans+=(i-1);
     	 	else
     	 	 {
     	 	 	int x=a[i]-k-1,pos=0;
     	 	 	int low=1,high=i-1;
     	 	 	while(low<=high)
     	 	 	 {
     	 	 	 	int mid=(low+high)/2;
     	 	 	 	if(a[mid]==x)
     	 	 	 	  {
     	 	 	 	  	pos=mid;
     	 	 	 	  	break;
     	 	 	 	  }
     	 	 	 	else if(a[mid]<x&&x<a[mid+1])
     	 	 	 	  {
     	 	 	 	  	pos=mid;
     	 	 	 	  	break;
     	 	 	 	  }
     	 	 	 	else if(a[mid]>x&&a[mid-1]<=x)
     	 	 	 	  {
     	 	 	 	  	pos=mid-1;
     	 	 	 	  	break;
     	 	 	 	  }
     	 	 	 	else if(x>a[mid])
     	 	 	 	  low=mid+1;
     	 	 	 	else high=mid-1;
     	 	 	 }
     	 	 
     	 	 	 ans+=pos;
     	 	 	 int j=i-1,c=0;
     	 	 	 while(j>pos&&a[j]>k)
     	 	 	 {
     	 	 	 	c++;
     	 	 	 	j--;
     	 	 	 }
     	 	 	 ans+=c;
     	 	 	 
     	 	 }
     	 }
     	 cout<<ans<<"\n";
     }
}
