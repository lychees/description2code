#include <iostream>
#include <bits/stdc++.h>

using namespace std;

#define MOD 1000000007

int main()
{
	long long int n,m;
	cin>>n>>m;
	long long int value[n];
	bool isVisited[n];
	memset(isVisited,0,sizeof(isVisited));
	for(long long int i=0;i<n;++i)
	{
		cin>>value[i];
	}
	set<long long int> a[n];
	for(long long int i=0;i<m;++i)
	{
		long long int t1,t2;
		cin>>t1>>t2;
		a[t1-1].insert(t2-1);
		a[t2-1].insert(t1-1);
	}
	long long int ans = 1;
#if 1
	for(long long int i=0;i<n;++i)
	{
		if(!isVisited[i])
		{
			//cout<<"i "<<i<<endl;
			queue<long long int> q;
			long long int maxValue = -1,maxCount = 1;
			q.push(i);
			isVisited[i] = true;
			while(!q.empty())
			{
				long long int fr = q.front();
				//cout<<"fr "<<fr<<endl;
				q.pop();
				if( maxValue < value[fr] )
				{
					maxValue = value[fr];
					maxCount = 1;
				}
				else if( maxValue == value[fr] )
				{
					++maxCount;
				}
				set<long long int>::iterator it;
  				for (it = a[fr].begin(); it != a[fr].end(); ++it) 
  				{
      				long long int x = *it;
      				if(!isVisited[x])
      				{
      					q.push(x);
      					isVisited[x] = true;
      				}
  				}
				
			}
			//cout<<"maxCount "<<maxCount<<endl;
			//cout<<"maxValue "<<maxValue<<endl;
			ans = ((ans%MOD)*(maxCount%MOD))%MOD;
		}
	}
#endif
	cout<<ans;
    return 0;
}
