#include <bits/stdc++.h>
using namespace std;
vector<int> graph[1005];
vector<bool> visited(1005, false);

int dfs(int node, int cnt)
{	
	visited[node] = true;
	
	for(int i = 0;i<graph[node].size();i++)
	{
		
		
		if(visited[graph[node][i]] == false)
			{cnt = dfs(graph[node][i], cnt + 1); }
	
	}
	return cnt;	
}
int main()
{
    int N, D;
    cin >> N >> D;
   	int i, MIN = 1005;
   	for(i = 0;i<D;i++)
   	{
   		int x, y;
   		cin >> x >> y;
   		graph[x-1].push_back(y-1);
   	}
   	for(i = 0;i<N;i++)
   	{
   		
   		if(graph[i].size() == 0)
   			{
   				cout << 1 << endl;
   				return 0;
   			}
   			visited.clear();
   			visited.resize(N);
   		int temp = dfs(i, 1);
   		if(temp < MIN)
   			MIN = temp;
   	}
   	cout << MIN << endl;
    return 0;
}
