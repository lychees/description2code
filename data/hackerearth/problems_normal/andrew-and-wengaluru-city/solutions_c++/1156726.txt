#include <bits/stdc++.h>
using namespace std;
#define LL long long int
#define mod 1000000007
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	int n;
    	cin>>n;
    	vector<pair<LL,LL> > a;
    	vector<LL> marked(n,0);
    	LL b[100009];
    	int i,j;

    	a.resize(n);
    	for(i=0;i<n;i++)
    	{
    		cin>>b[i];
    		a[i].first=b[i];
    		a[i].second=i;
    	}
    	sort(a.begin(),a.end());
    	reverse(a.begin(),a.end());
    	LL last=a[0].second;
    	marked[last]=1;
    	LL ans=0;
    	for(i=1;i<n;i++)
    	{

    		LL curr=a[i].second;
    		LL h=a[i].first;
            marked[curr]=1;
    		//cout<<h<<" ";

    		if(curr>last)
    		{
    			LL temp=last;
    			last=curr;
    			curr=temp;
    		}
    		if(marked[curr+1])continue;
    		for(j=curr+1;!marked[j];j++)
    		{
    			ans+=h-b[j];
    			marked[j]=1;
    		}
    	}
    	cout<<ans%mod<<endl;
    }
    return 0;
}
