#include<iostream>
#include<bits/stdc++.h>
using namespace std;
#define infi 1000000000
#define repi(i,n) for(int i=0;i<n;i++)
typedef long long int   ll;
map<string,int> m;
int main(){
ll n,m1,q;
ll d[100][100];

cin>>n>>m1;
repi(i,n)
repi(j,n)
d[i][j]=infi;
repi(i,n)
d[i][i]=0;
repi(i,n){
string s;
cin>>s;
m[s]=i;
}
repi(i,m1){
string s1,s2;
ll d1;cin>>s1>>s2>>d1;
ll x=m[s1],y=m[s2];
d[x][y]=d1;
d[y][x]=d1;
}
cin>>q;

   repi(k,n)
   repi(i,n)repi(j,n)d[i][j]=min(d[i][j],(d[i][k]+d[k][j]));

while(q--){
string s1,s2;
cin>>s1>>s2;
ll x=m[s1],y=m[s2];
cout<<d[x][y]<<endl;
}



return 0;
}
