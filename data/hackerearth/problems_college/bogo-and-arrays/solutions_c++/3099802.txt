#include<iostream>
#include<algorithm>
#include<vector>
#include<string.h>
#include<stack>
using namespace std;

long long a[200005],l[200005],r[200005];
stack< long long >s;

int main()
{
    int t;
    cin>>t;
    while(t--) {
        while(!s.empty()) s.pop();
        long long i,j,n,m,temp,k,ans=0;
        cin>>n>>k;
        for(i=1;i<=n;i++) cin>>a[i];
        for(i=1;i<=n;i++) {
            while(!s.empty() && a[s.top()]<a[i]) s.pop();
            if(s.empty()) l[i]=0;
            else l[i]=s.top();
            s.push(i);
        }
        while(!s.empty()) s.pop();
        for(i=n;i>=1;i--) {
            while(!s.empty() && a[s.top()]<=a[i]) s.pop();
            if(s.empty()) r[i]=n+1;
            else r[i]=s.top();
            s.push(i);
        }
        for(i=1;i<=n;i++) {
            if(a[i]>k) {
                ans+=((r[i]-i)*(i-l[i]));
            }
        }
        cout<<ans<<"\n";
    }
    return 0;
}
