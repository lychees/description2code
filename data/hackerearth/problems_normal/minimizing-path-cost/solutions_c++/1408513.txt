#include <iostream>
#include <vector>
#include <string>
#include <map>
#include <limits.h>

using namespace std;
int main()
{
	int N,M,Q;
	vector<string> Stations;
	map<string,int> MapStations;
	map<string,int>::iterator mapIt;

	cin>>N>>M; 
	int Distance[N+1][N+1];
	for(int i=0;i<N;i++)
	{
		string str;
		cin>>str;
		Stations.push_back(str);
		MapStations[str]=i;
	}
	for(int i=0;i<N;i++)
	{
		for(int j=0;j<N;j++)
		{
			Distance[i][j]=INT_MAX;
		}
		Distance[i][i]=0;
	}
	for(int i=0;i<M;i++)
	{
		string source,dest;
		int distance;

		cin>>source;
		cin>>dest;
		cin>>distance;	

		int s=0,d=0;
		mapIt=MapStations.find(source);
		s=mapIt->second;
		mapIt=MapStations.find(dest);
		d=mapIt->second;
		Distance[s][d]=distance;
		Distance[d][s]=distance;
	}
	for(int k=0;k<N;k++)
	{
		for(int i=0;i<N;i++)
		{
			for(int j=0;j<N;j++)
			{
				long long int x=Distance[i][k];
				x+=Distance[k][j];
				if(Distance[i][j]>x)
					Distance[i][j]=x;
			}			
		}		
	}
	cin>>Q;
	for(int i=0;i<Q;i++)
	{
		string source,dest;
		cin>>source>>dest;
		int s,d;
		mapIt=MapStations.find(source);
		s=mapIt->second;
		mapIt=MapStations.find(dest);
		d=mapIt->second;
		cout<<Distance[s][d]<<endl;
	}
	return 0;
}