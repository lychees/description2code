#include<bits/stdc++.h>
using namespace std;
vector<pair<int,int> >G[100*1000+8];
void dfs(int cur){
    printf("%d ",cur);
    for(int i=0;i<(int)G[cur].size();++i)
    {
        if(G[cur][i].first==0){
            dfs(G[cur][i].second);
        }
    }
    for(int i=0;i<(int)G[cur].size();++i){
        if(G[cur][i].first==1){
            dfs(G[cur][i].second);
        }
    }
    return;
}   
int main()
{
    int tc;
    cin>>tc;
    while(tc--){
        int n;
        cin>>n;
        memset(G,0,sizeof G);
        for(int i=1;i<=n;++i){
            int x,y,z;
            cin>>x>>y>>z;
           if(y) G[x].push_back(make_pair(0,y));
            if(z)G[x].push_back(make_pair(1,z));
        }
        dfs(1);
        printf("\n");
    }
    return 0;
}
