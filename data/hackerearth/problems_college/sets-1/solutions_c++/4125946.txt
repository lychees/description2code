#include<bits/stdc++.h>
#define mod 1000000007
using namespace std;

int power(int base,int exp)
{
	int res=1;
	while(exp)
	{
		if(exp&1)
		{
			res=(1ll*res*base)%mod;
		}
		base=(1ll*base*base)%mod;
		exp/=2;
	}
	return res;
}
int main()
{
	int n,q;
	scanf("%d%d",&n,&q);
	vector<int>v(n);
	for(int i=0;i<n;i++)
	{
		scanf("%d",&v[i]);
	}
	sort(v.begin(),v.end());
	while(q--)
	{
		string s;
		cin>>s;
		int k;
		int total=power(2,n);
		scanf("%d",&k);
		int lx,ux;
		int res;
		if(s[0]=='=')
		{
			ux=upper_bound(v.begin(),v.end(),k)-v.begin();
			lx=lower_bound(v.begin(),v.end(),k)-v.begin();
			res=power(2,ux)-power(2,lx);
			if(res<0)
			res+=mod;
			printf("%d\n",res);
		}
		if(s[0]=='<')
		{
			lx=lower_bound(v.begin(),v.end(),k)-v.begin();
			res=power(2,lx);
		    printf("%d\n",res);
		}
		if(s[0]=='>')
		{
			ux=upper_bound(v.begin(),v.end(),k)-v.begin();
			res=total-power(2,ux);
			if(res<0)
			res+=mod;
			printf("%d\n",res);
		}
	}
	return 0;
}