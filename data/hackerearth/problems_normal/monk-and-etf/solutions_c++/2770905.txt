/*
*
*	FileName:
*	Created By: r3gz3n
*	Description:
*
*/

#include <iostream>
#include <cstring>
#include <cstdio>
#include <cstdlib>
#include <istream>
#include <ostream>
#include <sstream>
#include <fstream>
#include <set>
#include <list>
#include <map>
#include <utility>
#include <stack>
#include <queue>
#include <cmath>
#include <iomanip>
#include <algorithm>

#define ll long long
#define ull unsigned long long
#define MP make_pair
#define PB push_back
#define FOR(i, a, b, c) for(int i = a;i < b;i += c)
#define FORI(i, a, b, c) for(int i = a;i > b;i -= c)

template<class T> inline T gcd(T a, T b) { while(b) b ^= a ^= b ^= a %= b; return a; }
template<class T> inline T pow(T a, T b, T c){ T re = 1; while(b){ if(b & 1) re = (re * a) % c; a = (a * a) % c; b >>= 1; } return re; }
template<class T> inline void read(T&x){bool fu=0;char c;for(c=getchar();c<=32;c=getchar());if(c=='-')fu=1,c=getchar();for(x=0;c>32;c=getchar())x=x*10+c-'0';if(fu)x=-x;};
template<class T> inline void read(T&x,T&y){read(x);read(y);}
template<class T> inline void read(T&x,T&y,T&z){read(x);read(y);read(z);}


using namespace std;
typedef pair <int, int> PII;
typedef pair <int, pair<int, int> > PPII;
const int MAX = 1e6 + 5;
ll toti[MAX], l, r, re[MAX];
bool isPrime[MAX];

void f()
{
    ll i, j;
    isPrime[1] = true;
    for(i = 2;i * i < MAX;++i)
    {
        if(isPrime[i] == false)
        {
            for(j = i*i;j < MAX;j += i)
                isPrime[j] = true;
        }
    }
}

void s()
{
    ll i, j;
    for(i = l;i <= r;++i)
        toti[i-l] = re[i-l] = i;
    for(i = 2;i*i <= r;++i)
    {
        if(isPrime[i] == false)
        {
            //cout << i << endl;
            for(j = (l + i - 1) / i * i;j <= r;j += i)
            {
                toti[j - l] = (toti[j - l] / i *(i-1));
                while(re[j - l] % i == 0) re[j - l] /= i;
            }
        }
    }
    for(i = l;i <= r;++i)
        if(re[i-l] > 1) toti[i-l] = (toti[i-l] / re[i-l] * (re[i-l] - 1));
}

int main()
{
    //freopen("input.txt", "r", stdin);
    int t;
    ll k;
    double total, ans;
    f();
    for(read(t);t--;)
    {
        read(l, r, k);
        total = (r - l + 1);
        s();
        ans = 0;
        for(ll i = l;i <= r;++i)
        {
            //cout << i << ' ' << toti[i-l] << endl;
            if(toti[i-l] % k == 0) ans++;
        }
        //cout << ans << ' ' << total << endl;
        printf("%.6lf\n", ans / total);
    }
    return 0;
}
