#include <bits/stdc++.h>
#define fi first
#define se second
using namespace std;

typedef pair < int , int > ii;
typedef pair < ii , int > iii;
const int maxn = 2e6+123;

int n,q,ord[maxn],last[maxn],ans[maxn],best;
iii cur[maxn];
char ar[maxn];

int main(){
	
	scanf("%d %s",&n,ar+1);
	int m = n;
	
	for( int i=1 ; i <= n ; i++ )
		ar[n+i] = i;
	n <<= 1;
	
	for( int i=1 ; i <= n ; i++ ){
		ord[i] = ar[i];
		if( m & 1 )
			last[i] = ord[i];
	}
	
	for( int k=1,len=0 ; (1 << k) <= m ; k++ ){
		int l = 1 << k;
		for( int i=1 ; i+l-1 <= n ; i++ )
			cur[i] = iii(ii(ord[i] , ord[i+(l>>1)]) , i);
		sort( cur+1 , cur+n+1-l+1 );
		for( int i=1,end = n+1-l,val=1 ; i <= end ; i++ ){
			ord[cur[i].se] = val;
			if( cur[i].fi != cur[i+1].fi )
				val++;
		}
		if( l & m ){
			for( int i=1 ; i <= m ; i++ )
			cur[i] = iii(ii(last[i] , ord[i+len]) , i);
			sort( cur+1 , cur+m+1 );
			for( int i=1,val=1 ; i <= m ; i++ ){
				last[cur[i].se] = val;
				if( cur[i].fi != cur[i+1].fi )
					val++;
			}
			len += l;
		}
	}
	
	ans[1] = 1;
	best = 1;
	for( int i=2 ; i <= m ; i++ ){
		if( last[best] > last[i] )
			best = i;
		ans[i] = best;
	}
	
	scanf("%d",&q);
	for( int i=1,x ; i <= q ; i++ ){
		scanf("%d",&x);
		printf("%d\n",ans[x+1]-1);
	}
	
	return 0;
}
