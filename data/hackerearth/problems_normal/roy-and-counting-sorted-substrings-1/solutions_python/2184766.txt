for t in range(input()):
    n = input()
    s = raw_input()
    #print n, s,
    res, i, = 0, 0
    while(i < n):
        c = 1 # continuous sorted letters
        while (i < n - 1) and (s[i] <= s[i + 1]):
            c += 1; i += 1
        i += 1
        res += ((c * (c + 1)) >> 1)
    print res
