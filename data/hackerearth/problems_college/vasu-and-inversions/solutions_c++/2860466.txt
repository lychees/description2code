typedef long long ll;
#include <iostream>
#include <stdio.h>
#include <cmath>
#include <algorithm>
#include <vector>
#include <string>
#include <string.h>
#include <map>
#include <queue>
#include <stack>
#include <sstream>
#include <fstream>
#include <stdlib.h>
#include <utility>

using namespace std;
int main()
{
	ll t,i,c,res,n,k,x;
	scanf("%lld",&t);
	while(t--)
	{
		c=0,res=0;
		scanf("%lld %lld",&n,&k);
		for(i=0;i<n;i++)
		{
			scanf("%lld",&x);
			if(x==0)
			c++;
		}
		if(k>c)
		{
			if((k-c)%2==0)
			res+=n;
			else
			res+=n-1;
		}
		else
		{
			res+=k+(n-c);
		}
		printf("%lld\n",res);
	}
	return 0;
}