#include<bits/stdc++.h>
using namespace std;
vector<int> adjlist[2000];
pair<int,int> dfs(int at,int *done)
{
    pair<int,int> ans;
    ans.first=-1;
    ans.second=-1;
    done[at]=1;
    vector<int>::iterator it=adjlist[at].begin();
    bool flag=false;
  	int one=-1,two=-1;
  	int m=-1;
    while(it!=adjlist[at].end())
    {
        if(done[*it]==0)
        {
         //   cout<<" from "<<at<<" to "<<*it<<endl;
            flag=true;
            pair<int,int> temp;
            temp=dfs(*it,done);
           /* if(ans.first==-1)
            {
                ans.first=temp.first;
                ans.second=1;
            }
            else*/
            if(one<temp.first)
            {
            	two=one;
            	one=temp.first;
            }
            else if(two<temp.first)
            {
            	two=temp.first;
            }
            m=max(m,temp.second);
          
        }
        it++;
    }
    if(!flag)
    {
        ans.first=1;
        ans.second=1;
     //   cout<<"at- "<<at<<" return 1 0"<<endl;
        return ans;
    }
    ans.first=max(one,two)+1;
    ans.second=one+two+1;
    ans.second=max(ans.second,m);
    ans.second=max(ans.second,ans.first);
   // cout<<"at "<<at<<" returning "<<ans.first<<" "<<ans.second<<endl;
    return ans;
}
int main()
{
	ios::sync_with_stdio(false);
	int t;
	cin>>t;
	while(t--)
	{
		int n,i;
		cin>>n;
		for(i=0;i<n;i++)
		    adjlist[i].clear();
		for(i=0;i<n-1;i++)
		{
		    int a,b;
		    cin>>a>>b;
		    adjlist[a].push_back(b);
		    adjlist[b].push_back(a);
		}
		int done[2000]={0};
		pair<int,int> ans=dfs(0,done);
		cout<<ans.second<<endl;
	}
	return 0;
}