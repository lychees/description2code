#include <iostream>
#include <cstdio>
#include <algorithm>
#include <vector>
#include <climits>
using namespace std;

int main()
{
    int t;
    scanf("%d", &t);
    while (t--) {
        int classes = 0;
        vector<int> interval;
        for (int i = 0; i < 7; i++) {
           int k;
           scanf("%d", &k);
           for (int j = 0; j < k; j++) {
                int start;
                int end;
                scanf("%d%d", &start, &end);
                interval.push_back(end - start);
           }
           classes += k;
        }
        sort(interval.begin(), interval.end());

        int mincls = (3*classes)/4;
        mincls = (classes % 4 == 0)? mincls: mincls + 1;
        long long total = 0;
        for (int i = 0; i < mincls; i++) {
            total += interval[i];
        }
        printf("%lld\n", 7*24*60*60 - total);
    }
}
