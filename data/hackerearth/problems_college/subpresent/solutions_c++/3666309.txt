#include<bits/stdc++.h>
using namespace std;

int main()
{
	string str;
	int k,t,a[26]={0},A[26]={0};
	cin>>str;
	cin>>k;
	cin>>t;
	int size1=str.size();
	map<char, vector<int> > m;
	for(int i=0; i<size1; i++){
		m[str[i]].push_back(i);
		if(isupper(str[i])) A[str[i]-'A']++;
		else a[str[i] - 'a']++;
	}
	int cnt=0;
	//for(int i=0; i<26; i++){
	//	cout<<a[i]<<" "<<A[i]<<endl;
	//}
	//cout<<endl;
	while(t--){
		string s;
		cin>>s;

		int size2 = s.size(), f1,f2=1,flag = 0;
		if(isupper(s[0])){
            if(!A[s[0]-'A']){
            //	cout<<"he1";
                continue;
            }
		}
		else {
            if(!a[s[0] - 'a']){
                //cout<<"he2";
                continue;
            }
		}
		f1 = m[s[0]][0];
		vector<int>::iterator it;
		for(int j=1; j<size2; j++){
            if(isupper(s[0])){
                if(!A[s[0]-'A']){
                    flag = 1;
                    break;
                }
            }
            else {
                if(!a[s[0] - 'a']){
                    flag = 1;
                    break;
                }
            }
			it = upper_bound(m[s[j]].begin(), m[s[j]].end(), f1);
			if(it==m[s[j]].end()){
				f2=0;
				break;
			}
			f1 = *it;
		}
		if(flag==1) continue;
		if(f2)
		cnt++;
	}
	if(cnt>=k){
		printf("%d LUCKY\n", cnt);
	}
	else printf("%d UNLUCKY\n", cnt);
}
