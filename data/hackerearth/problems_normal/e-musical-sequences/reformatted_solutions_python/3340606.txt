for t in xrange(input()):
    n, m, z = map(int, raw_input().split())
    a = map(int, raw_input().split())
    a.append(0)
    mul = 1
    for i in reversed(xrange(n)):
        a[n] += mul * a[i]
        mul *= -1
    a[n] %= m
    if a[n] < 0:
        a[n] += m
    if n % 2 == 0:
        z = z % (n + n + 2)
        if z > n:
            print m - a[z - n - 1]
        else:
            print a[z]
    else:
        z = z % (n + 1)
        print a[z]
