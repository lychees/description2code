#include<bits/stdc++.h>
    using namespace std;
    int main()
    {
        long long t;cin>>t;
        long long cnt1, cnt2, cnt;
        char c;
        while(t--)
        {
            cnt = cnt1 = cnt2 = 0;
            cin>>c;//cout<<c;
            do
            {
                if(c == '{')
                {
                    ++cnt1;++cnt;
                }
                
                else if(c == '}')
                {
                    ++cnt;
                    if(!cnt1)
                    {
                        cnt1 = 1;
                        ++cnt2;
                    }
                    else
                    --cnt1;
                }
                c = getchar();
            }while(c != '.');
            if(!(cnt%2))
            {
                printf("%lld\n", cnt2 + (cnt1/2));
            }
            else
            printf("-1\n");
        }
        return 0;
    }