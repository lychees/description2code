#include <bits/stdc++.h>
#define lli long long
#define INF 1000000000000000LL
using namespace std;

int tc;
lli F[100005];
lli A[100005];
int n;
lli dp[100005][3];
int vis[100005][3];

lli f(int idx, int cnt)
{
	if ( idx == n-1 ) {
		if ( cnt == 1 ) return F[idx];
	}
	if ( idx == n-2 ) {
		if ( cnt == 0 ) return F[idx] + F[idx+1];
	}
	if ( idx == n ) {
		if ( cnt == 2 ) return 0;
	}
	if ( vis[idx][cnt] == tc ) return dp[idx][cnt];
	vis[idx][cnt] = tc;
	lli ans = -A[idx] + f(idx+1, cnt);
	if ( cnt+1 <= 2 ) ans = max(ans, F[idx] + f(idx+1,cnt+1));
	dp[idx][cnt] = ans;
	return ans;
	
}

int main()
{
	int t;
	cin >> t;
	for ( tc = 1; tc <= t; tc++ ) {
		cin >> n;
		for ( int i = 0; i < n; i++ ) cin >> F[i] >> A[i];
		lli ans = f(0,0);
		cout << ans << endl;
	}
	return 0;
}