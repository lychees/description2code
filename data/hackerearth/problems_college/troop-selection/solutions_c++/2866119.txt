/*
Rajan Kasodariya
SVNIT
Troop Selection
*/
#include<bits/stdc++.h>

using namespace std;

#define ll long long int
#define print(a) cout<<a
#define T ll t; cin>>t ; while(t--)
#define fin freopen("input.txt","r",stdin)
#define fout freopen("op.txt","w",stdout)
#define debug(s,n) cout<<">> "<<s<<" : "<<n<<endl
#define pf(n) cout<<n

ll dp[1003][1003];
ll freq[1003];

int main(){

    T {
        ll n,k,s;
        cin>>n>>k>>s;

        ll a[n+2]; /* soldiers */
        for(ll i=1;i<=n;i++) {
            scanf("%lld",&a[i]);
            freq[i]=0;
        }

        /*
            freq[i]=no.of 1's in [i,n]
        */
        for(ll i=n;i>=1;i--) {
            freq[i]=freq[i+1] + (a[i]==1);
        }
        freq[0]=freq[1];

        ll ans=0;

        for(ll i=0;i<=1e3;i++)
            for(ll j=0;j<=1e3;j++)
                dp[i][j]=0;

        for(ll i=1;i<=k ; i++){
            if(n-s*i+1 <1 )
                break;

            for(ll j=n-(s*i)+1 ; j>=1;j--) {

                dp[i][j]=max(dp[i][j+1],freq[j]-freq[j+s]+dp[i-1][j+s]);
                ans=max(ans,dp[i][j]);

            }
        }

        printf("%lld\n",ans);
    }

    return 0;
}
