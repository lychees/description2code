#include <bits/stdc++.h>
#define mp make_pair
#define ll long long 
using namespace std; 
int n , m , k ,x,y; 
map < int  ,int > m1 ;
bool seen[200100] ; 
int a[200100] ; 
vector< int > g[200100] ;
map < pair < int , int >  ,int > m2;
const int mod = 1e9 + 7 ;
void dfs(int x ){
	  seen[x] = 1 ;
	  k = max ( k ,a[x]);
	  m1[a[x]]++;
	  k = max(k , a[x]) ; 
	  for (int i = 0 ; i < g[x].size() ; i++){
	  	  int u = g[x][i];
	  	  if (!seen[u])   dfs(u) ; 
	  }
}
int main()
{
   cin >> n >> m;
   for (int i = 0 ; i < n ; i++)   cin >> a[i] ; 
   for (int i = 0 ; i < m ; i++)
   {
   	cin >> x>> y ;
   	x-- ,y--;
   	g[x].push_back(y) ; 
   	g[y].push_back(x) ; 
   }
   ll ans = 1ll;
   for(int i = 0 ; i < n ;i++)
   {
   	   if (!seen[i])
   	   {
   	   	    m1.clear() ;
   	         k = 0 ;
   	         dfs(i);
   	   	    ans = 1ll*ans * m1[k] % mod ;
   	   }
   }
   cout << ans ; 
    return 0;
}