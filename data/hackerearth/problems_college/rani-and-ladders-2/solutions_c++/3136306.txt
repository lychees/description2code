#include <iostream>
#include <bits/stdc++.h>
#define upperlimit 160010
using namespace std;
int dp[upperlimit+1];
int up[upperlimit+1];
int down[upperlimit+1];
int main() {
	// your code goes here
	int t,n,l,i,j,b,u;
	cin>>t;
	while(t--){
		cin>>n>>l;
		for(i=1;i<=n;i++){
			dp[i]=10*upperlimit;
			up[i]=0;
			down[i]=0;
		}
		while(l--){
			cin>>b>>u;
			up[b]=u;
			down[u]=b;
		}
		dp[1]=0;
		for(i=2;i<=n;i++){
			if(down[i]){
				dp[i]=dp[down[i]];
			}
			int mn=dp[i]-1;
			for(j=2;(i-j)>=1&&j<=12;j++)if(!up[i-j]){
				if(dp[i-j]<mn)mn=dp[i-j];
			}
			dp[i]=1+mn;
		}
		cout<<dp[n]<<endl;
	}
	return 0;
}