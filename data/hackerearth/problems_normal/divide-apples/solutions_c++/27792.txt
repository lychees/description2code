#include <iostream>
#include <cstdio>
using namespace std;
int seq[20000];
inline long long absx(long long x)
{
	return (x<0)?-x:x;
}
int pre[20000], fw[20000];
int main()
{
//	freopen("in.in", "r", stdin);
	int n;
	long long avg = 0;
	scanf ("%d", &n);
	int diff = 3268, ini = 1024;
	for (int i = 0; i < n; i++) scanf ("%d", &seq[i]), avg += seq[i];
	avg /= n;
	for (int i = 0; i < n; i++) seq[i] -= avg;
	long long ans = 1e18;
	int i, j;
	for (i = 0; i < min(n,diff); i++) {
		long long run = 0, axm = 0;
		bool ok = true;
		for (j = 0; j < n; j++) {
			axm += absx(run);
			run += seq[((i+j)>n-1)?(i+j-n):(i+j)];
		//	if (axm > ans) {ok = false; break;}
		}
		if (axm < ans) ans = axm;
	}

	int runs = 0, runs2;
	for (int i = 1; i <= 100; i++) if (i*ini < 10000) diff/=3,pre[runs] = 4*i*ini+(((i&1)==0)?diff:0), fw[runs]=min(n,pre[runs]+diff),runs++;

	for (int r = 0; r < 2; r++) {
		for (int i = pre[r]; i < min(n,fw[r]); i++) {

		long long run = 0, axm = 0;
		bool ok = true;
		for (j = 0; j < n; j++) {
			axm += absx(run);
			run += seq[((i+j)>n-1)?(i+j-n):(i+j)];
			//if (axm > ans) {ok = false; break;}
		}
		if (axm < ans) ans = axm;
	}
	}

	printf ("%Ld\n", ans);
	return 0;
}