#include<bits/stdc++.h>
using namespace std;

typedef long long ll;
typedef long double ld;
typedef pair<ll,ll> pl;

#define sl(x) scanf("%lld",&x)
#define pl(x) printf("%lld\n",x);
#define sf(x) sort(x.begin(),x.end(),func)
#define s(x) sort(x.begin(),x.end())
#define pb push_back
#define all(v) v.begin(),v.end()
#define rs(v) { s(v) ; r(v) ; }
#define r(v) {reverse(all(v));}
#define mp make_pair
#define F first
#define S second
#define f(i,n) for(int i=0;i<n;i++)
#define fab(i,a,b) for(int i=a;i<=b;i++)

const ll mod = 1000000007;
const ll inf = LLONG_MAX;
const ll ninf = LLONG_MIN;
const ld eps = 1e-10;
const ll N = 1000005;
const ll LOGN = log2(N);
ll n,q;
ll tin[N], tout[N], h[N], fuck = 0;
vector < ll > g[N];
void dfs(ll u, ll pre)
{
    tin[u] = fuck++;
    h[u] = h[pre] + 1;
    f(i,g[u].size())
    {
        ll v = g[u][i];
        if(v == pre)
        {
            continue;
        }
        dfs(v,u);
    }
    tout[u] = fuck++;
}
int main()
{
    sl(n);
    f(i,n-1)
    {
        ll x,y;
        sl(x);
        sl(y);
        g[x].pb(y);
        g[y].pb(x);
    }
    dfs(1,0);
    sl(q);
    while(q--)
    {
        ll t,x,y;
        sl(t);
        sl(x);
        sl(y);
        if(t==0)
        {
            if(tin[x] <= tin[y] && tout[x] >= tout[y])
            {
                printf("YES ");
                pl(h[y]-h[x]+1);
            }
            else
            {
                printf("NO\n");
            }
        }
        else
        {
            if(tin[y] <= tin[x] && tout[y] >= tout[x])
            {
                printf("YES ");
                pl(h[x]-h[y]+1);
            }
            else
            {
                printf("NO\n");
            }
        }
    }
    return 0;
}
