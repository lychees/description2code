'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
N, M = map(int, raw_input().strip().split())
A = map(int, raw_input().strip().split())
adj_list = [[] for i in xrange(N)]
for edge in xrange(M):
    i, j = map(int, raw_input().strip().split())
    if i == j:
        continue
    adj_list[i-1].append(j-1)
    adj_list[j-1].append(i-1)

components = []
visited = [False for i in xrange(N)]

for i in xrange(N):
    if not visited[i]:
        component = []
        dfs_stack = [i]
        comp_max = 0
        while dfs_stack:
            elem = dfs_stack.pop()
            if not visited[elem]:
                visited[elem] = True
                component.append(A[elem])
                if comp_max < A[elem]:
                    comp_max = A[elem]
            for child in adj_list[elem]:
                if not visited[child]:
                    dfs_stack.append(child)
        comp_max_count = component.count(comp_max)
        if comp_max_count > 1:
            components.append(comp_max_count)


mod_num = 1000000007
count_pro = 1
for count in components:
    count_pro *= count
    count_pro %= mod_num
print count_pro % mod_num
