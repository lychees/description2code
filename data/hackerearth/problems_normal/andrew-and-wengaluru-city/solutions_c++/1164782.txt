#include<iostream>
#include<stdio.h>
#include<algorithm>
#define N 100005
using namespace std;


int main()
{
	long long ans;
int i,n,t;
long long tow[N];
long long hl[N] = {0}, hr[N] = {0};
scanf("%d",&t);

while(t--){
	scanf("%d",&n);
for(i=0;i<n;i++)
    scanf("%lld",&tow[i]);
    hl[N] = {0}, hr[N] = {0};
for (int i = 0; i < n; i++) hl[i] = max(tow[i], (i!=0)?hl[i-1]:0);
for (int i = n-1; i >= 0; i--) hr[i] = max(tow[i],i<(n-1) ? hr[i+1]:0);
ans = 0;
for (int i = 0; i < n; i++) ans += min(hl[i], hr[i]) - tow[i];
printf("%lld\n",(ans%1000000007));
}
return 0;
}
