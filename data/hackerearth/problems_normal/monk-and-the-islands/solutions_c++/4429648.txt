#include<iostream>
#include<queue>
#include<vector>
#include<string.h>
using namespace std;
int main(){
int t;
cin>>t;
while(t--){
        int n,m;
cin>>n>>m;
vector <int> v[n+1];
int dist[n+1];
bool vis[n+1];
for(int i=1;i<=m;i++){
    int a,b;
    cin>>a>>b;
    v[a].push_back(b);
    v[b].push_back(a);


}
    memset(dist,0,sizeof(dist));
    memset(vis,false,sizeof(vis));
     vis[1]=true;
     queue <int> q;
     q.push(1);
     while(q.empty()==false){
        int node=q.front();
        q.pop();
        for(int i=0;i<v[node].size();i++){
        if(vis[v[node][i]]==false){
            vis[v[node][i]]=true;
            dist[v[node][i]]=dist[node]+1;
            q.push(v[node][i]);

        }

        }


     }
cout<<dist[n]<<endl;

}


}
