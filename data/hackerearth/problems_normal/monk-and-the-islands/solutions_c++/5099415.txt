#include <bits/stdc++.h>
#define maxN 10005
using namespace std;
vector<int>g[maxN];
int used[maxN];
int ans[maxN];
void bfs(int v)
{
	list<int>q;
	q.push_back(v);
	ans[v] = 0;
	used[v] = 1;
	while(!q.empty()){
		int cur = q.front();
		q.pop_front();
		for(int i=0;i<g[cur].size();i++)
		{
			int to = g[cur][i];
			if(!used[to]){
				ans[to] = ans[cur] + 1;
				used[to] = 1;
				q.push_back(to);
			}
		}
	}
	
}
int main()
{
    int n,m,t;
    cin>>t;
    while(t--){
    	  for(int i=0;i<maxN;i++)
              {
    	        used[i] = 0;
    	        g[i].clear();
              }
         cin>>n>>m;
         for(int i=0;i<m;i++)
         {
         	int a,b;
         	cin>>a>>b;
         	g[a].push_back(b);
         	g[b].push_back(a);
         }
         bfs(1);
         cout<<ans[n]<<endl;
    }
    return 0;
}
