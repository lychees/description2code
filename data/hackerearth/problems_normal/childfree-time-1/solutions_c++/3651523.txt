#include <iostream>
#include <cstdio>
#include <vector>
#include <algorithm>
#include <queue>
#define ll long long 
#define pf printf
#define sf scanf
#define pii pair<int, int>

using namespace std;

int main()
{
	int R, P;
	sf("%d%d",&R,&P);
	vector< vector < pii > > adj(R+1);
	vector <ll> dp(R+1, -100000);
	vector <int> in(R+1, 0);
	for(int i=0;i<P;i++) {
		int u,v,w;
		sf("%d%d%d",&u,&v,&w);
		adj[v].push_back(pii(u,w));
		in[u]++;
	}
	
	queue <int> q;
	for(int i=1;i<=R;i++) {
		if(!in[i]){
			q.push(i);
			dp[i]=0;
		}
	}
	
	while(!q.empty()) {
		int v=q.front();
		q.pop();
		for(int i=0;i<(int)adj[v].size();i++) {
			int u=adj[v][i].first;
			int w=adj[v][i].second+2;
			dp[u]=max(dp[u], dp[v]+w);
			in[u]--;
			if(!in[u])
				q.push(u);
		}
	}
	
	ll ans= *max_element(dp.begin(), dp.end());
	printf("%lld\n",ans);
    return 0;
}
