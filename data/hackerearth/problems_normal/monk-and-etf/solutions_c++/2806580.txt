#include <bits/stdc++.h>
using namespace std;

#define ll long long int
#define vi vector<ll>
#define vvi vector<vi>
#define pb push_back
#define forn(i,n) for( i = 0; i < n; i++ )
#define s(n) scanf("%lld",&n);

ll pr[ 1 << 20 ];
vi A[ 1 << 20 ];

ll get_phi( ll val, vi &pr )
{
	ll res = val;
	for ( ll i = 0; i < pr.size(); i++ )
	{
		while ( val % pr[i] == 0 )
			val /= pr[i];
		res = res / pr[i] * ( pr[i] - 1 );
	}
	if ( val > 1 ) res = res / val * ( val - 1 );
	return res;
}
int main(){
	ll i, j, t, l, r, k, ans;
	pr[1] = 1;
	for ( i = 2; i <= 1000000; i++ )
		if ( pr[i] == 0 )
			for ( j = i*2; j <= 1000000; j += i )
				pr[j]=1;
	s(t);
	while(t--)
	{
		s(l);s(r);s(k);
		for ( i = l; i <= r; i++ )
			A[i-l].clear();
		for ( i = 2; i <= 1000000; i++ )
		{
			if ( pr[i] ) continue;
			ll bnd = l / i * i;
			if ( l % i > 0) bnd += i;
			for ( j = bnd; j <= r; j += i )
				A[j-l].push_back(i);
		}
		ans = 0;
		for ( i = l; i <= r; i++ )
		{
			ll Q = get_phi( i, A[i-l] );
			if ( Q % k == 0 ) ans++;
		}
		cout.precision(6);
		cout << fixed << ans * 1.0 / ( r - l + 1 ) << endl;
	}
	return 0;
}