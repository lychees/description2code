#include<cstdio>
#include<algorithm>
#include<math.h>


using namespace std;

int t,i,j,k,l,m,n,ar[100009],visited[1000009],val[1000009],lval[1000009];
void dfsr(int v,int level)
{
    if(ar[v]==0)
    return;


    if(val[level]==0)
    {
        val[level]=ar[v];
        visited[v]=1;
    }

    dfsr(2*v+1,level+1);
    dfsr(2*v,level+1);

}
void dfsl(int v,int level)
{
    if(ar[v]==0)
    return;


    if(lval[level]==0&&visited[v]==0)
    {
        lval[level]=ar[v];
        visited[v]=1;
    }

    dfsl(2*v,level+1);
    dfsl(2*v+1,level+1);


}






int main()
{
    scanf("%d",&t);
    while(t--)
    {


scanf("%d",&n);
for(i=1;i<=n;i++)
scanf("%d",&ar[i]);


dfsr(1,1);
dfsl(1,1);


for(i=1;i<40;i++)
if(val[i]!=0)
printf("%d\n",val[i]);

for(i=1;i<40;i++)
if(lval[i])
printf("%d\n",lval[i]);


for(i=0;i<=100009;i++)
{
    ar[i]=0;
    val[i]=0;
    lval[i]=0;
    visited[i]=0;

}
printf("\n");

}


return 0;
}










