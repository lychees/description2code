#include<cstdio>
#include<iostream>
#include<algorithm>
#include<set>

using namespace std;
const double eps = 1e-9;

int main() {
    int n;
    scanf("%d", &n);
    int a[n];
    for(int i = 0; i < n; ++i) scanf("%d", a + i);
    int r[n][n];
    for(int i = 0; i < n; ++i) {
    	multiset<int> s1, s2;
    	for(int j = i; j < n; ++j) {
    		int x = j - i + 1;
			if(s1.size() == 0 || a[j] <= *s1.rbegin()) s1.insert(a[j]);
			else s2.insert(a[j]);
			
			if(s1.size() < ceil(x / 2.0)) {
				s1.insert(*s2.begin());
				s2.erase(s2.begin());
			}
			if(s2.size() < floor(x / 2.0)) {
				s2.insert(*s1.rbegin());
				s1.erase(s1.find(*s1.rbegin()));
			}
		
    		r[i][j] = *s1.rbegin();
 		}
 			
    }
    int q;
    scanf("%d", &q);
    for(int k = 0; k < q; ++k) {
        int l, ri;
		scanf("%d%d", &l, &ri);
		printf("%d\n", r[l - 1][ ri - 1]);
	}
    return 0;

}
