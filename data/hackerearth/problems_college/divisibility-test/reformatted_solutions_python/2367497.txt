for tc in range(int(raw_input())):
    n = int(raw_input())
    k = int(raw_input())
    count = 0
    l, m = map(int, raw_input().split())
    b = str(n)
    for i in range(l-1, m):
        for j in range(i, m):
            g = int(b[i:j+1])
            if g % k == 0:
                count += 1
    print count
