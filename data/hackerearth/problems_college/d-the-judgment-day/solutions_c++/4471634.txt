#include <bits/stdc++.h>
#define F first
#define S second
#define MOD 1000000007
#define PI 3.1415926535897932384626433832795
//#define FILE freopen("test.in", "r", stdin); freopen("test.out", "w", stdout)
//#define TIMER cout<<endl<<"Time Taken : "<<(double)(clock()-t1)/CLOCKS_PER_SEC<<" seconds."<<endl
typedef long long ll;
clock_t t1 = clock();
using namespace std;

int corr[5]={4,3,2,1,0};
int main(){
    std::ios::sync_with_stdio(false);
    #ifdef FILE
		FILE;
	#endif
    int t,temp;
    cin>>t;
    for(int i=0; i<t; i++){
		int n, n1=0,n2=0,n3=0,n4=0, n_r=0;
        cin>>n;
        for(int j=0; j<n; j++){
            cin>>temp;
            if(temp==1) n1++;
            else if(temp==2) n2++;
            else if(temp==3) n3++;
            else if(temp==4) n4++;
        }
		n_r+=n4;
		temp=min(n1,n3);
		n_r+=temp;
		n3-=temp;
		n1-=temp;
		if(n2%2==0) temp=0;
		else temp=2;
        n_r+=n2/2;
        if(n3>0){
			//n1==0
			n_r+=n3;
			if(temp==2) n_r+=1;	//khel khatm
        }
        else if(n1>0){
			//n3==0 n1>0
            if(temp==2){
            	n_r+=1;
            	n1-=2;
            }
				if(n1>0) n_r+=ceil((double)n1/4.0);
        }
        else if(temp==2)n_r+=1;
        cout<<n_r<<endl;
    }
    #ifdef TIMER
		TIMER;
	#endif
    return 0;
}
