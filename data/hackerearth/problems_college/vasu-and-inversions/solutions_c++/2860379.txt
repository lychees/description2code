#include<stdio.h>
#include<string.h>
#include<vector>
#include<math.h>
#include<algorithm>
#define INF 1000000010
#define MOD 1000000007
#define MAX 10000010
#define MAX2D 3000
#define sfl(n) scanf("%lld",&n)
#define sfc(c) scanf("%c",&c)
#define sf2(n,m) scanf("%d%d",&n,&m)
#define ll long long
#define pf1(n) printf("%d\n", n)
#define pf2(n,m) printf("%d %d\n", n,m)
#define pf3(n,m,o) printf("%d %d %d\n", n,m,o)
#define pfl1(n) printf("%lld\n", n)
#define pfl2(n,m) printf("%lld %lld\n", n,m)
#define pfl3(n,m,o) printf("%lld %lld %lld\n", n,m,o)
#define pfn1(n) printf(#n "=%d\n", n)
#define pfn2(n,m) printf(#n "= %d, " #m "= %d\n", n,m);
#define pfn3(n,m,o) printf(#n "= %d, " #m "= %d, " #o "= %d\n", n,m,o);
#define pfnl1(n) printf(#n "=%lld\n", n)
#define pfnl2(n,m) printf(#n "= %lld, " #m "= %lld\n", n,m);
#define pfnl3(n,m,o) printf(#n "= %lld, " #m "= %lld, " #o "= %lld\n", n,m,o);

#define sf(n) scanf("%d",&n)
/*
#define sf(n) finp(&n)
#define getcx getchar_unlocked
inline void finp(lli *inp )
{
	lli n=0; lli ch = getcx(); lli sign = 1;
	while(ch < '0' || ch > '9')
	{
	if(ch == '-') sign=-1; ch = getcx();
	}
	while(ch >= '0' && ch <= '9')
	{
	n = (n << 3) + (n << 1) + ch - '0', ch = getcx();
	}
	*inp = n * sign;
}
*/
using namespace std;

/*
ll gcd(ll a,ll b){
 return b==0?a:gcd(b,a%b);
}
*/

/*
ll pow(int a,int b){
  ll x=1,y=a;
  while(b>0)
  {
      if(b%2==1)
        x=(x*y)%MOD;
      y=(y*y)%MOD;
      b/=2;
  }
  return x%MOD;
}
*/

/*
ll inv(int n){return pow(n,MOD-2);}
*/

int arr[MAX];
int main(){
 int k,t,i,j,n,x,y,ans;
 sf(t);
 while(t--){
 x=y=ans=0;
	sf(n);sf(k);
	for(i=0;i<n;i++)
		sf(arr[i]);
	for(i=0;i<n;i++){
		if(arr[i]==1)
			x++;
		else
			y++;
	}
	if(y>=k){
		ans=x+k;
	}
	else{
		ans=x+y-1+((k-y+1)%2?1:0);
	}
	printf("%d\n",ans);
	}
 return 0;
}
