#include<bits/stdc++.h>
#define FOR(i,a,n) for(int i=a;i<n;i++)
#define si(x) scanf("%d",&x)
#define sll(x) scanf("%lld",&x)
#define ss(x) scanf("%s",x)
#define pi(x) printf("%d\n",x)
#define pll(x) printf("%lld\n",x)
#define ps(x) printf("%s\n",ch)
#define M 1000000007
#define ll long long
#define mp make_pair
#define pb push_back
#define fr first
#define se second
using namespace std;
vector<pair<ll,pair<int,int> > > v;
ll par[1000069];
ll find(ll x)
{
    if(x!=par[x])
        par[x]=find(par[x]);
    return par[x];
}
int main()
{
    ll n,m,k,x,y,c;
    sll(n),sll(m),sll(k);
    FOR(i,0,m)
        sll(x),sll(y),sll(c),v.pb(mp(c,mp(x,y)));
    sort(v.begin(),v.end());
    FOR(i,1,n+1)
        par[i]=i;
    vector <int> ans;
    ll sum=0;
    FOR(i,0,v.size())
    {
       // cout<<v[i].se.fr<<" "<<v[i].se.se<<endl;
        ll p1=find(v[i].se.se);
       // pi(par[2]);
        ll p2=find(v[i].se.fr);
       // cout<<p2<<" "<<p1<<endl;
        if(p1!=p2)
            par[p1]=p2,ans.pb(i),sum+=v[i].fr;
    }
    if(ans.size()!=n-1)
    {
        puts("-1");
        return 0;
    }
    for(int i=ans.size()-1;i>=0;i--)
    {
        if(sum<=k)
        {
            pi(ans.size()-1-i);
            return 0;
        }
        sum-=v[ans[i]].fr;
        sum+=1;
    }
    if(sum<=k)
    {
        pi(ans.size());
        return 0;
    }
    puts("-1");
    return 0;
}
