#include <bits/stdc++.h>

using namespace std;

#define mem0(arr) memset(arr , 0 , sizeof arr)
#define memf(arr) memset(arr , false , sizeof arr)
#define memdp(arr) memset(arr , -1 , sizeof arr)
#define rep(i , n) for(int i = 1; i <= n; i++)
#define loop(i , n) for(int i = 0; i < n; i++)
#define pb push_back
#define fi first
#define se second
#define cs(y) cout << "Case " << y << ": "
#define cs2(y) cout << "Case " << y << ":" << "\n"

typedef long long ll;

ll arr [1000 + 10][1000 + 10];
bool vis [1000 + 10][1000 + 10];
ll maxi = -1;
ll n , m , k , d , t , tem1 , tem2 , tem3 , tem4 , sum = 0 , ans = 0, y = 1;

void dfs (ll x , ll y , ll dir , ll con){

    vis[x][y] = true;
    maxi = max(maxi , con);

    if(dir == 1){
        if(x + 1 < n && !vis[x + 1][y]){
            if(arr[x][y] == arr[x + 1][y])dfs(x + 1 , y , 1 , con + 1);
        }
        if(y + 1 < m && !vis[x][y + 1]){
            if(arr[x][y] == arr[x][y + 1])dfs(x , y + 1 , 2 , con + 1);
        }
    } else {
        if(y + 1 < m && !vis[x][y + 1]){
            if(arr[x][y] == arr[x][y + 1])dfs(x , y + 1 , 2 , con + 1);
        }
    }


}


int main()
{

    //freopen ("file_name.X", "r", stdin);
    //freopen ("file_name.X","w",stdout);
    //ios::sync_with_stdio(false);cin.tie(0);


    string s , c;

    cin >>  n >> m ;


    for(int i = 0; i < n; i++){
        for(int j = 0; j < m; j++){
            cin >> arr[i][j];
        }
    }
    for(int i = 0; i < n; i++){
        for(int j = 0; j < m; j++){
            if(!vis[i][j]) dfs(i ,j , 1 , 1);
        }
    }
    cout << maxi;

    return 0;
}
