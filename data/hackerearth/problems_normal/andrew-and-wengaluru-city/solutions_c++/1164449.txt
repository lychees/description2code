// standard two pointer problem
#include <iostream>
#include <vector>

using namespace std;

int main(){

    int t;
    cin >> t;

    while(t-- > 0){
        int n; cin >> n;
        vector <int> inp;
        int temp;

        for(int i=0; i<n; i++){
            cin >> temp;
            inp.push_back(temp);
        }
        
        int left=0; 
        int right=inp.size() - 1;
        int maxleft=0;
        int maxright=0;

        long long int ans = 0;
        
        while(left <= right){
            if(inp[left] <= inp[right]){
                if(inp[left] >= maxleft) 
                    maxleft = inp[left];
                else 
                    ans += maxleft - inp[left];
                left++;
            }
            else{
                if(inp[right] >= maxright) 
                    maxright = inp[right];
                else 
                    ans += maxright - inp[right];
                right--;
            }
            ans = ans % 1000000007;
        }

        cout << ans << endl;
    }

    return 0;
}

