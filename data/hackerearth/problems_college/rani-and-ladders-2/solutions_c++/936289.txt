#include<iostream>
#include<stdlib.h>
#include <string.h>
#include<algorithm>
using namespace std;


int main()
{
    int T;
    cin>>T;
    while(T--)
    {
        int n,l;
        cin>>n>>l;

        int *a=new int[n];
        int *b=new int[n];
        int *t=new int[n];
        int i,j;
        for(i=0;i<n;i++)
            b[i]=0;

        int temp;
        for(i=0;i<l;i++)
        {
            cin>>temp;
            temp--;
            b[temp]=1;
            cin>>t[temp];
            t[temp]--;
        }

        a[n-1]=0;
        a[n-2]=9999;
        int mini;
        for(i=n-3;i>=0;i--)
        {
            if(!b[i])
            {
                //a[i]=min(a[i+2]+1,a[i+3]+1,a[i+4]+1,a[i+5]+1,a[i+6]+1,a[i+7]+1,a[i+8]+1,a[i+9]+1,a[i+10]+1,a[i+11]+1,a[i+12]+1);

                mini=a[i+2]+1;
                for(j=3;j<13;j++)
                {
                    if(a[i+j]+1<mini && i+j<n)
                        mini=a[i+j]+1;
                }
                a[i]=mini;
            }
            else
                a[i]=a[t[i]];
        }

        cout<<a[0]<<endl;
    }
}
