'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
# print 'Hello World!'


def isHorizontal(l, s):
    for i in range(0, (s/2)):
        if (l[i] != l[size-i-1]):
            return False
    return True


def isVertical(l, s):
    for i in range(0, s):
        for j in range(0, s/2):
            if (l[i][j] != l[i][s-j-1]):
                return False
    return True


tnum = int(raw_input())

for i in range(0, tnum):
    size = int(raw_input())
    li = []
    for j in range(0, size):
        items = raw_input()
        li.append(list(items))

    ish = isHorizontal(li, size)
    isv = isVertical(li, size)
    if (ish and isv):
        print "BOTH"
    elif ish:
        print "HORIZONTAL"
    elif isv:
        print "VERTICAL"
    else:
        print "NO"
