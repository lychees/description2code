#include <iostream>
using namespace std;
int main()
{
	int i,j,a,n,q,mat[101][101];
    cin>>n>>q;
    for(i=0;i<n;i++)
      for(j=0;j<n;j++)
         cin>>mat[i][j];
    while(q--)
    {
    	cin>>a;
    	a%=360;
    	//cout<<a<<endl;
    	switch(a)
    	{
    		case 0: for(i=0;i<n;i++)
                      { 
                      	for(j=0;j<n;j++)
                         { 
                	        cout<<mat[i][j]<<" ";
                           }
                         cout<<"\n";
                      }
                       cout<<endl;
                      break;
            case 90 :
                       for(i=0;i<n;i++)
                        {  for(j=n-1;j>=0;j--)
                              cout<<mat[j][i]<<" ";
                        cout<<endl;
                        }
                        cout<<endl;
                       break;
            case 180 : 
                       for(i=n-1;i>=0;i--)
                        {  for(j=n-1;j>=0;j--)
                               cout<<mat[i][j]<<" ";
                         cout<<endl;
                        }     
                       cout<<endl;
                       break;
            case 270 :
                        for(j=n-1;j>=0;j--)
                        {   for(i=0;i<n;i++)
                              cout<<mat[i][j]<<" ";
                         cout<<endl;
                        }
                        cout<<endl;
                        break;      
    	}
    	
    }
    return 0;
}
