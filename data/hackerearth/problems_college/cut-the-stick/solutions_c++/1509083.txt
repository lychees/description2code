/*
jai shree ram _/\_
A hacker from NITP
*/

#include<bits/stdc++.h>
using namespace std;

#define mod 1000000007
typedef set<string> ss;
typedef vector<int> vs;
typedef map<int,char> msi;
typedef pair<int,int> pa;
typedef long long int ll;

ll dp[10004],n,s,l,i,a,b,k;
vector<ll> v;
int main()
{
	//freopen("i.in", "r", stdin);
  	//freopen("o.out", "w", stdout);
  	int t;
	cin>>t;
	while(t--)
	{
		cin>>s>>n>>l;
		v.clear();
		for(i=0;i<n;i++)
		{
			cin>>a;
			v.push_back(a);
		}
		sort(v.begin(),v.end());
		dp[0]=0;
		for(i=1;i<n;i++)
		{
			if(s-v[i]>l)
			{
				dp[i]=dp[i-1]+i;
				//cout<<dp[i]<<"\n";
				continue;
			}
			k=v[i]-l-1;
			a=upper_bound(v.begin(),v.begin()+i,k)-v.begin();
			k=l;
			b=upper_bound(v.begin(),v.begin()+i,k)-v.begin();
			if(a<b)
			dp[i]=dp[i-1]+a+i-b;
			else
			dp[i]=dp[i-1]+i;
			//cout<<dp[i]<<"\n";
		}
		cout<<dp[n-1]<<"\n";
	}
	return 0;
}

