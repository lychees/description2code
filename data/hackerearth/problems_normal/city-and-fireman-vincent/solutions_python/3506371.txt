#!/usr/bin/env python
# encoding: utf-8

MOD = int(1e9 + 7)
fa, Min, cnt = [], [], []

def findfa(x):
    if x == fa[x]:
        return x
    else:
        fa[x] = findfa(fa[x])
        return fa[x]

if __name__ == '__main__':
    N = int(raw_input())
    E = map(int, raw_input().split())
    K = int(raw_input())
    fa = [i for i in xrange(N)]
    Min = [E[i] for i in xrange(N)]
    cnt = [1 for i in xrange(N)]
    for _ in xrange(K):
        i, j = map(int, raw_input().split())
        i -= 1
        j -= 1
        x, y = findfa(i), findfa(j)
        if x != y:
            fa[x] = y
            if Min[x] == Min[y]:
                cnt[y] += cnt[x]
            elif Min[x] < Min[y]:
                Min[y] = Min[x]
                cnt[y] = cnt[x]
    print reduce(lambda a, b: a * b % MOD, [cnt[i] for i in xrange(N) if findfa(i) == i], 1)
