#include <iostream>
#include<vector>
using namespace std;

int main()
{
	int t;
	cin>>t;
	++t;
	while(--t)
	{
		bool hr=true,vr=true;
		char x[50][50];
		int n;
		cin>>n;
		for(int i=0;i!=n;++i)
		{
		  for(int j=0;j!=n;++j)
		    {
		     cin>>x[i][j];
		    }
	    }
	    int m=n>>1;
	   
	    for(int i=0;i!=m;++i)
	    {
	     for(int j=0;j!=n;++j)
	       {
	       	if(x[i][j]!=x[n-i-1][j])
	       	{
	       	  hr=false;
	    	  goto yyy;	
	       	} 
	       }
	    }
	    yyy:
	    for(int i=0;i!=m;++i)
	    {
	       for(int j=0;j!=n;++j)
	       {
	       	if(x[j][i]!=x[j][n-i-1])
	       	{
	       	  vr=false;
	    	  goto xxx;	
	       	} 
	       }
	    }
	    xxx:
	    	if(hr&&vr)
	    	 cout<<"BOTH";
	    	else if(hr)
			 {
			 	cout<<"HORIZONTAL";
			 } 
			 else if(vr)
			 cout<<"VERTICAL";
			else
			  cout<<"NO";
		cout<<endl;	  
			 
	    	  
	    
	}	
    return 0;
}
