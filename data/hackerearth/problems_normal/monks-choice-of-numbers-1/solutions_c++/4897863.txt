#include <iostream>
#include <set>
#include <utility>
using namespace std;

int ones(long int n){
	int count = 0;
	while(n){
		count++;
		n = (n & (n - 1));
	}
	return count;
}

struct MyComparator{
	bool operator() (const int &lhs, const int &rhs){
		return lhs > rhs;
	}
};

int main()
{
   int n, k, t;
   long int num, sum;
   multiset <int, MyComparator> S;
   cin >> t;
   while(t--){
   	cin >> n >> k;
   	sum = 0;
   	for(int i = 0; i < n; i++){
   		cin >> num;
   		S.insert(ones(num));
   	}
   	/*for(auto it = S.begin(); it != S.end(); it++)
   		cout << *it << endl;*/
   	auto it = S.begin();
   	while(k--){
   		//cout << *it << endl;
   		sum += *it;
   		it++;
   	}
   	cout << sum << endl;
   	S.clear();
   }
}
