#include "bits/stdc++.h"
using namespace std;
const int N = 25;
int n , m , c;
int arr[N][N];
int ans = INT_MIN;
int main(){
    cin >> n >> m >> c;
    for(int i = 0 ; i < n ; ++i){
        for(int j = 0 ; j < m ; ++j){
            cin >> arr[i][j];
        }
    }
    int p = 1 << n;
    for(int mask = 0 ; mask < p ; ++mask){
        int sum = 0;
        int cnt = 0;
        int col[N];
        memset(col , 0 , sizeof(col));
        for(int j = 0 ; j < n ; ++j){
            if(mask & (1 << j)){
                for(int k = 0 ; k < m ; ++k){
                    col[k] += arr[j][k];
                    sum += arr[j][k];
                }
            }
            else{
                ++cnt;
            }
        }
        for(int j = 0 ; j < m ; ++j){
            if(col[j] + c < 0){
                sum -= col[j];
                ++cnt;
            }
        }
        ans = max(ans , sum - c * cnt);
    }
    cout << ans;
}