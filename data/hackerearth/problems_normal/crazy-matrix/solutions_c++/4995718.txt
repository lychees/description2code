#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define xx first
#define yy second
#define mod 1000000007
#define pb push_back
ll modpow ( ll a , ll b )
{
ll res =1;
while ( b )
{
if ( b &1) res =( res * a )  ;
a =( a * a ) ;
b >>=1;
}
return res ;
}
ll n,m,i,j,k,ans=0,sum=0,q,x,y,t,r,h,w,b,c,d,z;
ll v[500][500],visit[500][500],visit2[500][500];
ll x1[8]={-1,-1,-1,0,0,1,1,1};
ll x2[8]={-1,0,1,1,-1,-1,0,1};
bool check(ll x,ll y){
  if(x<0||x>=n||y<0||y>=n)return 0;
  return 1;
}
ll dfs(ll x,ll y){
  if(x==n-1) return 1;
  visit[x][y]=1;
  ll p=0;
  for(ll i=0;i<8;i++){
    if(check(x+x1[i],y+x2[i]) && !visit[x+x1[i]][y+x2[i]] && v[x+x1[i]][y+x2[i]]==1){
      p|=dfs(x+x1[i],y+x2[i]);
    }
  }
  return p;
}
ll dfs2(ll x,ll y){
  if(y==n-1) return 1;
  visit2[x][y]=1;
  ll p=0;
  for(ll i=0;i<8;i++){
    if(check(x+x1[i],y+x2[i]) && !visit2[x+x1[i]][y+x2[i]] && v[x+x1[i]][y+x2[i]]==2){
      p|=dfs2(x+x1[i],y+x2[i]);
    }
  }
  return p;
}
int main(){
  
 
    scanf("%lld",&n);
    for(i=0;i<n;i++){
      for(j=0;j<n;j++){
        cin>>v[i][j];
      }
    }
    x=0;
    for(i=0;i<n;i++){
      if(!visit[0][i] && v[0][i]==1){
        x=x|dfs(0,i);
      }
    }
    y=0;
    for(i=0;i<n;i++){
      if(!visit2[i][0] && v[i][0]==2){
        y=y|dfs2(i,0);
      }
    }
    if(x==1 && y==1){
      cout<<"AMBIGUOUS\n";
    }
    else if(x==0 && y==0)cout<<0<<endl;
    else if(x)cout<<1<<endl;
    else cout<<2<<endl;
    //cout<<x<<" "<<y;
    
  return 0;
    
    
}