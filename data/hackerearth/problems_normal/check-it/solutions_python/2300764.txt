T = int(raw_input())
while(T>0):
	T=T-1
	N,M=map(int,raw_input().split())
	queue = [n for n in range(1,int(N+1))]
	edges=[]
	while M>0:
		M=M-1
		a,b=map(int,raw_input().split())
		edges.append((a,b))
	input = map(int,raw_input().split())
	for i in input:
		x= edges[i-1]
		if len(queue)==0:
			break
		if x[0] in queue:
			queue.remove(x[0])
		if x[1] in queue:
			queue.remove(x[1]) 	
			
	if (len(queue)==0):
		print "YES"
	else:
		print "NO"
		