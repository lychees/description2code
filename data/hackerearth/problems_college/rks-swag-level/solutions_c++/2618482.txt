#include <bits/stdc++.h>
using namespace std;

int main()
{
  //  cout << "Hello World!" << endl;
  int t;
  scanf("%d",&t);
  while(t--)
  {
  	int n;
  	scanf("%d",&n);
  	int fir,sec;
  	fir = sec = 0;
  	vector<int> v;
  	
  	int i,j;
  	for(i=0;i<n;i++)
  	{
  		int m;
  		scanf("%d",&m);
  		vector<int> tm;
  		for(j=0;j<m;j++)
  		{
  			int x;
  			scanf("%d",&x);
  			tm.push_back(x);
  		}
  		for(j=0;j<m/2;j++)
  		
  		{
  			fir+=tm[j];
  			sec+=tm[m-1-j];
  		}
  		if(m%2)v.push_back(tm[m/2]);
  	}
  	sort(v.begin(),v.end());
  	reverse(v.begin(),v.end());
  	for(i=0;i<v.size();i++)
  	if(i%2)sec+=v[i];
  	else fir+=v[i];
  	printf("%d %d\n",fir,sec);
  }
    return 0;
}
