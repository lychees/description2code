"""
		logic: number of substrings in string if length n is n(n+1)/2 where all chars
 		in string are unique.
 		Now we will find portions in input string which has [AaBbCc] only
 		Then count substrings for each of these portions
 		TODO: how to avoid duplicates
 
"""
t=input()
while t>0:
	t-=1
	string = raw_input()
	count=0
	subcount=0
	for char in string:
		if char not in 'ABCabc':
			count+=subcount*(subcount+1)/2
			subcount=0
		else:
			subcount+=1
	count+=subcount*(subcount+1)/2
	print count