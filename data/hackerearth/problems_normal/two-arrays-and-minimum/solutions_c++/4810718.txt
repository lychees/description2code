#include <iostream>
using namespace std;
#include <limits.h>

int main()
{           
   long long int a,b,c;
   cin >> a>>b>>c;
   long long int M = 1000000007;
   int N;
   cin >> N;
   long long int A[N],B[N];
   A[0] = (a*c)%M;
   B[0] = (b*c)%M;
   int mina1 = A[0],mina2 = INT_MAX,minb1 = B[0],minb2 = INT_MAX; /// 1 suffix variable is smallest one and other is 2nd smallest//

   int a1 = 0,a2 = 0,b1 = 0,b2 = 0;
   


 for(int i = 1; i < N;i++){
   
   A[i] = ((((((A[i-1]*a)%M)*b)%M)*c)%M + (((A[i-1]*a)%M)*b)%M + (((A[i-1]*a)%M)*c)%M)%M; 
   if(A[i] <= mina1){
    mina2 = mina1;
    a2 = a1;
    mina1 = A[i];
    a1 = i;
   }else if(mina1 < A[i] && A[i] <= mina2){
    mina2 = A[i];
    a2 = i;
   }
 
 }
 for(int i = 1; i < N ; i++){
   
      
   B[i] = ((((((B[i-1]*b)%M)*c)%M)*a)%M + (((B[i-1]*b)%M)*a)%M + (((B[i-1]*b)%M)*c)%M)%M; 
    if(B[i] <= minb1){
    minb2 = minb1;
    b2 = b1;
    minb1 = B[i];
    b1 = i;
   }else if(minb1 < A[i] && A[i] <= minb2){
    minb2 = A[i];
    b2 = i;
   }
 
 } 

if(a1 != b1) {cout << (mina1 + minb1); }
else if((mina1 + minb2) > (mina2 + minb1)) {cout << (mina2+minb1);}
else {cout <<  (mina2+minb1);}
 cout << endl;

 
 
 

   

  
  return 0;
}