#include <iostream>
using namespace std;
#define max 1000005
int array[max];
int temp[max];

long merge(int left, int mid, int right) {
	int i, j, k;
  int inv_count = 0;
  
  //cout<<"merging "<<left<<" "<<right<<" ";
  //for(i=left;i<=right;i++) cout<<array[i]<<" ";
  //cout<<endl;
  i = left; /* i is index for left subarray*/
  j = mid+1;  /* i is index for right subarray*/
  k = left; /* i is index for resultant merged subarray*/
  while ((i <= mid) && (j <= right))
  {
    if (array[i] < array[j])
    {
      temp[k++] = array[i++];
    }
    else if(array[i] > array[j])
    {
      temp[k++] = array[j++];  
    }
    else {
    	int leftCount = 1;
    	int rightCount = 1;    	
    	temp[k++] = array[i++];
    	temp[k++] = array[j++];
    	while(i<=mid && array[i] == array[i-1]) {    		
    		leftCount++;
    		temp[k++] = array[i++];    		
    	}
    	while(j<=right && array[j] == array[j-1]) {
    		rightCount++;
    		temp[k++] = array[j++];
    	}
    	inv_count += (leftCount*rightCount);
    }
  }
  
  /* Copy the remaining elements of left subarray
   (if there are any) to temp*/
  while (i <= mid)
    temp[k++] = array[i++];
  
  /* Copy the remaining elements of right subarray
   (if there are any) to temp*/
  while (j <= right)
    temp[k++] = array[j++];
  
  /*Copy back the merged elements to original array*/
  for (i=left; i <= right; i++)
    array[i] = temp[i];
  
  //cout<<"after merging "<<left<<" "<<right<<" ";
  //for(i=left;i<=right;i++) cout<<array[i]<<" ";
  //cout<<" "<<inv_count;
  //cout<<endl;
  return inv_count;
}

long mergeSort(int start, int end) {
	if(start == end) return 1;
	if(start < end) {
		//cout<<"mergeSort "<<start<<" "<<end<<endl<<endl;
		int mid = (start + end) / 2;
		long ans = 0;
		ans += mergeSort(start, mid);
		ans += mergeSort(mid+1, end);
		ans += merge(start, mid, end);
		//cout<<"mergeSort "<<start<<" "<<end<<" "<<ans<<endl<<endl;
		return ans;
	}	
	return 0;
}

int main()
{
    int t, n;
    cin>>t;
    while(t--) {
    	cin>>n;
    	for(int i=0;i<n;i++) {
    		cin>>array[i];
    	}
    	cout<<mergeSort(0, n-1)<<endl;
    }
    return 0;
}
