#include<cstdio>
#include<iostream>
#include<cmath>
#include<queue>
#include<deque>
#include<vector>
#include<algorithm>
#define mod 1000000007
#define MAX 500005
using namespace std;
typedef long long int ll;
int factor[500005];
bool operation[500005];
ll A[MAX];
int p[MAX];

void preprocessing()
{
    ll i=2,j;
    factor[1]=1;
    while(i<MAX)
    {
        if(factor[i]==0)
        {
            factor[i]=i;
            for(j=i*i;j<MAX;j+=i)
                factor[j]=i;
        }
        ++i;
    }
    ll tmp;
    operation[1]=1;
    for(i=2;i<MAX;++i)
    {
        int prime=factor[i],maxcnt=1,cnt,prev;
        tmp=i;
        while(tmp>1)
        {
            prev=factor[tmp];
            cnt=0;
            while(tmp>1&&prev==factor[tmp])
            {
                tmp/=factor[tmp];
                ++cnt;
            }
            if(cnt==maxcnt)
                prime=min(prime,prev);
            else if(cnt>maxcnt)
            {
                prime=prev;
                maxcnt=cnt;
            }
        }
        if((prime%i)%2==0)
            operation[i]=0;
        else
            operation[i]=1;
    }
}

ll fastmul(ll a,int b)
{
    ll res=1,mul=a;
    while(b)
    {
        if(b&1)
            res=(res*mul)%mod;
        mul=(mul*mul)%mod;
        b>>=1;
    }
    return res;
}

int calculate_P_max(int n)
{
	int sq=sqrt(n),cnt,p,pmax=0,maxcnt=0;
	for(int i=2;i<=sq;++i)
	{
		cnt=0;
	//	p=n;
		while(p>1&&p%i==0)
		{
			p/=i;
			cnt++;
		}
		if(cnt>maxcnt)
		{
			pmax=i;
			maxcnt=cnt;
		}
	}
	return pmax;
}

int main()
{
   // preprocessing();
    int n,L;
    cin>>n>>L;
    for(int i=0;i<n;++i)
        cin>>A[i];
    sort(A,A+n);
    int st=0;
    p[n-1]=1;
    for(int i=2;i<=L;++i)
    {
        if((calculate_P_max(i)%i)%2)
        {
        	++p[n-1];
        }
        else
        {
        	if(p[st]>0)
        	--p[st];
        	else
        	A[st]/=2;
        	if(A[st]==0)
        	++st;
        }
        if(st>=n)
        break;
    }
    cout<<(n-st)<<endl;
    for(int i=st;i<n;++i)
    cout<<((A[i]*fastmul(2,p[i]))%mod+mod)%mod<<" ";
    cout<<endl;
    return 0;
}
