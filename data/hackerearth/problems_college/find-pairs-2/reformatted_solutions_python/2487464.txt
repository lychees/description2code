from collections import Counter
import math


def nCr(n, r):
    return math.factorial(n) / math.factorial(r) / math.factorial(n-r)


for i in xrange(int(raw_input())):
    n = int(raw_input())
    a = map(int, raw_input().split())
    a1 = sorted(a)
    ans = n
    z = Counter(a1).most_common(n)
    for j in xrange(len(z)):
        if z[j][1] > 1:
            ans += (nCr(z[j][1], 2))
    print ans
