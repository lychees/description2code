#include <iostream>
#define ll long long
#define si 100005
using namespace std;
ll t[si*3][20]={0},dc[si];
ll x[si];

ll ct(ll ss,ll se,ll in)
{ ll m= ss + (se -ss)/2,i;
   if(ss==se)
    return t[in][dc[ss]]=1;

     ct(ss,m,in*2);
     ct(m+1,se,in*2+1);
     for(i=0;i<=19;i++)
        t[in][i]=t[in*2][i]+t[in*2+1][i];
}

ll sq(ll qs,ll qe,ll ss,ll se,ll in,ll c)
{
    if (qs <= ss && qe >= se)
        return t[in][c];

        if (se < qs || ss > qe)
        return 0;

        ll m= ss + (se -ss)/2;


        return sq(qs,qe,ss,m,in*2,c)+sq(qs,qe,m+1,se,in*2+1,c);
}

ll updta (ll q,ll ss,ll se,ll in,ll y,ll i)
{
    if (ss==q&&se==q)
        {
            t[in][i]+=y;
            return 0;
        }

        if (se < q || ss > q)
        return 0;

        ll m= ss + (se -ss)/2;


        updta(q,ss,m,in*2,y,i);
        updta(q,m+1,se,in*2+1,y,i);
        t[in][i]=t[in*2][i]+t[in*2+1][i];
}
ll c (ll n)
{
    bool d[10]={0};
    ll ans=0,i;
    while(n>0)
    {
        d[n%10]=true;
        n/=10;
    }
    for(i=0;i<=9;i++)
        if(d[i]==true)
        ans++;
    return ans;
}


int main()
{
   //ios_base::sync_with_stdio(0);
   //cin.tie(0);
   ll n,i,j,q,qi,l,r,u,v,cc,temp;
   cin>>n;
   for(i=1;i<=n;i++)
    {cin>>x[i];
    dc[i]=c(x[i]);
    }

ct(1,n,1);

cin>>q;
for(i=1;i<=q;i++)
{
    cin>>qi;
    if(qi==2)
    {
        cin>>l>>r>>cc;
       cout<< sq(l,r,1,n,1,cc)<<endl;

    }

   else if(qi==1)
    {
        cin>>u>>v;
        temp=c(v);
        updta(u,1,n,1,1,temp);
        updta(u,1,n,1,-1,dc[u]);
        dc[u]=temp;
        x[u]=v;
    }

    else
    {
        cin>>u>>v;
        temp=c(x[u]+v);
        updta(u,1,n,1,1,temp);
        updta(u,1,n,1,-1,dc[u]);
        dc[u]=temp;
        x[u]+=v;
    }
}


}

