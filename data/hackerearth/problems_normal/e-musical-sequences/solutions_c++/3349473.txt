/*
 *ID:   Cowboy
 *TASK:
 *Judge:
 */
#include <bits/stdc++.h>
#define INF 0x7fffffff
#define INFLL 1e17
#define PI 2*acos(0.0)
using namespace std;

#define FS first
#define SC second
#define PB(t) push_back(t)
#define ALL(t) t.begin(),t.end()
#define MP(x, y) make_pair((x), (y))
#define Fill(a,c) memset(&a, c, sizeof(a))

typedef pair<int, int> II;
typedef vector<int> VI;
typedef vector<II> VII;

int main( ){
#ifndef ONLINE_JUDGE
   //freopen("input.txt", "rt", stdin);
   //freopen("output.txt", "wt", stdout);
#endif
    long long cas, n, m, z, aux;

    for( cin>>cas; cas; --cas){
        cin>>n>>m>>z;
        vector<long long>seq, s1;

        seq.PB( 0 );
        for( int i=0; i<n; i++){
            cin>>aux;
            s1.PB(aux);
            seq.PB( (aux-seq[i]+m)%m );
        }
        int nx;

        for( int i=n; i<2*(n+1); i++){
            nx = seq[i];
            if( n&1 ){
                nx = (nx+seq[i-n])%m;
                s1.PB(nx);
            } else {
                nx = (nx-seq[i-n]+m)%m;
                s1.PB(nx);
            }
            seq.PB( (nx-seq[i]+m)%m );
            //cout<<nx<<"\n";
        }
        z %= 2*(n+1);
        cout<<s1[ z ]<<"\n";
    }
return 0;
}
