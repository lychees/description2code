#include<bits/stdc++.h>

using namespace std;

int main()
{
int t,i,j,k;
long long n,x1,x2,ans,a[100004];
char s[1000000];
cin>>t;
stack<pair<char,long long> >st,tst;
while(t--)
{
cin>>s;


i=j=0;
while(s[i])
{
if(s[i]=='X')
{
cin>>a[j++];

st.push(make_pair('X',1));
}else
st.push(make_pair(s[i],0));
i++;
}



while(st.size() > 1)
{

while(st.top().first=='X')
{
tst.push(st.top());
st.pop();
}

if(tst.size()>=2)
{
x1 = tst.top().second;
tst.pop();

x2 = tst.top().second;
tst.pop();

if(st.top().first == 'A')
{
st.pop();
st.push(make_pair('X',x1+x2));
}else
{
st.pop();
st.push(make_pair('X',(x1>x2?x1:x2)));
}
}
}

sort(a,a+j,greater<int>());
k = st.top().second;
st.pop();
ans =0;
for(i=0;i<k;i++)
ans+=a[i];

cout<<ans<<'\n';
}
return 0;
}
