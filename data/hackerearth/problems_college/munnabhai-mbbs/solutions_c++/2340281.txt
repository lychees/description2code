#include<cstdio>
#include<iostream>
#include<algorithm>
#include<cmath>
#include<cstring>
#include<vector>
#include<queue>
using namespace std;
int cs, n, m, s, x, y, i;
int D[1001];
vector<int> V[1001];
queue<int> Q;
int main()
{
  scanf("%d", &cs);
  while (cs--)
  {
    scanf("%d%d", &n, &m);
    memset(D, 0, sizeof D);
    for (i = 0; i < n; i++)
      V[i].clear();
    while (m--)
    {
      scanf("%d%d", &x, &y);
      x--;
      y--;
      V[x].push_back(y);
      D[y]++;
    }
    for (i = 0; i < n; i++)
      if (!D[i])
        Q.push(i);
    s = 0;
    while (!Q.empty())
    {
      x = Q.front();
      s++;
      Q.pop();
      for (i = 0; i < V[x].size(); i++)
        if (!(--D[V[x][i]]))
          Q.push(V[x][i]);
    }
    printf("%d\n", s);
  }
  return 0;
}
