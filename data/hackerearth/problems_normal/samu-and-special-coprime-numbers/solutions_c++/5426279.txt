#include <cstdio>
#include <cmath>
#include <iostream>
#include <set>
#include <algorithm>
#include <vector>
#include <map>
#include <cassert>
#include <string>
#include <cstring>
#include <queue>
#include <climits>

using namespace std;

#define ll long long
#define pii pair<int, int>
#define vi vector<int>
#define mp make_pair
#define pb push_back
#define fs first
#define sc second

ll number[20];
ll dp[20][170][1500];


ll gcd(ll a, ll b) {
	if(b>a) {
		swap(a,b);
	}
	if(!b) {
		return a;
	} 
	return gcd(b, a%b);
}

ll fReal(ll pos, ll sum, ll sqrSum, bool check) {

	if(pos==-1) {
		return gcd(sum, sqrSum)==1;
	}
	ll &ret = dp[pos][sum][sqrSum]; 
	if(!check && ret!=-1) {
		return ret;
	}
	
	ll ans =0;
	ll endDigit = (check ? number[pos] : 9);
	for(ll i =0; i<=endDigit ; i++) {
		ans+= fReal(pos-1, sum + i, sqrSum + i*i, check && endDigit == i);
	}
	if(!check) {
		ret = ans;
	}
	return ans;
}

ll f(ll n) {

	if(!n) {
		return 0;
	}

	ll temp = n;
	ll i =0 ;

	while(temp){ 
		number[i++] = temp%10;
		temp/=10;
 	}

 	return fReal(i-1, 0, 0, 1);
}



int main() {

	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	memset(dp, -1, sizeof(dp));
	int t;
	cin>>t;
	while(t--) {

		ll l, r;
		cin>>l>>r;

		cout<<f(r) - f(l-1)<<endl;  
	}

	return 0;
}