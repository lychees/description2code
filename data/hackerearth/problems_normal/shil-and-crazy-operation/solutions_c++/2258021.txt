#include<iostream>
using namespace std;
#include<list>
#include<vector>
#include<bits/stdc++.h>
typedef long long int lli;
 list<lli> li[1000000];
  lli a[1000000],p[1000000];
   int visited[1000000];
   int hasher[100010];
     vector<lli> v[1000000];
     lli ans[1000000];
    void dfs(int start,int count)
     {
     	stack<lli> s;
     	 s.push(start);
     	 visited[start]=1;
     	 v[count].push_back(start);
     	 while(!s.empty())
     	  {
     	  	lli start=s.top();
     	  	s.pop();
     	  	list<lli > :: iterator it;
     	  	 for(it=li[start].begin();it!=li[start].end();it++)
     	  	  {
     	  	  	if(!visited[*it])
     	  	  	 {
     	  	  	 	 visited[*it]=1;
     	  	  	 	 v[count].push_back(*it);
     	  	  	 	 s.push(*it);
     	  	  	 	// cout<<"dfs puss " <<*it<<endl;
     	  	  	 }
     	  	  }
     	  }
     }
int main()
 {
 	 lli n;
 	  cin>>n;
 	long long int  t;
 	       cin>>t;
 	        for(int i=1;i<=n;i++)
            {

                  cin>>a[i];

            }

 	     for(int i=1;i<=n;i++)
 	      {
 	      	   cin>>p[i];
 	      	   li[p[i]].push_back(i);
 	      	    // cout<<"pairing "<<a[i]<<" "<<p[i]<<endl;

 	      }
 	      int ss=0;
 	      for(int i=1;i<=n;i++)
 	       {
 	       	  if(!visited[i])
 	       	   {
 	       	        // cout<<s"start "<<i<<endl;
 	       	   	 dfs(i,ss);
 	       	   	 ss++;
 	       	   }

 	       }
  //cout<<ss<<endl;
 	       for(int i=0;i<ss;i++)
 	        {
 	        	vector<lli> ::iterator it;
 	        	 lli len=v[i].size();
 	        	 for(int j=0;j<len;j++)
 	        	  {
 	        	  	   lli pos=t%len;
 	        	  	   ans[v[i][(pos+j)%len]]=a[v[i][j]];
 	        	 // 	  cout<< ans[hasher[v[i][(pos+j)%len]]]<<" ="<<v[i][j]<<endl;
 	        	// cout<<v[i][j]<<" ";
 	        	  }
 	        //	  cout<<endl;
 	        }
 	         for(int i=1;i<=n;i++)
             {


 	           cout<<ans[i]<<" ";
 	           //if(ans[i]==80)
               // cout<<"hhhahahishdioaisl"<<endl;
 	           }
 	    return 0;
 }
