#include<bits/stdc++.h>
#define ma 100005
using namespace std;
int p[ma],ra[ma];
int ans[ma];
struct Edge
{
 int src;
 int dest;

}edge[ma];
void create_set(int x)
{
 p[x]=x;
 ra[x]=0;
}
int find_set(int x)
{
 if(p[x]!=x)
 {
  p[x]=find_set(p[x]);
 }
 return p[x];
}
void merge_set(int x,int y)
{
 int px=find_set(x);
 int py=find_set(y);
 if(ra[px]>ra[py])
  p[py]=px;
 else if(ra[px]<ra[py])
  p[px]=py;
 else
 {
  p[px]=py;
  ra[py]++;
 }
}
int main()
{
  int n,m;
  cin>>n>>m;
  for(int i=1;i<=m;i++)
 {
  scanf("%d %d",&edge[i].src,&edge[i].dest);
 }
 for(int i=1;i<=n;i++)
  create_set(i);
 int s,d,k=0;
 for(int i=m;i>=1;i--)
 {
   s=edge[i].src;
   d=edge[i].dest;
   if(find_set(s)!=find_set(d))
    merge_set(s,d);
   else
   {
     ans[k++]=i;

   }

 }
 sort(ans,ans+k);
 cout<<k<<endl;
 for(int i=0;i<k;i++)
  cout<<ans[i]<<endl;
 return 0;
}



