#include<stdio.h>
#include<iostream>
#include<vector>
#include<string.h>
#include<math.h>
#include <iomanip>
#include <map>
#include<queue>
#define For(i,j,n) for(i=j;i<n;i++)
using namespace std;
int visited2[10001]={0};
//vector<int> graph[10001];
void dfsr(int i,vector<int> graph[])     //recursive approach
{
    visited2[i]=1;
    //printf("i %d ",i);
    for(int j=0;j<graph[i].size();j++)
    {
        if(!visited2[graph[i][j]])
            dfsr(graph[i][j],graph);
    }
}
void bfs(int s,vector<int> graph[])//s=>start,v is no of vertices
{
    int j;
    queue<int> q;
    q.push(s);
    //printf("BFS Traversal of the Graph is ");
    visited2[s]=1;
    while(!q.empty())
    {
       s=q.front();
       q.pop();
       for(j=0;j<graph[s].size();j++)
       {
           if(!visited2[graph[s][j]])
           {
               q.push(graph[s][j]);
               visited2[graph[s][j]]=1;
           }
       }
     }
}
int main()
{
     int i,j,k,no;
     scanf("%d",&no);
     while(no--)
     {
         int n,f,s,a,b,count1=0,c;
         vector<int> graph[10001];
         scanf("%d %d %d",&n,&f,&s);
         //graph[10001].clear();
         For(i,0,f)
         {
             scanf("%d %d",&a,&b);
             graph[a].push_back(b);
         }
         For(i,1,n+1)
         visited2[i]=0;
         For(i,0,s)
         {
             scanf("%d",&c);
             bfs(c,graph);
         }
         For(i,1,n+1)
         {
             if(visited2[i]==1)
             count1++;
         }
            printf("%d\n",count1);
     }
  return 0;
}
