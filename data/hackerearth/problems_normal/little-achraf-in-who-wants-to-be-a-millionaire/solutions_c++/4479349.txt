#include <bits/stdc++.h>
#define moduo 1000000007

using namespace std;
int static const N = 300;

long long a[N];
int n,q,vred[N],kontradikcija;

int main() {
	scanf("%i%i",&n,&q);
	for(int i=1;i<=n;i++)
	{
		vred[i] = -1;
		a[i] = 1;
	}
	int nn;
	for(int i=n+1;i<N;i++)
	{
		for(int j=1;j<=n;j++)
			a[i] += a[i-j];
		if(a[i]>pow(10,16))
		{
			nn = i+1;
			break;
		}
	}
	for(int i=nn;i<N;i++)
		a[i] = pow(10,17);
	for(int i=0;i<q;i++)
	{
		long long x,br;
		char c;
		cin>>x>>br>>c;
		int v = (nn/n)*n+br%n;
		if(v > nn)
			v -= n;
		if(a[v] >= x)
			br = v;
		else	br = v+n;
		while(br > n)
		{
			for(int i=br-n;i<br;i++)
			{
				if(x > a[i])
					x -= a[i];
				else
				{
					br = i;
					break;
				}
			}
		}
		if(vred[br] == -1)
			vred[br] = c-'0';
		else
		{
			if(vred[br] != c-'0')
				kontradikcija = 1;
		}
	}
	if(kontradikcija)
		printf("0\n");
	else
	{
		long long res = 1;
		for(int i=1;i<=n;i++)
			if(vred[i] == -1)
				res = (res*62)%moduo;
		printf("%lld\n",res);
	}
	
	return 0;
}
