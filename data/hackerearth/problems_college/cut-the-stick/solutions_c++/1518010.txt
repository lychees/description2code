#include <iostream>
#include<cstdio>
#include<utility>
#include<cstring>
#include<algorithm>
#include<cmath>
#include<vector>
#include<climits>
#include<queue>
using namespace std;
#define pb push_back
#define sd(x) scanf("%d",&x)
#define sld(x) scanf("%lld",&x)
#define ll long long
#define mod 1000000007
int cnt[5*10000+1];
int main()
{
 int t;
 sd(t);
 while(t--)
 {
     memset(cnt,0,sizeof(cnt));
  int l,n,x;
  sd(l);
  sd(n);
  sd(x);
  int a[n];
  for(int i=0;i<n;i++)
    {sd(a[i]);
    cnt[a[i]]++;
    }
   for(int i=l-2;i>=0;i--)
        cnt[i]+=cnt[i+1];
        //cout<<cnt[1]<<" "<<cnt[3]<<endl;
   sort(a,a+n);
   ll sum=0;
   for(int i=0;i<n;i++)
   {
     if(a[i]>x)
        sum+=cnt[a[i]+1];
     else
     {
      if((l-x)>(a[i]+x))
            sum+=cnt[a[i]+1];
            else if((a[i]+x+1)<=l)
            sum+=(cnt[a[i]+1]-(cnt[l-x]-cnt[a[i]+x+1]));
     }
   }
   cout<<sum<<endl;
 }
 return 0;
}
