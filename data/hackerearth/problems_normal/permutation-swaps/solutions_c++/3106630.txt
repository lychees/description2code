#include <vector>
#include <list>
#include <map>
#include <set>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <bits/stdc++.h>
#include <cstdlib>
#include <ctime>
#include <cstring>

using namespace std;
#define LL long long
#define pb push_back
#define pLL pair<LL,LL>
#define ff first
#define ss second
#define pii pair<int,int>
#define rep(i,a,b) for(LL i=a;i<=b;++i)
#define ld long double
#define tr(n) cin>>n
#define tr2(n,m) cin>>n>>m
#define tr3(a,b,c) cin>>a>>b>>c
#define mp make_pair
#define vLL vector<LL>
#define vpLL vector<pLL>
#define vii vector<pii>
#define vii vector<pii>
#define vld vector<ld>
#define pld pair<ld,ld>
#define vpld vector<pld>
#define Si set<int>
#define SLL set<LL>
#define SpLL set<pLL>
#define Sii set<pii>
#define fill(a,v) memset(a,v,sizeof(a))
#define oo 1000000007
#define MOD 1000000007







LL t , n , m ;


LL cc[100005] ;


vLL gra[100005] ;


void clear()
{
    rep( i , 1, 100000)
    {
        gra[i].clear();
        cc[i] = 0;
    }
}


void dfs(LL node , LL c)
{
    cc[node] = c;

    for(LL v : gra[node])
    {
        if(cc[v]==0)
        {
            dfs(v , c);
        }
    }
}

LL P[100005] ;
LL pos[100005] ;

int main()
{
    cin >> t;
    while(t--)
    {
        clear();
    cin >> n ;cin >> m;

    rep( i ,1, n)
    {
        cin >> P[i];
    }

    rep( i  ,1 ,n)
    {
        LL x;
        cin >> x;
        pos[x] = i;
    }

    
    LL a , b;

    rep (i , 1, m)
    {
        cin >>a >> b;
        gra[a].pb(b);
        gra[b].pb(a);
    }

    rep( i  , 1, n)
    {
        if(cc[i] == 0)
        {
            dfs( i , i);
        }
    }

    int fl = 0;

    rep( i , 1, n)
    {
        if(cc[i] != cc[pos[P[i]]])
        {
            fl = 1;
        }
    }

    if(fl)
    {
        cout <<"NO\n";
    }
    else
        cout <<"YES\n";}
    return 0;
}