#include <bits/stdc++.h>
#define mp make_pair
#define pb push_back
using namespace std;
vector< vector<int> >vec;
map< pair<int,int>,int > ms;
int main()
{
    long long int n,m,k;
    cin>>n>>m>>k;
    long long int i,a,b;
    unsigned int j;
    vec.resize(n+2);
    vec.clear();
    for(i=0;i<m;i++) {
    	cin>>a>>b;
    	vec[b].push_back(a);
    	vec[a].push_back(b);
    	ms.insert(mp(mp(a,b),i+1));
    }
    long long int tym[m+1],flg=0;
    memset(tym,10000,sizeof(tym));
    for(i=0;i<k;i++) {
    	cin>>a>>b;
    	tym[b]=a;
    }
    long long int visi[100008];
    memset(visi,0,sizeof(visi));
    queue< pair<int,int>> q;
    q.push(mp(1,0));
    visi[1]=1;
    while(!q.empty()) {
    	int tmp=(q.front()).first;
    	int tm=q.front().second;
    	q.pop();
    	//cout<<tmp<<" ";
    	if(tmp==n) {
    		flg=1;
    		cout<<tm<<endl;
    		break;
    	}
    	//vector< vector<int> >::iterator it;
    	for(j=0;j<vec[tmp].size();j++) {
    		int temp=vec[tmp][j];
    		//cout<<temp<<"*";
    		map< pair<int,int>,int>::iterator it;
    		it = ms.find(mp(tmp,temp));
    		if(it==ms.end()) {
    			it=ms.find(mp(temp,tmp));	
    		}
    		//cout<<tym[(it->second)]<<"^";
    		if(visi[temp]==0 && tym[it->second]>tm ) {
    			q.push(mp(temp,tm+1));
    			visi[temp]=1;
    		}
    	}
    }
    if(flg==0) cout<<"-1"<<endl;
    return 0;
}
