#!/usr/bin/python
# -*- coding:utf-8 -*-
def KMP(desired, currently):
    i = 0
    flag = True
    pos = currently.index(desired[0])
    while (i < len(desired)):
        for j in range(pos, pos+len(currently)):
            if desired[i] == currently[j % len(currently)]:
                i = i+1
            else:
                flag = False
                break
        if not flag:
            break
    return flag


n = int(raw_input())
currently = map(int, raw_input().split(' '))
desired = map(int, raw_input().split(' '))
currently.remove(0)
desired.remove(0)
result = KMP(desired, currently)
if result:
    print "YES"
else:
    print"NO"
