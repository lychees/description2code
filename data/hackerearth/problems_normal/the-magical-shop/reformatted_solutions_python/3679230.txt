a, b = [int(x) for x in raw_input().split()]
c = raw_input()
rev = c
potion = a
monk = 0
for x in c:
    if x == '1':
        monk = (monk+potion) % b
    potion = ((potion % b)**2) % b
# print(potion,monk)
print int(monk)
