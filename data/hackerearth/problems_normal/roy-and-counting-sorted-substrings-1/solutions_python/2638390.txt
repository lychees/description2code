t=int(raw_input())
while t:
	t-=1
	n=int(raw_input())
	s=raw_input()
	sort=1
	total=0
	for i in range(1,n):
		if(s[i]>=s[i-1]):
			sort+=1
		else:
			total+= (sort*(sort+1)/2)
			sort=1
	print total+(sort*(sort+1)/2)