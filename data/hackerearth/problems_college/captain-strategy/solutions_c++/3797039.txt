#include <bits/stdc++.h>
using namespace std;
int  p[100010],c=0,n,v[100010]={0},cn=0;
vector<int>g[100010];
void df(int u)
{
	v[u] =cn;
	for(int i=0;i<g[u].size();i++)
	{
		if(v[g[u][i]] != cn){
		v[g[u][i]] = cn;
		c = c + p[g[u][i]];
		df(g[u][i]);
		}
	}
}
int main()
{
	ios::sync_with_stdio(0);
    int m,u,v,s,x;
    char k;
    cin>>n>>m;
    for(int i=1;i<=n;i++)
    	cin>>p[i];
    for(int i=0;i<n-1;i++)
    {
    	cin>>u>>v;
    	g[u].push_back(v);
    }
    for(int i=0;i<m;i++)
    {
    	cn++;
       	cin>>k;
    	if(k == 'U')
    	{
    		cin>>s>>x;
    		p[s] = x;
    	}
    	else if(k == 'Q')
    	{
    		c=0;
    		cin>>s;
    		df(s);
    		c += p[s];
    		cout<<c<<"\n";
    	}
    	
    }
    return 0;
}
