#include <iostream>
using namespace std;
long long  a[100000]={0};	
long long  b[100000]={0};
const long long int m=1000000007;
long long power(long long int n){
	long long p;
	if(n==0)
	return 1;
	if(n==1)
	return 2;
	if(n%2==0)
	 {
	 	p=power(n/2);
	 	p=p%m;
	 	p=(p%m*p%m)%m;
	 	return p%m;
	 }
	 else
	 {
	 	p=power(n/2);
	 	p=p%m;
	 	p=((p*p)%m*2)%m;
	 	return p%m;
	 }
}
int main()
{
    long long f,sum,k,p;
    string a;
    cin>>a;
    sum=0;
    long nst,ns,nu,ls;
    nst=ns=nu=0;
    ls=0;
  
    for(int i=0;i<a.length();i++){
    
    	if(i==0&&a[i]==';'){
    	ns=1;
    	nst=1;
    	}
        else if(i==0&&a[i]=='_')
    	nu=1;
    	else if(a[i]==';'&&a[i-1]==';'){
    	  sum=(sum%m+ls%m)%m;
    	  ns++;
    	  nst++;
    	}
    	else if(a[i]==';'&&a[i-1]=='_')
    	{
    		
    		ls=(((ls%m)*((power(nu))%m))%m+((nst%m)*((power(nu)-1)%m))%m)%m;
    		sum=(sum%m+ls%m)%m;
    		ns=1;
    		nst++;
    	}
    		else if(a[i]=='_'&&a[i-1]==';')
         	{
    	   nu=1;
    	  }
    	  	else if(a[i]=='_'&&a[i-1]=='_')
         	{
    	   nu++;
    	  }
    	  //	cout<<ns<<" "<<nst<<" "<<nu<<" "<<ls<<" "<<sum<<endl;
    }
    
    cout<<sum<<endl;
    
    return 0;
}