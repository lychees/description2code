#include<stdio.h>
#define ll long long
ll pow(ll a,ll b,ll m)
{
    ll ans=1;
    while(b)
    {
        if(b%2==1)
        {
            ans=ans*a;
            ans=ans%m;
        }
        a=a*a;
        a=a%m;
        b=b/2;
    }
    return ans;
}
int main()
{
	int t;
	ll n,p,ans,i;
	scanf("%d",&t);
	while(t--)
    {
		scanf("%lld%lld",&n,&p);
		if(3*n>p)
        {
            printf("0\n");
            continue;
        }
		ans=pow(6,(n*(p-2))%(p-1),p)%p;
		for(i=3*n+1;i<p;i++)
            ans=((ans%p)*(pow(i,p-2,p)%p))%p;
        ans=(ans*(p-1))%p;
        printf("%lld\n",ans);
	}
	return 0 ;
}
