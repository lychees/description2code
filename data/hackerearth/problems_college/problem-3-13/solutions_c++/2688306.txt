#include <bits/stdc++.h>
using namespace std;
 
int main()
{
	ios_base::sync_with_stdio(false);
	 int n,m,i,j,a[1000][1000],q=0,k=0,s=0,l;
	 cin>>n>>m;
	 for(i=0;i<n;i++)
	 {
	 	for(j=0;j<m;j++)
	 	{
	 		cin>>a[i][j];
	 	}
	 }
	  for(j=0;j<m;j++)
	 {
	 	for(i=0;i<n;i++)
	 	{
	 	  if(a[i+1][j]==a[i][j])
	 	  {
	 	  	k++;
	 	  }
	 	  else if(a[i][j]==a[i][j+1])
	 	  {
	 	  	k++;
	 	  	for(l=j+1;l<m;l++)
	 	  	{
	 	  		if(a[i][l]==a[i][j])
	 	  		k++;
	 	  		else
	 	  		{
	 	  			s=max(s,k);
	 	  		break;	
	 	  		}
	 	  		
	 	  	}
	 	  	s=max(s,k);
	 	  	k=0;
	 	  	
	 	  }
	 	  else
	 	  {
	 	  	s=max(s,k);
	 	  	k=0;
	 	  }
	 	}
	 }
	 if(s==0)
	 cout<<1<<endl;
	 else
	 cout<<s<<endl;
	 
    
    return 0;
}
