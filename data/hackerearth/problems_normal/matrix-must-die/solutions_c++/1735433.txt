#include <iostream>
#include <stdio.h>
#include <string.h>
#include <algorithm>
#include <vector>
#include <map>
using namespace std;
#define vi vector<int>
#define pb push_back
#define inf 1000000007
#define mod 1000000007
#define x first
#define y second
#define DBG(x) cerr<<(#x)<<"="<<x<<"\n";
#define ll long long
#define N 55

typedef ll arr[9][9];
void mul(arr &a,arr b){
	arr c;
	memset(c,0,sizeof(c));
	for(int i=0;i<9;i++)
		for(int j=0;j<9;j++)
			for(int k=0;k<9;k++){
				c[i][j]=(c[i][j]+a[i][k]*b[k][j]);
				if(c[i][j]>=mod)c[i][j]%=mod;
			}
	for(int i=0;i<9;i++)
		for(int j=0;j<9;j++)a[i][j]=c[i][j];
}
void mul1(arr a,ll b[]){
	ll c[9];
	for(int i=0;i<9;i++)c[i]=0;
	for(int i=0;i<9;i++)
		for(int j=0;j<9;j++){
			c[i]=(c[i]+a[i][j]*b[j]);
			if(c[i]>=mod)c[i]%=mod;
		}
	for(int i=0;i<9;i++)b[i]=c[i];
}
arr p[40];
int main()
{
	int T,i,j,k,m;
	clock_t start=clock();
	for(i=0;i<3;i++)
		for(j=0;j<3;j++){
			for(int x=0;x<3;x++)
				for(int y=0;y<3;y++)
			p[0][i*3+j][x*3+y]=abs(i-x)+abs(j-y)+abs(i+j-x-y);
		}
		/*
	for(i=0;i<9;i++)
		for(j=0;j<9;j++){
			printf("%lld%c",c[i][j],j==8?'\n':' ');
		}*/
	for(i=1;i<40;i++){
		for(j=0;j<9;j++)
			for(k=0;k<9;k++)p[i][j][k]=p[i-1][j][k];
		mul(p[i],p[i-1]);
	}
	scanf("%d",&T);
	while(T--){
		ll n;scanf("%lld",&n);
		ll b[9];
		for(i=0;i<3;i++)
			for(j=0;j<3;j++){
				scanf("%lld",&b[i*3+j]);
			}
		for(i=39;i>=0;i--)if(n>>i&1){
			mul1(p[i],b);
		}
		int cnt=0;
		for(i=0;i<3;i++)
			for(j=0;j<3;j++){
				//cnt+=b[i*3+j]==0;
				if(j<2)printf("%lld ",b[i*3+j]);
				else printf("%lld\n",b[i*3+j]);
			}
	}
	//cout<<(clock()-start)/CLOCKS_PER_SEC*1000<<"ms\n";
	return 0;
}