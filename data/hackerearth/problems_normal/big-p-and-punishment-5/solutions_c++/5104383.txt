#include <bits/stdc++.h>
using namespace std;
int col[100100]={0};

int mini(vector <int> v[], int u)
{
	col[u]=1;
	queue <int> q;
	q.push(u);
    int ans=1;
    
    while(!q.empty())
    {
        u=q.front();
        q.pop();
    for(int i=0;i<v[u].size();i++)
    {
        int y=v[u][i];
        if(col[y]==0)
        {
        	ans++;
            //cout<<y;
            col[y]=1;
            q.push(y);
        }

    }

    }

	
	return ans;
}

int main()
{
	int t;
	cin>>t;
	for(int z=0;z<t;z++)
	{
	
	int n,s,m,ans,su=0;
	cin>>n>>m>>s;
	vector <int> v[n];
	
	for(int i=0;i<n;i++)
	{
		col[i]=0;
	}
		
	for(int i=0;i<m;i++)
	{
		int x,y;
		cin>>x>>y;
		//v[y-1].push_back(x-1);
		v[x-1].push_back(y-1);
		
	}
	for(int i=0;i<s;i++)
	{
		int q;
		cin>>q;
		if(col[q-1]==0)
		{
		ans=mini(v,q-1);
		su+=ans;
		}
		
	}
    cout << su << endl;
	}
    return 0;
}
