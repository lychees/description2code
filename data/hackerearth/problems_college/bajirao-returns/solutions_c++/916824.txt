//
//  main.cpp
//  Bajirao Returns
//
//  Created by Pritam Khan on 31/10/14.
//  Copyright (c) 2014 Pritam Khan. All rights reserved.
//

#include <iostream>
using namespace std;
long long int extract_max(int a[][23],long long int data[][101],int val,int level,int n)
{
    long long int bb=-1;
    for(int k=0;k<=22;k++)
        if(a[val][k]!=0 && a[val][k]<=n)
            if (data[level+1][a[val][k]]>bb)
                bb=data[level+1][a[val][k]];
    return bb;
}
int main() {
    int a[101][23]={{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,64,80,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,32,48,56,64,96,0,0,0,0,0,0},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,64,72,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,64,80,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,64,80,88,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,32,48,52,64,96,0,0,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,32,48,56,64,96,0,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,32,48,56,60,64,96,0,0,0},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,64,68,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,64,72,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,64,72,76,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,64,80,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,64,80,84,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,64,80,88,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,64,80,88,92,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,25,32,48,50,64,96,100,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,32,48,52,64,96,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,27,32,48,52,54,64,96,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,32,48,56,64,96,0,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,29,32,48,56,58,64,96,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,32,48,56,60,64,96,0,0,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,31,32,48,56,60,62,64,96,0},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,33,64,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,64,68,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,35,64,68,70,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,64,72,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,37,64,72,74,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,64,72,76,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,39,64,72,76,78,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,64,80,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,41,64,80,82,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,64,80,84,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,43,64,80,84,86,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,64,80,88,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,45,64,80,88,90,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,64,80,88,92,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,47,64,80,88,92,94,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,49,64,96,98,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,25,32,48,50,64,96,100,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,25,32,48,50,51,64,96,100,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,32,48,52,64,96,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,32,48,52,53,64,96,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,27,32,48,52,54,64,96,0,0,0,0,0},
        {1,2,3,4,6,8,12,13,16,24,26,27,32,48,52,54,55,64,96,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,32,48,56,64,96,0,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,32,48,56,57,64,96,0,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,29,32,48,56,58,64,96,0,0,0,0},
        {1,2,3,4,6,7,8,12,14,16,24,28,29,32,48,56,58,59,64,96,0,0,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,32,48,56,60,64,96,0,0,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,32,48,56,60,61,64,96,0,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,31,32,48,56,60,62,64,96,0},
        {1,2,3,4,6,7,8,12,14,15,16,24,28,30,31,32,48,56,60,62,63,64,96},
        {1,2,4,8,16,32,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,64,65,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,33,64,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,32,33,64,66,67,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,64,68,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,64,68,69,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,35,64,68,70,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,16,17,32,34,35,64,68,70,71,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,64,72,0,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,64,72,73,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,37,64,72,74,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,32,36,37,64,72,74,75,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,64,72,76,0,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,64,72,76,77,0,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,39,64,72,76,78,0,0,0,0,0,0,0},
        {1,2,4,8,9,16,18,19,32,36,38,39,64,72,76,78,79,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,64,80,0,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,64,80,81,0,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,41,64,80,82,0,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,32,40,41,64,80,82,83,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,64,80,84,0,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,64,80,84,85,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,43,64,80,84,86,0,0,0,0,0,0},
        {1,2,4,5,8,10,16,20,21,32,40,42,43,64,80,84,86,87,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,64,80,88,0,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,64,80,88,89,0,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,45,64,80,88,90,0,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,32,40,44,45,64,80,88,90,91,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,64,80,88,92,0,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,64,80,88,92,93,0,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,47,64,80,88,92,94,0,0},
        {1,2,4,5,8,10,11,16,20,22,23,32,40,44,46,47,64,80,88,92,94,95,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,0,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,64,96,97,0,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,49,64,96,98,0,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,32,48,49,64,96,98,99,0,0,0,0,0,0,0},
        {1,2,3,4,6,8,12,16,24,25,32,48,50,64,96,100,0,0,0,0,0,0,0}};
    int n;
    scanf("%d",&n);
    long long int data[101][101];
    for(int i=1;i<=n;i++)
        for (int j=1;j<=n; j++) {
            scanf("%lld",&data[i][j]);
        }
    for(int i=n-1;i>=1;i--)
    {
        for(int j=1;j<=n;j++)
            data[i][j]+=extract_max(a,data,j,i,n);
    }
    long long int  ans=-1;
    for(int i=1;i<=n;i++)
        if(ans<data[1][i])
            ans=data[1][i];
    cout<<ans<<endl;
    return 0;
}



