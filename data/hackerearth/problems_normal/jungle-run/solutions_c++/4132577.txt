#include<bits/stdc++.h>
using namespace std;
#define inf int(1e+9)

char mat[31][31];
bool visit[31][31];
int n;

void query();
int func(int ,int);
int main()
{
	query();
	return 0;
}
void query()
{
	cin >> n;
	int x,y;
	for(int i=0;i<n;i++)
	for(int j=0;j<n;j++)
	{
		cin>>mat[i][j];
		if(mat[i][j]=='S'){x=i;y=j;}
		visit[i][j]=false;
	}
	cout<<func(x,y);
}
int func(int i,int j)
{
	if(mat[i][j]=='E')return 0;
	visit[i][j]=true;
	int t=inf;
	if(i+1<n and !visit[i+1][j] and (mat[i+1][j]=='P'||mat[i+1][j]=='E') )t=min(t,1+func(i+1,j));
	if(i-1>=0 and !visit[i-1][j] and (mat[i-1][j]=='P'|| mat[i-1][j]=='E'))t=min(t,1+func(i-1,j));
	if(j+1<n and !visit[i][j+1] and (mat[i][j+1]=='P' ||mat[i][j+1]=='E'))t=min(t,1+func(i,j+1));
	if(j-1>=0 and !visit[i][j-1] and (mat[i][j-1]=='P' ||mat[i][j-1]=='E'))t=min(t,1+func(i,j-1));
	visit[i][j]=false;
	return t;
}