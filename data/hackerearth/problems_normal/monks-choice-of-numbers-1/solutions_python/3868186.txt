t = int(raw_input())
f = {}
for i in range(0,t):
    di = {}
    n,k = map(int,raw_input().split(' '))
    li = list(map(int,raw_input().split(' ')))
    for j in range(0,n):
        di[j] = bin(li[j])[2:].count('1')
    val = di.values()
    val.sort(reverse = True)
    val = val[0:k]
    f[i] = sum(val)
for i in range(0,t):
    print(f[i])