for _ in xrange(int(raw_input())):
	q=raw_input();	l,su,i=len(q),0,0;	B=['A','B','C','a','b','c'];
	while i<l:
		j=0;		
		while i<l and q[i] in B :
			j+=1;	i+=1;
		su+=(j*(j+1))/2
		i+=1
	print su