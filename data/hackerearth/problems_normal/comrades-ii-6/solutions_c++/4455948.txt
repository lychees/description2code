#include<iostream>
#include<vector>
//#define ss(t) { scanf("%d",&t); }
using namespace std;
vector<int> adj[100005];
int he[100005];
void fun(int i,int h)
{he[i]=h;//cout<<"in fun i= he="<<i<<he[i]<<endl;
 vector<int>::iterator it=adj[i].begin();
 for(;it!=adj[i].end();it++)
 fun(*it,h+1);
}
int main()
{int t,n,i,p,root;long long int count,sum;
	scanf("%d",&t);
	 while(t--)
	 {scanf("%d",&n);count=0;
	 for(i=1;i<=n;i++)adj[i].clear();
	  for(i=1;i<=n;i++)
	  {scanf("%d",&p);if(p==0)root=i;//cout<<"root is"<<root<<endl;}
	  else {//cout<<"p= i="<<p<<i<<endl;
	  adj[p].push_back(i);}
	  }
	  sum=(long long)n*(n-1)/2;
	  //for(i=1;i<=n;i++)
	 // cout<<"i= hei of i="<<i<<he[i];cout<<endl;
	 fun(root,0);
	 for(i=1;i<=n;i++)
	 count+=(long long)he[i];
	 //printf("%lld %lld\n",count,sum-count);//
	 cout<<count<<" "<<sum-count<<endl;
     }  
    // cout<<"fun end";
     return 0;
}