#include <bits/stdc++.h>
using namespace std;
int find(int disjoint[],int x)
{
	if(disjoint[x]==x)
		return x;
	disjoint[x]=find(disjoint,disjoint[x]);
	return disjoint[x];
}
void unio(int disjoint[],int x,int y)
{
	int val1=find(disjoint,x);
	int val2=find(disjoint,y);
	if(val1==val2)
	return;
	disjoint[val1]=val2;
}
int main()
{
    int n,m,disjoint[100005],x,y,z;
	scanf("%d %d",&n,&m);
	for(int i=1;i<=n;i++)
		disjoint[i]=i;
    while(n--)
    {
    	scanf("%d",&x);
    	switch(x)
    	{
    		case 1:
    			scanf("%d %d",&y,&z);
    			unio(disjoint,y,z);
    			break;
    		case 2:
    			scanf("%d",&y);
    			z=find(disjoint,y);
    			disjoint[y]=y;
    			disjoint[z]=y;
    			break;
    		case 3:
    			scanf("%d",&y);
    			printf("%d\n",find(disjoint,y));
    			break;
    	}
    }
    return 0;
}
