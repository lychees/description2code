/* CodeMasters */

#include<bits/stdc++.h>

using namespace std;

#define sci(x) scanf("%d",&x)
#define scl(x) scanf("%lld",&x)
#define pri(x) printf("%d",x)
#define pll(x) printf("%lld",x)
#define nl printf("\n")
#define MOD 1000000007

typedef long long ll;
int a[1005][1005]={0};
int  solve(int a[][1005], int des, int src)
{
        long long mn=1000000000000LL;
        int k=0;
        int m=src-1,flag=0;
        for(;m>=des;--m)
        {
                if(a[src][m]==0)
                        flag=1;
        }
        if(flag==0)
                return 0;
        if(a[src][des]==0)
                return 1;
        int j;
        int x=0;
        for(j=src-1;j>=des;j--)
        {
                x+=solve(a,1,j);
                if(x<mn)
                        mn=x;
        }
        return mn+1;
}
int  main()
{
        int n, m,i;
        sci(n); sci(m);
        int x,y;
        for(i=0;i<m;i++)
        {
                sci(x);sci(y);
                a[x][y]=a[y][x]=1;
        }

        int ans=solve(a,1,n);
        if(ans==0)
        {
                printf("HOHA HOHA\n");
                return 0;
        }
        pri(ans);nl;
        return 0;
}
