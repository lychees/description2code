#include <iostream>
using namespace std;

int main()
{
    int t;
    scanf("%d",&t);
    while(t--){
    	int n;
    	char a[1000006];
    	scanf("%d",&n);
    	scanf("%s",&a);
    	long long count=1;
    	long long ans=0;
    	for(int i=1;i<n;i++){
    		if((int)a[i]>=(int)a[i-1]){
    			count++;
    		}
    		else{
    			ans+=(count*(count+1))/2;
    			count=1;
    		}
    	}
    	ans+=(count*(count+1))/2;
    	printf("%lld\n",ans);
    	
    }
}
