#include <bits/stdc++.h>
using namespace std;
inline int read() //faster input for integer
{
 int n = 0;
 register char c = getchar_unlocked();//register is used due to its repeated use
 while (!('0' <= c && c <= '9')) 
 {
  c = getchar_unlocked();
 }
 while ('0' <= c && c <= '9') 
 {
  n = (n<<3) + (n<<1) +  c - '0';//equivalent to n = n*10 + c - 48;
  c = getchar_unlocked();
 }
 return n;
}

int main()
{
	int a[55][55][55],b[55][55][55],i,j,k,c,c1,c2,temp,t,n;
	scanf("%d",&t);
	while(t--)
	{
		memset(a,0,sizeof(a));
		memset(b,0,sizeof(b));
		scanf("%d",&n);
		for(i=0;i<n;i++)
			for(j=0;j<n;j++)
				for(k=0;k<n;k++)
				{
					b[i][j][k]=read();
				}
		/*i=j=k=0;
		while(i<n)
		{
			temp=0;
			for(c=0;c<=i;c++)
	     		for(c1=0;c1<=j;c1++)
			        for(c2=0;c2<=k;c2++)
			        {
			        	temp+=b[c][c1][c2];
			        }
			 b[i][j][k]=a[i][j][k]-temp;
			 if(k==n)
			 {
			 	j++;k=-1;
			 }
			 if(j==n)
			 {
			 	i++;j=0;k=-1;
			 }
			 k++;
		}*/
		for (int x = n-1; x >= 1; x--)
		for (int y = n-1; y >= 0; y--)
		for (int z = n-1; z >= 0; z--)
		b[x][y][z] -= b[x-1][y][z];
		 
		 
		 
		for (int x = n-1; x >= 0; x--)
		for (int y = n-1; y >= 1; y--)
		for (int z = n-1; z >= 0; z--)
		b[x][y][z] -= b[x][y-1][z];
		 
		 
		 
		for (int x = n-1; x >= 0; x--)
		for (int y = n-1; y >= 0; y--)
		for (int z = n-1; z >= 1; z--)
		b[x][y][z] -= b[x][y][z-1];
		
		for(i=0;i<n;i++)
			for(j=0;j<n;j++)
			{
				for(k=0;k<n;k++)
					printf("%d ",b[i][j][k]);
				printf("\n");
			}
	}
    return 0;
}
