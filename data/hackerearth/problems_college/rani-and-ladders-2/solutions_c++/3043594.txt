/*#include<bits/stdc++.h>
using namespace std;

int lad[160005];
int ans[160005];

int main()
{
    int t;
    cin>>t;
    while(t--)
    {
        int n, total, te1, te2;
        cin>>total>>n;

        for(int i=0; i<160005; i++)
        {
            ans[i] = -1;
            lad[i] = -1;
        }

        for(int i=0; i<n; i++)
        {
            scanf("%d %d", &te1, &te2);
            lad[te1] = te2;
        }

        ans[1] = 0;
        ans[0] = ans[2] = 1000000;
        
        for(int i=3; i<=13; i++)
        	if(lad[i] == -1)
        		ans[i] = 1;
        	else
        		ans[i] = 1000000;

        if(lad[1] != -1)
            ans[lad[1]] = 0;
            
        for(int i=3; i<=13; i++)
        	if(lad[i] != -1)
        		ans[lad[i]] = 1;

        int temp;
        for(int i=14; i<=total; i++)
        {
            temp = 1000000;
            for(int j=2; j<=12; j++)
                if(lad[i-j] == -1)
                    temp = min(temp, ans[i-j]);
            temp++;

            if(lad[i] != -1)
            {
            	ans[i] = 1000000;
            	ans[lad[i]] = temp;
            	continue;
            }
            
            
            if(ans[i] != -1)
            	ans[i] = min(temp, ans[i]);
            else
            	ans[i] = temp;
        }

        //for(int i=total-10; i<=total; i++)
        	//cout<<ans[i]<<endl;
		if(total <=1)
			cout<<"0"<<endl;
		else if(total>=2 && total<=13)
			cout<<"1"<<endl;
		else
        	cout<<ans[total]<<endl;
    }
    return 0;
}
*/
#include <iostream>

#include <climits>
#include <cstring>
using namespace std;
 
int dp[160010];
int lad[500];
int bottom[160010];
int upper[160010];
int main()
{
	int t,n,l,b,u;
	cin>>t;
	while(t--){
	cin>>n>>l;
	for(int i=1;i<=l;++i)
	{
		cin>>b>>u;
		bottom[u]=i;
		//upper[u]=i;
		//lad[i][0]=b;
		lad[i]=b;
	}
	dp[n]=0;
	dp[n-1]=n;
	for(int i=n-2;i>=1;i--)
	{
		if(dp[i]!=0) continue;
		dp[i]=INT_MAX;
		for(int j=i+2;j<=n && j<=i+12;++j)
		{
			dp[i]=min(dp[i],dp[j]);
		}
		dp[i]++;
		if(bottom[i]!=0)
		{
			dp[lad[bottom[i]]]=dp[i];
		}
		//cout<<i<<" "<<dp[i]<<endl;
	}
	cout<<dp[1]<<endl;
	memset(dp,0,sizeof(dp));
	memset(bottom,0,sizeof(bottom));
	memset(lad,0,sizeof(lad));
	}
    return 0;
}
