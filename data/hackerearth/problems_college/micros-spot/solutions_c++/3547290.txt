#include <bits/stdc++.h>
using namespace std;

typedef long long LL;

#define PII       pair<int,int>
#define all(c)    c.begin(),c.end()
#define sz(c)     (int)c.size()
#define clr(c)    c.clear()
#define pb        push_back
#define mp        make_pair
#define cin(x)    scanf("%d",&x)
#define MOD		1000000007
#define EPS		1E-10

int a[1001][1001];
int b[1001][1001];

int main()
{
	int t;
	cin(t);
	while(t--)
	{
		int n,m;
		cin(n);
		cin(m);

		int maxRow[n];
		int maxCol[m];
		for(int i = 0; i < n; i++)
			maxRow[i] = 0;

		for(int i = 0; i < m; i++)
			maxCol[i] = 0;

		for(int i = 0; i < n; i++)
			for(int j = 0; j < m; j++)
				cin(a[i][j]);
		for(int i = 0; i < n; i++)
			for(int j = 0; j < m; j++)
				cin(b[i][j]);

		for(int i = 0; i < n; i++)
			for(int j = 0; j < m; j++)
				maxRow[i] = max(maxRow[i] , b[i][j]);
		for(int j = 0; j < m; j++)
			for(int i = 0; i < n; i++)
				maxCol[j] = max(maxCol[j] , a[i][j]);
		int ans = 0;

		for(int i = 0; i < n; i++)
			for(int j = 0; j < m; j++)
				if(b[i][j] >= maxRow[i] && a[i][j] >= maxCol[j])
					ans += 1;
		printf("%d\n", ans);
	}
	return 0;
}