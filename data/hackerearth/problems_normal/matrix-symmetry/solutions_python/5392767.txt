def isSymmetric(matrix):
    n = len(matrix)
    for ith in xrange(n/2):
        if matrix[ith] != matrix[n - 1 - ith]:
            return False
    return True
        
for _ in xrange(input()):
    matrix = [raw_input() for _ in xrange(input())]
    h_sym = isSymmetric(matrix)
    v_sym = isSymmetric(zip(*matrix))
    if h_sym and v_sym:
        print 'BOTH'
    if not h_sym and v_sym:
        print 'VERTICAL'
    if h_sym and not v_sym:
        print 'HORIZONTAL'
    if not h_sym and not v_sym:
        print 'NO'
