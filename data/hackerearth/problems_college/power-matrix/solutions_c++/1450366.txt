/*******************
  	Rahul Bhati
	CHARUSAT UNIVERSITY
	***********************/

#include <bits/stdc++.h>

using namespace std;

/* Time saving techniques :D */

typedef long long ll;
typedef unsigned long long ull;
typedef vector <int> vi;
typedef pair< int ,int > pii;
typedef istringstream iss;
typedef ostringstream oss;

#define pb              push_back
#define mp              make_pair
#define ff              first
#define ss              second
#define sz              size()
#define ln              length()
#define rep(i,n)        for(int i=0;i<n;i++)
#define fu(i,a,n)       for(int i=a;i<=n;i++)
#define fd(i,n,a)       for(int i=n;i>=a;i--)
#define foreach(it,v)   for( __typeof((v).begin())it = (v).begin() ; it != (v).end() ; it++ )
#define all(a)          a.begin(),a.end()
#define INF             (int)1e9
#define EPS             (1e-9)
#define INF_MAX         2147483647
#define INF_MIN         -2147483647
#define pi              acos(-1.0)
#define dbg(x)          { cout<< #x << ": " << (x) << endl; }
#define dbg2(x,y)       { cout<< #x << ": " << (x) << " , " << #y << ": " << (y) << endl; }
#define mset(a, s)      memset(a, s, sizeof (a))
#define Read(r)         freopen(r, "r", stdin)
#define Write(w)        freopen(w, "w", stdout)

#define MOD 1000000007

int M;
ll a[100][100];
ll r[100][100];
ll C[100][100];

void ones(ll r[100][100]){
    for(int i=0;i<M;i++)
        for(int j=0;j<M;j++)
            r[i][j]=(i==j);
}

void matmul(ll A[][100],ll B[][100]){
    mset(C,0);
    for(int i=0;i<M;i++)
        for(int j=0;j<M;j++)
            for(int k=0;k<M;k++)
                C[i][j]=(C[i][j]+A[i][k]*B[k][j])%MOD;


    for(int i=0;i<M;i++)
        for(int j=0;j<M;j++)
            A[i][j]=C[i][j];
}

void matpow(int k){
    ones(r);
    while(k){
        if(k%2==0){
            matmul(a,a);
            k/=2;
        }
        else{
            matmul(r,a);
            k--;
        }
    }
}

int main(){ //Read("input.in");
    ios::sync_with_stdio(false);
    cin.tie(0);
    int t;
    cin>>t;
    while(t--){
        int n;
        cin>>M>>n;
        for(int i=0;i<M;i++)
            for(int j=0;j<M;j++)
                cin>>a[i][j];


        matpow(n);
        for(int i=0;i<M;i++,cout<<endl)
            for(int j=0;j<M;j++)
                cout<<r[i][j]<<" ";
    }
    return 0;
}

