#include<bits/stdc++.h>
#include <algorithm>
#include<vector>
#include<list>
#include<utility>
#include<map>
#include<set>
#include<stack>
#include<queue>
#define mod 1000000007
#define ll long long
#define INF (ll)(1e18)
#define mp make_pair
#define fill(a,v) memset(a, v, sizeof a)
using namespace std;
ll i,j;
int main()
{
	ll mark[100005];
	ll T;
	cin>>T;
	while(T--)
	{
		fill(mark,0);
		ll N,M;
		cin>>N>>M;
		pair <ll,ll> P[M+1];
		for(i=1;i<=M;i++)
		{
			ll X,Y;
			cin>>X>>Y;
			P[i].first=X;
			P[i].second=Y;
		}
		for(i=1;i<N;i++)
		{
			ll K;
			cin>>K;
			mark[P[K].first]+=1;
			mark[P[K].second]+=1;
		}
		ll count=0;
		for(i=1;i<=N;i++)
		{
			if(mark[i]==0)
			count+=1;
		}
		if(count==0)
		cout<<"YES"<<endl;
		else
		cout<<"NO"<<endl;
	}






	return 0;
}
