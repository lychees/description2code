def setbit(n):
	c=0
	while(n):
		c=c+(n & 1)
		n>>=1
	return c
t=input()
for i in range(0,t):
	g=[]
	n,k=map(int,raw_input().split())
	a=map(int,raw_input().split())
	for j in range(0,len(a)):
		g.append(setbit(a[j]))
	g.sort()
	x=0
	for b in range(0,k):
		x=x+g[(len(g))-1-b]
	print x
		