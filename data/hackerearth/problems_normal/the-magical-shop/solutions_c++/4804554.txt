#include <stdio.h>
#include <string>
#include <iostream>

int main()
{

	long long a,b,sum=0;
	scanf("%lld%lld",&a,&b);
	std::string s;
	std::cin>>s;
	long long int len = s.length();
	long long int arr[len];
	arr[0]=a;
	for (int i = 1; i < len; i++)
	{
		arr[i] = (arr[i-1]*arr[i-1]) % b;
	}
	for (long long int i = 0; i <len ; i++)
	{
		/* code */
		if(s[i] == '1')
		{
			sum = (sum + arr[i]) % b;
		}
	}
	printf("%lld\n", sum);


	return 0;
}