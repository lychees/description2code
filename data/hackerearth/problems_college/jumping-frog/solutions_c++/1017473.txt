#include <iostream>
#include<string.h>
#include<stdio.h>
#include<stdlib.h>
#include<vector>
#include<map>
#include<queue>
#include<stack>
#include<iomanip>
#include<utility>
#include<bitset>
#include<algorithm>
#include<ctype.h>
#define ll long long
#define mod 1000000007
using namespace std;
vector<int>v[101];
int n;
int arr[100005];
ll bfs(int s,int d)
{
queue<int>q;
q.push(s);
ll dist[100005];
memset(dist,-1,sizeof(dist));
int flag[101];
memset(flag,0,sizeof(flag));
dist[s]=0;
while(!q.empty())
{
	int q1=q.front();
		q.pop();
	if(q1==d)break;
	
    int x=arr[q1];

	if(flag[x]==0)
	{
	for(int i=0;i<v[x].size();i++)
	{int q2=v[x][i];
	 if(dist[q2]==-1 && q2>=0 && q2<n)
	 {  dist[q2]=dist[q1]+1;
	    
	 	q.push(q2);
	 }
	 }
  }
	 flag[x]=1;
	 int q3=q1-1;
	 if(q3>=0 && q3<n && dist[q3]==-1)
	 {
	 	dist[q3]=dist[q1]+1;
	 	q.push(q3);
	 }
  
	 
}
return dist[d];
}
int main() {
	
	scanf("%d",&n);
//	int arr[n+5];
	for(int i=0;i<n;i++)
	{
		scanf("%d",&arr[i]);
	}
	for(int i=0;i<n;i++)
	{
		int c=arr[i];
		v[c].push_back(i);
	}
	int qr;
	scanf("%d",&qr);
	for(int j=0;j<qr;j++)
	{  int s,m,e;
		scanf("%d %d %d",&s,&m,&e);
		ll p1=bfs(s,m);
		if(p1==-1)
		printf("-1\n");
		else
		{ll p2=bfs(m,e);
		 if(p2==-1)
		 printf("-1\n");
		 else
		 printf("%lld\n",p1+p2);
		 }
		 
	}
	// your code goes here
	return 0;
}
