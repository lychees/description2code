'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
A, B = map(int, raw_input().split())
days = raw_input()
potions = 0
for i in range(len(days)):
	if days[i] == "1":
		potions += A
	A = ((A%B)*(A%B))%B
print potions%B
