#include<stdio.h>
int a[1001];
int dp[1001][20];
int max(int a,int b)
{
    if(a>b)
        return a;

    else
        return b;
}
int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        int n,i,k,j,r,p;
        scanf("%d %d",&n,&k);
        for(i=0;i<n;i++)
        {
            scanf("%d",&a[i]);
        }
        for(i=0;i<n;i++)
        {
            for(j=0;j<20;j++)
                dp[i][j]=1;
            for(j=0;j<=(i-1);j++)
            {
                if((a[i]-a[j])>0)
                {
                    dp[i][0]=max(dp[j][10+k-1]+1,dp[i][0]);
                    for(p=1;p<k;p++)
                    {
                        dp[i][p]=max(dp[j][p-1]+1,dp[i][p]);
                    }
                }
                else if((a[i]-a[j])<0)
                {
                    dp[i][10]=max(dp[j][k-1]+1,dp[i][10]);
                    for(p=11;p<(10+k);p++)
                    {
                        dp[i][p]=max(dp[j][p-1]+1,dp[i][p]);
                    }
                }
            }
        }
        int ans=0;
        for(i=0;i<n;i++)
        {
        for(p=0;p<k;p++)
        {
            if(dp[i][p]>ans)
                ans=dp[i][p];
        }
        for(p=10;p<(10+k);p++)
        {
            if(dp[i][p]>ans)
                ans=dp[i][p];
        }
        }
        printf("%d\n",ans);
    }
    return 0;
}