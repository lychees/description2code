#include<bits/stdc++.h>
using namespace std;
#define  mp make_pair
#define  pb push_back
#define  M 1000000007
typedef long long int ll;
int n,q;
int par[100030];
int findit(int nn)
{
	if(par[nn]==nn)
		return nn;
	return par[nn]=findit(par[nn]);
}
int main()
{
	int i,j;
	scanf("%d %d",&n,&q);
	for(i=1;i<=n;i++)
	{
		par[i]=i;
	}
	while(q--)
	{
		int num;
		scanf("%d",&num);
		if(num==1)
		{
			int st,en;
			scanf("%d %d",&st,&en);
			int aa=findit(st);
			int bb=findit(en);
			par[aa]=findit(bb);
		}
		else if(num==2)
		{
			int st;
			scanf("%d",&st);
			int aa=findit(st);
			par[aa]=st;
			par[st]=st;
		}
		else
		{
			int st;
			scanf("%d",&st);
			printf("%d\n",findit(st));
		}
	}
	return 0;
}