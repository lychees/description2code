#include<iostream>
#define s(n) scanf("%d",&n)
using namespace std;
//int a[1002];
 int  n,m;
int hsh[1004];
 int b[1003]={0};
 
      
int main()
{
    int t;
    s(t);
    while(t--)
    {
              int a[1002];
             
              s(n);
              s(m);
              
              for(int i=0;i<m;i++)
              s(a[i]);
              
             // int hsh[1004]={0};
              fill(hsh,hsh+1004,0);
              fill(b,b+1003,0);
              hsh[0]=1;
              for(int i=0;i<m;i++)
              {
                      for(int j=1000;j>0;j--)
                      {
                              if(hsh[j-a[i]]==1)
                                hsh[j]=1;
                      }
              }
              
              int pv,cur,tt=1;
              s(cur);
              pv=cur;
              for(int i=1;i<n;i++)
              {
                      s(cur);
                      if(cur!=pv)
                       {
                                 b[tt]++;
                                 tt=1;
                       }
                      else
                       tt++;
                      pv=cur;
                      
                      //b[a]++;
              }
              b[tt]++;
             int cnt=0;
              for(int i=0;i<1001;i++)
              {
                      
                      
                      if((b[i]!=0)&&(hsh[i]==1))
                      {
                       cnt+=b[i];
                      // cout<<i<<"  "<<b[i]<<endl;
                       }
              }
              printf("%d\n",cnt);
    }
}
              
              
