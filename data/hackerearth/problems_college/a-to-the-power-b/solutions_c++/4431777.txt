#include<bits/stdc++.h>
using namespace std;
long long MOD;
int a[100005];
int b[100005];
int c[100005];
long long power(long long n, long long m)
{
    if(m==0) return 1LL;
    long long x=power(n,m/2);
    if(m%2==0) return ((x%MOD)*(x%MOD))%MOD;
    else return (((x%MOD)*(x%MOD)%MOD)*n)%MOD;
}
long long pow2(long long n, long long m)
{
    if(m==0) return 1LL;
    long long x=pow2(n,m/2);
    if(m%2==0) return ((x)*(x));
    else return (((x)*(x))*n);
}
long long arr[100005];
int h=0;
void f(long long n)
{
	int co=0;
	while(n%2==0)
	{
		co++;
		n=n/2;
	}
	long long res=1;
	if(co>=3)
	res=pow(2LL,co-2);
	else if(co==1)
	res=1;
	else if(co==2)
	res=2;
	if(co!=0)
	{
		arr[h++]=res;
	}
	for(int i=3;i*i<=n;i+=2)
	{
		int co=0;
		if(n%i==0)
		{
			while(n%i==0)
			{
				n=n/i;
				co++;
			}
			res=(long long)(i-1)*pow(i,co-1);
			arr[h++]=res;
		}
	}
	if(n>2)
	{
		res=(n-1);
		arr[h++]=res;
	}
}
map < long long,long long int > hashi;
map < long long,long long int > ::iterator it;
void prime_fact(long long int n)
{
	long long int count=0;
    while (n%2 == 0)
    {
        //printf("%d ", 2);
        count++;
        n = n/2;
    }
    hashi[2]=max(count,hashi[2]);
    
     for (int i = 3; i <= sqrt(n); i = i+2)
    {
    	count=0;
        while (n%i == 0)
        {
            //printf("%d ", i);
            count++;
            n = n/i;
        }
        hashi[i]=max(hashi[i],count);
    }
    if (n > 2)
    {
    	hashi[n]=max(1LL,hashi[n]);
	}
        //printf ("%d ", n);
}
long long func()
{
	int i;
	for(i=0;i<h;i++)
	{
		long long t=arr[i];
		prime_fact(t);
	}
	long long res=1;
	for(it=hashi.begin();it!=hashi.end();it++)
	{
		long long xx,yy;
		xx=it->first;
		yy=it->second;
		res=(res*pow2(xx,yy));
	}
	return res;
}
int main()
{
	int n;
	scanf("%d",&n);
	long long x;
	long long temp;
	long long res=1LL;
	long long y;
	scanf("%lld %lld",&x,&MOD);
	int i,j;
	x=x%MOD;
	
	f(MOD);
	y=func();
	for(i=0;i<n;i++)
	{
		scanf("%lld",&temp);
		temp=temp%(y);
		res=(res*temp)%(y);
	}
	res=power(x,res);
	res=res%MOD;
	printf("%lld\n",res);
}
