/*Name -Ishan Bansal
"Don't quit. Suffer now and live rest of your life as champion"*/
#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define sl(n) scanf("%lld",&n)
#define pl(n) printf("%lld",n)
#define enter printf("\n")
#define space printf(" ")
#define MOD 1000000007
#define mag 10000000
#define rep(i,n) for(i=0;i<n;i++)
#define loop(i,a,b) for(i=(a);i<=(b);i++)
#define mset(x,v) memset(x, v, sizeof(x))

vector<ll>arr;

ll root(ll x){
while(x!=arr[x]){
x=arr[x];
}
return x;
}

bool find_(ll x,ll y){
return(root(x)==root(y));
}

void union_(ll x,ll y){// doosre waale ka dabdaba
ll temp1=root(x);
ll temp2=root(y);
arr[temp1]=temp2;
}

int main(){
ll n,q,i;sl(n);sl(q);
arr.resize(n+1);

rep(i,n+1){
arr[i]=i;
}
while(q--){
ll a;sl(a);
if(a==1){
ll b,c;sl(b);sl(c);
union_(b,c);
}

else if(a==2){
ll b;sl(b);
arr[root(b)]=b;
arr[b]=b;
}

else if(a==3){
ll b;sl(b);
pl(root(b));
enter;
}


}//



}
