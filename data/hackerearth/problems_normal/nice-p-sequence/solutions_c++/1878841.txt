#include<iostream>
#include<cstdio>
#include<string>
#include<cstring>
#include<vector>
#include<set>
#include<list>
#include<queue>
#include<cmath>
#include<functional>
#include<algorithm>
#define INF (1<<29)
#define rep(i,n) for(int i=0;i<(int)(n);i++)
using namespace std;



long long extgcd(int a,int b,int &x,int &y){
	int gcd_=a;
	if(b){
		gcd_=extgcd(b,a%b,y,x);
		y-=a/b*x;
	}else{
		x=1;y=0;
	}
	return gcd_;
}
int inv_mod(int a,int mod){
	int x,y;
	extgcd(a,mod,x,y);
	return (mod+x%mod)%mod;
}

int main(){
	ios::sync_with_stdio(0);
	cin.tie(0);
	int t;
	cin>>t;
	rep(_,t){
		int a1,p,n;
		cin>>a1>>p>>n;
		long long ans,inv;
		inv=inv_mod(a1,p);
		if(a1*inv%p==1){
			if(n&1)ans=a1+n/2*(a1+inv);
			else ans=n/2*(a1+inv);
			cout<<ans<<endl;
		}else{
			cout<<-1<<endl;
		}
	}
	return 0;
}