#include<bits/stdc++.h>
using namespace std;
#define ll long long
vector<ll>vec;
ll a[100000],sum;
void doo(ll q)
{  sum+=a[q];
//cout<<q<<" q ";
	ll maxi=0,l=vec.size()-1;
	 ll temp=0;
	 temp=max(temp,a[q]+vec[l]);
	 temp=max(temp,a[q]+a[q+1]+vec[l-1]);
	 temp=max(temp,a[q]+a[q+1]+a[q+2]+vec[l-2]);
	 //cout<<temp<<"  oo ";
	 vec.push_back(sum-temp);
	 //cout<<sum-temp<<endl;
	 return;
	 
}
ll qw(ll q)
{
	ll maxi=0,l=vec.size()-1;
	 ll temp=0;
	 temp=max(temp,a[q]+vec[l]);
	 temp=max(temp,a[q]+a[q+1]+vec[l-1]);
	 temp=max(temp,a[q]+a[q+1]+a[q+2]+vec[l-2]);
	 return temp;
}
int main()
{
	ll t,n,o;
	//freopen("input.txt","r",stdin);
	cin>>t;
	while(t--)
	{ for(int i=0;i<3;i++)
	   vec.push_back(0);
		cin>>n;
		sum=0;
		for(ll i=0;i<n;i++)
		{  
		
			cin>>a[i];
			
		}
		sum+=a[n-1]+a[n-2]+a[n-3];
		for(int k=n-4;k>0;k--)
		{
			doo(k);
		}
		cout<<qw(0)<<endl;
		vec.erase(vec.begin(),vec.end());
	}
}