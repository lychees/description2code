#include <bits/stdc++.h>

using namespace std;

int n,m,c;
int A[22][22];
int sum[20][1<<20];
void pre(int row, int idx, int mask, int val)
{
	if ( idx == m ) {
		sum[row][mask] = val;
		return;
	}
	pre(row, idx + 1, mask, val);
	pre(row, idx + 1, mask | (1 << idx), val + A[row][idx]);
}

int f(int mask)
{
	int ans = 0;
	for ( int i = 0; i < n; i++ ) ans += max(-c, sum[i][mask]);
	return ans;
}
int main()
{
	cin >> n >> m >> c;
	for ( int i = 0; i < n; i++ ) {
		for ( int j = 0; j < m; j++ ) cin >> A[i][j];
	}
	for ( int i = 0; i < n; i++ ) pre(i,0,0,0);
	int ans;
	for ( int i = 0; i < (1 << m); i++ ) {
		if ( i == 0 ) ans = -c*(m - __builtin_popcount(i)) + f(i);
		else ans = max(ans, -c*(m - __builtin_popcount(i)) + f(i));
	}
	cout << ans << endl;
	return 0;
}