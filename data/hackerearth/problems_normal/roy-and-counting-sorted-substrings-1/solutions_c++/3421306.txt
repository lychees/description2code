#include <iostream>
#include <string>

using namespace std;

int main()
{
	int T, len, ini;
	long long int ans, L;
	string s;
	cin>>T;
	while(T--) {
		ini = 0;
		cin>>len>>s;
		ans = 0;
		for(int i=0; i<len; i++) {
			if(i>0 && s[i]<s[i-1] ) {
				L = i-1 - ini + 1;
				ini = i;
				ans += L*(L+1)/2;
			}
		}
		L = len-1 - ini + 1;
		ans += L*(L+1)/2;
		cout<<ans<<endl;
	}
    return 0;
}
