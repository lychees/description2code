#include <bits/stdc++.h>
#define fi first
#define se second
#define mp make_pair
#define pb push_back
#define pf push_front
#define endl '\n'
#define INF 1000000000000000LL
#define PI 3.14159265358979323846
typedef long long LL;
using namespace std;

pair<int, int> a[111111];

int main(){
        ios_base::sync_with_stdio(false);

        int n;
        cin >> n;

        for(int i = 0; i < n; i++){
                int x;
                cin >> x;
                a[i] = mp(x, 0);
        }

        a[0].se = 1;
        for(int i = 1; i < n; i++){
                if(a[i].fi > a[i - 1].fi) a[i].se = a[i - 1].se + 1;
                else a[i].se = 1;
        }

        for(int i = n - 2; i >= 0; i--)
                if(a[i].fi > a[i + 1].fi && a[i].se <= a[i + 1].se) a[i].se = a[i + 1].se + 1;
        
        int ans = 0;
        for(int i = 0; i < n; i++) ans += a[i].se;

        cout << ans;

        return 0;
}
