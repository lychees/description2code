#include<iostream>
#include<climits>
#define INF INT_MAX
int min(int a,int b,int c,int d,int e)
{
    if(a<=b&&a<=c&&a<=d&&a<=e)
        return a;
    if(b<=a&&b<=c&&b<=d&&b<=e)
        return b;
    if(c<=a&&c<=b&&c<=d&&c<=e)
        return c;
    if(d<=a&&d<=b&&d<=c&&d<=e)
        return d;
    if(e<=a&&e<=b&&e<=c&&e<=d)
        return e;
}
using namespace std;
int main()
{
    int a[32][32],n,tt=10000,endi,endj,x,bl=0;
    char ch;
    cin>>n;
    for(int i=0;i<32;i++)
        for(int j=0;j<32;j++)
           a[i][j]=INF;
    for(int i=1;i<=n;i++)
    {
        for(int j=1;j<=n;j++)
        {
           cin>>ch;
           if(ch!=' '&&ch!='\n')
           {
           if(ch=='P')
           {
            a[i][j]=tt;
            tt++;
           }

           if(ch=='T')
            a[i][j]=INF;
           if(ch=='S')
            a[i][j]=1000;
           if(ch=='E')
           {
            a[i][j]=2000;
            endi=i;
            endj=j;
           }
           }
        }
    }
//    cout<<endl;
//     for(int i=0;i<n+2;i++)
//    {
//        for(int j=0;j<n+2;j++)
//        {
//            cout<<"         "<<a[i][j];
//        }
//        cout<<endl;
//    }
    for(int k=1;k<=5000;k++)
    {
        
    for(int i=1;i<=n;i++)
    {
        for(int j=1;j<=n;j++)
        {
            if(a[i][j]!=INF)
            {
               
                if((x=min(a[i][j],a[i+1][j],a[i-1][j],a[i][j+1],a[i][j-1]))!=a[i][j])
                   a[i][j]=x+1;

            }
        }
    }
        
    }
    cout<<a[endi][endj]-1000;


}
