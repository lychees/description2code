n,b = map(int,raw_input().split())
string = raw_input()
days = len(string)
a=n
potions=0
for i in xrange(days):
	if string[i]=='1':
		potions+=a%b
	a=a%b	
	a*=a
print potions%b		
