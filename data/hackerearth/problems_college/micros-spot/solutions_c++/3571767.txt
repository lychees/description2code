#include<cstdio>
using namespace std;
int main()
{
   long int t;
   scanf("%ld",&t);
    while(t--)
    {
        long n,m,i,j;
        scanf("%ld %ld",&n,&m);
        long a[n][m],b[n][m];
        for(i=0;i<n;i++)
            for(j=0;j<m;j++)
             scanf("%ld",&a[i][j]);
        for(i=0;i<n;i++)
            for(j=0;j<m;j++)
             scanf("%ld",&b[i][j]);
        long count=0,amax[m],bmax[n];
        for(i=0;i<n;i++)
        {
            long max=b[i][0];
            for(j=1;j<m;j++)
                if(b[i][j]>=max)
                  max=b[i][j];
            bmax[i]=max;
        }

        for(i=0;i<m;i++)
        {
            long max=a[0][i];
            for(j=1;j<n;j++)
                if(a[j][i]>=max)
                 max=a[j][i];
            amax[i]=max;
        }

        for(i=0;i<n;i++)
            for(j=0;j<m;j++)
              {
            if(b[i][j]>=bmax[i] && a[i][j]>=amax[j])
                count++;
               }
        printf("%ld \n",count);
    }
}
