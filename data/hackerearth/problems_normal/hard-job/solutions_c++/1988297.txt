#include <stdio.h>

#define NMAX 2097152

int poz[NMAX], cnt[2 * NMAX];
int N, M, i, x, pstart, pend, node, p;
char op;
long long ans;

int main() {
	scanf("%d %d", &N, &M);
	pstart = NMAX + 500010;
	pend = pstart - 1;
	for (i = 1; i <= N; i++) {
		scanf("%d", &x);
		pend++;
		node = poz[x] = pend;
		while (node >= 1) {
			cnt[node]++;
			node >>= 1;
		}
	}
	ans = 0;
	while (M--) {
		scanf("%d %c", &x, &op);
		node = poz[x];
		p = 0;
		while (node > 1) {
			if ((node & 1) == 1) p += cnt[node ^ 1];
			cnt[node]--;
			node >>= 1;
		}
		if (N - p - 1 < p) p = N - p - 1;
		ans += p;
		if (op == 'l') {
			pstart--;
			poz[x] = pstart;
		} else {
			pend++;
			poz[x] = pend;
		}
		node = poz[x];
		while (node > 1) {
			cnt[node]++;
			node >>= 1;
		}
	}
	printf("%lld\n", ans);
	return 0;
}
