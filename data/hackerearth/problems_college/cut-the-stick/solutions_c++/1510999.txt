#include <stdio.h>
#include <algorithm>
#include <vector>
using namespace std;
vector<int> vec;
vector<int>::iterator it;
int main()
{
	int t,S,N,L,i,num,sol,x,pos,pos1;
	scanf("%d",&t);
	while(t--)
	{
		sol=0;
		vec.clear();
		scanf("%d %d %d",&S,&N,&L);
		for(i=1;i<=N;i++)
		{
			scanf("%d",&num);
			vec.push_back(num);
		}
		sort(vec.begin(),vec.end());
		
		for(i=0;i<vec.size();i++)
		{
			if(vec[i]>L)
			{
			
			sol+=(vec.size()-1-i);
			continue;
		    }
			
			x=vec[i]+L;
			
			it=upper_bound(vec.begin(),vec.end(),x);
			
			pos=-1;
			
			if(it!=vec.end())
			{
				pos=it-vec.begin();
				sol+=(vec.size()-pos);
			}
			
			it=upper_bound(vec.begin(),vec.end(),S-L-1);
			
			it--;
			
			if(it!=vec.end())
			{
				pos1=it-vec.begin();
				 
				if(pos1>=i)
				{
				
				if(pos!=-1)
				{
					if(pos1>=pos)
					sol+=(pos-1-i);
					else 
					sol+=(pos1-i);
				}
				else
				{
					sol+=(pos1-i);
				}
				
			    }
			
			}
			
		}
		printf("%d\n",sol);
		
	}
	return 0;
}
