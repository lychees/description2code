//
//                       _oo0oo_
//                      o8888888o
//                      88" . "88
//                      (| -_- |)
//                      0\  =  /0
//                    ___/`---'\___
//                  .' \\|     |// '.
//                 / \\|||  :  |||// \
//                / _||||| -:- |||||- \
//               |   | \\\  -  /// |   |
//               | \_|  ''\---/''  |_/ |
//               \  .-\__  '-'  ___/-. /
//             ___'. .'  /--.--\  `. .'___
//          ."" '<  `.___\_<|>_/___.' >' "".
//         | | :  `- \`.;`\ _ /`;.`/ - ` : | |
//         \  \ `_.   \_ __\ /__ _/   .-` /  /
//     =====`-.____`.___ \_____/___.-`___.-'=====
//                       `=---='
//
#include<bits/stdc++.h>
#define ll long long int
#define ull unsigned long long
#define pb push_back
#define in     insert
#define all(v) v.begin(),v.end()
#define loop(i,n) for(int i=0;i<n;i++)
#define loop1(i,n) for(int i=1;i<=n;i++)
#define TC()      ull t;cin>>t;while(t--)
#define mk make_pair
#define sz(a) int((a).size())
#define umap unordered_map
#define endl '\n'
#define vitr vector<ll>::iterator
#define sitr set<ll>::iterator
#define inf LLONG_MAX
#define minf LLONG_MIN
#define foreach(i,n) for(__typeof((n).begin())i =(n).begin();i!=(n).end();i++)
#define gc getchar
#define mod 1000000007
#define F first
#define S second

using namespace std;
void FastIO(){ios_base::sync_with_stdio(0);cin.tie(NULL);cout.tie(NULL);}
void show(int *arr,int n){loop(i,n)cout<<arr[i]<<" ";cout<<endl;}
ll powmod(ll a,ll b) {ll res=1;a%=mod; assert(b>=0); for(;b;b>>=1){if(b&1)res=res*a%mod;a=a*a%mod;}return res;}
int read_int() {char c = gc ();while(c<'0' || c>'9') c = gc();int ret = 0;while(c>='0' && c<='9') {ret = 10 * ret + c - 48;c = gc();}return ret;}
int MMI(int n,int M){return powmod(n,M-2);}

int A[100001];
int tmp[100001];
unordered_set<int> s;

void del(void)
{	bool hua=false;
	unordered_set<int>::iterator it;
	for(auto i=s.begin();i!=s.end();i++)
	{
			it=i;
			it++;
			if(it==s.end()) break;
			
			if(*i<*it)
			{
				hua=true;
				s.erase(i);
				break;
			}
	}
	if(!hua) 
	{
		//it=s.end();
		//it--;
		s.erase(prev(s.end()));
	}
}

int main()
{
	//ifstream cin("in.txt");

	TC()
	{
		int n,k,tp;
		cin>>n>>k;
		
		int  ct=0;
		cin>>A[0];
		loop1(i,n-1) 
		{
			cin>>A[i];
			//if(ct<k&&A[i-1]<A[i])
			//A[i-1]=-1,ct++;
		}
		
		stack<int> stk;
		int pos;
		
		loop(i,n)
		{
			if(stk.size()>0)
			{
				while(ct<k&&stk.size()>0&&stk.top()<A[i]) stk.pop(),ct++;
				stk.push(A[i]);
				
				pos=i+1;
				if(ct>=k)
					break;
				
			}
			else stk.push(A[i]);
		}
		
		string str;
		int it=0;
		
		if(ct<k)
		{
			while(ct<k) 
			stk.pop(),ct++;
			pos=n;
		}
		
		while(!stk.empty())
			tmp[it++]=stk.top(),stk.pop();
			
		for(int i=it-1;i>=0;i--) cout<<tmp[i]<<" ";
		
		for(int i=pos;i<n;i++) cout<<A[i]<<" ";
		
		cout<<endl;
		//s.clear();
	}
	return 0;
}

