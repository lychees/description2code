#include <iostream>
using namespace std;
#include<map>


map<string,int>m;
long long temp[110][110];
long long no_of_railway_sta,no_of_direct_conn;
void find()
{
	cin>>no_of_railway_sta>>no_of_direct_conn;
	for(int i=1;i<=no_of_railway_sta;i++){
		string inp;
		cin>>inp;
		m[inp] = i;
	}
		string station1,station2;
		int x,y,distance;
	for(int i=1;i<=no_of_direct_conn;i++)
	{
		cin>>station1>>station2>>distance;
		x = m[station1];
		y = m[station2];
		temp[x][y] = temp[y][x]=distance;
	}
	for(int i=1;i<=no_of_railway_sta;i++)temp[i][i] =0;
	for(int k=1;k<=no_of_railway_sta;k++)
	{
		for(int i=1;i<=no_of_railway_sta;i++)
		{
			for(int j=1;j<=no_of_railway_sta;j++)
			{
				if(temp[i][j]>temp[i][k]+temp[k][j])
				{
					temp[i][j] = temp[i][k]+temp[k][j];
				}
			}
		}
	}

	int q;
	cin>>q;
	for(int i=1;i<=q;i++)
	{
		cin>>station1>>station2;
		cout<<temp[m[station1]][m[station2]]<<endl;
	}
}
int main() 
{	
	for(int i=1;i<110;i++)
		for(int j=1;j<110;j++)
			temp[i][j] = 100000000000;
	find();
}

