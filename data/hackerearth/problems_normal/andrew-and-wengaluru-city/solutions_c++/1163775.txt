#include <iostream>
using namespace std;



int RightHighest(int A[],int i,int n)
{

int j;

int intial=i;


for(j=i+1;j<n;j++)
{
	if(A[j]>A[i])
	{
		
		i=j;
		
	}
	
	
}
if(i>intial)
 return i;
 
 else 
  return 0;


}
	
	
	
	


int main()
{
    
     int T;
    cin>>T;
    
    int N;
    
    int i;
    while(T--)
    {
    	cin>>N;
    	int A[N];
    	for(i=0;i<N;i++)
    	{
    		cin>>A[i];
    		
    	}
    	
    	int left=A[0];
    	
    	
    	
    
    
    int count=0;
    int diff=0;
    int j;
    
    int k;
    i=1;
    while(i<N-1)
    {
    	
	    j=RightHighest(A,i,N);
	    	   //cout<<"j= "<<j<<endl;
	       if(j)
		   	{
	         for(k=i;k<j;k++)
	    	   {
				     if(left>A[k])
				     {
				     	
				       if(left>A[j])
				        {
				        	diff=A[j]-A[k];
				        	
				        }
				        else
				        {
				         if(A[j]>A[k])
				           diff=left-A[k];
				          else
				           diff=0;
				           
				        	
				        	
				        }
				        
				      left=A[k]+diff;
				        if(count>1000000007)
                          count=(count%1000000007);
				     count=count+diff;
				     A[k]=A[k]+diff;
	   
		    	 	}
		    	 	else
		    	 	 left=A[k];
		    			
	    	     }		
	    		i=k;	
	    		}
	    		else{
	    	//	cout<<"k="<<k<<endl;
	    		left=A[i];
	    		i++;
	    		}
    	 
    	
    	}
    
   
    	
    	
    	
    
    if(count>1000000007)
     count=(count%1000000007);
    cout<<count<<endl;
    }
    return 0;
}
