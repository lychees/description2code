//============================================================================
// Name        : riya.cpp
// Author      : riya1794
//============================================================================

#include<bits/stdc++.h>

using namespace std;

#define MAX(a,b) ((a)>(b)?(a):(b))
#define MIN(a,b) ((a)<(b)?(a):(b))

#define REP(i,a,b) for(LL i=a;i<b;i++)
#define rep(i,b) for(LL i=0;i<b;i++)
#define rep1(i,b) for(LL i=1;i<=b;i++)

#define pdn(n) printf("%d\n",n)
#define pln(n) printf("%ld\n",n)
#define plln(n) printf("%lld\n",n)
#define pn(n) printf("\n")
#define psn(n) printf("%s\n",n)

#define s2ll(n1,n2) scanf("%lld%lld",&n1,&n2)
#define sll(n) scanf("%lld",&n)
#define sl(n) scanf("%ld",&n)
#define sd(n) scanf("%d",&n)
#define ss(n) scanf("%s",n)

#define ass(n,a,b) assert(n>=a&&n<=b)

typedef long long LL;

#define MOD 1000000007
#define mx 1000000
vector< pair< LL , LL> > v;
LL w[mx];
LL root(LL a)
{
    if(a==w[a])
        return a;
    else
        return w[a] = root(w[a]);
}
void join(LL a, LL b)
{
    w[a]=b;
}
int main()
{
    LL t,n,i,j,m,x,y,ans=1;
    sll(t);
    while(t--)
    {
        s2ll(n,m);
        v.clear();
        ans=1;
        LL a[m+5], b[m+5], c[m+5];
        rep1(i,m)
        {
            s2ll(a[i],b[i]);
            sll(c[i]);
            v.push_back(make_pair(c[i],i));
        }
        sort(v.begin(),v.end());
        rep1(i,n) w[i]=i;
        rep(i,v.size())
        {
            LL id = v[i].second;
            LL q=a[id];
            LL r=b[id];
            q=root(q);
            r=root(r);
            if(q!=r)
            {
                ans= (ans*c[id])%MOD;
                join(q,r);
            }
        }
        plln(ans);
    }
    return 0;
}
