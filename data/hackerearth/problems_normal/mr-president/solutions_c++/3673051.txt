#include<bits/stdc++.h>
#define ll long long
#define plll pair<pair<ll,ll> ,ll>
#define f first.first
#define s first.second
#define t second
#define nax 1000005

using namespace std;
int x[nax];

void init(int n)
{

    for(int i=0;i<=n;i++)
        x[i]=i;

}
int findset(int i)
{
    if(x[i]==i)
        return i;
    return x[i]=findset(x[i]);
}
bool issameset(int x,int y)
{
    return (findset(x)==findset(y));
}
void makeset(int i,int j)
{
    x[findset(i)]=findset(j);
}

vector<plll> v;
int main()
{
    ll t,n,m,a,b,c;

        ll sum=0,cnt=0;
        cin>>n>>m>>sum;
        init(n);
        ll maxi=0;
        while(m--)
        {
            cin>>a>>b>>c;
            v.push_back(make_pair(make_pair(c,a),b));

        }
        if(sum<n-1)
        {
            cout<<-1;
            return 0;
        }
        sort(v.begin(),v.end());

        for(plll y:v)
        {
            if(!issameset(y.s,y.t))
            {
                makeset(y.s,y.t);
                ++cnt;
                if(sum-y.f<(n-1-cnt))
                {

                 maxi=max(n-cnt,maxi);
                 
                }
                sum-=y.f;

            }
        }
        if(cnt==n-1)
        cout<<maxi;
        else
        cout<<"-1";



}

