#include<bits/stdc++.h>
using namespace std;
#define in(x) scanf("%d",&x)
#define il(x) scanf("%lld",&x)
#define mod 1000000007
#define pb push_back
#define mp make_pair
typedef long long int ll;
int main()
{
    int n,ans,x,i,a,b,j;
    in(n);
    vector<int> h(100005,0);
    vector<int> v(n);
    ans=0;
    for(i=0;i<n;i++)
    {
        in(x);
        v[i]=x,h[x]++;
        if(h[x]>(n+1)/2)
            ans=-1;
    }
    map<int,int> m;
    vector<int> f;
    if(ans==0)
    {
        for(i=0;i<n;i++)
        {
            if(i<n-1 && v[i]==v[i+1])
            {
                j=0;
                while(i<n-1 && v[i]==v[i+1])
                    j++,i++;
                if(m[v[i]]==0)
                    m[v[i]]=j;
                else if(m[v[i]]!=0)
                    m[v[i]]=m[v[i]]+j;
            }
        }
        map<int,int> :: iterator itr;
        itr=m.begin();
        while(itr!=m.end())
            f.push_back(itr->second),itr++;
        sort(f.begin(),f.end());
        reverse(f.begin(),f.end());
        x=f.size();
        if(x==0)
            ans=0;
        else if(x==1)
            ans=f[0];
        else
        {
            a=f[0],b=f[1];
            for(i=2;i<x;i++)
            {
                if(a<=b)
                    a=a+f[i];
                else
                    b=b+f[i];
            }
            ans=max(a,b);
        }
    }
    cout << ans << endl;
    return 0;
}
