#include<bits/stdc++.h>
#define s(n) scanf("%d",&n)
#define ll long long
#define pb push_back
#define mod 1000000007
 using namespace std ;





ll modExp(ll a,ll b,ll md){
    ll ans = 1;
    while(b){
       if(b&1)
            ans = (ans*a)%md;
        a = (a*a)%md;
        b/=2;
    }
    return ans;
}

ll inverse(ll num){
   return modExp(num,mod-2,mod);
}
ll ncr(int n,int r){

  ll num = 1;
  ll den = 1;
  int i ;
  for(i=1;i<=n;++i)
    num = (num*i)%mod;
   for(i=1;i<=n-r;++i)
    den = (den*i)%mod;
    for(i=1;i<=r;++i)
    den = (den*i)%mod;

    ll ans = num*inverse(den);
    ans%=mod;
    return ans;

}

int mark[1500002];
void sieve(){

   int i,j;
   for(i=1;i<=1500000;++i)
        mark[i] = 1;
   mark[1] = 0;

   for(i=2;i*i<=1500000;++i){

      if(mark[i]==1){
         for(j=2;i*j<=1500000;++j)
            mark[i*j] = 0;
      }
   }
}


vector<int>pri;
ll dp[502][502];
ll calc(int a,int b){

   int lo = 0;
   int hi = pri.size()-2;
   int idx ;
   while(lo<=hi){
       int mi = (lo+hi)/2;
       if((pri[mi]<a)||(pri[mi+1]<b))
            lo = mi + 1;
        else if(pri[mi]>b){
            idx = mi ;
            hi = mi - 1;

        }else{
           idx = mi ;
           hi = mi - 1;
        }
   }
   ll ans = pri[idx]-a + pri[idx+1] - b;

   return ans;
}

int main(){

int n,m,i,j,k;

sieve();
for(i=2;i<=1500000;++i)
    if(mark[i]==1)
        pri.pb(i);

cin>>n;
int a[n+1];
for(i=1;i<=n;++i)
    cin>>a[i];

for(i=1;i<=n;++i)
    for(j=2;j<=n;j+=2)
        dp[i][j] = 1e11;
 for(i=1;i<=n;++i)
    dp[i][0] = 0;

for(j=2;j<=n;j+=2)
    for(i=1;i<=n-j+1;++i){
        int fin = i + j-1;
        for(k=i+1;k<=fin;k+=2){
           if(k==fin)
                dp[i][j] = min(dp[i][j],calc(a[i],a[k])+dp[i+1][j-2]);
           else
                dp[i][j] = min(dp[i][j],calc(a[i],a[k])+dp[i+1][k-i-1]+dp[k+1][fin-k]);
        }
    }

cout<<dp[1][n]+n/2<<endl;
return 0;
}
