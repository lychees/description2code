#include<bits/stdc++.h>
#define ll long long
#define sc(n) scanf("%d",&n)
#define pr(n) printf("%d",n)
ll const int mod=1e9+7;
using namespace std;
ll arr[100005];
ll n;
ll dp[2005][2005];
ll fun(ll l,ll r)
{
	if(l>r)
	 return 0;
	 if(dp[l][r]!=-1)
	 return dp[l][r];
	ll a=n-(r-l+1)+1;
		return dp[l][r]=max(a*arr[l]+fun(l+1,r),a*arr[r]+fun(l,r-1));
}

int main()
{
//	freopen("in.txt","r",stdin);
   memset(dp,-1,sizeof(dp));
   cin>>n;
  for(ll i=0;i<n;i++)
    cin>>arr[i];
	   
  ll res=fun(0,n-1); 
  cout<<res;
 
    return 0;
}
