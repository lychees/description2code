#include <bits/stdc++.h>
using namespace std;

int arr[10010];
int main()
{
    int t,s,l,n;
    scanf("%d",&t);
    while(t--)
    {
    	scanf("%d %d %d",&s,&n,&l);
    	for(int i=0;i<n;++i)
    		scanf("%d",&arr[i]);
    	sort(arr,arr+n);
    	long long ans=0;
    	int ub=0;
    	while(ub<n && arr[ub]<s-l) ub++;
    	ub--;
    	int lb=0;
    	while(lb<n && arr[lb]<=arr[0]+l) lb++;
    	if(arr[0]>l){
    		ans+=n-1;
    	}
    	else if(s-arr[0]<=l){
    		ans+=0;
    	}
    	
    	else if(ub>=lb) ans+=n-1;
    	else ans+=n-1-(lb-ub-1);
    	for(int i=1;i<n;++i)
    	{
    		if(arr[i]>l){
    			ans+=(n-1-i);
    			continue;
    		}
    		if(s-arr[i]<=l) continue;
    		while(lb<n && arr[lb]<=arr[i]+l) lb++;
    		if(i==ub){
    			ans+=(n-1-i)-(lb-i-1);
    			continue;
    		}
    		//printf("%d %d %d\n",i,u,ll);
    		if(ub>=lb) ans+=(n-1-i);
    		else {
    			ans+=(n-1-i)-(lb-ub-1);
    		}
    		
    	}
    	printf("%lld\n",ans);
    }
    return 0;
}
