#include<iostream>
#include<ctype.h>
#include<cstdio>
#include<cstdlib>
#include<algorithm>
#include<vector>
#include<set>
#include<map>
#include<string>
#include<string.h>
#include<cstring>
#include<stack>
#include<queue>
#include<cassert>
#include<iterator>
#include<cmath>
#include<climits>
#include <bitset>

using namespace std ;

#define FOR(i,a,b) for(int i= (int)a; i< (int)b; ++i)
#define REP(i,n) FOR(i,0,n)

#define LL long long int 
#define PII pair<int,int> 
#define PB push_back
#define MP make_pair
#define INF 1000000000
#define mod 1000000007
vector<int>::iterator low;

int arr[5000010];
int Lim = 200001;

int main()
{
   int t;
   cin>>t;
   while(t--)
   {
      REP(i,Lim)
         arr[i]=0;
      int p,n,x;
      cin>>p>>n;
      int mn = 0;
      int mx=0;

      REP(i,n)
      {
         cin>>x;
         if(i==0)
         {
            mn = x;
            mx = x;
         }
         else
         {
            int l=mn;
            int u = mx;
            for(int j=l;j<=2000;j++)
            {
               if(arr[j]==1)
               {
                  arr[j+x]=1;
                  mx = max(mx,j+x);
               }
            }
         }
         arr[x]=1;
         mn = min(mn,x);
      }
      int C=0;
      x = -1;
      int previous=-1;
      int cnt=1,y;
      REP(i,p)
      {
         cin>>x;
         y = x;
         if(i==0)
         {
            previous=y;
            continue;
         }
         if(previous==y)
            cnt++;
         else
         {
            x = cnt;
            if(arr[x]==1)
            {
               C++;
            }
            cnt=1;
         }
         previous=y;
      }
      x = cnt;
      if(arr[x]==1)
      {
         C++;
      }
      cout << C << endl;
   }
   return 0;
}
