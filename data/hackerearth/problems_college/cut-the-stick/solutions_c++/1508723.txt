#include <vector>
#include <list>
#include <map>
#include <set>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include <cstring>

using namespace std;
#define LL long long
#define pb push_back
#define pLL pair<LL,LL>
#define ff first
#define ss second
#define pii pair<int,int>
#define rep(i,a,b) for(LL i=a;i<=b;++i)
#define ld long double
#define tr(n) cin>>n
#define tr2(n,m) cin>>n>>m
#define tr3(a,b,c) cin>>a>>b>>c
#define mp make_pair
#define vLL vector<LL>
#define vpLL vector<pLL>
#define vii vector<pii>
#define vii vector<pii>
#define vld vector<ld>
#define pld pair<ld,ld>
#define vpld vector<pld>
#define Si set<int>
#define SLL set<LL>
#define SpLL set<pLL>
#define Sii set<pii>
#define fill(a,v) memset(a,v,sizeof(a))
#define oo 1000000007


LL t;
LL dp1[100005];
LL dp2[100005];

vector<LL> V;
int main()
{
	cin>>t;
	while(t--)
	{
		LL s,n,l;
		cin>>s>>n>>l;V.clear();
		rep(i,1,n)
		{
			LL x;
			cin>>x;
			V.pb(x);
		}
	sort(V.begin(),V.end());
		
		set<LL> S;
		vector<LL> V2;
		vector<LL> V1;
		for(int i=0;i<n;++i)
		{
			if(V[i]<=l)V1.pb(V[i]);
		}
		for(int i=0;i<n;++i)
		{
			if(s-V[i]<=l)V2.pb(V[i]);
		}
		
		LL anse=0;
		for(int i=0;i<V1.size();++i)
		{
			anse+=((LL)(upper_bound(V2.begin(),V2.end(),V1[i]+l)-lower_bound(V2.begin(),V2.end(),V1[i]+1)));
		//	cout<<V1[i]<<" "<<anse<<endl;
		}
		cout<<((n*(n-1))/2)-anse<<endl;
	}
	
	
	
	
	
	
	return 0;
}