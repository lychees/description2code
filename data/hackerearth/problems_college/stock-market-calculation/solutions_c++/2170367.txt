#include <bits/stdc++.h>
using namespace std;

long long int n,t,i,ans,a[50005],sum[50005],p[50005][20],j,u,l;
int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
    	scanf("%d",&n);
    	for(i=1;i<=n;i++)
    	{
    		scanf("%d",&a[i]);
    		sum[i]=sum[i-1]+a[i];
    	}
    	for(j=0;(1<<j)<=n;j++)
    	{
    		for(i=1;i+(1<<j)<=n+1;i++)
    		{
    			if(j==0)
    			{
    				p[i][j]=i;
    				continue;
    			}
    			if(a[p[i][j-1]]>a[p[i+(1<<(j-1))][j-1]])
    			p[i][j]=p[i][j-1];
    			else
    			p[i][j]=p[i+(1<<(j-1))][j-1];
    		}
    	}
    	i=1; ans=0;
    	while(i<=n)
		{
			l=log2(n-i+1);
			if(a[p[i][l]]>a[p[n-(1<<l)+1][l]])
			u=p[i][l];
			else
			u=p[n-(1<<l)+1][l];
			//cout<<i<<" "<< u<<"\n";
		
			ans+=((u-i)*a[u]-(sum[u-1]-sum[i-1]));
			i=u+1;
		}
		cout<<ans<<"\n";
    }
    return 0;
}
