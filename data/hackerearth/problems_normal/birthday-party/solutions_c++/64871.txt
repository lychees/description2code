#include <iostream>
#include<map>
#include<string.h>
using namespace std;
int visited[1010][1010];
int func(int p[],int sum,int n)
{
	if(n<0&&sum!=0)
	 return 0;
	if(sum==0)
	 return 1;
	if(visited[sum][n]!=-1)
	 return visited[sum][n];
	if(p[n]>sum)
	 return visited[sum][n]=func(p,sum,n-1);
	else
	 return visited[sum][n]=(func(p,sum,n-1)||func(p,sum-p[n],n-1));
}
int main()
{
    int t,i;
	scanf("%d",&t);
	for(i=0;i<t;i++)
	{
		int m,n,j,count=0;
		memset(visited,-1,sizeof(visited));
		map<int,int> mp;
		scanf("%d%d",&m,&n);
		int p[n],f[m];
		for(j=0;j<n;j++)
		 scanf("%d",&p[j]);
		for(j=0;j<m;j++)
		{
			scanf("%d",&f[j]);
			mp[f[j]]++;
		}
		int a[1010];
		memset(a,-1,sizeof(a));
		for(j=0;j<m;)
		{
			int val=mp[f[j]];
			j+=val;
			if(a[val]!=-1)
			{
				if(a[val]==1)
				 count++;
			}
			else
			{
				a[val]=func(p,val,n-1);
				if(a[val]==1)
				 count++;
			}
		}
		printf("%d\n",count);
	}
    return 0;
}