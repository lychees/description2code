#include <iostream>
using namespace std;

int main()
{
    long long int t;
    cin>>t;
    while(t--)
    {
    	long long int n,sum,i,j,p;
    	cin>>n;
    	string s;
    	cin>>s;
    	sum=0;
    	i=0;
    	p=0;
   while(i<n-1)
   {
   	if(s[i]<=s[i+1])
   	p++;
   	if(s[i]>s[i+1])
   	{
   		p=p+1;
   	    sum=sum+(p*(p+1))/2;
   	    p=0;
   	}
   	i++;
   }
   p++;
   sum=sum+(p*(p+1))/2;
    	//int s1=(n*(n+1))/2 - sum;
    	cout<<sum<<endl;
    }
    return 0;
}
