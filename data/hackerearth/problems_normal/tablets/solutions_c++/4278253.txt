#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
using namespace std;
typedef vector <int> vi;

int main() {
    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   
                int t;
                cin>>t;
                int val; 
                vi ratings,candy;
                for(int i=0;i<t;i++)
                {
                    cin>>val;
                    ratings.push_back(val);
                }
                int prev=1;
                candy.push_back(prev);
                for(int i=1;i<ratings.size();i++)
                    {
                          prev=candy[i-1];
                        if(ratings[i]>ratings[i-1])    
                            candy.push_back(prev+1);
                        else candy.push_back(1);
                }
                for(int i=ratings.size()-1;i>0;i--)
                    {
                        if(ratings[i]<ratings[i-1])    
                            {
                                if(candy[i-1]>candy[i])
                                    continue;
                                else candy[i-1]=candy[i]+1;
                        }
                }
                long long sum=0;
                for(int i=0;i<candy.size();i++)
                    {
                        sum+=candy[i];
                }
                cout<<sum<<endl;
                
    return 0;
}