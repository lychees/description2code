t=input()
while t:
	t-=1
	n, k = map(int, raw_input().split())
	ar = map(int, raw_input().split())
	onec = ar.count(1)
	zeroc = ar.count(0)
	if zeroc>=k:
		zeroc-=k
		onec+=k
	else:
		k-=zeroc
		onec+=zeroc
		k=k%2
		onec-=k
	print onec