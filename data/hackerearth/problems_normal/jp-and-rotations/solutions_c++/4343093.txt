#include<bits/stdc++.h>
using namespace std;
static int a[200001],b[200001];
int main(){
	int n,m;
	scanf("%d %d",&n,&m);
	for(int i=0;i<n;i++){
		scanf("%d",&a[i]);
	}
	for(int j=0;j<n;j++){
		scanf("%d",&b[j]);
	}
	if(n<=1){
		printf("1\n");
		return 0;
	}
		static bool ans[200001];
		memset(ans,false,sizeof(ans));
		for(int i=0;i<n;i++){
			int j = 0;
			int x = i;
			while(j<n&&a[x]==b[j])
				j++,x++,x%=n;
			if(j==n){
				ans[i] = true;
			} else 
			ans[i] = false;
		}
		int pos = 0;
		int ans1 = -1;
			for(int i=1;i<=m;i++){
			char ch;
			int x;
			scanf("\n%c %d",&ch,&x);
			/*int p = 0;
			if(ch=='L'){
				for(int j=x;j<n;j++){
					temp[j] = a[j-x];
				}
				int p = n-1;
				for(int j=x-1;j>=0;j--){
					temp[j] = a[p];
					p--;
				}
				for(int j=0;j<n;j++)
					a[j] = temp[j];
			} else
			if(ch=='R'){
				for(int j=0;j<n-x;j++){
					temp[j] = a[j+x];
				}
				int p=0;
				for(int j=n-x;j<n;j++){
					temp[j] = a[p];
					p++;
				}
				for(int j=0;j<n;j++)
					a[j] = temp[j];
			}
			bool f = true;
			for(int i=0;i<n;i++){
				if(a[i]!=b[i])
				 f = false;
			}
			if(f){
				printf("%d\n",i);
				return 0;
			}*/
			//x%=n;
			assert(ch=='L'||ch=='R');
			assert(x>=1&&x<=1000);
			if(ch=='R'){
				while(x>0){
					pos--;
					if(pos<0)
						pos = n-1;
						x--;
				}
			}
			else
			if(ch=='L'){
				while(x>0){
					pos++;
					if(pos>n-1)
						pos = 0;
					x--;
				}
			}
			else
			assert(0);
			if(ans[pos]){
				ans1 = i;
				break;
			}
		}
			printf("%d\n",ans1);
	return 0;
}