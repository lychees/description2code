#include<stdio.h>
#include<memory.h>
#include<vector>
#include<map>
using namespace std;
#define Pii pair<int,int>
#define X first
#define Y second
#define Vi vector<int>
#define Mii map<int,int>
#define N 1001
int xn,yn;
int chk[N],Tchk;
Vi v[N];
int pre[N];
bool bpm(int a){
	for(int i=0;i<v[a].size();i++){
		int b=v[a][i];
		if(chk[b]==Tchk)continue;
		chk[b]=Tchk;
		if(pre[b]==-1||bpm(pre[b])){
			pre[b]=a;
			return 1;
		}
	}
	return 0;
}
int main(){
	//freopen("1.in","r",stdin);
	int T;
	for(scanf("%d",&T);T--;){
		for(int i=0;i<N;i++)v[i].clear();
		xn=0,yn=0;
		Mii mpx,mpy;
		int n;scanf("%d",&n);
		while(n--){
			int x,y;
			scanf("%d%d",&x,&y);
			if(!mpx.count(x))mpx[x]=xn++;
			if(!mpy.count(y))mpy[y]=yn++;
			x=mpx[x];y=mpy[y];
			v[x].push_back(y);
		}
		int ans=0;
		memset(pre,-1,sizeof(pre));
		for(int i=0;i<xn;i++){
			Tchk++;
			ans+=bpm(i);
		}
		printf("%d\n",ans);
	}
}
