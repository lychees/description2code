#include <stdio.h>
long ar[10000001]={0},br[10000001]={0};
int main()
{
    long a=1,b,c,d,i,j,n,m,cr[100];
    for(i=0; ;i++){
    	cr[i]=a;
    	a*=2;
    	if(a>100000002){
    		break;
    	}
    }
  //  printf("%lld\n",i);
    scanf("%ld",&a);
    for(i=0;i<a;i++){
    	scanf("%ld %ld",&b,&c);
    	if(b==0){
    		ar[c]++;
    		for(j=0;j<=25;j++){
    			br[c/cr[j]]++;
    			if(c/cr[j]==0){
    				break;
    			}
    		}
    	}else if(b==1){
    		d=ar[c];
    		ar[c]=0;
    		for(j=0;j<=25;j++){
    			br[c/cr[j]]-=d;
    			if(c/cr[j]==0){
    				break;
    			}
    		}
    	}else{
    		printf("%ld\n",br[c]);
    	}
    }
    return 0;
}
