#include<iostream>
#include<cstdio>
#include<queue>
#include<vector>

#define f first 
#define s second 
#define pb push_back 
#define mp make_pair 

using namespace std;
vector < pair < int , int > > v[123456];
priority_queue < pair < int , int > > q;
int n,m,k,x,y,b[123456],t,c[123456],d[123456];

int main(){
	cin>>n>>m>>k;
	for (int i=1; i<=m; i++){
		cin>>x>>y;
		x--;
		y--;
		v[x].pb(mp(y,i));
		v[y].pb(mp(x,i));
	}
	for (int i=0; i<k; i++) {
		cin>>x>>y;
		d[y]=x;
	}
	for (int i=0; i<n; i++){
		b[i]=1000000000;
	}
	b[0]=0;
	q.push(mp(-b[0],0));

	while(!q.empty()){
		x=-q.top().f;
		y=q.top().s;
		q.pop();
		if (x>b[y]) continue;
		for (int i=0; i<v[y].size(); i++){
			int xx=v[y][i].f;
			int yy=v[y][i].s;
			if (b[xx]>b[y]+1 && (d[yy]>b[y]+1 || d[yy]==0) ) {
				b[xx]=b[y]+1;
				q.push(mp(-b[xx],xx));
			} 
		}
	}
	if (b[n-1]==1000000000) cout<<-1; else cout<<b[n-1];
	                                   



	return 0;
}
