#include <iostream>
#include <queue>
#include<cstdio>
using namespace std;
int mat[2000][2000];
struct compare
{
	bool operator()(int a,int b)
	{
		return a>b;
	}
};
int main()
{
	int n,q,i,j,k;
	int arr[2000],temp[2000];
	scanf("%d",&n);
	for(i=1;i<=n;i++)
	{
		scanf("%d",&arr[i]);
	}
	priority_queue<int> left;
	priority_queue<int,vector<int>,compare> right;
	for(i=1;i<=n;i++){
		mat[i][i]=arr[i];
		while(!left.empty())
			left.pop();
		while(!right.empty())
			right.pop();
		left.push(arr[i]);
		for(j=i+1;j<=n;j++){
			if(left.size()>right.size())
			{
				if(left.top()>=arr[j])
				{
					right.push(left.top());
					left.pop();
					left.push(arr[j]);
				}
				else{
					right.push(arr[j]);
				}
			}
			else if(left.size()==right.size()){
				if(arr[j]<=right.top()){
					left.push(arr[j]);
				}
				else if(arr[j]>right.top()){
                    left.push(right.top());
                    right.pop();
                    right.push(arr[j]);
				}
            }
			if(left.size()==right.size()){
				mat[i][j]=left.top();
			}
			else{
				mat[i][j]=left.top();
			}
		}
	}
	scanf("%d",&q);
	while(q--){
		scanf("%d%d",&i,&j);
		printf("%d\n",mat[i][j]);
	}
    return 0;
}
