#include<bits/stdc++.h>
using namespace std;
int pre[1000011],bp[8];
vector<bool> hsh(1000011);
void sieve(int n)
{
    int i,a;
    for(i=1;i<=n;i++)
        hsh[i]=true;
    hsh[1]=false;
    for(i=2;i<=n;i++)
        if(hsh[i])
    {
        a=2;
        while(a*i<=n)
        {
            hsh[a*i]=false;
            a++;
        }
    }
    bp[0]=1;
    bp[1]=10;
    bp[2]=100;
    bp[3]=1000;
    bp[4]=10000;
    bp[5]=100000;
    bp[6]=1000000;
}
bool check(int n)
{
    if(hsh[n])
        return true;
    if(n%10==2)
        return true;
    if(n%2==0)
        return false;
    int ret=0,i=0;
    while(n)
    {
        ret+=(n%10)*bp[i++];
        if(hsh[ret])
            return true;
        n/=10;
    }
    return false;
}
int main()
{
    //cin.sync_with_stdio(false);
    int i,t,l,r,n=1000001;
    sieve(n);
    pre[0]=0;
    for(i=1;i<=n;i++)
        if(check(i))
        pre[i]=pre[i-1]+1;
    else
        pre[i]=pre[i-1];
    scanf("%d",&t);
    while(t--)
    {
        scanf("%d%d",&l,&r);
        printf("%d\n",(pre[r]-pre[l-1]));
    }
    return 0;
}
