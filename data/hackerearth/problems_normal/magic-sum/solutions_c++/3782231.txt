#include <bits/stdc++.h>
#define ll long long
using namespace std;
ll a[100005];
bool visited[100005];
ll maxi = -1e18;
void dfs(ll nd , ll val , ll finale)
{
	visited[nd] = true;
	if (nd >= finale)
	{
		maxi = max(maxi , val + a[nd]);
	}
	if (nd != 1 && !visited[nd/2])
		dfs(nd / 2 , val + a[nd], finale );
		
	if (nd < finale && !visited[nd*2 + 1 ] )	
	{ 
		dfs(nd*2 + 1 , val + a[nd],finale );
	}	
	if (nd < finale && !visited[nd*2 ] )
		dfs(nd*2 , val + a[nd],finale );
		
}



int main()
{
  ll t;
  cin >> t;
  while(t--)
  { for(int i = 1; i <= 1000 ; i++)
    {
    	visited[i] = false;
    	
    }
    maxi = -1e18;
  	ll n;
  	cin >> n;
  	for(ll i = 1 ; i <= n ; i++)
  		cin >> a[i];
  		ll maxim = -1e18 ;
  	for(int i= (n+1)/2 ; i <=n ; i++ )
  	{  for(int j = 1; j <= 1000 ; j++)
    {
    	visited[j] = false;
    	
    }
  		dfs( i , 0 , (n+1)/2);
  		maxim = max(maxim , maxi);
  	}
  	cout << maxim << endl;
  }
  
  
  
    return 0;
}
