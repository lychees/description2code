#include "bits/stdc++.h"
using namespace std;
const int N = 1e5 + 5;
int parent[N];
int inp1[N];
int inp2[N];
bool used[N];
int ans = 0;
int n , m;
int find(int node){
	if(parent[node] == node){
		return node;
	}
	return parent[node] = find(parent[node]);
}
bool join(int a , int b){
	int x = find(a);
	int y = find(b);
	if(x == y){
		return 0;
	}
	parent[x] = y;
	return 1;
}
int main(){
	scanf("%d %d" , &n , &m);
	for(int i = 1 ; i <= m ; ++i){
		scanf("%d %d" , &inp1[i] , &inp2[i]);
		used[i] = 0;
	}
	for(int i = 1 ; i <= n ; ++i){
		parent[i] = i;
	}
	for(int i = m ; i >= 1 ; --i){
		if(join(inp1[i] , inp2[i])){
			used[i] = 1;
			++ans;
		}
	}
	printf("%d\n" , m - ans);
	for(int i = 1 ; i <= m ; ++i){
		if(!used[i]){
			printf("%d\n" , i);
		}
	}
}