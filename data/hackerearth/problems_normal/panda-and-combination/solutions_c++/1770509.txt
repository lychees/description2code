#include<bits/stdc++.h>
#define ll long long int
#define s(a) scanf("%lld",&a)

using namespace std;
void fun()
{
   /*static ll fact[1000005];
  ll mod=1000003;
  
  fact[0]=1;
  ll i,t;
  
  for(i=1;i<mod;i++)
  {
     long long int temp=i*fact[i-1];
     fact[i]=temp%mod;
  }*/
  //if(scanf("%lld", &a[i]) == EOF)
     
}
int main()
{
  ll t;
  s(t);
  while(t--)
  {
  ll n,m,i,ans,temp;
  s(n); s(m);
  
  if(m==1)
  {printf("%lld",n);
  }
  else
  {
     ll k = log(n)/log2(m);
     ll a[k+4];
     a[1]=m;
     for(i=2;i<=k+2;i++)
     {
        a[i] =m*a[i-1]; 
     }
     ans=0;
     while(n>=m)
     {
        ll k = log(n)/log(m);
        //cout<<k;
        temp = n/a[k];
        n=n-temp*a[k];
        ans+=temp;
        //cout<<n;
           
     }
     
     cout<<ans+n<<endl;
  }
  }
 
  return 0;    
}
