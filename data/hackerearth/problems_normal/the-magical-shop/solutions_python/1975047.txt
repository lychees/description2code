'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
A,B = map(int,raw_input().split())
string = raw_input()
today_potions = A
total_potions = 0
for i in string:
	if i == '1':
		total_potions = (total_potions + today_potions)%B
	today_potions = (today_potions*today_potions)%B

print total_potions