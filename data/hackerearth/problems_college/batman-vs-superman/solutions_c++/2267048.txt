#include<stdio.h>
#include<string.h>
char a[1000101];
long long int ans[1000101],sum[1000101],indec[1000101];
int main()
{
	long long int t;
	scanf("%lld",&t);
	while(t--)
	{
		long long int len,x,y,query,i;
		scanf("%lld %lld %lld %lld",&len,&x,&y,&query);
		
		scanf("%s",a+1);
		long long int starting,left,right,acount=0,bcount=0,low,high,mid,value=0;
		starting=1; 
		long long int adecrease=0,bdecrease=0,ending=1,j,flag=0;
		for(i=1; i<=len; i++)
		{
			acount=0;
			bcount=0;
			for(j=i; j<=len; j++)
			{
				if(a[j]=='a')
				{
					++acount;
				}
				else
				{
					++bcount;
				}
				if(acount>=x && bcount>=y)
				{
					ans[i]=len-j+1;
					flag=1;
					break;
				}
			}
			if(flag==0)
			{
				ans[i]=0;
			//	break;
			}
			flag=0;
		}
		
		sum[0]=0;
		for(i=1; i<=len; i++)
		{
			sum[i]=sum[i-1]+ans[i];
		}
		
		for(i=0; i<=len; i++)
		{
			low=1;
			high=len;
			mid=(low+high)/2;
			while(low<high)
			{
				if(ans[mid]>i)
				{
					low=mid+1;
				}
				else
				{
					high=mid;
				}
				mid=(low+high)/2;
			}
			indec[i]=high;
		}
		/*for(i=1; i<=len; i++)
		{
			printf("%lld ",index[i]);
		}
		return 0;*/
		sum[0]=0;
		while(query--)
		{
			value=0;
			scanf("%lld %lld",&left,&right);
			//value=(sum[right]-sum[left]-(diff[right]-diff[left]));
			//printf("%lld is value of ans[right] and %lld is ans[left]\n",ans[right],ans[left-1]);
			//printf("%lld is len-right %lld %lld\n",len-right,sum[index[len-right]],sum[left-1]);
			if(indec[len-right]<left)
			{
				printf("0\n");
				continue;
			}
			value=sum[indec[len-right]-1]-sum[left-1]-(indec[len-right]-left)*(len-right);
			printf("%lld\n",value);
		}
	}
	return 0;
}