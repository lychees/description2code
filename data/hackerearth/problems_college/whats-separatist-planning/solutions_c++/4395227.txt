#include <iostream>
#include<bits/stdc++.h>
using namespace std;

int main()
{
    int l,d,n;
    cin>>l>>d>>n;
    map<char,vector<string>> store;
    string temp;
    for(int i=0;i<d;i++)
    {
    	cin>>temp;
    	store[temp[0]].push_back(temp);
    }
    
    for(int i=0;i<n;i++)
    {
    	long long count=0;
    	cin>>temp;
    	int k=0;
    	vector<string> tp;
    	for(int j=0;j<l;j++)
    	{
    		string t="";
    		if(temp[k]=='(')
    		{
    			k++;
    			while(temp[k]!=')')
    			{
    				t+=temp[k++];
    			}
    			
    		}
    		else{
    			t=temp[k];
    		}
    		tp.push_back(t);
    		k++;
    	}
    	for(int j=0;j<tp[0].length();j++)
    	{
    		for(int m=0;m<store[tp[0][j]].size();m++)
    		{
    			bool f=true;
    			for(int p=0;p<l;p++)
    			{
    				if(tp[p].find(store[tp[0][j]][m][p])==-1)
    				{
    					f=false;
    					break;
    				}
    			}
    			if(f)
    				count++;
    		}
    	}
    	cout<<count<<endl;
    }
    return 0;
}
