for _ in range(int(raw_input())):
	n=int(raw_input())
	a=raw_input()
	c=0
	k=0
	flag=True
	for i in range(n):
		if i==n-1 and a[n-1]>=a[n-2]:
			c+=(k*(k+1))/2
			k=0
			flag=False
			break
		elif i<n-1 and a[i+1]>=a[i]:
			k+=1
		else:
			c+=(k*(k+1))/2
			k=0
			flag=False
	if flag:
		c+=(k*(k+1))/2
	c+=n
	print c