#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<map>
using namespace std;
 int isprime1[1000001]={0};
int examinedig(long long a)
{
    int ans=0;
   // cout<<"for"<<a;
    while(a)
    {
        if(isprime1[(a%10)]==0)
            ans++;
        a/=10;
    }
    //cout<<ans<<endl;
    return ans;
}
int main()
{
    int t;
    scanf("%d",&t);

    long long i,j;
    i=2;
    isprime1[1]=1;
    isprime1[0]=1;
    while(i*i<=1000000)
    {
        if(isprime1[i]==0)
        {
            j=i*2;
            while(j<=1000000)
            {
                isprime1[j]=1;
                j+=i;
            }
        }
        i+=1;
    }
    while(t--)
    {
        long  long n,m,i,j,a,b;
        scanf("%lld %lld",&a,&b);
        int isprime[1000001]={0};
        //isprime[0]=1;
        //isprime[1]=1;
        i=2;
        while(i*i<=b)
        {
            if(isprime1[i]==1)
            {
                i++;
                continue;
            }

            j=(a/i)*i;
            if(j<a)
                j+=i;

           /* if(j<=1000000 && isprime1[j]==0)
            	j+=i;*/
            if(i==j)
            {
                j+=i;
            }
           // j+=i;
         // cout<<"for "<<i<<"start at "<<j-a<<" or "<<j<<endl;
            // j-=a;
            while(j<=b)
            {
                isprime[j-a]=1;
                j+=i;
            }
            i++;
        }
        i=a;
        long long count=0;

        while(i<=b)
        {
          //  cout<<i<<" "<<isprime[i-a]<<endl;
          int f1=0,f2=0;
            if(isprime[i-a]!=1 && isprime1[examinedig(i)]!=1)
            {
         //    cout<<"for "<<i<<endl;
         f1=1;
                count++;
            }
        /*    if(isprime[i-a]!=1 && isprime1[examinedig(i)]!=1)
            {
                f2=1;
          //      count++;
            }
            if(f1!=f2)
            {
                cout<<i<<" "<<isprime[i-a]<<" "<<isprime1[i]<<endl;

            }*/
            i++;
        }
     /*   i=1;
        while(i<=100)
        {
            cout<<i<<" "<<isprime[i-a]<<" "<<isprime1[i]<<endl;
            i++;
        }*/
        //cout<<count<<endl;

        printf("%lld\n",count);
    }
	return 0;
}
