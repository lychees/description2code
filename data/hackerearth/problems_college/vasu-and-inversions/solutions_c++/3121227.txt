#include <iostream>
#include <algorithm>

using namespace std;

int main()
{
	int t;
	cin >> t;
	while(t--) {
		int n, k;
		cin >> n >> k;
		int cnt = 0;
		for(int i = 0;i < n;i++) {
			int val;
			cin >> val;
			cnt += (val == 1);
		}
		int lf = n - cnt;
		int mn = min(lf, k);
		int ans = cnt + mn - ((k-mn)%2);
		cout << ans << endl;
	}
    return 0;
}
