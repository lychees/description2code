#include <iostream>
#define N 100001
using namespace std;

int tot[N];
bool pr[N];
int gcd(int a,int b)
{
	if(b==0) return a;
	else return gcd(b,a%b);
}
void sieve()
{
	for(int i=1;i<=100000;++i) tot[i]=i;
	for(int i=2;i<=100000;++i)
	{
		if(pr[i]==0)
		{
			for(int j=i;j<=100000;j+=i)
			{
				pr[j]=1;
				tot[j]-=tot[j]/i;
			}
		}
	}
}
int main()
{
    sieve();
    int t,a,b;
    scanf("%d",&t);
    while(t--)
    {
    	scanf("%d %d",&a,&b);
    	int ans=0,l=gcd(a,b);
    	for(int i=1;i<=l;++i)
    	{
    		if(a%i==0 && b%i==0) ans+=tot[i];
    	}
    	printf("%d\n",ans);
    }
    return 0;
}
