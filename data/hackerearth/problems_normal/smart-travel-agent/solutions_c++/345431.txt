#include<bits/stdc++.h>
using namespace std;
int main()
{
int N,R;
int Flow[141][141]={0};
int par[141];
int cap[141]={0};
cin>>N>>R;
int x,y,z;
while(R--)
	{
	cin>>x>>y>>z;
	Flow[x][y]=z;
	Flow[y][x]=z;
	}
int s,e,c;
cin>>s>>e>>c;
cap[s]=c;
par[e]=-1;
par[s]=0;
int f=1;
int i,j;
while(f)
	{
	f=0;
	for(i=1;i<=N;i++)
		{
		for(j=1;j<=N;j++)
			{
			if(Flow[i][j]==0)
				continue;
			int tp=min(Flow[i][j],cap[i]);
			if(cap[j]<tp)
				{
				cap[j]=tp;
				par[j]=i;
				f=1;
				}
			}
		}
	}
vector<int> l;
int MaxFlow=cap[e];
MaxFlow--;
int cnt=0;
while(e)
	{
	cnt++;
	l.push_back(e);
	e=par[e];
	if(cnt>N+1)
		return 1;
	}
for(i=l.size()-1;i>=0;i--)
	{
	printf("%d ",l[i]);
	}
int Ans=c/MaxFlow;
if(c%MaxFlow!=0)
	Ans++;
printf("\n%d\n",Ans);
return 0;
}
