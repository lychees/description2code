#include <bits/stdc++.h>

using namespace std;

int a[100000 + 2];
int l[100000 + 2];
int r[100000 + 2];

int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int n,k,i;
		scanf("%d%d",&n,&k);
		for(i=0;i<n;i++)
		{
			scanf("%d",&a[i]);
		}
		stack < int > s;
		l[0] = 0;
		for(i=0;i<n;i++)
		{
			if(i == 0)
			{
				l[0] = 0;
				s.push(0);
			}
			else
			{
				while(!s.empty() && a[s.top()] < a[i])
					s.pop();
				if(!s.empty())
					l[i] = s.top() + 1;
				else
					l[i] = 0;
				s.push(i);
			}
		}
		while(!s.empty())
			s.pop();
		for(i=n-1;i>=0;i--)
		{
			if(i == n-1)
			{
				r[i] = n-1;
				s.push(n-1);
			}
			else
			{
				while(!s.empty() && a[s.top()] <= a[i])
					s.pop();
				if(!s.empty())
					r[i] = s.top() - 1;
				else
					r[i] = n-1;
				s.push(i);
			}
		}
		long long ans = 0;
		for(i=0;i<n;i++)
		{
			if(a[i] > k)
			{
				ans += (i - l[i] + 1LL)*(r[i] - i + 1LL);
			}
		}
		printf("%lld\n",ans);
	}
	return 0;
}