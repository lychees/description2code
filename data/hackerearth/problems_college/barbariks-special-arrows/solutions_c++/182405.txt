#include<bits/stdc++.h>
using namespace std;
#define all(a) a.begin(),a.end()
 
bool vis[1005];
vector<int> adj[1005];
int match[1005];
 
bool bpm(int u){
	if(vis[u]) return false;
	vis[u] = 1;
	int sz = adj[u].size(),i,v;
	for(i = 0;i<sz;i++){
		v = adj[u][i];
		if(match[v]==-1){
			match[v] = u;
			return true;
		}
	}
	for(i = 0;i<sz;i++){
		v = adj[u][i];
		if(bpm(match[v])){
			match[v] = u;
			return true;
		}
	}
	return false;
}

int main(){
	int n,t,i,x[1005],y[1005];
	scanf("%d",&t);
	while(t--){
		vector<int> setx,sety;
		scanf("%d",&n);
		for(i = 0;i<n;i++){
			scanf("%d %d",&x[i],&y[i]);
			setx.push_back(x[i]);
			sety.push_back(y[i]);
		}
		sort(all(setx));
		sort(all(sety));
		int N = setx.size();
		for(i = 0;i<N;i++) {
			adj[i].clear();
		}
		for(i = 0;i<n;i++){
			x[i] = lower_bound(all(setx),x[i]) - setx.begin();
			y[i] = lower_bound(all(sety),y[i]) - sety.begin();
			adj[x[i]].push_back(y[i]);
		}
		int cnt = 0;
		memset(match,-1,sizeof(match));
		for(i = 0;i<N;i++){
			memset(vis,0,sizeof(vis));
			if(bpm(i))
				cnt++;
		}
		printf("%d\n",cnt);
	}
	return 0;
}