#include <iostream>
#include <cstdio>
#include <vector>
#include <map>
#define mod 1000000007
#define MAX 100005
using namespace std;
int KL[MAX],Leader[MAX];
 
int find_leader(int x)
{
	while(x!=Leader[x])
	{
		Leader[x]=Leader[Leader[x]];
		x=Leader[x];
	}
	return x;
}
 
int main()
{
    int n,m,u,v,uleader,vleader;
    long long ans=1;
    cin>>n>>m;
    for(int i=1;i<=n;++i)
    cin>>KL[i];
    for(int i=1;i<=n;++i)
    Leader[i]=i;
    while(m--)
    {
    	cin>>u>>v;
    	uleader=find_leader(u);
    	vleader=find_leader(v);
    	if(KL[uleader]>KL[vleader])
    	Leader[vleader]=uleader;
    	else
    	Leader[uleader]=vleader;
    }
    map <int,int> HKL;
    for(int i=1;i<=n;++i)
    {
    	uleader=find_leader(i);
    	if(KL[i]==KL[uleader])
    	HKL[uleader]++;
    }
    map <int,int>::iterator it=HKL.begin();
    for(;it!=HKL.end();++it)
    ans= ((it->second)*ans)%mod;
    cout<<ans<<endl;
    return 0;
}