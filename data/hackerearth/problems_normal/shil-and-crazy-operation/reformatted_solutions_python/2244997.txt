n, t = map(int, raw_input().split())
a = [0]+map(int, raw_input().split())
p = [0]+map(int, raw_input().split())
q = [i for i in range(n)]


def app(p, x):
    res = [0]*len(p)
    for i in range(len(p)):
        res[i] = x[p[i]]
    return res


while t > 0:
    if t % 2:
        a = app(p, a)
    p = app(p, p)
    t /= 2
print " ".join(map(str, a[1:]))
