#include <iostream>
using namespace std;

int main()
{
    long long ans,t,n,i,sub;
    char s[1000009];
    scanf("%lld",&t);
    while(t--){
    	scanf("%lld\n%s",&n,s);
    	if(n==1)
    		printf("1\n");
    	else{
    		ans=0;
    		sub=1;
    		for(i=1;i<n;i++){
    			if(s[i]>=s[i-1])
    				sub++;
    			else{
    				ans+=(sub*(sub+1)/2);
    				sub=1;
    			}
    		}
    		ans+=(sub*(sub+1)/2);
    		printf("%lld\n",ans);
    	}	
    }
    return 0;
}
