#include <bits/stdc++.h>

using namespace std;

#define DEBUG ON

#ifdef DEBUG
#define dout(...) cout<<__VA_ARGS__
#else
#define dout(...) do_nothing()
#endif

void do_nothing() {}

vector<int> alphabet;
vector<string> words;

bool my_sort(string lhs, string rhs)
{
    int len1, len2;
    len1 = lhs.size();
    len2 = rhs.size();

    int min_len = len1<len2?len1:len2;
    int i;
    for(i=0;lhs[i] == rhs[i] && i<min_len;i++);
    if(i==len1 && i==len2)
        return 0;
    else if(i==len1 && len1 < len2)
        return 1;
    else if ((i==len2 && i==len1))
        return 0;
    else if(i==len2 && len2 < len1)
        return 0;
    else
        return alphabet[ lhs[i] - 'a' ] < alphabet[ rhs[i] - 'a' ];
}


int main()
{
    int no_tests;
    cin>>no_tests;

        int no_words;
    while(no_tests--)
    {
        string e_str;
        cin>>e_str;
        alphabet.assign(27, 0);
        e_str = "0" + e_str;
        for(int i=1;i<=26;i++)
            alphabet[e_str[i] - 'a' ] = i;

        cin>>no_words;
        words.assign(no_words,"0");
        for(int i=0;i<no_words;i++)
            cin>>words[i];
        sort(words.begin(), words.end(), &my_sort);
        for(int i=0;i<no_words;i++)
            cout<<words[i]<<"\n";
    }

    return 0;
}