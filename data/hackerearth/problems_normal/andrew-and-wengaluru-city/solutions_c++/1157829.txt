#include<bits/stdc++.h>
using namespace	std;

#define rep(i,a,b) for(int i = a; i < b; i++)
#define S(x) scanf("%d",&x)
#define P(x) printf("%d\n",x)
 
typedef long long int LL;
const int mod = 1000000007;

int main(){
	int t,n,A[100010]={0};S(t);
	int lefthigh[100010],righthigh[100010];
	memset(lefthigh,-1,sizeof(int));
	memset(righthigh,-1,sizeof(int));

	while(t--){
		S(n);
		for(int i=0;i<n;i++) S(A[i]);
		
		for(int i=0;i<n;i++) lefthigh[i] = max((i!=0)?lefthigh[i-1]:0,A[i]);
		for(int i=n-1;i>=0;i--) righthigh[i] = max( (i<n-1)?righthigh[i+1]:0 , A[i]);
		
		LL ans=0;
		for(int i=0;i<n;i++)
		{
			ans= ans+ abs( A[i]- min(lefthigh[i],righthigh[i]));
			if(ans >= mod) ans-= mod;
		}
		printf("%lld\n",ans);
	}
return 0;
}
	