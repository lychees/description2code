#include <cstdio>
#include <cstring>
#include <algorithm>
#include <vector>
using namespace std;

#define MAX 100010
#define ll long long

int a[MAX];
int t, n, s, k;
int l, r;
ll res;

int main(){
	scanf("%d", &t);
	while (t--){
		scanf("%d%d%d", &s, &n, &k);
		for (int i = 0; i < n; i++)
			scanf("%d", &a[i]);
		sort(a, a + n);
		l = 0; r = n - 1;
		res = 0;
		
		while (r >= 0 && s - a[r] <= k) r--;
		for (int i = 0; i < n - 1; i++){
			if (a[i] > k)
				res += (n - i - 1);
			else{
				while ((l < n) && (l <= i || a[l] - a[i] <= k)) l++;

				if (r >= l)
					res += (n - i - 1);
				else{
					res += n - l;
					if (r > i)
						res += r - i;
				}
			}
		}
		printf("%lld\n", res);
	}
	return 0;
}