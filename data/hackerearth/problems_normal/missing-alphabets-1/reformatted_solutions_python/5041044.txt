n = int(raw_input().strip())
for i in range(0, n):
    s1 = raw_input().strip()
    d0 = {}
    for index, each_char in enumerate(s1):
        d0[each_char] = index
    n1 = int(raw_input().strip())
    L = []
    for j in range(0, n1):
        str1 = raw_input().strip()
        tmplst = [d0[char] for char in str1]
        L.append(tuple(tmplst))
    L.sort()
    for each in L:
        print "".join([s1[index] for index in each])
