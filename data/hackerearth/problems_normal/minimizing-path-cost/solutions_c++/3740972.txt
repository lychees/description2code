#include <iostream>
#include <string>
#include <map>

using namespace std;

#define INF 1000000000

int N, M, Q;
map <string, int> city_to_id;
int AdjMat[101][101];

void floydWarshall()
{
    for (int k = 0; k < N; k++)
    {
        for (int i = 0; i < N; i++)
        {
            for (int j = 0; j < N; j++)
            {
                AdjMat[i][j] = min(AdjMat[i][j], AdjMat[i][k] + AdjMat[k][j]);
            }
        }
    }
}

int main()
{
    cin >> N >> M;

    city_to_id.clear();

    for (int i = 0; i < N; i++)
    {
        for (int j = 0; j < N; j++)
        {
            if (i == j)
                AdjMat[i][j] = 0;
            else
                AdjMat[i][j] = INF;
        }
    }

    for (int i = 0; i < N; i++)
    {
        string S;

        cin >> S;
        city_to_id[S] = i;
    }

    for (int i = 0; i < M; i++)
    {
        string U, V;
        int W;

        cin >> U >> V >> W;
        AdjMat[city_to_id[U]][city_to_id[V]] = W;
        AdjMat[city_to_id[V]][city_to_id[U]] = W;
    }

    floydWarshall();

    cin >> Q;

    for (int i = 0; i < Q; i++)
    {
        string U, V;
        
        cin >> U >> V;
        cout << AdjMat[city_to_id[U]][city_to_id[V]] << endl;
    }

    return 0;
}

