#include<bits/stdc++.h>
#define mod 1000000007
#define ll long long int
#define s(x) scanf("%d", &x)
using namespace std;
ll a[150][150],k,n;
void exp(){
    ll identity[150][150];       
        for(int i=1; i<=n; i++){
                for(int j=1; j<=n; j++){
                        identity[i][j]=0;
                }identity[i][i]=1;
        }
        while(k>0){
                if(k%2==1){
            ll temp[150][150]={0};
                        for(int i=1; i<=n; i++){
                                for(int j=1; j<=n; j++){
                                        for(int k=1; k<=n; k++){
                                                temp[i][j]+= (a[i][k]*identity[k][j]);
                                                temp[i][j]%=mod;        
                                        }
                                }
                        }
                        for(int i=1; i<=n; i++){
                                for(int j=1; j<=n; j++){
                                        identity[i][j]=(temp[i][j]%mod);
                                }
                        }
                }
        ll temp[150][150]={0};
                for(int i=1; i<=n; i++){
                        for(int j=1; j<=n; j++){
                                for(int k=1; k<=n; k++){
                                        temp[i][j]=temp[i][j]%mod + (a[i][k]*a[k][j]);
                                        temp[i][j]%=mod;        
                                }
                        }
                }
                for(int i=1; i<=n; i++){
                        for(int j=1; j<=n; j++){
                                a[i][j]=temp[i][j];
                                a[i][j]%=mod;
                        }
                }
                        
        k/=2;           
        }
    for(int i=1; i<=n; i++){
        for(int j=1; j<=n; j++){
            a[i][j]=identity[i][j];
            a[i][j]%=mod;
        }
    }
}
 
int main(){
	int t; cin>>t;
	while(t--){
        int temp;
        temp=s(n); s(k);
        for(int i=1; i<=n; i++){
                for(int j=1; j<=n; j++){
                        temp=s(a[i][j]);
                }
        }
        exp();
        for(int i=1; i<=n; i++){
                for(int j=1; j<=n; j++){
                        cout<<a[i][j]<<" ";
                }cout<<endl;
        }
	} 
}