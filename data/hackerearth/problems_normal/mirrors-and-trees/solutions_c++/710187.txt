#include <iostream>
#include<string.h>
using namespace std;

int main()
{
   int t,n,a[262145],left[18],leftCnt;
   bool check[262145];
   cin>>t;
   int i,j,k,l;
   int start=1,end=1;
   		int startTmp,endTmp;
   		bool started,ended;
   		
   for(i=0;i<t;i++)
   {
   		cin>>n;
   		for(j=1;j<=n;j++)
   		{
   			cin>>a[j];
   			check[j]=false;
   		}
   		leftCnt=0;
   		start=end=1;
   		
		while(1)
   		{
   			started=false;
   			for(j=start;j<=end;j++)
   			{
   				if(!started&&a[j])
   				{
   					started=true;
   					startTmp=j;
   				}
   				if(a[j])
   				{
   					endTmp=j;
   				}
   			}
   			if(started)
   			{
   				if(endTmp!=startTmp)
   					left[leftCnt++]=a[startTmp];
   				cout<<a[endTmp]<<endl;
   			}
   			start=2*start;
   			end=2*end+1;
   			if(end>n)
   				break;
   		}
   		for(j=0;j<leftCnt;j++)
   			cout<<left[j]<<endl;
   		cout<<endl;
   		
   }
   return 0;
}
