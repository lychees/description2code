#include<iostream>

using namespace std;

long long t;
int a[100008], b[100008], c[100008], d[100008], e[100006];

void dd(int x){
    if(c[x] > 0)
        return;

    d[++d[0]] = x;
    c[x] = 1;
    dd(b[x]);
}

int main(){
	ios_base::sync_with_stdio(false);

    int n, m;

    cin >> n >> t;

    for(int i = 1; i <= n; ++i){
        cin >> a[i];
    }

	for(int i = 1; i <= n; ++i){
        cin >> b[i];
	}


	for(int i = 1; i <= n; ++i){
        d[0] = 0;
        dd(i);
        if(d[0] > 0){
            m = t % d[0];
            for(int j = 1; j <= d[0]; ++j){
                e[d[j]] = a[d[((j - 1 + m) % d[0]) % d[0] + 1]];
            }
        }
	}

	for(int i = 1; i <=n; ++i){
        cout << e[i] << ' ';
	}

return 0;
}
