#include<bits/stdc++.h>
using namespace std;
int a[200005],BIT[200005],n;
void update(int x,int val)
{
    while(x<=n)
    {
        BIT[x]+=val;
        x+=x&-x;
    }
}
int query(int x)
{
    int sum=0;
    while(x>0)
    {
        sum+=BIT[x];
        x-=x&-x;
    }
    return sum;
}
int main()
{
    int q;
    cin>>n>>q;
    string s;
    bool a10[n+1];
    for(int i=1;i<=n;i++)
    {
        cin>>s;
        int n=s.length()-1;
        if(s[0]==s[n])
        {
            a10[i]=true;
            update(i,1);
        }
        else a10[i]=false;
    }
    while(q--)
    {
        int qtype;
        cin>>qtype;
        if(qtype==1)
        {
            int l,r;
            cin>>l>>r;
            cout<<query(r)-query(l-1)<<endl;
        }
        else
        {
            int pee;
            cin>>pee;
            string see;
            cin>>see;
            int no=see.length()-1;
            if(see[0]==see[no] && a10[pee]==false)
            {
                update(pee,1);
                a10[pee]=true;
            }
            else if(see[0]!=see[no] && a10[pee]==true)
             {
                 update(pee,-1);
                 a10[pee]=false;
             }
        }
    }


}
