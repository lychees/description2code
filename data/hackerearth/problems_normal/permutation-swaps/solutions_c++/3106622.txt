#include <bits/stdc++.h>

using namespace std;

#define ll long long
#define ull unsigned long long
#define mp make_pair
#define pb push_back
#define RI(x) scanf("%d", &x)
#define RL(x) scanf("%I64d", &x)
#define RD(x) scanf("%f", &x)

int p[100007];
int q[100007];
int assp[100007];
int assq[100007];
int parent[100007];

void dsu_init()
{
    for (int i=0; i<100007; ++i)
        parent[i] = i;
}

int dsu_get(int v)
{
    if (v == parent[v])
        return v;
    return parent[v] = dsu_get(parent[v]);
}

void dsu_unite(int a, int b)
{
    a = dsu_get(a);
    b = dsu_get(b);
    if (a != b)
        parent[b] = a;
}

int main()
{
    int t;
    int n, m;
    int a, b;
    bool ans;
    RI(t);
    while (t--)
    {
        dsu_init();
        ans = true;
        RI(n); RI(m);
        for (int i=1; i<=n; ++i)
        {
            RI(p[i]);
            assp[p[i]] = i;
        }
        for (int i=1; i<=n; ++i)
        {
            RI(q[i]);
            assq[q[i]] = i;
        }
        for (int i=0; i<m; ++i)
        {
            RI(a); RI(b);
            dsu_unite(a, b);
        }
        for (int i=1; i<=n; ++i)
        {
            if (assp[i] != assq[i])
            {
                if (dsu_get(assp[i]) != dsu_get(assq[i]))
                {
                    ans = false;
                    break;
                }
            }
        }
        if (ans)
            printf("YES\n");
        else
            printf("NO\n");
    }




    return 0;
}

