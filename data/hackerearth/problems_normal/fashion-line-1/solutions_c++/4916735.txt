    #include <iostream>
    using namespace std;
     
    int main()
    {
    	int t;
    	cin>>t;
    	while(t--)
    	{
    		int n,k,l,r;
    		cin>>n>>k>>l>>r;
    		
    		string a,b;
    		cin>>a>>b;
    		
    		int special[256];
    		for(int i=0;i<256;i++)
    			special[i]=0;
    		
    		for(int i=0;i<b.size();i++)
    			special[b[i]]++;
    		
    		int count[10001];
    		for(int i=0;i<10001;i++)
    			count[i]=0;
    			
    		for(int i=0;i<a.size();i++)
    			count[i+1] += special[ (int)a[i] ];
    			
    		for(int i=2;i<=a.size();i++)
    			count[i]+=count[i-1];
    			
    		int co=0;
    		for(int i=1;i<=n;i++)
    		{
    			int low=count[i-1]+l;
    			int high=count[i-1]+r;
    			int s=i-1,e=n+1;
    			int st,en;
    			while(e-s>1)
    			{
    				int m=(s+e)/2;
    				if( count[m] < low )
    					s=m;
    				else
    					e=m;
    			}
    			st=e;
    			
    			s=i-1,e=n+1;
    			while(e-s>1)
    			{
    				int m=(s+e)/2;
    				if( count[m] <= high )
    					s=m;
    				else
    					e=m;
    			}
    			en=s;
    			
    		
    			if(en-st>=0)
    				co += en-st+1;
    		}
    		
    		cout<<co<<"\n";
    	}
        return 0;
    }