#include <bits/stdc++.h>
#define ll long long int

using namespace std;

int main()
{
	int n,q,x,a[110][110],i,j;
	cin>>n>>q;
	for(int i=0;i<n;i++)
		for(int j=0;j<n;j++)
			cin>>a[i][j];
	for(int l=0;l<q;l++)
	{
		cin>>x;
		x=x%360;
		if(x==0)
			for(i=0;i<n;i++)
			{
				for(j=0;j<n;j++)
					cout<<a[i][j]<<" ";
				//if(i<n-1)
				cout<<endl;
			}
		else if(x==90)
			for(j=0;j<n;j++)
			{
				for(i=n-1;i>=0;i--)
					cout<<a[i][j]<<" ";
				//if(j<n-1)
				cout<<endl;
			}
		else if(x==180)
			for(i=n-1;i>=0;i--)
			{
				for(j=n-1;j>=0;j--)
					cout<<a[i][j]<<" ";
				//if(i>0)
				cout<<endl;
			}
		else
			for(j=n-1;j>=0;j--)
			{
				for(i=0;i<n;i++)
					cout<<a[i][j]<<" ";
				//if(j>0)
				cout<<endl;
			}
		cout<<endl;
	}
	return 0;
}