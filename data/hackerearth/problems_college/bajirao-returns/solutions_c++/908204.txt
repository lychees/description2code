#include <iostream>
using namespace std;
int main(int argc, char const *argv[])
{
	int A[105][105];
	long B[105][105];
	int n, x, y;
	long max = -1;
	cin >> n;
	for (int i = 1; i <= n; i++) {
		for (int j = 1; j <= n; j++) {
			cin >> A[i][j];
		}
	}
	for (int i = n; i >= 1; i--) {
		for (int j = 1; j <= n; j++) {
			if (i == n) {
				B[i][j] = A[i][j];
			} else {			
				x = j;
				while (x != 0) {
					if (B[i + 1][x] > max) max = B[i + 1][x];
					y = x;
					while (y <= n) {
						if (B[i + 1][y] > max) max = B[i + 1][y];
						y = 2 * y;
					}
					x /= 2;
				}
				B[i][j] = A[i][j] + max;
				max = -1;
			}
		}
	}
	/*
	cout << endl;
	for (int i = 1; i <= n; i++) {
		for (int j = 1; j <= n; j++) {
			cout << B[i][j] << " ";
		}
		cout << endl;
	}
	*/
	for (int j = 1; j <= n; j++) {
		if (B[1][j] > max) max = B[1][j];
	}
	cout << max << endl;
	return 0;
}
/*
1 2 3 4
5 3 2 8
9 1 4 3
2 4 9 1

22 23 24 25
18 16 15 21
13 5 13 7 
2 4 9 1
*/