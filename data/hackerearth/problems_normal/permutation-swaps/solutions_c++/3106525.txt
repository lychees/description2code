# include <bits/stdc++.h>
using namespace std;

typedef long long ll;
const int cmx = 1e5 + 5;

int a[cmx];
int b[cmx];
int p[cmx];

int find(int x){
  return x == p[x] ? x : p[x] = find(p[x]);
}

int merge(int x, int y){
  int xx = find(x);
  int yy = find(y);
  p[xx] = yy;
}

int main(){ 
ios_base::sync_with_stdio(0); cin.tie(0); cout.tie(0);

int t; cin >> t;
while(t--){
  int n, m;
  cin >> n >> m;
  
  map<int,int> myMap;
  for(int i = 0; i <= n; i++) p[i] = i;
  for(int i = 1; i <= n; i++) {
    cin >> a[i];
    myMap[a[i]] = i;
  }
  for(int i = 1; i <= n; i++) cin >> b[i];
  for(int i = 1; i <= m; i++) {
    int x, y;
    cin >> x >> y;
    merge(x,y);
  }
  bool ok = true;
  for(int i = 1; i <= n; i++) {
    if(b[i] == a[i]) continue;
    int xx = find(myMap[a[i]]);
    int yy = find(myMap[b[i]]);
    if(xx != yy){
      ok = false; break;
    }
  }
  if(ok) cout << "YES\n"; 
  else cout << "NO\n";
}
 return 0;
 }