#include <bits/stdc++.h>
using namespace std;
map<char,int> hm;
bool comp(string a,string b){
	for(int i=0;i<min(a.length(),b.length());i++){
		if(a[i]==b[i])
			continue;
		if(hm[a[i]]<hm[b[i]])
			return true;
		else
			return false;
	}
	if(a.length()<=b.length())
		return true;
	else
		return false;
}
int main(){
	int t;
	scanf("%d",&t);
	while(t--){
		char arr[30];
		scanf("%s",arr);
		hm.clear();
		for(int i=0;i<strlen(arr);i++){
			hm[arr[i]]=i;
		}
		int n;
		scanf("%d",&n);
		vector<string> vec;
		for(int i=0;i<n;i++){
			string s;
			cin>>s;
			vec.push_back(s);
		}
		sort(vec.begin(),vec.end(),comp);
		for(int i=0;i<vec.size();i++){
			cout<<vec[i]<<"\n";
		}
	}
	return 0;
}