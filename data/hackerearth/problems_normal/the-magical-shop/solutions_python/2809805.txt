a, b = [int(i) for i in raw_input().split(" ")]
days = 0
for i in raw_input():
	days = days if i != '1' else (days + a) % b
	a = (a*a) % b
print days