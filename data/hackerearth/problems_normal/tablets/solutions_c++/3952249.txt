#include<bits/stdc++.h>
#include<algorithm>
using namespace std;
#define fr(i,a,b) for(int i=a;i<b;i++)
#define frn(i,a,b) for(int i=a;i>b;i--)
#define si(x) scanf("%d",&x)
#define sll(x)  scanf("%lld",&x)
#define pln printf("\n")
#define pi(x) printf("%d",x)
#define pll(x) printf("%lld",x)
typedef long long ll;
ll MOD=1000000007;
ll pw(ll a,ll b){
  ll r=1;
  while(b>0){
     if(b&1){
       r=(r*a)%MOD;
        }
     b=b>>1;
     a=(a*a)%MOD;
  }
return r;
}
ll dp[101010]={};
ll dp2[101010]={};
ll in[101010];
int main(){
  int n;
  si(n);
  fr(i,0,n){
    sll(in[i]);
  }
 /*
  fr(i,1,n){
     if(in[i]>in[i-1]){
        dp[i]=dp[i-1]+1;
     }
     else if(in[i]<in[i-1]){
        dp[i]=dp[i-1]-1;
     }
     else{
        dp[i]=0;
     }
  }
  ll mn=0;
  ll ans=n;
   ans+=dp[0];
  fr(i,1,n){
      ans+=dp[i];
   if(dp[i]<dp[i-1]){
     mn=dp[i];
   }
   else{
     if(mn!=0)
       ans+=(abs(mn)*(abs(mn)+1));
     mn=0;
   }
  }
  if(mn!=0){
    ans+=(abs(mn)*(abs(mn)+1));
  }
 // ans+=(n*mn);
note:not working for diff series of increasing order
9
10 11 12 13 24 5 6 7 10

*/

 fr(i,1,n){
    if(in[i]>in[i-1]){
        dp[i]=dp[i-1]+1;
    }
 }
 ll ans=n;
 ans+=dp[n-1];
 frn(i,n-2,-1){
     if(in[i]>in[i+1] && dp[i]<=dp[i+1]){
        dp[i]=dp[i+1]+1;
     }
  ans+=dp[i];
 }

 pll(ans);pln;
return 0;
}
