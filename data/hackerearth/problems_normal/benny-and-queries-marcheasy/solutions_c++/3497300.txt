#include <bits/stdc++.h>
using namespace std;
#define ll long long int
int a[20555555][2],ww[100],sz[20555555],root[20555555],m,ind[20555555];
int ans,n=0,v,l,r,x;
void add(int prev_root, int now_root, int x) {
    for (int i=21;i>=0;i--) {
        int edge=(x & (1 << i));
        if (edge!=0) edge=1;
        v++;
        ww[i]=now_root;
        ind[v]=n;
        a[now_root][edge]=v;
        a[now_root][1-edge]=a[prev_root][1-edge];
        sz[now_root]=sz[a[now_root][1-edge]];
        now_root=v;
        prev_root=a[prev_root][edge];
    }
    sz[now_root]+=sz[prev_root]+1;
    for (int i=0;i<=21;i++) sz[ww[i]]=sz[a[ww[i]][0]]+sz[a[ww[i]][1]];
 }
void findxor(int v, int l, int x) {
    for (int i=21;i>=0;i--) {
        int edge=(x & (1 << i));
        if (edge!=0) edge=1;
        if (ind[a[v][1-edge]]>=l) {
            v=a[v][1-edge];
            ans+=(1-edge)*(1 << i);
        }
        else {
            v=a[v][edge];
            ans+=edge*(1 << i);
        }
     }
}

int main() {
       int n1,q;         
    scanf("%d %d",&n1,&q);

        for(int i=1;i<=n1;i++){
            scanf("%d",&x);
            n++;
            v++;
            root[n]=v;
            ind[v]=n;
            add(root[n-1],root[n],x);
        }
        while(q--) {
            scanf("%d%d%d",&l,&r,&x);
            ans=0;
            findxor(root[r],l,x);
            printf("%d\n",ans^x);
        }
        
    
    return 0;
}