#include<bits/stdc++.h>
using namespace std;
#define ll long long int
#define mod 1000000007
ll n, a[2005];
ll dp[2005][2005];
ll poo(ll first, ll last)
{
	//cout<<first<<" "<<last<<"\n";
	if(last<0)
		return 0;
	if(first>=n)
		return 0;
	if(first==last)
		return a[first]*n;
	if(dp[first][last]!=-1)
		return dp[first][last];
	return dp[first][last]=max(a[first]*(first+n-last)+poo(first+1, last),
				a[last]*(first+n-last)+poo(first, last-1));
}

int main()
{
	memset(dp, -1, sizeof(dp));
	cin>>n;
	for(int i=0;i<n;i++)
		cin>>a[i];
	cout<<poo(0, n-1)<<"\n";
	return 0;
}