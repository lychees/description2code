#include<bits/stdc++.h>
using namespace std;

int edg[1300], grp[1300];
vector <int> v[1300];

int main(){
	int tc;
	scanf("%d",&tc);

	while(tc--){
		for(int i=0; i<1300; i++){
			if(v[i].size()) {
				v[i].clear();
			}
			edg[i]=0;
			grp[i]=0;
		} 
		
		int m, n; 
		scanf("%d%d",&n,&m);
		
		while(m--){
			int x,y; 
			scanf("%d%d",&x,&y);
			
			v[x].push_back(y);
			edg[y]++;
		}
		
		queue <int> q;
		for(int i=1; i<=n; i++){
			if(!edg[i]) {
				q.push(i);
			}
		}
		
		int ans = 0;
		while(!q.empty()){
			int cur = q.front();
			q.pop();
			ans++;
			
			grp[cur]=1;
			
			for(int i=0; i<v[cur].size(); i++){
				int node = v[cur][i];
				if(edg[node]>0) {
					edg[node]--;
				}
				if(!edg[node] and !grp[node]){
					q.push(node);
					grp[node] = 1;
				}
			}
		}
		printf("%d\n",ans);
	}
	return 0;
}