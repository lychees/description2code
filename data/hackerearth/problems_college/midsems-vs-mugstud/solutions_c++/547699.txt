#include <cstdio>
#include <iostream>
#include <vector>
#include <algorithm>
#include <cstring>
#include <string>
#include <cstdlib>
#include <cmath>
#include <ctype.h>
#include <stack>
#include <queue>
#include <limits.h>
#include <fstream>
#include <map>
#include <set>
#include <sstream>
#include <queue>

#define rep(i, a) for(int i = 0; i < a; i++)
#define rep1(i, a) for(int i = 1; i <= a; i++)
#define fo(i, a, b) for(int i = a; i < b; i++)
#define defo(i, a, b) for(int i = a; i >= b; i--)
#define ll long long int
#define pb push_back
#define mp make_pair
#define sz(a) ((int)(a.size()))
#define SET(x, a) memset(x, a, sizeof(x));
#define x first
#define y second
#define si 100005
#define mod 1000000007
using namespace std;
int main(){
    int test;
    cin>>test;
    while(test--){
        int arr[55][55][55],brr[55][55][55];
        int i,j,k,n;
        scanf("%d",&n);
        for(i=0;i<n;i++){
            for(j=0;j<n;j++){
                for(k=0;k<n;k++){
                    scanf("%d",&arr[i][j][k]);
                }
            }
        }
        for(i=0;i<n;i++){
            for(j=0;j<n;j++){
                for(k=0;k<n;k++){
                    brr[i][j][k] = arr[i][j][k];
                    int c = -1,fi=0,fj=0,fk=0;
                    if(i-1>=0){
                        brr[i][j][k]-=arr[i-1][j][k];
                        fi=1;
                        c++;
                    }
                    if(j-1>=0){
                        brr[i][j][k]-=arr[i][j-1][k];
                        fj=1;
                        c++;
                    }
                    if(k-1>=0){
                        brr[i][j][k]-=arr[i][j][k-1];
                        fk=1;
                        c++;
                    }
                    if(fi==1&&fj==1&&fk==0)
                        brr[i][j][k]+=arr[i-1][j-1][k];
                    if(fi==1&&fj==0&&fk==1)
                        brr[i][j][k]+=arr[i-1][j][k-1];
                    if(fi==0&&fj==1&&fk==1)
                        brr[i][j][k]+=arr[i][j-1][k-1];
                    if(fi==1&&fj==1&&fk==1)
                        brr[i][j][k]+=arr[i-1][j-1][k]+arr[i-1][j][k-1]+arr[i][j-1][k-1]-arr[i-1][j-1][k-1];
                    cout<<brr[i][j][k]<<" ";
                }
                cout<<"\n";
            }
        }
    }
    return 0;
}
