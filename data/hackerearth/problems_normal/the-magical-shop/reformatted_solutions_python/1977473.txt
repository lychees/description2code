inp = raw_input()
inp = inp.split()
a = long(inp[0])
b = long(inp[1])
string = raw_input()
total = 0
for character in string:
    if character == '1':
        total = (total+a) % b
    a = (a*a) % b
print total
