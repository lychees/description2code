#include<stdio.h>
#include<map>
#include<set>
#include<algorithm>
#include<stdlib.h>
#include<iostream>
#include<vector>


using namespace std ;

#define MAXN 110
#define INFN 100000000
typedef long long LL ;
map<string,int> mp ;
LL adj[MAXN][MAXN] ;

int read_inp(){
	//FILE *fp = freopen("ul2.txt","r",stdin) ;
	int n,m ;
	cin>>n>>m ;
	for(int i=1;i<=n;i++){
		string temp ;
		cin>>temp ;
		mp[temp]=i ;
	}
	
	for(int i=1;i<MAXN;i++){
		for(int j=1;j<MAXN;j++){
			if(i==j)
				adj[i][j] = 0 ;
			else{
				adj[i][j] = INFN ;
			}
		}
	}
	
	for(int i=1;i<=m;i++){
		string s,d ;
		int dis ;
		cin>>s>>d>>dis ;
		adj[mp[s]][mp[d]] = min(adj[mp[s]][mp[d]],(LL)dis) ;
		adj[mp[d]][mp[s]] = min(adj[mp[s]][mp[d]],(LL)dis) ;
	}
	
	
	for(int k=1;k<=n;k++){
		for(int i=1;i<=n;i++){
			for(int j=1;j<=n;j++){
				adj[i][j] = min(adj[i][j],adj[i][k]+adj[k][j]) ;
			}
		}
	}
	
	int Q ;
	cin>>Q ;
	for(int i=1;i<=Q;i++){
		string s,d ;
		cin>>s>>d  ;
		
		cout<<adj[mp[s]][mp[d]]<<endl ;
	}
}

int main(){
	read_inp() ;
}

