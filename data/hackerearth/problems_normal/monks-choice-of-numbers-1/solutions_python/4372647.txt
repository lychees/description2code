t=int(raw_input())
while t>0:
	c=[]
	n,k=map(int,raw_input().split())
	a=map(int,raw_input().split())
	for i in a:
		c.append(bin(i).count("1"))
	s=sorted(c,reverse=True)
	c=s[:k]
	res=0
	for j in c:
		res=res+j
	print res
	t=t-1