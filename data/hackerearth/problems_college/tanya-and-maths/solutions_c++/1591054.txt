#include<bits/stdc++.h>
using namespace std;
long long int mod = 1000000007;
long long int power(long long int two, long long int n)
{
	long long int x;
	if (n == 1)
		return two % mod;
	else {
		x = power(two, n / 2) % mod;
		if (n % 2 != 0) 
			return (((x * x) % mod) * two) % mod;
		else
			return (x * x) % mod;
	}
}

int gcd(int a, int b)
{
	if (b == 0)
		return a;
	else 
		gcd(b, a % b);
}
long long int totient(long long int m)
{
	long long int r, i;
	r = m;
	for (i = 2; (i * i) <= m; i++) {
		if (m % i == 0) {
			r = r - (r / i);
		}
		while (m % i == 0)
			m = m / i;
	}
	if (m > 1)
		r = r - (r / m);
	return r;
}
long long int arr[100009];
int main()
{
	long long int t, a, b, i, j, k, l, n, m;
	arr[1] = 1;
	for (i = 2; i <= 100000; i++) {
		arr[i] = totient(i);
	}
	//cout << arr[i] << endl;
	scanf("%lld", &t);
	while (t--) {
		scanf("%lld%lld", &a, &b);
		n = gcd(a, b);
		l = 0;
		for (i = 1; i * i <= n; i++) {
			if (n % i == 0) {
				l = l + arr[i];
				k = n / i;
				if (i * i != n) {
					
						l = l + arr[k];
				}
			}
		}
		printf("%lld\n", l);
	}
	return 0;
}



















