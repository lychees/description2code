#include <iostream>
#include <stdio.h>
#include <vector>
#define DIVI 1000000007

using namespace std;

typedef long long int Lint;

vector< vector<Lint> > Mult( vector< vector<Lint> >& A, vector< vector<Lint> >& B, Lint n ) {
	
	vector< vector<Lint> > C( n, vector<Lint> ( n, 0 ) );
	Lint i, j, k;

	for( i = 0;i < n;i++ ) {

		for( j = 0;j < n;j++ ) {
			C[ i ][ j ] = 0;
			for( k = 0;k < n;k++ )
				C[ i ][ j ] = ( C[ i ][ j ] + ( ( A[ i ][ k ] * B[ k ][ j ] ) % DIVI ) ) % DIVI;
		}
	}

	return C; 
}

vector< vector<Lint> > Raise( vector< vector<Lint> >& A, Lint b, vector< vector<Lint> >& I, Lint n ) {

	if( b == 0 ) {
		return I;
	}
	else {


	vector< vector<Lint> > v( n, vector<Lint> ( n ) );
	vector< vector<Lint> > v2( n, vector<Lint> ( n ) );
	vector< vector<Lint> > v3( n, vector<Lint> ( n ) );

		if( ( b & 0x1 ) == 0 ) {
			v = Raise( A, b / 2, I, n );
			v2 = Mult( v, v, n );
		}
		else {
			v = Raise( A, ( b - 1 ) / 2, I, n );
			v3 = Mult( v, v, n );
			v2 = Mult( A, v3, n );
		}
		return v2;
	}
}

int main() {
	
	Lint t, n, m, i, j;

	scanf("%lld", &t );

	while( t-- ) {

		scanf("%lld %lld", &n, &m );
		vector< vector<Lint> > I( n, vector<Lint> ( n, 0 ) );
		vector< vector<Lint> > B( n, vector<Lint> ( n ) );

		for( i = 0;i < n;i++ )
			I[ i ][ i ] = 1;

		vector< vector<Lint> > A( n, vector<Lint> ( n ) );

		for( i = 0;i < n;i++ )
			for( j = 0;j < n;j++ )
				scanf("%lld", &A[ i ][ j ] );

		B = Raise( A, m, I, n );

		for( i = 0;i < n;i++ ) {
			for( j = 0;j < n;j++ )
				printf("%lld ", B[ i ][ j ] );
			printf("\n");
		}

	}	
	return 0;
}