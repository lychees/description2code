#include <bits/stdc++.h>
#define ll long long
using namespace std;
ll int a[100010],b[100010],p[100010];
ll int  links[100010];
int visited[100010];
int main()
{
	ll int n,t; //n elements & t operations
	scanf("%lld%lld",&n,&t);
	ll int i,j,k,mc=0;//Number of connected components
	for(i=0;i<n;i++)
	{
		scanf("%lld",(a+i));
	}
	for(i=0;i<n;i++) //Permutation
	{
		scanf("%lld",(p+i));
		p[i]--; //Converting to 0-based index 
		links[i]=p[i];
	}
	memset(visited,0,sizeof(visited));
	vector<vector<ll int> > graph;
	for(i=0;i<n;i++)
	{
		if(!visited[i])
		{
			vector<ll int> v;
			mc++;
			stack<ll int> s;
			s.push(i);
			while(!s.empty())
			{
				j=s.top();
				s.pop();
				if(!visited[j])
				{
					v.push_back(j);
					visited[j]=1;
					s.push(links[j]);
				}
			}
			graph.push_back(v);
		}
	}
	for(i=0;i<mc;i++)
	{
		k=graph[i].size();
		for(j=0;j<k;j++)
		{
			b[graph[i][j]]=a[graph[i][(j+t)%k]];
		}
	}
	for(i=0;i<n;i++)
	{
		printf("%lld ",b[i]);
	}
	printf("\n");
	return 0;
}
