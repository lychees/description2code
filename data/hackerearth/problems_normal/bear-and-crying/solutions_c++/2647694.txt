#include <bits/stdc++.h>
#define MOD 1000000007
#define ll long long int
using namespace std;
ll pwr(ll a,ll b,ll mod) {a%=mod;if(a<0)a+=mod;ll ans=1; while(b) {if(b&1) ans=(ans*a)%mod; a=(a*a)%mod; b/=2; } return ans; }
int main()
{
    ll n,i,j;
    string s;
    cin>>s;
    n=s.length();
    ll cnt=0;
    ll num[100005],ans=0;
    for(i=n-1;i>=0;i--){
        if(s[i]=='_') cnt++;
        num[i]=cnt;
    }
    ll powerof2[100005],sumpower2[100005],total=0;
    for(i=n-1;i>=0;i--){
        if(s[i]==';'){
            total++;
            powerof2[i] = pwr(2,num[i],MOD);
        }
        else powerof2[i]=0;
    }
    sumpower2[0]=powerof2[0];
    for(i=1;i<n;i++){
        sumpower2[i] = (sumpower2[i-1]+powerof2[i])%MOD;
    }
    for(i=n-1;i>0;i--){
        if(s[i]==';'){
            ll temp = sumpower2[i-1];
            ll temp2 = powerof2[i];
            temp *= pwr(temp2,MOD-2,MOD);
            temp %= MOD;
            ans += temp;
            ans %= MOD;
        }
    }
    ll mul = (total*(total-1))/2;
    mul %= MOD;
    ans -= mul;
    if(ans<0) ans+= MOD;
    cout<<ans;
    return 0;
}
