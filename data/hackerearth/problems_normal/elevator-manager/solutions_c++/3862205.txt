#include <iostream>
#include <fstream>
#include <iomanip>
#include <math.h>
#include <limits.h>
#include <algorithm>
#include <vector>
#include <list>
#include <stack>
#include <queue>
#include <set>
#include <map>
#include <bitset>
#include <string>
#include <string.h>
#include <sstream>
#include <ctime>

using namespace std;

#define eps 1e-12
#define pi 3.14159265358979323846
#define pb push_back
#define mp make_pair


typedef long long ll;
typedef long double ld;
typedef unsigned long long ull;
typedef pair<ll,ll> ii;




const int M=1e9+7;
ll n,q,cf,ck,f,k,d,dff,ty,r;



ll mul(ll a,ll b,ll m)
{
	ll sum=0;
	for(int i=0;b;i++)
	{
		ll tmp=(a*(b%10000))%m;
		for(int j=1;j<=i;j++)tmp=(tmp*10000)%m;
		b/=10000;
		sum=(sum+tmp)%m;
	}
	return sum;
}


ll pw(ll b,ll p,ll m)
{
	if(p==0)return 1;
	ll t=pw(b,p/2,m),t2,sum,tmp;
	if(t>1e9)t=mul(t,t,m);
	else t=(t*t)%m;
	//if(p&1)t=(t*b)%m;
	if(p&1)t=mul(t,b,m);
	return t;
}


bool wtns(ll x,ll x2,ll c,ll a)
{
	ll y=pw(a,x2,x),ny;
	for(ll i=1;i<=c;i++)
	{
		ny=mul(y,y,x);
		if(ny==1 && y!=1 && y!=x-1)return 1;
		y=ny;
	}
	if(y!=1)return 1;
	return 0;
}


bool prime(ll x)
{
	if(x<=50)
	{
		for(ll i=2;i*i<=x;i++)if(x%i==0)return 0;
		return 1;
	}
	ll x2=x-1;
	ll c=0;
	while((x2&1)==0)
	{
		c++;
		x2>>=1;
	}
	vector<ll>a;
	if(x<2047)
	{
		a.pb(2);
	}
	if(x<1373653)
	{
		a.pb(2);a.pb(3);
	}
	else if(x<9080191)
	{
		a.pb(31);a.pb(73);
	}
	else if(x<25326001)
	{
		a.pb(2);a.pb(3);a.pb(5);
	}
	else if(x<3215031751)
	{
		a.pb(2);a.pb(3);a.pb(5);a.pb(7);
	}
	else if(x<4759123141)
	{
		a.pb(2);a.pb(7);a.pb(61);
	}
	else if(x<1122004669633)
	{
		a.pb(2);a.pb(13);a.pb(23);a.pb(1662803);
	}
	else if(x<2152302898747)
	{
		a.pb(2);a.pb(3);a.pb(5);a.pb(7);a.pb(11);
	}
	else if(x<3474749660383)
	{
		a.pb(2);a.pb(3);a.pb(5);a.pb(7);a.pb(11);a.pb(13);
	}
	else if(x<341550071728321)
	{
		a.pb(2);a.pb(3);a.pb(5);a.pb(7);a.pb(11);a.pb(13);a.pb(17);
	}
	else
	{
		a.pb(2);a.pb(3);a.pb(5);a.pb(7);a.pb(11);a.pb(13);a.pb(17);
		a.pb(19);a.pb(23);a.pb(29);a.pb(31);a.pb(37);
	}
	for(int i=0;i<a.size();i++)
	{
		if(wtns(x,x2,c,a[i]))return 0;
	}
	return 1;
}





int main()
{
	std::ios::sync_with_stdio(0);
	cin.tie(0);
	cin>>n>>q;
	cf=1;
	ck=0;
	d=0;
	for(int i=1;i<=q;i++)
	{
		cin>>ty>>f>>k;
		if(ty==1)
		{
			if(prime(f+k))
			{
				dff=cf-f;
				if(dff<0)dff*=-1;
				d=(d+dff)%M;
				cf=f;
				ck+=k;
			}
		}
		else
		{
			r=sqrtl(f+k);
			if(r*r==f+k||(r+1)*(r+1)==f+k||(r-1)*(r-1)==f+k)
			{
				dff=cf-f;
				if(dff<0)dff*=-1;
				d=(d+dff)%M;
				cf=f;
				ck-=k;
			}
		}
	}
	cout<<d<<" "<<ck<<"\n";
	return 0;
}
