#include <iostream>
#include <vector>
using namespace std;

int main()
{
    int ite;
    scanf("%d",&ite);
    while(ite--)
    {
    	int n;
    	scanf("%d",&n);
    	vector<string> s;
    	string temp;
    	for(int i=0;i<n;i++)
    	{
    		cin>>temp;
    		s.push_back(temp);
    	}
    	int h=1,v=1;
    	for(int i=0;i<n/2;i++)
    	{
    		if(s[i]==s[n-i-1]) continue;
    		h=0;break;
    	}
    	for(int j=0;j<n/2;j++)
    	{
    		int fl=1;
    		for(int k=0;k<n;k++)
    		{
    			if(s[k][j]==s[k][n-j-1]) continue;
    			fl=0;break;
    		}
    		if(fl==0){v=0;break;}
    	}
    	if(h==1&&v==1)
    	{
    		cout<<"BOTH"<<endl;
    	}
    	else if(h==1)
    	{
    		cout<<"HORIZONTAL"<<endl;
    	}
    	else if(v==1)
    	{
    		cout<<"VERTICAL"<<endl;
    	}
    	else
    		cout<<"NO"<<endl;
    }
    return 0;
}
