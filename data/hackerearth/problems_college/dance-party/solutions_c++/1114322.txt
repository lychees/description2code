#include<stdio.h>
 #include<cstdlib>
 #include<iostream>
 #define maxi 100001
 using namespace std;
/*Function to return max sum such that no two elements
 are adjacent */
int findmaxsum(int *arr, int n)
{
  int incl = arr[0];
  int excl = 0;
  int excl_new;
  int i;
 
  for (i = 1; i < n; i++)
  {
     /* current max excluding i */
     excl_new = (incl > excl)? incl: excl;
 
     /* current max including i */
     incl = excl + arr[i];
     excl = excl_new;
  }
 
   /* return max of incl and excl */
   return ((incl > excl)? incl : excl);
}
int main()
{
int t,n,i,a,b,c,d;

scanf("%ld",&t);

while(t--){

    scanf("%ld",&n);

     int*ar=(int*)calloc(sizeof(int),n+4);

    for(i=0;i<n;i++)scanf("%ld",&ar[i]);

    a=findmaxsum(ar,n);

    b=findmaxsum(&ar[1],n-1);

    d=findmaxsum(ar,n-1);

    if((a==b)||(n==1))printf("%d\n",a);

    else{

        if(a==d){printf("%d\n",a);continue;}

        //c=(ar[0]>ar[n-1])?ar[n-1]:ar[0];

        //a=a-c;

        c=(d>b)?d:b;

        printf("%d\n",c);

    }

}

return 0;
}