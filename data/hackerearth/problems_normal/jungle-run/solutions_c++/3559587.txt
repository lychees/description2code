#include <iostream>
#include <string>
using namespace std;

char a[35][35];
int w[35][35],fl[35][35];
int n;

template<typename T>
T Min(T e)
{
	return e;
}

template<typename T,typename... A>
T Min(T e,A... args)
{
	return e<Min(args...)?e:Min(args...);
}

int dfs(int i,int j,int wt)
{
	if(i<0 || j<0 || i>=n || j>=n || a[i][j]=='T' || fl[i][j])
		return 999999;
	if(w[i][j] && w[i][j] < wt)
		return w[i][j];
	if(a[i][j]=='E')
		return wt;
	fl[i][j]=1;
	int u=dfs(i-1,j,wt+1);
	int l=dfs(i,j-1,wt+1);
	int r=dfs(i,j+1,wt+1);
	int d=dfs(i+1,j,wt+1);
	fl[i][j]=0;
	return w[i][j]=Min(u,l,r,d);
}

int main()
{
	int x,y;
	string s;
	cin>>n;
	for(int i=0;i<n;i++)
		for(int j=0;j<n;j++)
		{
			cin>>s;
			a[i][j]=s[0];
			if(s[0]=='S')
				x=i,y=j;
		}
	cout<<dfs(x,y,0)<<"\n";
    return 0;
}
