#include<bits/stdc++.h>
#define ll long  
#define maxn 100009
#define INF 1e16
#define si(x) scanf("%d",&x);
#define sl(x) scanf("%ld",&x);
#define sll(x) scanf("%lld",&x);
#define ss(x) scanf("%s",x);
#define loop(i,a,b) for(int i=a; i<b; i++)
#define mp make_pair 
#define pb push_back 
//#define pop pop_back 
#define mod 1000000007
using namespace std;
ll time1[maxn];
vector< pair<ll,ll> > v[maxn];
bool visited[maxn],ansvst[maxn];
ll bfs(ll n)
{
	ll ans;   
	pair <ll,ll> a,x;  
	 queue < pair<ll,ll> > pq;
	 pq.push(mp(1,0));
	 ll flg=0;
	 visited[1]=true;
	while(!pq.empty())
	{
		a=pq.front();	
		pq.pop();
	//	cout<<a.first<<endl;
		loop(i,0,v[a.first].size())
		{
			x=v[a.first][i];
			//cout<<x.first<<endl;
			if(visited[x.first]==false)
			{
				if(x.first==n)
				{
					//cout<<x.first<<endl;
					//cout<<x.second<<endl;
				}
				visited[x.first]=true;
				if(ansvst[x.second]==true)
				{
					//cout<<v[a.first].size()<<endl;
				//	cout<<time1[x.second]<<endl;
					if(time1[x.second]<((a.second)+1))
					{
						visited[x.first]=false;
						continue;
					}
				}
				//cout<<x.first<<endl;
				pq.push(mp(x.first,a.second+1));
				if(x.first==n)
				{
					flg=1;
					ans=a.second+1;
					break;
				}
			}
		}
		if(flg)
		break;
	}
	if(!flg)
	ans=-1;
	return ans;
}
int main()
{
	ll t,n,k,m,a,b;
	cin>>n>>m>>k;
	ll ct=0;
	for(ll i=0; i<maxn; i++)
	ansvst[i]=false,visited[i]=false;
	while(m--)
	{
		cin>>a>>b;
		ct++;
		v[a].pb(mp(b,ct));
		v[b].pb(mp(a,ct));
	}
	while(k--)
	{
		cin>>a>>b;
		ansvst[b]=true;
		time1[b]=a;
	}
	ll ans=bfs(n);
	if(n==1)
	ans=0;
	cout<<ans<<endl;
}