#include <algorithm>
#include <iostream>
#include <vector>
#include <string>

using namespace std;

int getv() {
    char c;
    do { cin >> c; } while (c != '0' && c != '1');
    return c - '0'; 
}

void run_test() {
    int n, m, p, x;
    cin >> n >> m >> p >> x;
    vector<int> l(m);
    
    for (int i = 0; i < m; ++i) 
        l[i] = getv();
    
    
    --n;
    while (n) {
        long long y = 1;
        while (2 * y <= n) 
            y *= 2;
        vector<int> l2 = l; 
        long long t = (y * (m - p)) % m;
        for (int i = 0; i < m; ++i) 
            l2[i] ^= l[(i + t) % m] ^ x;
        l.swap(l2);
        n -= y;        
    }
    for (int i = 0; i < m; ++i) 
        cout << l[i];
    cout << '\n';    
}

int main() {
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    
    int T;
    cin >> T;
    for (int i = 0; i < T; ++i)
        run_test();
    return 0;
}