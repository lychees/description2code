#include <iostream>
#include <bits/stdc++.h>
#define forl(i,a,b) for ( i = a; i < b; i++)
#define fore(i,a,b) for ( i = a; i <= b; i++)
#define forrev(i,a,b) for ( i = a; i >= b; i--)
#define ull unsigned long long int
#define ll long long int
using namespace std;

int n;

ull countHandShakes(vector<vector<int> >& countArr,int root,ull *count)
{
	int i;
	
	
	//static ull count[n+1]={0};
	
	if(countArr[root].size()==0)
	{
		return 1;
	}
	forl(i,0,countArr[root].size())
	{
		count[root]+=countHandShakes(countArr,countArr[root][i],count);
	}
	return (count[root]+1);
}


int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		ull result=0;
		int i,j;
		//ull count=0;
		cin>>n;
		vector<vector<int> >countArr(n+1,vector<int>(0));
		forl(i,1,n+1)
		{
			int e;
			cin>>e;
			countArr[e].push_back(i);
			
		}
		/*forl(i,0,n+1)
		{
			forl(j,0,countArr[i].size())
			{
				cout<<countArr[i][j]<<" ";
			}
			cout<<endl;
			
		}*/
		
		
		ull count[n+1];
		//memset(count,0,n+1);
		forl(i,0,n+1)
			count[i]=0;
		ull handShakes=countHandShakes(countArr,countArr[0][0],count);
		forl(i,1,n+1){
			result+=count[i];
			//cout<<count[i]<<" ";
		}
		ull total=0;
		if(n%2==0)
			total=(ull)(n/2)*(n-1);
		else	
			total=(ull)n*((n-1)/2);
		
		cout<<(result)<<" "<<(total-result)<<endl;	
	}
	
	
    //cout << "Hello World!" << endl;
    return 0;
}
