#include <cstdio>
#include <vector>
#define MOD 1000000007
using namespace std;
typedef long long ll;
int a[200005],n;
int m[100005];
ll expo(ll b, int e){
	if(e==0) return 1ll;
	if(e==1) return b;
	ll half=expo(b,e/2);
	half=half*half%MOD;
	if(e&1) half=half*b%MOD;
	return half;
}
void update(int pos, int val){
	for(;pos<=n+1;pos+=(pos&(-pos))){
		m[pos]+=val;
	}
}
int rsq(int pos) {
	int ans=0;
	for(;pos;pos-=(pos&(-pos))) ans+=m[pos];
	return ans;
}
int main() {
	scanf("%d",&n);
	if(n==1ll){
		printf("1\n");
		return 0;
	}
	for(int x=0;x<2*n;x++) scanf("%d",&a[x]);
	ll ans=0ll;
	for(int x=0;x<2*n;x++){
		ans+=ll(x-rsq(a[x]+1));
		update(a[x]+1,1);	
	}
	printf("%lld\n",(2ll*ans+ll(n)+ll(n)*(ll(2*n)-1ll))%MOD*expo(2ll,n-2)%MOD);
    return 0;
}