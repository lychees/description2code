#include <iostream>
#include <cstring>
#include <cstdio>
#include <queue>
#include <algorithm>
#include <vector>
#include <set>
#include <map>
#include <cmath>
#include <set>
#include <utility>
#include <stack>
#include <cmath>
#include <climits>
#include <cassert>
#define sort(v) sort(v.begin(),v.end())
#define null NULL
#define len(x) (sizeof(x)/sizeof(x[0]))
using namespace std;
typedef long long int ll;

ll comp[5555]={0},a[5555] = {0},s[5555] = {0},n,dp[5555] = {0},mx[5555] = {0},ans = 0;
vector<ll> prime;

int main()
{
	for(int i=2;i<=5000;i++)
	{
		for(int j=i+i;j<=5000;j = i+j)
		{
			comp[j] = 1;
		}
	}
	for(int i=2;i<=5000;i++)
	{
		if(!comp[i])
		{
			prime.push_back(i);
		}
	}
	cin>>n;
	cin>>a[1];
	s[1] = a[1];
	for (int i = 2; i <= n; i++)
	{
		cin>>a[i];
		s[i] = a[i] + s[i-1];
	}
	for(int i=1;i<=n;i++)
	{
		for(int j=0;prime[j]<=i && j<prime.size();j++)
		{
			dp[i] = max(dp[i],s[i] - s[i-prime[j]]  + ((i-prime[j]!=0)?mx[i-prime[j]-1]:0));
		}
		ans = max(ans,dp[i]);
		mx[i] = ans;
	}
	cout<<ans;
}
