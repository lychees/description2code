#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
void EE(ll a, ll b, ll& x, ll& y)
{
    if(a%b == 0)
    {
        x=0;
        y=1;
        return;
    }
    EE(b,a%b,x,y);
    ll temp = x;
    x = y;
    y = temp - y*(a/b);
}
ll inverse(ll a, ll m)
{
    ll x,y;
    EE(a,m,x,y);
    if(x<0) x += m;
    return x;
}
ll gcd(ll a,ll b)
{
	ll t;
	while(a%b){t=a%b; a=b; b=t;}
	return b;
}
int main()
{
   int t;
   scanf("%d",&t);
   while(t--)
   {
   	ll a,n,p;
   	scanf("%lld%lld%lld",&a,&p,&n);
   	ll inv;
   	if(gcd(a,p)!=1)printf("-1\n");
   	else {
   		inv = inverse(a,p);
   		ll s = inv + a;
   		s = s*(n/2);
   		if(n%2)s+=a;
   		printf("%lld\n",s);
   	}
   }
   return 0;
}
