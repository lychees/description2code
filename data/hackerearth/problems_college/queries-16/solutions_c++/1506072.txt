#include <bits/stdc++.h>
using namespace std;
int cnt[10000001] = {0};
int main(){
	int t;
	set <int> arr;
	set <int>:: iterator it;
	cin >> t;
	while(t--){
		int a,b,i;
		cin >> a >> b;
		if(a == 0){
			arr.clear();
			for(i=0;i<=24;i++){
				arr.insert(b/(1<<i));
			}
			for(set<int>::iterator it=arr.begin();it!=arr.end();it++){
       			cnt[*it]++;
      		}
		}else if(a == 1){
			arr.clear();
			for(i=0;i<=24;i++){
				arr.insert(b/(1<<i));
			}
			for(set<int>::iterator it=arr.begin();it!=arr.end();it++){
       			cnt[*it]--;
      		}
		}else{
			cout << cnt[b] << endl;
		}
	}
	return 0;
}
