#include <bits/stdc++.h>
using namespace std;
const int N=1e5+5;
const int mod=1e9+7;
int n;
int m;
int a[N];
int par[N];

int find(int x){
	return x==par[x]?x:par[x]=find(par[x]);
}
void add(int x, int y){
	int xx=find(x),yy=find(y); //printf("%d %d : %d %d\n",x,y,xx,yy);
	if(a[xx]>a[yy]){
		par[yy]=xx;
	}
	else par[xx]=yy;
}
int cnt[N];

int main() {
ios_base::sync_with_stdio(0); cin.tie(0); cout.tie(0);
cin>>n>>m;
for(int i=1;i<=n;i++)
cin>>a[i];
for(int i=0;i<N;i++)
par[i]=i;

for(int i=0;i<m;i++){
	int u,v;
	cin>>u>>v;
	add(u,v);
}

set<int> found;
for(int i=1;i<=n;i++){
	int x=find(i); //cout<<i<<" "<<x<<endl;
	if(found.find(x)==found.end())
		found.insert(x);
	
	
		if(a[i]==a[x])cnt[x]++;
	
}
//for(int i=1;i<=n;i++)if(cnt[i]>1)cnt[i]--;
int ans=1;
for(int i=1;i<=n;i++)
if(cnt[i]){ //cout<<cnt[i]<<" "<<i<<endl;
	ans=1LL*ans*cnt[i]%mod;
}
cout<<ans<<'\n';
return 0;
}