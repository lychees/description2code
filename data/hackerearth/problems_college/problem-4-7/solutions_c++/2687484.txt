#include <bits/stdc++.h>
using namespace std;

int main()
{
     int n,m;
     cin>>n>>m;
     string str;
     cin>>str;
     int val2[26][26];
     int val1[26];
     for(int i=0;i<26;i++)
     {
     	val1[i]=1;
     	for(int j=0;j<26;j++)
     	{
     		val2[i][j]=1;
     	}
     }
     while(m--)
     {
     	string st;
     	cin>>st;
     	int val;
     	cin>>val;
     	if(st.length()==1)
     	val1[st[0]-'a']=val;
     	else
     	val2[st[0]-'a'][st[1]-'a']=val;
     }
      int table[n];
    table[0]=val1[str[0]-'a'];
    table[1]=max(table[0]+val1[str[1]-'a'],val2[str[0]-'a'][str[1]-'a']);
    for(int i=2;i<n;i++){
    	table[i]=max(table[i-1]+val1[str[i]-'a'],table[i-2]+val2[str[i-1]-'a'][str[i]-'a']);
    }
     cout<<table[n-1]<<endl;
    return 0;
}
