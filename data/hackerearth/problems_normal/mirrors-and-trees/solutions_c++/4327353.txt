#include <iostream>
#include<math.h>
using namespace std;
int main()
{
 int t;
 long int n,i,j,l,r;
 long int a[100000],v[100000];
 
cin>>t;
while(t--){
    cin>>n;
    for(i=1;i<=n;i++)
	{
    cin>>a[i];
    v[i]=0;
	}
    
l=0,r=0;
for(i=1;i<=n;i=i+pow(2,l))
{
for(j=i;j>=r+1;j--)
if(a[j]!=0)
{
cout<<a[j]<<"\n";
v[j]=1;
break;
}
l++;
r=i;
}
 
l=0;
for(i=2;i<=n;i=i+pow(2,l))
{
for(j=i;j<(2*i);j++)
if((a[j]!=0)&&(v[j]==0))
{
cout<<a[j]<<"\n";
break;
}
l++;
}
cout<<"\n";
}
}
