#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<vector>
#include<map>
#include<queue>
#include<cstring>
#include<cmath>
#include<algorithm>
using namespace std;
int main()
	{
	int i,j,k;
	int T;
	ios_base::sync_with_stdio(false);
	cin>>T;
	int N, K;
	int count0,count1;
	while(T--)
		{
		cin>>N>>K;
		count1=count0=0;
		while(N--)
			{
			cin>>i;
			if(i==0)
				count0++;
			else
				count1++;
			}
		if(count0>=K)
			j=K+count1;
		else {
			K-=count0;
			if(K%2==0)
				j=count1+count0;
			else
				j=count1+count0-1;
			}
			cout<<j<<endl;
		}
	return 0;	
	}