#include <bits/stdc++.h>
using namespace std;
int mark[40][40],n,path=INT_MAX;
char jungle[40][40];
void route(int i,int j)
{
    int count=0;
	if(jungle[i][j]=='E')
	{
		count=0;
	   for(int x=1;x<=n;x++)
	   {
	   	for(int y=1;y<=n;y++)
	   	{
	   		if(mark[x][y]==1)
	   		{
	   			count++;
	   		}
	   	}
	   }
	path=min(path,count);
		return;
	}
	else if(i==n&&j==n)
	{
		return;
	}
		mark[i][j]=1;
	if(i+1<=n&&(jungle[i+1][j]=='P'||jungle[i+1][j]=='E')&&mark[i+1][j]==0)
   
   {	route(i+1,j);}
	if(j+1<=n&&(jungle[i][j+1]=='P'||jungle[i][j+1]=='E')&&mark[i][j+1]==0)
	{route(i,j+1);}
	if(j-1>=1&&(jungle[i][j-1]=='P'||jungle[i][j-1]=='E')&&mark[i][j-1]==0)
	{route(i,j-1);}
	if(i-1>=1&&(jungle[i-1][j]=='P'||jungle[i-1][j]=='E')&&mark[i-1][j]==0)
	{route(i-1,j);}
	mark[i][j]=0;
}
int main()
{
    int i,j,x,y;
    cin>>n;
    for(i=1;i<=n;i++)
    {
    	for(j=1;j<=n;j++)
    	{
    		cin>>jungle[i][j];
    		mark[i][j]=0;
    		if(jungle[i][j]=='S')
    		{
    		x=i;
    		y=j;
    		}
    	}
    }
    route(x,y);
    cout<<path;
    return 0;
}
