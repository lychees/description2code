'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''


def DFS(node, visited, start, minCycleLen, N):
    try:
        for node in graphMap[node]:
            if node not in visited:
                visited.append(node)
                DFS(node, visited, start, minCycleLen, N)
            elif node == start:
                if len(visited) < minCycleLen[0]:
                    minCycleLen[0] = len(visited)
    except KeyError:
        if minCycleLen[0] == N:
            minCycleLen[0] = 1


N, D = raw_input().split()
graphMap = {}
for i in range(0, int(D)):
    a, b = raw_input().split()
    try:
        graphMap[int(a)].append(int(b))
    except KeyError:
        graphMap[int(a)] = [int(b)]

minCycleLen = [N]
for key in graphMap.keys():
    visited = []
    visited.append(key)
    DFS(key, visited, key, minCycleLen, N)

print minCycleLen[0]
