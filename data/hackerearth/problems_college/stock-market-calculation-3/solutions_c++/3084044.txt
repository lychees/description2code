#include <iostream>
#include <vector>
#include <algorithm>
#include <sstream>
#include <stack> 
using namespace std;

#define f(i,a)  for(int i=0;(i)<(a);++i)
#define fab(i,a,b) for (int i = (a); (i) < (b); ++i)
#define fba(i,a,b) for (int i = (b) - 1; (i) >= (a); --i)
#define fit(it,c) for(__typeof((c).begin()) it = (c).begin(); it != (c).end(); ++it)
#define all(c) (c).begin(),(c).end()


typedef long long ll;
typedef unsigned long long ull;
typedef long double ld;
typedef unsigned int uint;
typedef char u8;
typedef vector <int> vi;
typedef pair <int, int> pii;

int main()
{
    ios_base::sync_with_stdio(0);cin.tie(0);
    int t,n,a,nn;
    ll ans,sum[50000],S;
    stack<pii> s;
    pii p;
    cin>>t;
    while(t--){
    	cin>>n;
    	sum[0]=0;
    	f(i,n){
    		cin>>a;
    		if(i)
    			sum[i]=sum[i-1];
    		sum[i]+=a;
    		while((!s.empty()) && (a>=(s.top().first)))
    			s.pop();
    		s.push(make_pair(a,i));
    	}
    	ans=0;
    	while(!s.empty()){
    		p=s.top();
    		s.pop();
    		S=sum[p.second];
    		nn=p.second+1;
    		//cout<<"S "<<S<<"nn "<<nn;
    		if(!s.empty()){
    			//cout<<"S- "<<sum[s.top().second]<<"nn- "<<s.top().second;
    			S-=sum[s.top().second];
    			nn-=(s.top().second+1);
    		}
    		//cout<<endl;
    		ans+=((ll)nn*p.first)-S;
    	}
    	cout<<ans<<"\n";
    }
    return 0;
}
