 #include<bits/stdc++.h>
#include<algorithm>
using namespace std;
#define fr(i,a,b) for(int i=a;i<b;i++)
#define frn(i,a,b) for(int i=a;i>b;i--)
#define si(x) scanf("%d",&x)
#define sll(x)  scanf("%lld",&x)
#define pln printf("\n")
#define pi(x) printf("%d",x)
#define pll(x) printf("%lld",x)
#define mp make_pair
#define pb push_back
#define x first
#define y second
typedef long long ll;
ll MOD=1000000007;
ll pw(ll a,ll b){
  ll r=1;
  while(b>0){
     if(b&1){
       r=(r*a)%MOD;
        }
     b=b>>1;
     a=(a*a)%MOD;
  }
return (r)%MOD;
}
int vis[100010]={};
ll know[100010];
vector<int>g[100010];
 ll ans,ct,mx;

void dfs(int u){
    if(know[u]==mx){
        ct++;
    }
    else if(know[u]>mx){
        ct=1;
        mx=know[u];
    }
    int v;
    vis[u]=1;

    fr(i,0,g[u].size()){
       v=g[u][i];
       if(!vis[v]){
        dfs(v);
       }
    }

}

int main(){
  int n,m;

  si(n),si(m);
  fr(i,1,n+1){
     sll(know[i]);
  }
  int u,v;
  fr(i,0,m){
     si(u),si(v);
     g[u].pb(v);
     g[v].pb(u);
  }
   ans=1;
  fr(i,1,n+1){
     if(!vis[i]){
        ct=0;
        mx=know[i];
        dfs(i);
       ans=(ans*ct)%MOD;
     }
  }
  pll(ans);pln;

return 0;
}
