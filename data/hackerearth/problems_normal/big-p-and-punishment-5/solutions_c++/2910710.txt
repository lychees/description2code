#include <bits/stdc++.h>
using namespace std;
vector<int> gr[10005];
int n,f,s,cnt=0;
int visit[10005];
void dfs(int ver);
int main(int argc, char const *argv[]) {
  int test;
  scanf("%d",&test);
  while(test--)
  {
    int i,j,k;
    cnt=0;
    scanf("%d%d%d",&n,&f,&s);
    for(i=0;i<=n;i++)
      {gr[i].clear();visit[i]=0;}
    while(f--)
    {
      scanf("%d%d",&j,&k);
      gr[j].push_back(k);
    }
    while(s--)
    {
      scanf("%d",&k);
      dfs(k);
    }
    printf("%d\n",cnt);
  }
  return 0;
}

void dfs(int ver)
{
  int i;
  if(!visit[ver])
  {
    cnt++;
    visit[ver]=1;
    for(i=0;i<gr[ver].size();i++)
    {
      dfs(gr[ver][i]);
    }
  }
}
