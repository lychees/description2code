#include<bits/stdc++.h>
using namespace std;
typedef long long int ll;
ll res, dp[18][1500][200][3], n, d[20], l, xx, yy, tt;
ll gcd(ll x, ll y)
{
	ll f = max(x, y), s = min(x, y);
	if (!s)
		return f;
	return gcd(s, f%s);
}
ll solve(ll pos, ll sm, ll ssm, ll t)
{
//	cout << pos << " " << sm << " " << ssm << " " << t << endl;
	if (pos<0)
		return (gcd(sm, ssm) == 1);
	ll &r = dp[pos][sm][ssm][t];
	if (r != -1&&!t)
		return r;
	ll e, ra=0;
	if (t)
		e = d[pos];
	else
		e = 9;
	for (int i = 0; i <= e; i++)
		ra += solve(pos - 1, sm + i, ssm + i*i, t && (i == e));
	if (!t)
	r = ra;
	return ra;
}
ll rs(ll num)
{
	memset(d, 0, sizeof d);
	if (num<0)
		return 0;
	ll k = num;
	l = 0;
	while (k > 0)
	{
		d[l] = k % 10;
		l++;
		k /= 10;
	}
	return solve(l-1, 0, 0, 1);
}
int main()
{
	memset(dp, -1, sizeof dp);
	scanf("%lld", &tt);
	while (tt--)
	{
		scanf("%lld%lld",&xx,&yy);
		xx = rs(xx - 1);
		yy = rs(yy);
		//cout << xx << " " << yy << endl;
		res = yy-xx;
		printf("%lld\n", res);
	}
	return 0;
}