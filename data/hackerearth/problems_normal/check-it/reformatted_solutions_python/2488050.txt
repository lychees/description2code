tc = int(raw_input())
for t in xrange(tc):
    dict1 = {}
    counter = 0
    n, m = map(int, raw_input().split())
    look = [0]*(n+1)
    for i in xrange(1, m+1):
        dict1[i] = map(int, raw_input().split())

    sp = map(int, raw_input().split())
    for l in sp:
        a, b = dict1[l]
        look[a] = 1
        look[b] = 1
    for c in look[1:]:
        if c == 1:
            counter += 1
    if counter == (len(look)-1):
        print "YES"
    else:
        print "NO"
