#include <bits/stdc++.h>
using namespace std;
bool setprime[1000006];
vector<unsigned long long int> v[100005];
int main() {
	int test;
	scanf("%d",&test);
	while(test--) {
		int k,vikku=0,pp;
		for(int i = 0; i < 100005; i++) v[i].clear();
		unsigned long long int a,b,ans,n,adi;
		scanf("%llu%llu%d",&a,&b,&k);
		memset(setprime,true,sizeof(setprime));
		unsigned long long int i,j,p;
		for(i = 2; i < 1000002; i++) {
			if(setprime[i]) {
				for(j = 2*i; j < 1000002; j += i) {
					setprime[j] = false;
				}
				if(a <= i)
				j = i;
				else if(a%i == 0)
				j = a;
				else
				j = i+a-(a%i);
				for(p = j; p <= b; p += i) {
					v[p-a].push_back(i);
				}
			}
		}
		for(i = a; i <= b; i++) {
			ans = i;
			adi = i;
			if(ans <= 1)
			ans++;
			if(v[i-a].size() == 0)
			ans--;
			for(j = 0; j < v[i-a].size(); j++) {
				ans = (ans/v[i-a][j])*(v[i-a][j]-1);
				while(adi%v[i-a][j] == 0 && adi > 0)
				adi = adi/v[i-a][j];
			}
			if(adi > 1 && v[i-a].size() != 0) 
			ans = (ans/adi)*(adi-1);
			if(ans%k == 0) 
			vikku++;//cout<<ans<<" ";
		}
		pp = b-a+1;
		double sona = (double)vikku/(double)(pp);
		printf("%.6lf\n",sona);
	}
	return 0;
} 