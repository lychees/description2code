#include <bits/stdc++.h>
using namespace std;
#define int long long
#define PII pair <int, int> 
#define PIII pair <int, PII> 
const int mod = 1e9 + 7;
int dp [1005][1005]; 
int arr [1005][1005]; 
main()
{
    ios_base::sync_with_stdio(0); 
    int n; cin >> n; vector <PIII> process;  
    for (int g=1; g<=n; g++) for (int y=1; y<=n; y++) cin >> arr[g][y]; 
    for (int g=1; g<=n; g++) for (int y=1; y<=n; y++) process.push_back(PIII(arr[g][y], PII(g, y))); 
    sort(process.begin(), process.end()); 
    int ans = 0; 
    for (int g=0; g<process.size(); g++){
    	int x = process[g].second.first;
    	int y = process[g].second.second; 
    	dp[x][y] = 1; 
    	if (arr[x][y] > arr[x-1][y]){
    		dp[x][y]+=dp[x-1][y]; 
    	}
    	if (arr[x][y] > arr[x+1][y]){
    		dp[x][y]+=dp[x+1][y]; 
    	}
    	if (arr[x][y] > arr[x][y-1]){
    		dp[x][y]+=dp[x][y-1];
    	}
    	if (arr[x][y] > arr[x][y+1]){
    		dp[x][y]+=dp[x][y+1]; 
    	}
    	dp[x][y]%=mod; 
    	ans+=dp[x][y]; 
    	ans%=mod; 
    }
    cout << ans; 
    return 0;
}
