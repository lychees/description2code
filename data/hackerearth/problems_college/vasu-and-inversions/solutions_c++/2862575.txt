#include<iostream>
using namespace std;

void solve()
{
	int n,k,z=0,o=0;
	cin >> n >> k;
	int a[n];
	for(int i=0;i<n;i++){
		cin >> a[i];
		if(!a[i])
			z++;
		else
			o++;	
	}
	if(o==k)
		cout << "0\n";
	else if(k<=z)
		cout << o+ k << "\n";
	else{
		int n=k-z;
		if(n%2){
			cout << o+z-1 << "\n";			
		}else
			cout  << o+z << "\n";
	}
			
}

int main()
{
	int t;
	 std::cout.sync_with_stdio(false);
	cin >> t;
	
	while(t--)solve();
	return 0;
}