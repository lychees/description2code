#include<iostream>
#include<vector>
#include<cstring>
#include<stdio.h>
using namespace std;
vector<long long int> graph[100005];
long long int n,m,a[100005],temp[100005],k=0,vis[100005]={0},ans=1;
void dfs(int i)
{
	vis[i]=1;
	temp[k]=i;
	k++;
	for(int j=0;j<graph[i].size();j++)
	{
		long long int t=graph[i][j];
		if(vis[t]==0)
		dfs(t);
	}
}
int main()
{
	scanf("%lld%lld",&n,&m);
	for(int i=1;i<=n;i++)
	scanf("%lld",&a[i]);
	for(int i=0;i<m;i++)
	{
		long long int x,y;
		scanf("%lld%lld",&x,&y);
		graph[x].push_back(y);
		graph[y].push_back(x);
	}
	for(int i=1;i<=n;i++)
	{
		k=0;
		if(vis[i]==0)
		{
		dfs(i);
		long long int m=0,tot=0;
		for(int i=0;i<k;i++)
		{
			if(a[temp[i]]>m)
			m=a[temp[i]];
		}
		for(int i=0;i<k;i++)
		{
			if(a[temp[i]]==m)
			tot++;
		}
		ans=(ans*tot)%1000000007;
		}
	}
	printf("%lld\n",ans%1000000007);
    return 0;
}
