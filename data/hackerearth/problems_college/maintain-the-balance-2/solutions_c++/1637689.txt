#include <iostream>
using namespace std;

int main()
{
    //cout << "Hello World!" << endl;
    
    int t;
    cin>>t;
    while(t--)
    {
    	char c;
    	int cnt=0,k=0;
    	while(scanf("%c",&c)&& c!='.')
    	{
    	//	cout<<c;
    		
    		if(c=='{')
    		cnt++;
    		else
    		if(c=='}')
    		cnt--;
    	
    	if(cnt<0)
    	{
    	  k++;
    	  cnt=0;
    	}
    	}
    	//cout<<"\n"<<k<<" "<<cnt<<"\n";
    	if(cnt==0 && k==0)
    	cout<<"0\n";
    	else
    	if((cnt+k)%2!=0)
    	cout<<"-1\n";
    	else
    	{
    		int ans=0;
    		if(k%2==1)
    		ans+=k/2 + 1;
    		else
    		ans+=k/2;
    		
    		if(cnt%2==1)
    		ans+=cnt/2+1;
    		else
    		ans+=cnt/2;
    		cout<<ans<<"\n";
    	}
    }
    return 0;
}
