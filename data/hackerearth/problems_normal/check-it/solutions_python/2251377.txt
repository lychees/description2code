def root(x):
	global arr
	if arr[x]==x:return x
	else:
		z=root(arr[x])
		arr[x]=z
		return z
def union(x,y):
	rootx=root(x)
	rooty=root(y)
	if rootx==rooty:return True
	else:
		if size[rootx]>size[rooty]:
			arr[rooty]=rootx
			size[rootx]+=size[rooty]
		else:
			arr[rootx]=rooty
			size[rooty]+=size[rootx]
		return False
def fun(it):
	global lst
	for i in it:
		a,b=lst[i-1]
		if union(a,b):return False
		#print a,b,'true'
	return True	





n=input()
for _ in range(n):
	ver,edge=map(int,raw_input().split())
	arr=[i for i in range(ver+1)]
	#print arr
	size=[ 1 for _ in range(ver+1)]
	lst=[]
	for _ in range(edge):lst.append(map(int,raw_input().split()))
	it=[]
	it=map(int,raw_input().split())
	if fun(it):print 'YES'
	else:print 'NO'
		
		
		