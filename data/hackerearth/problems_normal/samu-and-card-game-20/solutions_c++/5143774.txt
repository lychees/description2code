#include<bits/stdc++.h>
using namespace std;
bool bound(long long x,long long y,long long int n,long long int m)
{
    return x<=n && y<=m && x>=1 && y>=1;
}
int main()
{
	
	int t;
	cin>>t;
	while(t--){
		int n,m;
    	scanf("%d%d",&n,&m);
    	long long currentStartX=1;
    	long long currentStartY=1;
    	int k;
    	scanf("%d",&k);
    	long long ans=0;
    	while(k--){
    		int A,B;
        	scanf("%d%d",&A,&B);
        	long long low=0;
			long long high=INT_MAX;
        	for(int i=0;i<50;i++){
            	long long mid=(low+high)/2;
	            if(bound(A*mid+currentStartX,B*mid+currentStartY,n,m))
                	low=mid;
            	else
                	high=mid;
        	}
        	currentStartX=currentStartX + low*A;
        	currentStartY=currentStartY + low*B;
        	ans=ans+low;
    	}
    	cout<<ans<<"\n";
	}
}

