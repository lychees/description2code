#include<iostream>
#include<cstdio>
#include<cstring>
#include<string>
#include<map>
#include<vector>
#include<algorithm>
#include<cmath>
#include<cstdlib>
#include<set>
#include<stack>
#include<deque>
#include<queue>
#define pb(x) push_back(x)
#define getcx getchar_unlocked
using namespace std;
long long m;
struct matrix
{   public:
    long long a0,a1,a2,a3;
    
    void multiply(matrix b)
    {long long c[4];
    c[0]=(a0*b.a0+a1*b.a2)%m;
    c[1]=(a0*b.a1+a1*b.a3)%m;
    c[2]=(a2*b.a0+a3*b.a2)%m;
    c[3]=(a2*b.a1+a3*b.a3)%m;
    a0=c[0];a1=c[1];a2=c[2];a3=c[3];
    
    }   
};
matrix basematrix;
matrix v;
matrix power(int n)
{      
      if(n==1)
        return basematrix;
        matrix c=power(n/2);
      //cout<<n<<" "<<c.a0<<" "<<c.a1<<" "<<c.a1<<" "<<c.a2<<" "<<c.a3<<endl; 
      matrix d=c;
      c.multiply(d);
      //cout<<" "<<n<<" "<<c.a0<<" "<<c.a1<<" "<<c.a1<<" "<<c.a2<<" "<<c.a3<<endl; 
      if(n%2!=0) 
         c.multiply(basematrix);
      return c; 
         
}


int main()
{ int t,n;long long x;
  scanf("%d",&t);
  while(t--)
  {
  
  scanf("%d",&n);scanf("%lld",&x);scanf("%lld",&m);
  basematrix.a0=x;
  basematrix.a1=x;
  basematrix.a2=0;
  basematrix.a3=1;
  v.a0=1;
  v.a1=1;
  v.a2=0;
  v.a3=1;
  if(n>1) 
   v.multiply(power(n-1));

   cout<<((2*x*v.a1)%m)<<endl;
 }
   return 0;
}
