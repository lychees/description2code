#include <bits/stdc++.h>

using namespace std;

#define pb push_back
#define mp make_pair
#define ll long long
#define s(x) scanf("%d", &x)
#define sl(x) scanf("%lld", &x)
#define sd(x) scanf("%lf", &x)
#define mod 1000000007
#define get getchar_unlocked

int a[1005][1005];
int b[1005][1005];
int mxR[1005];
int mxC[1005];

int main()
{
    int t, n, m, i, j, cnt;
    s(t);
    while (t--) {
        s(n);
        s(m);
        for (i = 1; i <= n; ++i) {
            for (j = 1; j <= m; ++j)
                s(a[i][j]);
        }
        for (i = 1; i <= n; ++i) {
            for (j = 1; j <= m; ++j)
                s(b[i][j]);
        }
        for (i = 1; i <= n; ++i) {
            mxR[i] = 0;
            for (j = 1; j <= m; ++j)
                mxR[i] = max(b[i][j], mxR[i]);
        }
        for (j = 1; j <= m; ++j) {
            mxC[j] = 0;
            for (i = 1; i <= n; ++i)
                mxC[j] = max(a[i][j], mxC[j]);
        }
        cnt = 0;
        for (i = 1; i <= n; ++i) {
            for (j = 1; j <= m; ++j) {
                if (a[i][j] == mxC[j] && b[i][j] == mxR[i])
                    ++cnt;
            }
        }
        printf("%d\n", cnt);
    }
    return 0;
}
