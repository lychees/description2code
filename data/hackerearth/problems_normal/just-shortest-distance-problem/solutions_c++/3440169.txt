/*
 *
 * File: stuff.cpp
 * Author: Andy Y.F. Huang (azneye)
 * Created on Aug 23, 2014, 11:50:25 PM
 */

#include <bits/stdc++.h>
using namespace std;

namespace stuff {
typedef long long ll;
const int MAX = 1024;
int queue[MAX], dist[MAX];
vector<int> adj[MAX];

void solve(int test_num) {
  int V, Q;
  scanf("%d %d", &V, &Q);
  memset(dist, 0x3F, sizeof(dist));
  dist[1] = 0;
  for (int q = 0, type, x, y; q < Q; ++q) {
    scanf("%d %d", &type, &x);
    if (type == 1) {
      printf("%d\n", dist[x] > MAX ? -1 : dist[x]);
    } else {
      scanf("%d", &y);
      int qf = 0, qb = 0;
      adj[x].emplace_back(y);
      if (dist[x] + 1 < dist[y]) {
        queue[qb++] = y;
        dist[y] = dist[x] + 1;
      }
      while (qf < qb) {
        const int at = queue[qf++];
        for (const int& to : adj[at]) {
          if (dist[at] + 1 < dist[to]) {
            dist[to] = dist[at] + 1;
            queue[qb++] = to;
          }
        }
      }
    }
  }
}

void solve() {
#ifdef AZN
//make_case();
  double start_t = clock();
  freopen("input.txt", "r", stdin);
  freopen("output.txt", "w", stdout);
//freopen("azn.txt", "w", stderr);
#endif
  ios::sync_with_stdio(false);
  cin.tie(NULL);
  int T = 1;
//  scanf("%d", &T);
//  cin >> T;
  for (int t = 1; t <= T; t++)
    solve(t);
#ifdef AZN
  cerr << fixed << setprecision(3) << "Took: " << ((clock() - start_t) / CLOCKS_PER_SEC) << endl;
#endif
}
}

int main() {
  stuff::solve();
  return 0;
}
