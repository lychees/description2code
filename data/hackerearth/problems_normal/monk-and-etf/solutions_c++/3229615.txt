#include<iostream>
#include<cmath>
#include<cstdio>
#define ll long long
using namespace std;

int sieve(int[]);
ll int power(ll int base,ll int exp)
{
    ll res=1;
    while(exp>0) {
       if(exp%2==1) res=(res*base);
       base*=base;
       exp>>=1;
    }
    return res;
}


int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0);
    int t;
    cin>>t;

    static int pr[1000000];
    int len=sieve(pr);

    while(t--)
    {
        ll int l,r,k;
        cin>>l>>r>>k;

        ll int arr1[r-l+1],arr2[r-l+1];

        for(int i=0;i<=r-l;i++)
            arr1[i]=arr2[i]=i+l;

        for(int i=0;pr[i]<=sqrt(r)&& i<len;i++)
        {
            int p=ceil((l*1.0)/pr[i]);
            if(p==1)
                p++;

            while(pr[i]*p<=r)
            {
                int index=pr[i]*p-l;

                while((arr2[index])%(pr[i])==0)
                    arr2[index]/=pr[i];

                arr1[index]*=(pr[i]-1);
                arr1[index]/=pr[i];
                p++;
            }
        }

        for(int i=0;i<=r-l;i++)
        {
            if(arr2[i]==1)
                continue;

                arr1[i]*=(arr2[i]-1);
                arr1[i]/=arr2[i];
        }

//        for(int i=0;i<=r-l;i++)
//            cout<<l+i<<": "<<arr1[i]<<"\n ";

        int count=0;
        for(int i=0;i<=r-l;i++)
            if(arr1[i]%k==0)
                count++;

        double ans=(count*1.0)/(r-l+1);
        printf("%.6f\n",ans);
    }
}

int sieve(int pr[])
{
    bool arr[1000001];
    for(int i=2;i<=sqrt(1000001);i++)
    {
        if(arr[i]==1)
            continue;
        for(int j=2;i*j<=1000000;j++)
            arr[i*j]=1;
    }

    int l=0;
    for(int i=2;i<=1000000;i++)
        if(!arr[i])
            pr[l++]=i;

    return l;
}
