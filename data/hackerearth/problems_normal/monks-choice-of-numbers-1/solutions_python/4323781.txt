'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
def binary(n):
	a=0
	while n:
		if n%2==1:
			a=a+1
		n=n/2
	return a
x=input()
while x:
	a,b=map(int,raw_input().split())
	c=map(int,raw_input().split())
	d=[binary(i) for i in c]
	d.sort(reverse=True)
	d=d[:b]
	print sum(d)
	x=x-1
		