#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define mset(m,v) memset(m,v,sizeof(m))
#define pb push_back
#define mp make_pair
#define fi first
#define se second
#define pi 3.1415926535897932384
#define mod 10000007
#define MAXM 1000000001

int dp[11][2];
int visit[11][2];

int gandmarr(int idx , int flag,string s)
{
	if(idx<0)	return flag;
	if(visit[idx][flag])	return dp[idx][flag];
	visit[idx][flag]=1;
	int ans=0;
	for(int i=0;i<=9;i++)
		ans+=gandmarr(idx-1,flag | (i==3) , s);
	return dp[idx][flag]=ans;
}

int machoddoiski(string s,int idx,int tight,int flag)
{
	int n = s.length();
	if(idx == n)	return flag;
	int ans = 0;
	if(tight == 0)	return gandmarr(n-idx-1,flag,s);
	else{
		for(int i=0;i<s[idx]-'0';i++)
			ans+=machoddoiski(s,idx+1,0,flag | (i==3));
		ans+=machoddoiski(s,idx+1,1,flag | (s[idx]-48==3));
	}
	return ans;
}

void solve()
{
	int t,i,j,k,n;
	cin>>t;
	while(t--)
	{
		mset(dp,0);
		mset(visit,0);
		string str="";
		cin>>n;
		int x = n;
		while(n!=0)
		{
			str+=n%10+48;
			n/=10;
		}
		reverse(str.begin(),str.end());
		cout<<x-machoddoiski(str,0,1,0)<<endl;
	}
}

int main()
{
	solve();	
	return 0;
}