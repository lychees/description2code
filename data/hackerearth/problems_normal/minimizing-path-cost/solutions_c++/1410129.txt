#include<stdio.h>
#include<string.h>
#define INF 99999 
int V;
int main()
{
    int n , m , i , j,answer,temp,srci,des,q;
    scanf("%d %d",&n,&m);
    V=n;
    char st[n][100], str1[100],str2[100]; 
    for(i=0;i<n;i++)
    {
        scanf("%s",&st[i]);
    }
    int graph[n][n];
    for (i = 0; i < V; i++)
    {
        for (j = 0; j < V; j++)
        {
            graph[i][j] = 10000;   
        }
    }  
    for(j=0;j<m;j++)
    {
        scanf("%s",str1);
        scanf("%s",str2);
        scanf("%d",&temp);
        
        for(i=0;i<n;i++)
        {        
            if(!strcmp(str1,st[i]))
            {
                srci=i;
            //    printf("Srci is %d \n",srci);
                
            }
        }
        for(i=0;i<n;i++)
        {
            if(!strcmp(str2,st[i]))
            {
                des=i;
            //printf("des is %d \n",des);
                
            }
        }
        graph[srci][des]=temp;
        graph[des][srci]=temp;
        //printf("%d \n ",graph[des][srci]);
    }
    


      
    int dist[V][V],  k;
    for (i = 0; i < V; i++)
    {
        for (j = 0; j < V; j++)
        {
            dist[i][j] = graph[i][j];   
        }
    }             
    for (k = 0; k < V; k++)
    {       
        for (i = 0; i < V; i++)
        {            
            for (j = 0; j < V; j++)
            {                
                if (dist[i][k] + dist[k][j] < dist[i][j])
                {
                    dist[i][j] = dist[i][k] + dist[k][j];
                }                    
            }
        }
    }    
    
 
    scanf("%d",&q);
    for(j=0;j<q;j++)
    {
        scanf("%s",str1);
        scanf("%s",str2);
        for(i=0;i<n;i++)
        {
            if(!strcmp(str1,st[i]))
            {
                srci=i;
                //printf("samp is %d \n",srci);
            }
        }
        for(i=0;i<n;i++)
        {
            if(!strcmp(str2,st[i]))
            {
                des=i;
            //    printf("samps is %d \n",des);
            }
        }
        //printf("")
        answer=dist[srci][des];
        printf("%d\n",answer);
        //printf("answer \n");
    }    
    return 0;
}