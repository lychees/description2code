#include <iostream>
#include<algorithm>
using namespace std;
int decimal_binary(int n)  /* Function to convert decimal to binary.*/
{
    int rem, i=1, binary=0;
    while (n!=0)
    {
        rem=n%2;
        if(rem==1)
        binary++;
        n/=2;
    }
    return binary;
}


int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	int n,k,i,j,sum=0;
    	cin>>n;
    	cin>>k;
    	int a[n],cnt[n];
    	for(i=0;i<n;i++)
    	{
    		cin>>a[i];
    		cnt[i]=decimal_binary(a[i]);
    	}
    	sort(cnt,cnt+n);
    	
    	for(i=n-1;i>=n-k;i--)
    	sum=sum+cnt[i];
    	cout<<sum<<"\n";
    	
    }
    return 0;
}
