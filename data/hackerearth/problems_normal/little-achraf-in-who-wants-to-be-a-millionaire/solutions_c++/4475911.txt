#include <bits/stdc++.h>
#define INF 2000000000000000LL
using namespace std;

#define rep(i, a, b) for(int i = (a); i < int(b); ++i)
#define rrep(i, a, b) for(int i = (a) - 1; i >= int(b); --i)
#define trav(it, v) for(typeof((v).begin()) it = (v).begin(); it != (v).end(); ++it)
#define all(v) (v).begin(), (v).end()
#define what_is(x) cerr << #x << " is " << x << endl;

typedef double fl;
typedef long long ll;
typedef pair<int, int> pii;
typedef vector<int> vi;
typedef vector<pii> vpi;

int L, C;
ll len[10000];

int getInd(ll n, ll x){
	if(x <= L)
		return x;
	if(x >= 1000)
		x -= ((x-1000)/L)*L;
	if(n > len[x]){
		while(true)
			printf("a");
	}
	rep(i,x-L,x){
		if(n <= len[i])
			return getInd(n, i);
		n -= len[i];
	}
	assert(0);
	return 0;
}

char ans[105];

int main(){
	scanf("%d%d", &L, &C);
	rep(i,1,L+1){
		len[i]=1;
	}
	len[L+1]=L;
	rep(i,L+2,10000){
		if(len[i-1] >= INF){
			len[i]=INF;
		}
		else{
			len[i]=2*len[i-1]-len[i-L-1];
		}
		if(len[i] > INF)
			len[i]=INF;
	}
	while(C--){
		ll n, x;
		char s[20];
		scanf("%lld%lld%s", &n, &x, s);
		char c=s[0];
		int ind=getInd(n, x);
		if(ans[ind]){
			if(ans[ind] != c){
				printf("0\n");
				return 0;
			}
		}
		ans[ind]=c;
	}
	ll y=1;
	rep(i,1,L+1){
		if(!ans[i])
			y=(y*62)%1000000007;
	}
	printf("%lld\n", y);
}