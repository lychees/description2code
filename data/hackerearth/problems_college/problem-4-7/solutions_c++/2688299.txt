#include<bits/stdc++.h>
 
using namespace std;
 
// Shortcuts for "common" data types in contests
typedef long long int ll;
typedef vector<int> vi;
typedef pair<int, int> ii;
typedef vector<ii> vii;
typedef set<int> si;
typedef map<string, int> msi;
// To simplify repetitions/loops, Note: define your loop style and stick with it!
#define s(i) scanf("%d",&i)
#define sl(i) scanf("%ld",&i)
#define sll(i) scanf("%lld",&i)
#define REP(i, a, b) \
for (int i = int(a); i <= int(b); i++) // a to b, and variable i is local!
#define NREP(i,a,b) \
for (int i = int(a); i >= int(b); i--)
#define TRvi(c, it) \
for (vi::iterator it = (c).begin(); it != (c).end(); it++)
#define TRvii(c, it) \
for (vii::iterator it = (c).begin(); it != (c).end(); it++)
#define TRmsi(c, it) \
for (msi::iterator it = (c).begin(); it != (c).end(); it++)
#define INF 2000000000 // 2 billion
map< string,int > mp;
int main(){
	int n,m;
	cin >> n >> m;
	string a;
	cin >> a;
	string s;
	while(m--){
		cin >> s;
		int val;
		cin >> val;
		mp[s] = val;
	}
	int ans[n];
	s = "";
	int len = a.length();
	if(n == 1){
		cout << 1 << endl;
	}else{
		ans[0] = 1;
		s = s + a[0] + a[1];
		ans[1] = max(mp[s],2);
		for(int i = 2 ; i < len ; i++){
			s = "";
			s = s + a[i-1] + a[i];
			//cout << s <<endl;
			ans[i] = max(ans[i-1]+1,ans[i-2]+max(mp[s],2));
			//ans[i] = 
		}
		//for(int i=0;i<n;i++) cout << ans[i]<< " ";
		cout << ans[len-1] <<endl;
	}
	return 0;
}
