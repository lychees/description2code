#include <bits/stdc++.h>

using namespace std;

#define rep(i, a, b) for(int i = (a); i < int(b); ++i)
#define rrep(i, a, b) for(int i = (a) - 1; i >= int(b); --i)
#define trav(it, v) for(typeof((v).begin()) it = (v).begin(); it != (v).end(); ++it)
#define all(v) (v).begin(), (v).end()

typedef double fl;
typedef long long ll;
typedef pair<int, int> pii;
typedef vector<int> vi;
typedef vector<pii> vpi;

char S[200005];
int as;

pair<int, int> rec(int pos, int a){
	pair<int, int> p;
	int r1,r2;
	if(S[pos] == 'B'){
		p=rec(pos+1,a);
		r1=p.second;
		p=rec(p.first,a);
		r2=p.second;
		return make_pair(p.first, max(r1,r2));
	}
	if(S[pos] == 'A'){
		p=rec(pos+1,a);
		r1=p.second;
		p=rec(p.first,a);
		r2=p.second;
		return make_pair(p.first, r1+r2);
	}
	if(S[pos] == 'X'){
		return make_pair(pos+1,1);
	}
}

void solve(){
	as=0;
	int bs=0,xs=0;
	scanf("%s", S);
	as=rec(0,0).second;
	for(int i=0;S[i];++i){
		if(S[i] == 'B')++bs;
		if(S[i] == 'X')++xs;
	}
	vector<int> v;
	for(int i=0; i < xs; ++i){
		int a;
		scanf("%d", &a);
		v.push_back(a);
	}
	sort(v.begin(), v.end());
	int ans=0;
	for(int i=0; i < as; ++i)
		ans += v[v.size()-1-i];
	printf("%d\n", ans);
}

int main(){
	int T;
	scanf("%d", &T);
	while(T--)solve();
}
