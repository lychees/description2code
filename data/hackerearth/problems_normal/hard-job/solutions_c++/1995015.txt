#include<bits/stdc++.h>
using namespace std;
#define maxn 500005
int tree[5*maxn],m[3*maxn];
typedef long long int ll;
int l,r;
int read(int idx)
{
    int cnt=0;
    while(idx>=l)
    {
        cnt+=tree[idx];
        idx-=(idx&-idx);
    }
    return cnt;
}

void update(int pos,int val)
{
    while(pos<3*maxn+10)
    {
        tree[pos]+=val;
        pos+=(pos&-pos);
    }
}

int main()
{
    int n,ma,x;
    scanf("%d%d",&n,&ma);
    l=maxn;r=maxn+n-1;
    for(int i=0;i<n;i++){
        scanf("%d",&x);
        m[x]=l+i;
        update(l+i,1);
    }

    int k;
    ll ans=0;
    char str[2];
    for(int i=1;i<=ma;i++)
    {
        scanf("%d%s",&k,str);
        int pos=m[k];
        int p=read(pos);
        //cout<<p<<endl;
        ans+=ll(min(p-1,n-p));
        if(str[0]=='l')
        {
            l--;
            update(l,1);
            update(pos,-1);
            m[k]=l;
        }
        else
        {
            r++;
            update(pos,-1);
            update(r,1);
            m[k]=r;
        }
    }
    printf("%lld",ans);
}
