#include<bits/stdc++.h>
#define For(i,n) for(int i=0;i<n;i++)
using namespace std;
const int mod = 1e9 + 7;

int root(int Arr[],int i)
{
    while(Arr[i]!=i)
    {
        Arr[i]=Arr[Arr[i]];
        i=Arr[i];
    }
    return Arr[i];
}
void Union(int Arr[],int a,int b,int w[])
{
    int aroot = root(Arr,a);
    int broot = root(Arr,b);
   
        Arr[aroot] = broot;
}
int main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(0);
    int n;
    cin>>n;
    int a[n],Arr[n];
    For(i,n) Arr[i]=i;
    For(i,n) cin>>a[i];
    int edges,x,y;
    cin>>edges;
    For(i,edges)
    {
        cin>>x>>y;
        Union(Arr,x-1,y-1,a);
    }
    For(i,n) Arr[i]=root(Arr,i);
    //For(i,n) m[Arr[i]]++;
    map<int,multiset<int> > mp;
    For(i,n) mp[Arr[i]].insert(a[i]);
    long long ans=1;
   	for (auto foo: mp)
	{
		long long cnt = 1;
		int low = *(foo.second.begin());
		foo.second.erase(foo.second.begin());
		for (auto bar: foo.second)
		{
			if (bar != low)
				break;
			cnt++;
		}
		ans = (ans * cnt) % mod;
	}
    cout<<ans<<endl;
    return 0;
}
