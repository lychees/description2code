#include <iostream>
#include<algorithm>
using namespace std;

int main() {
	int t;
	cin>>t;
	while(t--)
	{
		int n;
		cin>>n;
		int ar[n];
		int i,j;
		for(i=0;i<n;i++)
		cin>>ar[i];
		int k;
		cin>>k;
		sort(ar,ar+n);
		int c=0;
		i=0;
		j=n-1;
		while(i<j)
		{
			if((ar[i]+ar[j])==k)
			{
	            if(ar[i]==ar[j])
	            {
	            	int x=j-i+1;
	            	c=c+((x*(x-1))/2);
	            	break;
	            }		
			
			    else if(ar[i]==ar[i+1]&&ar[j]==ar[j-1])
			    {
				int x=0,y=0;
				while(ar[i]==ar[i+1])
				{
					i++;
					x++;
				}
				while(ar[j]==ar[j-1])
				{
					j--;
					y++;
				}
				i++;
				j--;
				c=c+(x+1)*(y+1);
			    }
		     	else if(ar[i]==ar[i+1])
		        {
		    	i++;
		    	c++;
		        }
			    else if(ar[j]==ar[j-1])
			    { 
				j--;
				c++;
		     	}
		    	else
	    		{
		    	c++;
	    		i++;
	     		j--;
	    		}
			
			}
			else if((ar[i]+ar[j])<k)
			i++;
			else
			j--;
		}
		cout<<c<<endl;
		
	}
	
	// your code goes here
	return 0;
}