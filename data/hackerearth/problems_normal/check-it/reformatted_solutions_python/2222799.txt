test = int(raw_input())

for i in range(test):
    n, m = [int(x) for x in raw_input().split()]
    tree = [[int(x) for x in raw_input().split()] for _ in range(m)]
    selected = (int(x) for x in raw_input().split())
    mem = set([])
    for i in selected:
        x, y = tree[i-1]
        if x in mem and y in mem:
            print "NO"
            break
        mem.add(x)
        mem.add(y)
    else:
        print "YES"
