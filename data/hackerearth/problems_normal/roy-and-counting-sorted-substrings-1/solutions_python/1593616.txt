'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
t = int(raw_input())
while t > 0 :
	t -= 1
	n = int(raw_input())
	s = raw_input()
	k = 1
	ans = n
	for i in range(1, n) :
		if s[i] >= s[i-1] :
			k += 1
		else :
			k = k * (k - 1) / 2
			ans += k
			k = 1
	k = k * (k - 1) / 2
	ans += k
	print ans
