#include<bits/stdc++.h>
#define mod 1000000007
using namespace std;
long long  power[500005];
void pre()
{
    power[0] = 1;
    for ( int i = 1; i <= 500000; i++ ) {
        power[i] = power[i-1] + power[i-1];
    
        if ( power[i] >= mod ) power[i] -= mod;
    }
    return;
}
int main()
{
	
	long long int i;
	pre();
	std::ios::sync_with_stdio(false);
	power[0]=1;
	int n,q;
	cin>>n>>q;
	int a[n];
	for(i=0;i<n;i++)
	{
		cin>>a[i];
	}
	sort(a,a+n);

while(q--)
{
	char ch;
	int num,ans=0;
	cin>>ch;
	cin>>num;
	if(ch=='=')
	{
		int x = upper_bound(a,a+n,num)-a;
		int y = lower_bound(a,a+n,num)-a;
		if(y>n-1 )
		{
			cout<<ans<<"\n";
			continue;
		}
		if(a[y]!= num)
		{
			cout<<ans<<"\n";
			continue;
		}
		ans = (power[x]-power[y]);
		if(ans <0)
		ans = ans+mod;
		cout<<ans<<"\n";
	}
	else
	if(ch=='<')
	{
		int x = lower_bound(a,a+n,num)-a;
		ans = power[x]%mod;
		cout<<ans<<"\n";
	}
	else
	{
		int x = upper_bound(a,a+n,num)-a;
		ans = (power[n]-power[x])%mod;
		if(ans <0)
		ans = ans+mod;
		cout<<ans<<"\n";
	}
}
}