#include <bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define N 500005
#define ll long long
#define p(t) cout<<t;
#define f(i,n) for(i=0;i<n;i++)
#define g(i,n) for(i=1;i<=n;i++)
#define s(x) scanf("%I64d",&x);
#define pb push_back
#define mp make_pair

ll a[N],b[N],g,m=1e7,siz,n,r;



int main()
{
ios_base::sync_with_stdio(0);
ll k=0,t=0,x,sum=0,q=0,z=0,y=0,i,j,l;
cin>>q;
while(q--){
  set<ll>s;
  ll mi,ma;
  cin>>n>>k; 
  r=0;
  g(i,n)cin>>a[i],b[a[i]]=i;
  g(i,n){x=y=-1;
    if(i==1){s.insert(b[i]);mi=b[i]; ma=b[i]; continue;}
    t=b[i];  m=1e17;
    if(mi<t-k+1){
      z=t-k+1;
      set<ll>::iterator it;
      it=s.lower_bound(z); it--;
      x=*it;
    }
    if(ma>t+k-1){
      z=t+k-1;
      set<ll>::iterator it;
      it=s.upper_bound(z); 
      y=*it;
    }
    if(x!=-1)m=min(m,t-x);
    if(y!=-1)m=min(m,y-t);
    if(m!=1e17)r+=m;
    s.insert(t);
    mi=min(mi,t);
    ma=max(ma,t);
  }
  cout<<r<<endl;
}


return 0;
}
