//#pragma comment(linker, "/STACK:16777216")
#include <cstdio>
#include <iostream>
#include <iomanip>
#include <algorithm>
#include <string>
#include <cstring>
#include <vector>
#include <stack>
#include <queue>
#include <deque>
#include <map>
#include <set>
#include <limits>
#include <climits>
#include <cmath>
#include <functional>
#include <ctime>
#include <cstdlib>
#include <fstream>
#include <typeinfo>
#include <cassert>

#define endl '\n'
#define remainder safdskhaslfa
#define pow aafkhffhlgsdas
#define distance dagkjsdsdsara
#define left askfjasieqwskajdaks
#define right sakjjlkjlkjlashfjas
#define y0 kshjlhlliahjajkdhkasfdg
#define y1 kjlajhjaskhajkhjfkahgjahjkas

using namespace std;

const int N = 1<<17;

struct girl {
	long long flavour,anger;
	bool operator <(const girl &a) const {
		return flavour+anger<a.flavour+a.anger;
	}
};

int n;
girl a[N];
int tests;
long long ans;

int main() {
  ios_base::sync_with_stdio(false);
  cin.tie(NULL);
  //ifstream cin("test.txt");
  //freopen("test.txt","r",stdin);

	int i;
	long long x,y;

  cin>>tests;
  while(tests--) {
		cin>>n;
		for(i=1;i<=n;i++) {
			cin>>a[i].flavour>>a[i].anger;
		}
		sort(a+1,a+1+n);
		ans=0;
		for(i=1;i<=n-2;i++) ans-=a[i].anger;
		ans+=a[n].flavour+a[n-1].flavour;
		cout<<ans<<endl;
  }

  return 0;
}
