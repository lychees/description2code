#include<stdio.h>
#include<math.h>
#include<vector>
#include<algorithm>
#include<map>
using namespace std;
long long tab[100005][45];
int main()
{
    int t,i,mem;
    long long ct=0,keb,n,m;
    scanf("%d",&t);
    while(t--)
    {
        ct=0;
        scanf("%lld%lld",&n,&m);
        if(m==1)
            printf("%lld\n",n);
        else if(m>=10000001)
            printf("%lld\n",n/m+n%m);
        else
        {
            tab[m][0]=1;
            for(i=1;;i++)
            {
                if(tab[m][i]==0)
                    tab[m][i]=tab[m][i-1]*m;
                if(tab[m][i]>n)
                    break;
            }
            mem=i-1;
            for(i=mem;i>=0;i--)
            {
                if(n>=tab[m][i])
                {
                    ct+=n/tab[m][i];
                    n%=tab[m][i];
                }
                if(n==0)
                    break;
            }
            printf("%lld\n",ct);
        }
    }
}
            
    
