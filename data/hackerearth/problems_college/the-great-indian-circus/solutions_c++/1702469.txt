#include <bits/stdc++.h>
using namespace std;
int array1[1111][1111];
void recurse(int i, int j){
	array1[i][j]=1;
	for(int k=0;k<1111;k++){
		if(array1[i][k] == 0) recurse(i, k);
	}
	for(int k=0;k<1111;k++){
		if(array1[k][j] == 0) recurse(k, j);
	}
	return;
}

 int main(){
 	int t;
 	int n,x,y;
 	cin>>t;
 	while(t--){
 		for(int i=0;i<1111;i++)
 		for(int j=0;j<1111;j++)
 			array1[i][j] = 1;
 		cin>>n;
 		for(int i=0;i<n;i++){
 			cin>>x>>y;
 			array1[x][y]=0;
 			//cout<<array[x][y]<<" "<<x<<" "<<y<<" "<<endl;
 		}
 		int res=0;
 		for(int i=0;i<1111; i++){
 			for(int j=0;j<1111;j++){
 			if(array1[i][j] == 0){
 				recurse(i,j);
 				res++;
 				//cout<<i<<" "<<j<<endl;
 			}
 		}
 		}
 		cout<<res-1<<endl;
 	}
 }