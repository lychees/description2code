#include<bits/stdc++.h>
using namespace std;
int dp[101][101][501]; 
int main()
{
	int t; cin>>t;
	while(t--)
	{
		int n,m,i,j,k,l; cin>>n>>m>>k; int a[n][m];
		for(i=0;i<n;i++)
		{
			for(j=0;j<m;j++)
			{
				cin>>a[i][j];
				for(l=0;l<501;l++)dp[i][j][l]=false;
			}
		}
		for(i=0;i<n;i++)
		{
			for(j=0;j<m;j++)
			{
				for(l=a[i][j];l<=k;l++)
				{
					if(i==0 and j==0)
					{
						if(l==a[i][j])dp[i][j][l]=true;
					}
					else if(i==0)
					{
						dp[i][j][l]=(dp[i][j][l] || dp[i][j-1][l-a[i][j]]);
					}
					else if(j==0)
					{
						dp[i][j][l]=(dp[i][j][l] || dp[i-1][j][l-a[i][j]]);
					}
					else
					{
						dp[i][j][l]=(dp[i][j][l] || dp[i-1][j][l-a[i][j]]);
						dp[i][j][l]=(dp[i][j][l] || dp[i][j-1][l-a[i][j]]);
						dp[i][j][l]=(dp[i][j][l] || dp[i-1][j-1][l-a[i][j]]);
					}
				}
			}
		}
		int count=0;
		for(count=k;count>=0;count--)
			if(dp[n-1][m-1][count])break;
		cout<<count<<endl;

	}
	return 0;
}
