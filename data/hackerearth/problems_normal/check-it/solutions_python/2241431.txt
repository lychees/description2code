from __future__ import print_function 
import sys

def read_ints(): return map(int, raw_input().split())

def is_spanning_tree(edges, indexes, total_vertices):
	visited = set()
	for i in indexes:
		x, y = edges[i-1]
		visited.add(x)
		visited.add(y)
	return len(visited) == total_vertices
	
for tc in range(int(raw_input())):
	edges = []
	N,M=read_ints()
	for i in range(M):
		edges.append(read_ints())
	edges_taken = read_ints()
#	print(edges, N, M, file=sys.stderr)
	print("YES" if is_spanning_tree(edges, edges_taken, N) else "NO")
