#include<cstdio>
#include<time.h>
#include<algorithm>
#include<iostream>
using namespace std;

const int MAXN = 3 * 500000 + 5;
int sum[MAXN];
int val[MAXN];

void update(int x , int val)
{
    for(x;x < MAXN;x += (x & -x))
        sum[x] += val;
}
int getrank(int x)
{
    int ans = 0;
    for(x; x > 0;x -= (x & -x))
        ans += sum[x];
    return ans;
}
int main()
{

    srand(time(NULL));

    int n , m;
    scanf("%d%d" , &n , &m);
    int pos1 = m + 2 ,pos2 = n + m + 3;

    for(int i = 1;i <= n;i ++)
    {
        int a;
        scanf("%d",  &a);
        val[a] = i + m + 2;
        update(val[a] , 1);
    }
    long long ans = 0;
    for(int i = 0;i < m;i ++)
    {
        int x; scanf("%d" , &x);
        char c;
        scanf(" %c" , &c);
        int y = val[x];

        int u = getrank(y - 1);
        //cout << y << " " << u << endl;
        ans += min(u , n - u - 1);
        if(c == 'r')
        {
            if(val[x] == pos2 - 1)
                continue;
            update(val[x] , -1);
            val[x] = pos2 ++;
            update(val[x] , 1);
        }
        else
        {
            if(val[x] == pos1 + 1)
                continue;
            update(val[x] , -1);
            val[x] = pos1 --;
            update(val[x] , 1);
        }
      //  cout << ans << endl;
    }
    printf("%lld\n", ans);
    return 0;
}
