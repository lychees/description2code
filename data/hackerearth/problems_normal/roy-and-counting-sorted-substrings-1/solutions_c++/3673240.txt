#include <iostream>
#include <string>

unsigned long long int gaussianSum(const size_t i) {
	unsigned long long int res = i;
	return (res*(res + 1)) >> 1;
}

unsigned long long int countSortedSubstrings(const std::string & s) {
	unsigned long long int count = 0;
	size_t i = 0, next = 0;
	while (i < s.size() - 1) {
		while (i < s.size() && s[i] <= s[i+1]) ++i;
		count += gaussianSum(++i - next);
		next = i;
	}
	return count;
}

void run(std::ostream & out = std::cout, std::istream & in = std::cin) {
	unsigned int lines;
	in >> lines;
	std::string s;
	unsigned int s_size;
	for (unsigned int i = 0; i < lines; ++i) {
		in >> s_size;
		in >> s;
		s += '0';
		out << countSortedSubstrings(s) << std::endl;
	}
	out.flush();
}

int main() {
	run();
	return 0;
}
