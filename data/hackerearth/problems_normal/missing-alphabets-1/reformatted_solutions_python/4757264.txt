def lex_order(x, y, alphabet):
    if (len(x) < len(y)):
        smaller = x
        bigger = y
    else:
        smaller = y
        bigger = x
    for i in range(len(smaller)):
        if (smaller[i] != bigger[i]):
            if (alphabet.find(smaller[i]) < alphabet.find(bigger[i])):
                return (smaller, bigger)
            else:
                return (bigger, smaller)
    return (smaller, bigger)


def insertion_sort(list, alphabet):
    for i in range(len(list)):
        for j in range(i + 1, len(list)):
            (x, y) = lex_order(list[i], list[j], alphabet)
            list[i] = x
            list[j] = y
    return list


num_tests = int(raw_input().rstrip("\n"))
for count_test in range(num_tests):
    alphabet = raw_input().rstrip("\n")
    num_cases = int(raw_input().rstrip("\n"))

    input_strings = []
    for count_input in range(num_cases):
        input_strings.append(raw_input().rstrip("\n"))

    input_strings = insertion_sort(input_strings, alphabet)

    for sorted_strings in input_strings:
        print sorted_strings
