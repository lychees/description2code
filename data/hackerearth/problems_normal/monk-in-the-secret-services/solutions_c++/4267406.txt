#include <iostream>
#include <algorithm>
using namespace std;
int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		int n,m,i,j;
		cin>>n>>m;
		pair<pair <int,int>,int > e[m+1];
		for(i=1;i<=m;i++)
		{
			cin>>e[i].first.first>>e[i].first.second>>e[i].second;
		}
		int s,a,h;
		cin>>s>>a>>h;
		int v1,v2,c;
		int dp1[n+1];
		for(i=1;i<=n;i++)
			dp1[i]=29999;
		dp1[s]=0;	
		for(i=1;i<=n;i++)
		{
			for(j=1;j<=m;j++)
			{
				v1=e[j].first.first;
				v2=e[j].first.second;
				c=e[j].second;
				dp1[v1]=min(dp1[v1],dp1[v2]+c);
				dp1[v2]=min(dp1[v2],dp1[v1]+c);
			}
		}
		
		int dp2[n+1];
		for(i=1;i<=n;i++)
			dp2[i]=29999;
		dp2[a]=0;	
		for(i=1;i<=n;i++)
		{
			for(j=1;j<=m;j++)
			{
				v1=e[j].first.first;
				v2=e[j].first.second;
				c=e[j].second;
				dp2[v1]=min(dp2[v1],dp2[v2]+c);
				dp2[v2]=min(dp2[v2],dp2[v1]+c);
			}
		}
		
		int dp3[n+1];
		for(i=1;i<=n;i++)
			dp3[i]=29999;
		dp3[h]=0;	
		for(i=1;i<=n;i++)
		{
			for(j=1;j<=m;j++)
			{
				v1=e[j].first.first;
				v2=e[j].first.second;
				c=e[j].second;
				dp3[v1]=min(dp3[v1],dp3[v2]+c);
				dp3[v2]=min(dp3[v2],dp3[v1]+c);
			}
		}
		int sum,mi=0;
		for(i=1;i<=n;i++)
		{
			if(i==s||i==a||i==h)
				continue;
			sum=dp1[i]+2*dp2[i]+dp3[i];
			mi=max(mi,sum);
		}
		/*
		for(i=1;i<=n;i++)
		{
			cout<<i<<" "<<dp1[i]<<" "<<dp2[i]<<" "<<dp3[i]<<endl;
		}
		*/
		cout<<mi<<endl;
	}
    return 0;
}
