#include <bits/stdc++.h>
using namespace std;

struct node {
	int val;
	int id;
}a[1500];

int A[1500];
int B[40][1500];

const int SQRT = 38;


int len,k;

int cmp(const node a1, const node a2) {
	if(a1.val != a2.val) {
		return a1.val < a2.val;
	} 
	return a1.id < a2.id;
}

int main()
{
	int n;
	int q;
	
	int l, r;
	
	
	scanf("%d",&n);
	for(int i=1;i<=n;i++) {
		scanf("%d",&a[i].val);
		A[i] = a[i].val;
		a[i].id = i;
		//cout<<A[i]<<"\n";
	}
	
	sort(a+1, a+n+1, cmp);
	
	for(int i=1;i<=n;i++) {
		B[(i-1)/SQRT][a[i].id] = 1;
	}
	
	for(int i=0;i<=SQRT;i++) {
		for(int j=1;j<=n;j++) {
			B[i][j] += B[i][j-1]; 
		}
	}
	
	scanf("%d",&q);
	while(q--) {
		
		int cnt = 0;
		scanf("%d %d",&l, &r);
		
		len  = r-l+1;
		
		if(len&1) {
			k = len/2+1;
		} else {
			k = len/2;
		}
		
		for(int i=0;i<=SQRT;i++) {
			
			if(cnt+(B[i][r]-B[i][l-1] ) >= k ) {
				for(int j=i*SQRT ; j<(i+1)*SQRT && j<n; j++) {
					if(a[j+1].id >=l && a[j+1].id<=r) {
						cnt++;
					}
					
					if(cnt == k) {
						printf("%d\n",A[a[j+1].id] );
						break;
					}
				}		
				break;
			} else {
				cnt += B[i][r] - B[i][l-1];
			}
		}
		
		
	}
    return 0;
}







