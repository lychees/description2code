#include "bits/stdc++.h"
using namespace std;

int main()
{
    int n, k;
    
    cin>>n>>k;
    vector<int> a(n,0);
    vector<map<int,int>> vv(k+1,map<int,int>() );
    vector<int> v(k+1,0);
    vector<int> dec(k,0);
    for(int i = 0;i<n;i++){
    	cin>>a[i];
    }
    sort(a.begin(), a.end());
    
    
    for(int i = 0;i<=k;i++){
    	v[i] = i;
    }
    
    //vv.push_back(map<int,int>());
    // for(int i = 0;i<=k;i++){
    // 	map<int,int> m;
    // 	vv.push_back(m);
    // }
    for(int i = 2;i<=k;i++){
    	for(int m = i;m<=k;m=m+i){
    		if(v[m]!=1){
    			int temp = v[m];
    			int count = 0;
    			while(temp%i==0){
    				count++;
    				temp = temp/i;
    			}
    			if(count){
    				v[m]=temp;
    				vv[m][i]=count;
    			}
    		}
    	}
    }
    
    //cout<<"amit";
    for(int i = 2;i<=k;i++){
    	map<int, int> m = vv[i];
    	typedef map<int, int>::iterator it_type;
    	int prime=1, count = 0;
		for(it_type it = m.begin(); it != m.end(); it++) {
		    if(it->second>count){
		    	prime = it->first;
		    	count = it->second;
		    }
		}
		if((prime%i)%2 == 0){
			dec[i-1] = 1;
		}
    }
    int start = 0;
    for(int i = 0;i<k;i++){
    	if(dec[i]==0){
    		a[n-1] = (a[n-1]*2)%1000000007;
    	}
    	else{
    		if(start>=n) break;
    		a[start] /= 2;
    		if(a[start]==0)start++;
    	}
    }
    
    int count = 0;
    for(int i = 0;i<n;i++){
    	if(a[i]!=0)count++;
    }
    cout<<count<<endl;
    for(int i = 0;i<n;i++){
    	if(a[i])cout<<a[i]<<" ";
    }
    
    return 0;
}
