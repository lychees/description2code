#include<bits/stdc++.h>
using namespace std;
vector<vector<int> >graph;
bool visit[100005];
int ans;
void dfs(int x)
{
    visit[x]=true;
    ans++;
    for(int l=0;l<graph[x].size();l++)
        if(!visit[graph[x][l]])
            dfs(graph[x][l]);
}
int main()
{
    ios::sync_with_stdio(false);
    int n,t,f,s,i,x,y;
    cin>>t;
    while(t--)
    {
        cin>>n>>f>>s;
        graph.resize(n+1);
        for(i=0;i<f;i++)
        {
            cin>>x>>y;
            graph[x].push_back(y);
        }
        memset(visit,false,sizeof(visit));
        ans=0;
        for(i=0;i<s;i++)
        {
            cin>>x;
            if(!visit[x])
                dfs(x);
        }
        cout<<ans<<"\n";
        graph.clear();
    }
    return 0;
}
