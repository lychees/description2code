#include <bits/stdc++.h>
using namespace std;
const int M=1e9+7;

int main()
{ long long int a,b,c;
cin>>a>>b>>c;
int n,i;
cin>>n;
long long int A[n],B[n];
A[0]= (a*c) % M;
B[0]=(b*c) % M;
for(i=1;i<n;i++)
 {A[i] = (((((A[i-1]*a)%M)*b)%M)*c)%M + (((A[i-1]*a)%M)*b)%M + (((A[i-1]*a)%M)*c)%M;
                A[i] = A[i]%M;
 B[i] = (((((B[i-1]*b)%M)*c)%M)*a)%M + (((B[i-1]*b)%M)*a)%M + (((B[i-1]*b)%M)*c)%M;
                B[i] = B[i]%M;}
 long long int min1=min(A[0],A[1]),min2=max(A[0],A[1]), min3= min(B[0],B[1]),min4=max(B[0],B[1]);
 int i1= A[0]<A[1]?0:1, i2= 1-i1, i3=B[0]<B[1]?0:1,i4=1-i3;
 for(i=2;i<n;i++)
 { if(A[i]<min1)
 { min2=min1; i2=i1;
 min1=A[i];i1=i;}
 if(A[i]>min1 && A[i]<min2)
 {min2=A[i]; i2=i;}
 }
 
 
 for(i=2;i<n;i++)
 {  if(B[i]<min3)
 { min4=min3; i4=i3;
 min3=B[i];i3=i;}
 if(B[i]>min3 && B[i]<min4)
 {min4=B[i]; i4=i;}
 
 
 }

 if(i1!=i3)
 cout<<(min1+min3)%M<<endl;
 else
 cout<< min((min1+min4)%M,(min2+min3)%M) <<endl;
}
 
 
    



