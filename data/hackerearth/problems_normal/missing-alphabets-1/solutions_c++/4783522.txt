#include <iostream>
#include <algorithm>
#define FOR(n) for(i=0;i<(int)n;i++)

using namespace std;

int pos[26];

bool compare(string s1, string s2) {
	int i=0;
	int len, f;
	if (s1.length()<s2.length()) {
		f=1;
		len = s1.length();
	}
	else {
		f=2;
		len = s2.length();
	}
	while (i<len) {
		if (s1[i]!=s2[i]) {
			if (pos[s1[i]-'a']<pos[s2[i]-'a']) return true;
			else return false;
		}
		i++;
	}
	if (i>=len) {
		if (f==1) return true;
		else return false;
	}
}

int main()
{
    int t;
    cin>>t;
    while (t--) {
        string e;
        cin>>e;
        int i;
        FOR(26) {
            pos[e[i]-'a'] = i;
        }
        int m;
        cin>>m;
        string set[m];
        FOR(m) cin>>set[i];
        sort(set,set+m,compare);
        FOR(m) cout<<set[i]<<endl;
    }
    return 0;
}
