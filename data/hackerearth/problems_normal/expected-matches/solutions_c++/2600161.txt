#include<iostream>
#include<algorithm>

using namespace std;

int const N = 1e3 + 41;

int test, n, m;

double dp[N][N], a[N][N];

void clear(){
	for(int i=0;i<N;++i){
		for(int j=0;j<N;++j){
			dp[i][j] = 0.0;
		}
	}
	dp[1][1] = 1.0;
}


int main(){
	scanf("%d",&test);
	for(int t=0;t<test;++t){
		clear();
		scanf("%d%d",&n,&m);
		for(int i=1;i<=n;++i){
			for(int j=1;j<=m;++j){
				scanf("%lf",&a[i][j]);
			}
		}
		
		double ans = 0.0;
		for(int i=1;i<=n;++i){
			for(int j=1;j<=m;++j){
				ans += dp[i][j];
				dp[i][j+1] += dp[i][j] * a[i][j];
				dp[i+1][j] += dp[i][j] * (1.0 - a[i][j]);
			}
		}
		
		printf("%.6lf\n",ans);
	}


	return 0;
}