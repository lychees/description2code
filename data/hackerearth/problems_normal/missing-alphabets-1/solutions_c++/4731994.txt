#include <iostream>
#include<bits/stdc++.h>
using namespace std;
map<char,int> m;
int compare(string a,string b)
{
	int i,j;
	for(i=0,j=0;i<=a.size() && j<=b.size();i++,j++)
	{
		if(m[a[i]]>m[b[j]])
			return true;
		if(m[a[i]]<m[b[j]])
			return false;
	}
	return false;
}
int main()
{
    int t;
    string dic;
    cin>>t;
    while(t--)
    {
    	cin>>dic;
    	int i,j,n,k=1;
    	for(i=0;i<dic.size();i++)
    	{
    		m[dic[i]]=k++;
    	}
    	cin>>n;
    	vector<string> word;
    	string t;
    	for(i=0;i<n;i++)
    	{
    		cin>>t;
    		word.push_back(t);
    	}
    	for(i=0;i<word.size();i++)
    	{
    		for(j=0;j<word.size()-i-1;j++)
    		{
    			if(compare(word[j],word[j+1]))
    			{
    				string temp=word[j];
    				word[j]=word[j+1];
    				word[j+1]=temp;
    			}
    		}
    	}
    	for(i=0;i<word.size();i++)
    	{
    		cout<<word[i]<<"\n";
    	}
    	m.clear();
    }
    return 0;
}
