#include<bits/stdc++.h>

using namespace std;

int v[20000],p[20000];

int main()
{
	int i,j,k,t,n,m,a,b,c;
	vector<vector<int> > G;
	vector<int> R;
	queue <int> Q;
	scanf("%d",&t);
	for(i=1;i<=t;i++)
	{
		scanf("%d %d",&n,&m);
		for(j=0;j<=n;j++)
			G.push_back(R);
		for(j=0;j<m;j++)
		{
			scanf("%d %d",&a,&b);
			G[a].push_back(b);
			G[b].push_back(a);
		}
		memset(v,0,sizeof(v));
		memset(p,0,sizeof(p));
		
		v[1]=1;
		p[1]=-1;
		Q.push(1);
		while(!Q.empty())
		{
			int x=Q.front();
			if(x==n)
				break;
			Q.pop();
			for(k=0;k<G[x].size();k++)
			{
				if(v[G[x][k]]==0)
				{
					v[G[x][k]]=1;
					p[G[x][k]]=x;
					Q.push(G[x][k]);
				}
			}
		}
		c=0;
		while(p[n]!=-1)
		{
			c++;
			n=p[n];
		}
		printf("%d\n",c);
		G.clear();
		while(!Q.empty())
			Q.pop();
	}
	return 0;
}