/*You are given two arrays each with N elements. Elements of each arrays follow a particular generator dependent on factors a,b and c . You have to choose on element from both the arrays such that if you chose ith element from one array and jth element from another array then i should not be equal to j and sum of the both elements should be minimum.
Remember that the generator code is language independent. Please make relevant changes as per the language you use */

#include<iostream>
#define M 1000000007

using namespace std;

int main()
{
	int i,j,iA1,iA2,iB1,iB2;
	unsigned long int x,mA1,mA2,mB1,mB2,min,prevA,A,prevB,B,a,b,c,n;
	//vector<long long int> A,B;

		cin>>a>>b>>c>>n;

	long long v1= ((b*c)% M + b + c)% M;
	long long v2= ((c*a)% M + a + c)% M;

											//cout<<"v1= "<<v1<<" v2= "<<v2<<endl<<endl;
	prevA=(a*c)% M;
	mA1=prevA;
	iA1=0;
	mA2=M;
	iA2=0;
	prevB=(b*c)% M;
	iB1=0;
	mB1=prevB;
	mB2=M;
	iB2=0;
		
			for(i=1 ; i<n ; i++)
			{
   				 A=((prevA*a)% M * v1)% M; 
				if(A<mA1)
				{
					mA1=A;
					iA1=i;
				}
				if(A>mA1 && A<mA2)
				{
					mA2=A;
					iA2=i;
				}
					prevA=A;
			}
	
			for(i=1 ; i<n ; i++)
			{
				 B=((prevB*b)% M * v2)% M;
				
				if(B<mB1)
				{
					mB1=B;
					iB1=i;
				}
				if(B>mB1 && B<mB2)
				{
					mB2=B;
					iB2=i;
				}
					prevB=B;
			}  
			
			//cout<<mA1<<" "<<iA1<<'\n'<<mA2<<" "<<iA2<<'\n'<<mB1<<" "<<iB1<<'\n'<<mB2<<" "<<iB2<<'\n';

			/*for(i=0;i<A.size();i++)
					cout<<A[i]<<" ";
			cout<<endl<<endl;
		
			for(i=0;i<B.size();i++)
					cout<<B[i]<<" ";
			cout<<endl;*/

					if(iA1!=iB1)
						min=mA1+mB1;
					else
					{
						if(mA1+mB2 < mA2+mB1)
							min=mA1+mB2;
						else
							min=mA2+mB1;
						
					}
			cout<<min<<endl;
						
return 0;
}  
	