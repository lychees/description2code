for _ in range(input()):
    rc = input()
    matrix = []

    for x in range(rc):
        rows = raw_input()
        tmp = []
        for y in range(rc):
            tmp.append(rows[y])
        matrix.append(tmp)
    hor = True
    for x in range(rc//2):
        one = "".join(matrix[x])
        two = "".join(matrix[rc - x - 1])
        if one != two:
            hor = False
            break
    
    vers = []
    for x in zip(*matrix):
        tmp = []
        for y in x:
            tmp.append(y)
        vers.append(tmp)
    ln = len(vers)
    ver = True
    for x in range(ln//2):
        one = "".join(vers[x])
        two = "".join(vers[rc - x - 1])
        if one != two:
            ver = False
            break
    if hor and ver :
        print "BOTH"
    elif hor and not ver:
        print "HORIZONTAL"
    elif not hor and ver:
        print "VERTICAL"
    else:
        print "NO"
       
            
        
    
   
    