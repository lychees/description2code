#include<iostream>
#include<algorithm>
using namespace std;
long long int exponent(long long int a,long long int n,long long int p)
{
    if((n==1)||(n==0))
    return a;
    long long int x=exponent(a,n/2,p)%p;
    if(n%2==1)
    return (((x*x)%p)*a)%p;
    else
    return ((x*x)%p);
    }
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
             long long int n, p;
              cin>>n>>p;
             long long int m=3*n;
              if(m>=p)
              cout<<0<<endl;
              else
              {
                long long int num=p-m-1,i,s1=1,s2=1,s3=1;
                  for(i=1;i<=num;i++)
                  {
                  //s3=exponent(m+i,p-2,p);
                  s1=(s1*(m+i))%p;
                  }
                  s1=exponent(s1,p-2,p)%p;
                  s1=(-1*s1+p)%p;
                  num=p-n-1;
                  s1=(s1*exponent(3,num,p))%p;
                  s1=(s1*exponent(2,num,p))%p;
                  //cout<<"Answer should be: "<<1296%p<<endl;
                  //cout<<"s2 is "<<s2<<endl;
//cout<<"s1 is "<<s1<<endl;
                  cout<<s1<<endl;
                  
                  }
              }
             // system("pause");
             return 0;
}
