#include <bits/stdc++.h>
#define ll long long
using namespace std;
ll int a[2010],dp[2010][2010];
ll int n;
ll int myfind(ll int l,ll int h)
{
	ll int t;
	if(l>h)
	return 0;
	if(dp[l][h]==-1)
	{
		t=n-((h-l)+1)+1;
		dp[l][h]=max((t*a[l])+myfind(l+1,h),(t*a[h])+myfind(l,h-1));
	}
	return dp[l][h];
}
int main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	ll int i,j;
	for(i=0;i<2010;i++)
	{
		for(j=0;j<2010;j++)
		dp[i][j]=-1;
	}
	cin>>n;
	for(i=0;i<n;i++)
	{
		cin>>a[i];
	}
	myfind(0,n-1);
	cout<<dp[0][n-1]<<endl;
	return 0;
}
