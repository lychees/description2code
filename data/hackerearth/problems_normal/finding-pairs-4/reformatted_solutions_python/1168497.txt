def factorial(n):
    fact = 1
    while n:
        fact = fact * n
        n -= 1
    return fact


testcases = input()
output = []
index = 0
while index < testcases:
    length = input()
    array = raw_input().split(" ")
    array = [int(i) for i in array]
    arrayDict = {}

    for i in array:
        if arrayDict.has_key(i):
            c = arrayDict.get(i) + 1
            arrayDict.update({i: c})
        else:
            arrayDict.update({i: 1})

    count = 0

    for value in arrayDict.values():
        if value > 2:
            value += (factorial(value) / (2 * factorial(value-2)))
        if value == 2:
            value += 1
        count += value
    index += 1
    output.append(count)

for i in output:
    print i
