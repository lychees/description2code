#include<bits/stdc++.h>
using namespace std;

long long int gcd(long long int a,long long int b)
{
	if(a==0)
	return b;
	else 
	return gcd(b%a,a);	
}

long long int max(long long int a,long long int b)
{
	return a>b?a:b;
}

struct node{
	long long int v,ind;
	long long int c;
};

bool comp(struct node more, struct node less)
{
	if(more.v>=less.v)
	return true;
	return false;
}

int main()
{
	int t;
	cin>>t;
	
	for(;t>0;t--)
	{
		int n;
		cin>>n;
		
		struct node s[n];
		
		map<long long int , long long int>m;
		
		long long int a[n];
		for(int i=0;i<n;i++)
		{
			cin>>s[i].v;
			a[i]=s[i].v;
		}
		
		sort(s,s+n,comp);
		
		int i=0,h=1;
		while(i<n)
		{
			if(s[i].v == s[i+1].v)
			{
				int y=0;
				while(s[i].v==s[i+1].v && i<n)
				{
				//	cout<<s[i].v<<" "<<s[i+1].v<<" "<<h<<endl;
					s[i].c=h;
					s[i+1].c=h;
					//cout<<h<<endl;
					m[s[i].v]=s[i].c;
					m[s[i+1].v]=s[i+1].c;
					i++;
					y++;
				}
				y++;
				h+=y;
				i++;	
			}
			else
			{
				//cout<<h<<endl;
				s[i].c=h;
				m[s[i].v]=s[i].c;
				h++;	
				i++;
			}
			
		}
		
		
		for(int i=0;i<n;i++)
		{
			cout<<m[a[i]]<<" ";
		}
		cout<<endl;
	}
	return 0;
}