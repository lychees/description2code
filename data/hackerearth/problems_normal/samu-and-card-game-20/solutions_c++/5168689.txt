#include <bits/stdc++.h>
#define ll long long
using namespace std;

int main()
{
	ll t;
	cin >> t;
	while(t--)
	{
		ll n, m, q, a, b, c = 0, x = 1, y = 1, j, k, h;
		cin >> n >> m >> q;
		while(q--)
		{
			j = max(n, m);
			k = max(n, m);
			cin >> a >> b;
			if(a > 0)
			j = (n - x) / a;
			if(a < 0)
			j = (x - 1) / ((-1) * a);
			if(b > 0)
			k = (m - y) / b;
			if(b < 0)
			k = (y - 1) /((-1) * b);
			
			h = min(j, k);
			
			c += h;
			
			x = x + h * a;
			y = y + h * b;
		}
		cout << c << endl;
		
	}
    
    return 0;
}
