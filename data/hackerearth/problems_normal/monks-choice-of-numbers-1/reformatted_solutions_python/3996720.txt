def count_set_bits(number):
    count = 0
    while (number):
        number = number & (number-1)
        count += 1
    return count


test_cases = int(raw_input())
while test_cases > 0:
    n, k = map(int, raw_input().split())
    numbers = map(int, raw_input().split())
    maximum_count = 0
    counts_list = list()
    for number in numbers:
        counts_list.append(count_set_bits(number))
    print sum(i for i in sorted(counts_list, reverse=True)[:k])
    test_cases -= 1
