#include <bits/stdc++.h>
using namespace std;
long int countSetBits(long int n)
{
    unsigned int count = 0;
    while (n)
    {
      n &= (n-1) ;
      count++;
    }
    return count;
}
int main()
{
    long int t;
    cin>>t;
    while(t--)
    {
    	long int n,k,sum=0;
    	cin>>n>>k;
    	long int a[n],i,f[n];
    	
    	for(i=0;i<n;i++)
    	cin>>a[i];
    	
    	for(i=0;i<n;i++)
         f[i]=countSetBits(a[i]);
         sort(f,f+n);
         
         for(i=n-1;i>=n-k;i--)
         sum+=f[i];
         cout<<sum<<endl;
    	
    }
}
