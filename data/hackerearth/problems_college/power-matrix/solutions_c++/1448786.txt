/* Deathsurgeon (Rupesh Maity)
 * 2nd year, B.Tech in IT
 * IIIT - Allahabad
 */

#include <iostream>
#include <cstdio>
#include <math.h>
#include <string>
#include <cstring>
#include <algorithm>
#include <cstdlib>
#include <stack>
#include <queue>
#include <vector>
#include <map>

typedef long long LL;

#define MOD 1000000007
#define MAX 1000000
#define pb push_back
#define yes puts("YES")
#define no puts("NO")
#define sd(x) scanf("%d", &x)
#define PI 3.14159265

using namespace std;

int m;

void mult(int arr[][50], int brr[][50], int crr[][50]) {
	for (int i=0; i<m; i++) for (int j=0; j<m; j++) crr[i][j]=0;
	
	for (int i=0; i<m; i++) {
		for (int j=0; j<m; j++) {
			for (int k=0; k<m; k++) {
				crr[i][j] = (crr[i][j]+(LL)arr[i][k]*brr[k][j])%MOD;
			}
		}
	}
}

int main() {
	int t;
	cin >> t;
	
	while (t--) {
		int arr[50][50];
		int ans[50][50];
		int po[50][50];
		int n;
		scanf("%d%d", &m, &n);
		
		for (int i=0;i<m; i++) for (int j=0;j<m;j++){scanf("%d", &arr[i][j]);po[i][j]=arr[i][j];}
		bool done=false;
		
		while (n) {
			int ne[50][50];
			if (n&1) {
				if (done==false) {
					for (int i=0; i<m; i++) for (int j=0; j<m; j++) ans[i][j]=po[i][j];
					done=true;
				} else {
				mult(ans, po, ne);
				for (int i=0;i<m;i++) for (int j=0;j<m;j++) ans[i][j]=ne[i][j];}
			}
			mult(po, po, ne);
			for (int i=0;i<m;i++) for (int j=0;j<m;j++) po[i][j]=ne[i][j];
			n>>=1;
		}
		
		for (int i=0;i<m;i++) {
			for (int j=0;j<m;j++) printf("%d ", ans[i][j]);
			cout << endl;
		}
	}
	
	
	return 0;
}