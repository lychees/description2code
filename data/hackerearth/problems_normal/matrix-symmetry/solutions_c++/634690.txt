#include <iostream>
#include <vector>
using namespace std;
int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		int n,i,j,p=1;
		cin>>n;
		vector <char> temp,temp_ver;
		vector <vector <char> > v_h , v_ver;
		for(i = 0 ; i < n ; i ++)
		{
			 for( j = 0 ; j < n ; j++)
			 {
			 	char ch;
			 	cin>>ch;
			 	temp.push_back(ch);
			 }
			 v_h.push_back(temp);
			 temp.clear();
		}
		
		for(i = 0 ; i < n ; i ++)
		{
			 for( j = 0 ; j < n ; j++)
			 {
			 	//cout<<v_h[j][i]<<" ";
			 	temp.push_back(v_h[j][i]);
			 }
			 v_ver.push_back(temp);
			 temp.clear();
		}
				
		for( i = 0 ; i <= n/2 ; i++ )
		{
			if(v_h[i] != v_h[n-i-1])
			{
				p = 0 ;
				break;
			}
		}
		int s=1;
				
		for( i = 0 ; i <= n/2 ; i++ )
		{
			if(v_ver[i] != v_ver[n-i-1])
			{
				s = 0 ;
				break;
			}
		}
		if(p==0&&s==0)
		{
			cout<<"NO"<<endl;
		}
		else if(p==0 && s!=0)
		{
			cout<<"VERTICAL"<<endl;
		}
		else if(s==0 && p!=0)
		{
			cout<<"HORIZONTAL"<<endl;
		}
		else 
		{
			cout<<"BOTH"<<endl;
		}
	}
	return 0;
}