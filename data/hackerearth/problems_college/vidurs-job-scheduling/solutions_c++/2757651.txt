#include <bits/stdc++.h>
using namespace std;

typedef long long lint;

const int maxn = 2020;
lint dp[maxn][maxn];
int ar[maxn],n;

lint solve( int b , int e ){
	
	if( b == e )
		return ar[b] * n;
	
	if( dp[b][e] )
		return dp[b][e];
	
	return dp[b][e] = max(solve(b+1 , e) + ar[b] * (n-(e-b)) , solve(b , e-1) + ar[e] * (n-(e-b)));
}

int main(){
	
	scanf("%d",&n);
	
	for( int i=1 ; i <= n ; i++ )
		scanf("%d",&ar[i]);
	
	printf("%lld\n",solve(1,n));
	
	return 0;
}
