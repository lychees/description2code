#include <iostream>
#include <bits/stdc++.h>
using namespace std;
#define M 1000000007

long long unsigned int bigmin(long long int a,long long int b){
	if(a>b) return b;
	return a;
}

int main()
{
	
	long long unsigned int a,b,c,n;
    cin>>a>>b>>c>>n;
    long long  unsigned int mema,memb,ma1,ma2,mb1=M,mb2=M,i1,i2,j1,j2;
    a%=M;
    b%=M;
    c%=M;
    mema=(a*c)%M;
    memb=(b*c)%M;
    ma1=mema;
    i1=1;
    
    ma2=M;
    i2=1;
    
    mb2=M;
    mb1=memb;
    j1=1;
    j2=1;
    for(long long unsigned int i=2;i<=n;i++){
    	//cout<<mema<<endl;
    	mema = (((((mema*a)%M)*b)%M)*c)%M + (((mema*a)%M)*b)%M + (((mema*a)%M)*c)%M;
        mema = mema%M;
                
    	if(ma2>mema){
    		if(ma1>mema){
    			ma2=ma1;
    			i2=i1;
    			ma1=mema;
    			i1=i;
    		}
    		else{ ma2=mema;i2=i;}
    	}
    	//cout<<memb<<endl;
    	 memb = (((((memb*b)%M)*c)%M)*a)%M + (((memb*b)%M)*a)%M + (((memb*b)%M)*c)%M;
        memb = memb%M;
    		if(mb2>memb){
    		if(mb1>memb){
    			mb2=mb1;
    			j2=j1;
    			mb1=memb;
    			j1=i;
    		}
    		else{ mb2=memb;j2=i;}
    	}
    }
    
   if(i1!=j1) cout<<(ma1+mb1)<<endl;
   else cout<<bigmin(ma1+mb2,ma2+mb1)<<endl;
   //cout<<ma1<<endl;
   //cout<<ma2<<endl;
   //cout<<mb1<<endl;
   //cout<<mb2<<endl;
   //cout<<i1<<endl;
   //cout<<i2<<endl;
   //cout<<j1<<endl;
   //cout<<j2<<endl;
    
    return 0;
}
