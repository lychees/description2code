#include<bits/stdc++.h>
using namespace std;
int main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(false);
    int n,m2;
    cin>>n>>m2;
    map<string,int>m;
    string s;
    for(int i=1;i<=n;i++)
    {
        cin>>s;
        m[s]=i;
    }
    vector<pair<int,int> >v[n+1];
    for(int i=1;i<=m2;i++)
    {
        string a,b;
        int c;
        cin>>a>>b>>c;
        int x=m[a];
        int y=m[b];
        v[x].push_back(make_pair(c,y));
        v[y].push_back(make_pair(c,x));
    }
    int q;
    cin>>q;
    int arr[n+1];

    for(int i=0;i<q;i++)
    {
        string a,b;
        cin>>a>>b;
        int x=m[a];
        int y=m[b];
          fill(arr,arr+n+1,INT_MAX);
        priority_queue<pair<int,int>,vector<pair<int,int> >,greater<pair<int,int> > >q;
        q.push(make_pair(0,x));
        arr[x]=0;
        pair<int,int>p;
        while(!q.empty())
        {
            p=q.top();
            q.pop();
            int r=p.first;
            int m1=p.second;
            for(int j=0;j<v[m1].size();j++)
            {
                if(v[m1][j].first+r<arr[v[m1][j].second])
                {
                    arr[v[m1][j].second]=v[m1][j].first+r;
                    q.push(make_pair(arr[v[m1][j].second],v[m1][j].second));
                }
            }
        }
        cout<<arr[y]<<"\n";
    }
    return 0;
}
