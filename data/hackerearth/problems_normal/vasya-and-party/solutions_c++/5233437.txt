#include<iostream>

using namespace std;

typedef long long ll;

#define MAX 100002
#define MOD 1000000007

struct node
{
    int vertex;
    node *next;
};

node *g[MAX];
int n,m;
ll a[MAX],maxim,counts,group[MAX];
bool visited[MAX];

void Create_graph(int u,int v)
{
    node *p1,*q1,*p2,*q2;

    q1=new node;
    q2=new node;

    q1->vertex=v;
    q1->next=NULL;

    if(g[u]==NULL)
        g[u]=q1;
    else
    {
        p1=g[u];
        while(p1->next!=NULL)
            p1=p1->next;
        p1->next=q1;
    }

    q2->vertex=u;
    q2->next=NULL;

    if(g[v]==NULL)
        g[v]=q2;
    else
    {
        p2=g[v];
        while(p2->next!=NULL)
            p2=p2->next;
        p2->next=q2;
    }

}

void dfs(int index)
{
    node *p;
    int v;

    if(a[index]==maxim)
    {
        counts=counts+1;
        counts=counts%MOD;
    }
    else if(a[index]>maxim)
    {
        maxim=a[index];
        counts=1;
    }

    visited[index]=1;
    p=g[index];

    while(p!=NULL)
    {
        v=p->vertex;

        if(visited[v]==0)
        {
            dfs(v);
        }
        p=p->next;
    }

    /*for(int i=index+1;i<=n;i++)
    {

        if(visited[i]==0)
        {
            visited[i]=1;
            dfs(i);
        }

    }*/
}

int main()
{
    int i,u,v,c;
    ll ways=1;

        cin>>n>>m;

        for(i=1;i<=n;i++)
        {
            cin>>a[i];
            visited[i]=0;
            g[i]=NULL;
        }

        for(i=1;i<=m;i++)
        {
            cin>>u>>v;

            Create_graph(u,v);
        }

        c=1;

        for(i=1;i<=n;i++)
        {
            if(visited[i]==0)
            {
                maxim=-1;
                counts=0;
                dfs(i);
                group[c]=counts;
                c++;
            }
        }

        for(i=1;i<c;i++)
        {
            ways = (ways%MOD)*(group[i]%MOD);
            ways = ways%MOD;
        }

        cout<<ways<<endl;

    return 0;
}
