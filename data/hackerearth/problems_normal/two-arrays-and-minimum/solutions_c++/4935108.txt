#include <iostream>
#include <algorithm>
#include <limits.h>
#define m 1000000007
 
using namespace std;
 
int main()
{
    unsigned long long a,b,c,n;
    cin>>a>>b>>c;
    
    cin>>n;
    unsigned long long A[10000000];
    unsigned long long B[10000000];
    
    A[0] = (a*c)%m;
	for(int i=1 ; i<n ; i++)
	{
	    A[i] = (((((((A[i-1]*a)%m)*b)%m)*c)%m) + ((((A[i-1]*a)%m)*b)%m) + ((((A[i-1]*a)%m)*c)%m))%m;
	}
	B[0] = (b*c)%m;
	for(int i=1 ; i<n ; i++)
	{
	    B[i] = (((((((B[i-1]*a)%m)*b)%m)*c)%m) + ((((B[i-1]*a)%m)*b)%m) + ((((B[i-1]*b)%m)*c)%m))%m;
	}    
	
	unsigned long long A_first = A[0];
	unsigned long long B_first = B[0];
	unsigned long long A_second = ULONG_MAX;
	unsigned long long B_second = ULONG_MAX;
	
    for (int i = 1; i < n ; i ++)
    {
        if (A[i] <= A_first)
        {
            A_second = A_first;
            A_first = A[i];
        }
 		else if (A[i] < A_second && A[i] != A_first)
            A_second = A[i];
        
 		if (B[i] <= B_first)
        {
            B_second = B_first;
            B_first = B[i];
        }
        else if (B[i] < B_second && B[i] != B_first)
            B_second = B[i];
    }
    if((find(A,A+n,A_first)-A)!=((find(B,B+n,B_first))-B))
    	cout<<A_first+B_first<<endl;
    else if((A_first+B_second)<(A_second+B_first))
    	cout<<A_first+B_second<<endl;
    else
    	cout<<A_second+B_first<<endl;
    	
    return 0;
}