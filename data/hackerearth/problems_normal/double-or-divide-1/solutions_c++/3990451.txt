#include<cstdio>
#include<algorithm>
#include<vector>

using namespace std;

typedef long long ll;

const ll MAXN = 5e5 + 10;
const ll MOD = 1e9 + 7;

ll n, q, vec[MAXN];
ll cnt[MAXN];

int main(){
	scanf("%lld %lld", &n, &q);
	for (ll i = 0; i < n; i++)	scanf("%lld", &vec[i]);
	sort(vec, vec + n);
	ll h = 0;
	for (ll i = 1; i <= q && h < n; i++){
		ll z = i;
		ll mx = 0, ind = 0;
		for (ll j = 2; j * j <= z; j++){
			ll cnt = 0;
			while (z % j == 0)
				z /= j, cnt++;

			if (mx < cnt)
				mx = cnt, ind = j;
		}
		if (z > 1 && mx == 0)
			ind = z;

		if (i == 1 || (ind % i) % 2 == 1)
			cnt[n - 1]++;
		else{
			if (cnt[h])	cnt[h]--;
			else	vec[h] /= 2;
			if (vec[h] == 0)	h++;
		}
	}

	printf("%lld\n", n - h);
	for (; h < n; h++){
		while (cnt[h]--)	
			vec[h] = (vec[h] * 2LL) % MOD;
		printf("%lld ", vec[h]);
	}
	printf("\n");
	return 0;
}
