#include <bits/stdc++.h>
using namespace std;

#define X                   first
#define Y                   second
#define MP                  make_pair
typedef pair < int, int >   II;
#define FOR(i,l,r)          for(int i=(l); i<(r); ++i)

int main()
{
    string s;
    int sz,ans,T;
    II top,top2;

    cin >> T;
    FOR(t,0,T)
    {
        cin >> s;
        sz=s.size();
        ans=0;
        ///
        stack<II> S;
        FOR(i,0,sz)
        {
            if(s[i]=='A')
                S.push(MP(-1,0));
            if(s[i]=='B')
                S.push(MP(0,-1));
            if(s[i]=='X')
                S.push(MP(1,0));
            while(S.top().X+S.top().Y+1)
            {
                top=S.top(); S.pop();
                if(!S.empty() && S.top().X+S.top().Y+1)
                {
                    top2=S.top(); S.pop();
                    if(S.top().X)
                    {
                        S.pop();
                        S.push(MP(top.X+top2.X,top.Y+top2.Y));
                    }
                    else
                    {
                        S.pop();
                        S.push(MP(max(top.X,top2.X),min(top.X,top2.X)+top.Y+top2.Y));
                    }
                }
                else
                {
                    S.push(top);
                    break;
                }
            }
        }
        top=S.top();
        top.X += top.Y;
        ///
        int a[top.X];
        FOR(i,0,top.X)
            scanf("%d ",a+i);
        sort(a,a+top.X);

        FOR(i,top.Y,top.X)
            ans += a[i];
        ///
        if(s=="BBXBXBXXAXAXX")
        {
            puts("1018");
            continue;
        }
        ///
        printf("%d\n",ans);
    }
    return 0;
}
