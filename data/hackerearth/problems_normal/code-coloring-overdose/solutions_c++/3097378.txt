
#include <bits/stdc++.h>
#include <stdio.h>
#define lli long long int
using namespace std;

const int M = (int)5e5;
lli p[M+5];
lli a[M+5] = {};
lli b[M+5] = {};
int main()
{
	ios_base::sync_with_stdio(false);
	const lli mod = 1e9 + 7;
	
	p[0] = 1; p[1] = 2;
	for (int i=2 ; i<=M ; i++) 
		p[i] = (p[i-1]*2LL)%mod;
	
	lli n , k , m;
	cin>>n>>k>>m;
	
	for (int i=0 ; i<n ; i++)
	{
		int x; cin>>x;
		a[x]++;
	}
	
	lli ans = 1;
	for (int i=1 ; i<=M ; i++) 
	{ 
		a[i] = p[ a[i] ]-1;
		if (a[i] < 0) a[i] += mod;
		ans = (ans + a[i])%mod; 
		// cout<<a[i]<<" "; 
	} 
	// cout<<"\n";
	// cout<<ans-1<<"\n";
	
	for (int j=M ; j>=1 ; j--)
	{
		b[j] = (a[j] + b[j+1]) % mod;
		// cout<<b[j]<<" ";
	}
	// cout<<"\n";
	
	for (int i=1 ; i<m ; i++)
	{
		lli thiz = 0;
		
		for (int j=1 ; j<=M ; j++)
		{
			thiz = (thiz + ( a[j] * b[j+1] )%mod)%mod;
			b[j] = (a[j] * b[j+1]) % mod;
			// cout<<b[j]<<" ";
		}
		for (int j=M ; j>=1 ; j--)
		{
			b[j] = (b[j] + b[j+1]) % mod;
			// cout<<b[j]<<" ";
		}
		// cout<<"\n";
		// cout<<thiz<<"\n";
		
		ans = (ans + thiz)%mod;
	}
	
	cout<<ans<<"\n";
	
	return 0;
}
	
	/*
	lli ans = 1;
	for (int i=1 ; i<(1<<2) ; i++)
	{
		int cnt = 0;
		for (int j=0 ; j<10 ; j++)
		{
			if ( (i) & (1<<j) )
			{
				if ( a[j+1] == 0 ) cnt = -2222222;
				else cnt++;
			}
		}
		cout<<i<<" "<<cnt<<"\n";
		if ( cnt <= 0 || cnt > m ) continue;
		
		
		lli thiz = 1;
		for (int j=0 ; j<10 ; j++)
		{
			if ( (i) && (1<<j) )
			{
				thiz = (thiz * p[ a[j] ]) % mod;
			}
		}
		thiz--; 
		
		ans = (ans + thiz) % mod;
	}
	
	cout<<ans<<"\n";*/