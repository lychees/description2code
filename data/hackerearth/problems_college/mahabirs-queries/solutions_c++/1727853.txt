#include <bits/stdc++.h> 
#define ll long long int 
#define IN_M 1061109567 
#define get getchar
#define set(p) memset(p,-1,sizeof(p))
#define clr(p) memset(p,0,sizeof(p))
#define llu unsigned long long int
#define si(n)                   scanf("%d",&n)
#define sf(n)                   scanf("%lf",&n)
#define ss(n)                                   scanf("%s",n)
#define rep(i,a,n) for(i=(a);i<(n);i++)
#define pii pair<int,int>
#define pb(x) push_back(x)
#define v(x) vector<x>
using namespace std;
#define mode 10000007

using namespace std;
int main() { 
ll q;
 ll a,b,c,d,e,n;
 cin >> n >> q; 
 long long arr[1005][1005]; 
 for (long long i = 1; i <= n; i++) {
  for (long long j = 1; j <= n; j++) {
   cin >> arr[i][j]; 
   } 
}
 while (q--) {
  long long n1; 
  cin >> n1; 
  n1 = n1 / 90;
   n1 = n1 % 4; 
   if (n1 == 1) { 
   for (long long j = 1; j <= n; j++) {
    for (long long i = n; i >= 1; i--) {
	 cout << arr[i][j] << " ";
	  }
	   cout << endl; 
	   
	   } 
	   cout << endl;
	} 
	else if (n1 == 2) { 
	for (long long i = n; i >= 1; i--) {
	 for (long long j = n; j >= 1; j--) { 
	 cout << arr[i][j] << " "; 
	 } 
	 cout << endl; 
	 }
	 cout << endl; 
	 }
 //cout<<"afhjfa";
  else if (n1 == 3) {
   for (long long j = n; j >= 1; j--) { 
   for (long long i = 1; i <= n; i++) { 
   cout << arr[i][j] << " "; 
   } 
   cout << endl; 
   }
   cout << endl; 
   } else if (n1 == 0) { 
   for (long long i = 1; i <= n; i++) { 
   for (long long j = 1; j <= n; j++) { 
   cout << arr[i][j] << " ";
    } cout << endl;
	 }
	 cout << endl;
	  } 
	  } 
	  return 0;
	   }

