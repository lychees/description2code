#include<bits/stdc++.h>
using namespace std;
int lis(vector<int> &vt)
{
		if(vt.size()<=2) return vt.size();
		int arr[2][2];
		//deque<int> dq;
		vector<int>::iterator ib,ie;
		ib=vt.begin();
		ie=vt.begin()+1;
		if(*ib>*ie) 
		{
				arr[0][0]=*ie;
				arr[0][1]=*ib;
				arr[1][0]=arr[1][1]=1;
		}
		else if(*ie>*ib)
		{
				arr[0][0]=*ib;
				arr[0][1]=*ie;
				arr[1][0]=arr[1][1]=1;
		}
		else
		{
				arr[0][0]=-1;
				arr[0][1]=*ib;
				arr[1][0]=0;
				arr[1][1]=2;
		}
		//dq.push_back(*ib);
		//if(*ie>=dq.back()) dq.push_back(*ie);
		//else dq.push_front(*ie);
		int max=2;
		int curr=2;
		ie++;
		while(ie!=vt.end())
		{
				//if(*ie==dq.back() || *ie==dq.front())
				if(arr[0][0]==*ie || arr[0][1]==*ie)
				{
						if(*ie==arr[0][0]) 
								arr[1][0]++;
						else arr[1][1]++;
						ie++;
				}
				else
				{
						//while(dq.front()!=dq.back())
						if(*ie>arr[0][1])
						{
								while(arr[1][0]!=0)
								{
										if(*ib==arr[0][0])
												arr[1][0]--;
										else
												arr[1][1]--;
										//if(dq.front() == *ib)
										//		dq.pop_front();
										//else dq.pop_back();
										++ib;
								}
								arr[0][0]=arr[0][1];
								arr[1][0]=arr[1][1];
								arr[0][1]=*ie;
								arr[1][1]=1;
								ie++;
						}
						else
						{
								while(arr[1][1]!=0)
								{
										if(*ib==arr[0][0])
												arr[1][0]--;
										else
												arr[1][1]--;
										++ib;
								}
								arr[0][1]=arr[0][0];
								arr[1][1]=arr[1][0];
								arr[0][0]=*ie;
								arr[1][0]=1;
								ie++;
						}
						//if(*ie>=dq.back()) dq.push_back(*ie);
						//else dq.push_front(*ie);
				}
				curr=arr[1][0]+arr[1][1];
				if(curr>max) max=curr;
		}
		/*while(ib!=vt.end())
		{
				if(dq.front() == *ib)
						dq.pop_front();
				else dq.pop_back();
				curr=dq.size();
				if(curr>max) max=curr;
				++ib;
		}*/
		return max;
}
int main()
{
		int t;
		cin>>t;
		while(t--)
		{
				int n;
				scanf("%d",&n);
			//	cin>>n;
				int i;
				vector<int> vt;
				for(i=0;i<n;++i)
				{
						int tmp;
						scanf("%d",&tmp);
						vt.push_back(tmp);
				}
				printf("%d\n",lis(vt));
			//	cout<<lis(vt)<<endl;
		}
}