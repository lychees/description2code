#include <bits/stdc++.h>
#define INF 1000010

using namespace std;

vector<pair<int, int> > adj[110];

int d[110];
bool vis[110];
int n, m;

int dij(int s, int f){
    int u;
    priority_queue<pair<int, int> > pq;
    pq.push(make_pair(0, s));

    for(int i=1; i<=n; i++){
        d[i]=INF;
    }
    d[s]=0;

    while(!pq.empty()){
        int u=pq.top().second;
        int dist=-pq.top().first;
        pq.pop();

        if(dist>d[u])continue;

        for(int i=0; i<adj[u].size(); i++){
            int v=adj[u][i].first;
            int w=adj[u][i].second;

            if(d[u]+w<d[v]){
                d[v]=d[u]+w;
                pq.push(make_pair(-d[v], v));
            }
        }
    }
    return d[f];
}

int main (){
    int t;
    int u, v, w;
    int s, a, h;

    cin>>t;

    for(int inst=1; inst<=t; inst++){
        for(int i=1; i<=110; i++){
            adj[i].clear();
        }
        cin>>n>>m;
        for(int i=1; i<=m; i++){
            cin>>u>>v>>w;
            adj[u].push_back(make_pair(v, w));
            adj[v].push_back(make_pair(u, w));
        }
        cin>>s>>a>>h;
        int maior=0;
        vis[s]=true;
        vis[a]=true;
        vis[h]=true;
        for(int i=1; i<=n; i++){
            if(!vis[i]){
                int x=dij(s, i)+2*dij(i, a)+dij(i, h);
//                cout<<s<<" para "<<i<<" -> "<<dij(s, i)<<"\n";
//                cout<<i<<" para "<<a<<" -> "<<dij(i, a)<<"\n";
//                cout<<a<<" para "<<i<<" -> "<<dij(a, i)<<"\n";
//                cout<<i<<" para "<<h<<" -> "<<dij(i, h)<<"\n";
//                cout<<"grupo "<<i<<" -> "<<x<<"\n";
                if(x>maior)maior=x;
            }
        }
        cout<<maior<<"\n";
        vis[s]=vis[a]=vis[h]=false;
    }
    return 0;
}
