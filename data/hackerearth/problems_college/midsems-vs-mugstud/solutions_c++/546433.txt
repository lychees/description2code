#include <map>
#include <set>
#include <list>
#include <cmath>
#include <ctime>
#include <deque>
#include <queue>
#include <stack>
#include <bitset>
#include <cstdio>
#include <limits>
#include <vector>
#include <cstdlib>
#include <numeric>
#include <sstream>
#include <iostream>
#include <algorithm>
using namespace std;
long long A[51][51][51];
int main() 
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int n;
		scanf("%d",&n);
		
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				for(int k=0;k<n;k++)
				{
					scanf("%lld",&A[i][j][k]);
					
				}
			}
		}
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				for(int k=0;k<n;k++)
				{
					long long p=A[i][j][k],p1=0;
					if(k>=1) 
					{
						p-=A[i][j][k-1];
						if(i>=1) p1+=A[i-1][j][k]-A[i-1][j][k-1];
						if(j>=1) p1+=A[i][j-1][k]-A[i][j-1][k-1];
						if(i>0 && j>0) p1-=(A[i-1][j-1][k]-A[i-1][j-1][k-1]);
						p=p-p1;
						//cout<<p<<" ";
						printf("%lld ",p);
						
					
					}
					else
					{
						
						if(i>=1) p1+=A[i-1][j][k];
						if(j>=1) p1+=A[i][j-1][k];
						if(i>0 && j>0) p1-=(A[i-1][j-1][k]);
						p=p-p1;
						//cout<<p<<" ";
						printf("%lld ",p);
					}
					 
					
					
				}
				printf("\n");
			}
		}
		
	}
   
    return 0;
}
