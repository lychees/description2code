#include <bits/stdc++.h>
#define ll long long 
using namespace std;
ll a[500005];
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	ll n,m,z;
    	cin>>n>>m>>z;
    	ll sum=0;
    	for(int i=0;i<n;i++)
    	{
    		cin>>a[i];
    		sum+=((n-i)%2==0)?-a[i]:a[i];
    		sum+=m;
    		sum%=m;
    	}
    	a[n]=sum;
    	for(int i=n+1;i<2*(n+1);i++)
    	{
    		sum=a[i-1]-sum;
    		sum+=m;
    		sum%=m;
    		if(n%2==0)
    			sum-=a[i-(n+1)];
    		else
    			sum+=a[i-(n+1)];
    		sum+=m;
    		sum%=m;
    		a[i]=sum;
    	}
    	/*for(int i=0;i<n;i++)
    	{
    		cin>>a[i];
    		sum+=((n-i)%2==0)?-a[i]:a[i];
    		sum+=m;
    		sum%=m;
    	}
   		a[n]=sum;
   		//cout<<a[n]<<endl;
   		for(int i=n+1;i<=2*n;i++)
   		{
   			a[i]=(-a[i-(n+1)]+m)%m;
   		}
   		a[2*n+1]=(-sum+m)%m;
   		if(n==1)
   		{
   			for(int i=0;i<2*(n+1);i++)
   				a[i]=a[0];
   		}
   		for(int i=0;i<2*(n+1);i++)
   			cout<<a[i]<<" ";
   		cout<<endl;
   		/*
    	for(int i=0;i<n;i++)
    	{
    		cin>>a[i];
    		sum+=((n-i)%2==0)?-a[i]:a[i];
    	}
   		a[n]=(sum+n*m)%m;
   		//cout<<a[n]<<endl;
   		for(int i=n+1;i<=2*n;i++)
   		{
   			a[i]=(-a[i-(n+1)]+n*m)%m;
   		}
   		a[2*n+1]=(-sum+n*m)%m;*/
   		
    	cout<<a[z%(2*(n+1))]<<"\n";
    }
    return 0;
}
