#include<iostream>
#include<cstdio>
#define ll long long
#include<cstring>
#include<algorithm>
#include<cmath>
#include<map>
#include<vector>
#include<set>
#define inf 10000007
using namespace std;
ll D[101],n;
char str[100];
typedef pair<ll,ll> p;
typedef vector<p> vp;
typedef vector<vp> vvp;
typedef map<string,ll>mp;
void dijk(vvp& adj,ll st)
{
	ll u,v,top,i;
	for(i=1;i<=n;i++)
		D[i]=inf;
	D[st]=0;
	set<p> Q;
	Q.insert(p(0,st));
	while(!Q.empty())
	{
		p top;
		top=*Q.begin();
		Q.erase(Q.begin());
		u=top.second;
		for(i=0;i<adj[u].size();i++)
		{
			v=adj[u][i].first;
			if(D[v]>adj[u][i].second+D[u])
			{
				if(D[v]!=inf)
					Q.erase(p(D[v],v));
				D[v]=adj[u][i].second+D[u];
				Q.insert(p(D[v],v));
			}
		}
	}
	//for(i=1;i<=4;i++)
	//	cout<<D[i]<<" ";
}
int main()
{
	ll m,i,d,p1,u,q;
	string s1,s2;
	mp M;
	scanf("%lld%lld",&n,&m);
	for(i=1;i<=n;i++)
		scanf("%s",&str);
	vvp adj(n+5);
	p1=1;
	for(i=0;i<m;i++)
	{
		cin>>s1>>s2>>d;
		if(!M[s1])M[s1]=p1++;
		if(!M[s2])M[s2]=p1++;
		//cout<<M[s1]<<" "<<M[s2]<<endl;
		adj[M[s1]].push_back(p(M[s2],d));
		adj[M[s2]].push_back(p(M[s1],d));
	}
	/*for(i=1;i<5;i++)
	{
		for(ll j=0;j<adj[i].size();j++)
			cout<<adj[i][j].first<<" "<<adj[i][j].second<<" ";
		cout<<endl;
	}*/
	//cout<<M["Howrah"]<<" "<<M["Trivandram"]<<" "<<M["Vashi"]<<" "<<M["Mysore"];
	scanf("%lld",&q);
	while(q--)
	{
		cin>>s1>>s2;
		//cout<<"''"<<M[s1]<<" "<<M[s2]<<endl;
		dijk(adj,M[s1]);
		cout<<D[M[s2]]<<endl;
	}
	return 0;
}
