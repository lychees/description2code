#include <stdio.h>
#include <algorithm>
using namespace std;

int t;
int a[1004][2];
int k[1004][2];
int n;
int dp[2][1005];
int main(){
	scanf("%d",&t);
	while(t--){
		scanf("%d",&n);
		int a,b;
		for(int i=0;i<2;i++){
			for(int j=0;j<1005;j++){
				dp[i][j]=0;
			}
		}
		for(int i=0;i<n;i++){
			scanf("%d%d",&a,&b);
			a--;
			b--;
			k[a][0]=i;
			k[b][1]=i;
		}
		for(int i=0;i<n;i++){
			for(int j=0;j<n;j++){
				if(k[i][0]==k[j][1]){
					dp[i%2][j]=dp[(i+1)%2][j-1]+1;
				} else {
					dp[i%2][j]=max(dp[(i+1)%2][j],dp[i%2][j-1]);
				}
			}
		}
		printf("%d\n",dp[(n-1)%2][n-1]);
	}
}