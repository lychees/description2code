#include<bits/stdc++.h>
using namespace std;
typedef long long int ll;
ll vis[1000010]={0};
ll lbl[1000010]={0};
ll parent[1000010]={0};
vector<pair<ll,ll> >v[1000010];
set<pair<ll,ll> >el;
vector<ll>wt;
void prims(ll s)
{
    lbl[s]=0;
    el.insert(make_pair(lbl[s],s));
    while(!el.empty())
    {
        pair<ll,ll> p=*el.begin();
        el.erase(el.begin());
        ll x=p.second;
        vector<pair<ll,ll> >::iterator it;
        for(it=v[x].begin();it<v[x].end();it++)
        {
            ll a=it->first;
            ll b=it->second;
            if(vis[a]==0)
            {
                if(lbl[a]>b)
                {

                    if(lbl[a]!=10000000)
                     {
                         el.erase(el.find(make_pair(lbl[a],a)));
                     }
                    lbl[a]=b;
                    parent[a]=x;
                    el.insert(make_pair(lbl[a],a));
                }
            }
        }
        vis[x]=1;
    }

}
ll sum=0,cnt=0,f=0;
void ans(ll n,ll k)
{
    for(ll i=1;i<=n;i++)
    {
        if(parent[i]!=0)
           {
             wt.push_back(lbl[i]);
             sum+=lbl[i];
            }
    }
    sort(wt.begin(),wt.end());
    for(ll it=wt.size()-1;it>=0;it--)
    {
        if(sum >k)
        {
            sum=sum-(wt[it])+1;
            cnt++;
        }

    }
    if(sum<=k )
    cout<<cnt<<endl;
    else
    cout<<"-1"<<endl;


}
int main()
{
    //freopen("input.txt","r",stdin);
    //freopen("output.txt","w",stdout);
    ll n,m,k;
    cin>>n>>m>>k;
    while(m--)
    {
        ll a,b,c;
        cin>>a>>b>>c;
        v[a].push_back(make_pair(b,c));
        v[b].push_back(make_pair(a,c));
    }
    for(ll i=1;i<=n;i++)
    {
        lbl[i]=10000000;
    }
    int c=0;
    for(ll i=1;i<=n;i++)
    {
        if(vis[i]==0)
        {
            c++;
            if(c==2)
            {cout<<"-1"<<endl;
                f=1;
                break;
            }
            prims(i);
        }
    }
    if(f==0)
    ans(n,k);

    return 0;
}
