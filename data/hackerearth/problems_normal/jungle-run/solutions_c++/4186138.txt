#include <bits/stdc++.h>
#define inf int(1e+9)
using namespace std;
bool visit[31][31];
char a[31][31];
int n;
int dfs(int i,int j)
{  
	if(a[i][j]=='E')return 0;
	visit[i][j]=true;
	int t=inf;
 if(i+1<n and !visit[i+1][j] and (a[i+1][j]=='P'||a[i+1][j]=='E') )
     t=min(t,1+dfs(i+1,j));
 if(i-1>=0 and !visit[i-1][j] and (a[i-1][j]=='P'|| a[i-1][j]=='E'))
	 t=min(t,1+dfs(i-1,j));
 if(j+1<n and !visit[i][j+1] and (a[i][j+1]=='P' ||a[i][j+1]=='E'))
	 t=min(t,1+dfs(i,j+1));
 if(j-1>=0 and !visit[i][j-1] and (a[i][j-1]=='P' ||a[i][j-1]=='E'))
	 t=min(t,1+dfs(i,j-1));
visit[i][j]=false;
return t;
}
int main()
{ 
	int x,y;
	cin>>n;
	for(int i=0;i<n;i++)
	for(int j=0;j<n;j++)
	{		
		cin>>a[i][j];
		if(a[i][j]=='S'){x=i;y=j;}
		visit[i][j]=false;
	}
    cout<<dfs(x,y);
    return 0;
}