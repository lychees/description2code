#include<bits/stdc++.h>
using namespace std;
double a[1001][1001],dp[1001][1001];
int main()
{
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    int t,n,m;
    cin>>t;
    while(t--)
    {
        cin>>n>>m;
        for(int i=1; i<=n; i++)
            for(int j=1; j<=m; j++)
                cin>>a[i][j];
        for(int i=0; i<=n+1; i++)
        {
            for(int j=0; j<=m+1; j++)
            {
                if(i==0||j==0)
                    dp[i][j]=1;
                else if(i==1&&j==1)
                    dp[i][j]=1;
                else
                {
                    dp[i][j]=0;
                    if(i>1&&j<=m)
                        dp[i][j]+=dp[i-1][j]*(1-a[i-1][j]);
                    if(j>1&&i<=n)
                        dp[i][j]+=dp[i][j-1]*a[i][j-1];
                }
            }
        }
        double ans=0;
        for(int i=1;i<=n;i++)
            ans+=dp[i][m+1]*(m+i-1);
        for(int i=1;i<=m;i++)
            ans+=dp[n+1][i]*(n+i-1);

        cout<<fixed<<ans<<endl;

    }
    return 0;
}
