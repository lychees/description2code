#include<bits/stdc++.h>


#define _fast ios_base::sync_with_stdio(false);cin.tie(0);
#define LL long long int
#define s(a) scanf("%d",&a)
#define sll(a) scanf("%lld",&a)
#define ss(a) scanf("%s",a)
#define w(t) while(t--)
#define f(i,n) for(i=0;i<n;i++)
#define fd(i,n) for(i=n-1;i>=0;i--)
#define p(a) printf("%d",a)
#define pll(a) printf("%lld",a)
#define ps(a) printf("%s",a)
#define pc(a) printf("%c",a)
#define ent printf("\n")
#define maxn 100000
//#define mod 1000000007

bool comp(const int& a, const int& b)
{
    return a<b?false:true;//min_heap
}

using namespace std;

typedef pair<int,int> P;
LL a[1005][1005],b[1005][1005];
LL maxrow[1005],maxcol[1005];
int main()
{
    int t;
    s(t);
    w(t)
    {
        memset(maxrow,0,sizeof(maxrow));
        memset(maxcol,0,sizeof(maxcol));
        int n,m,i,j;
        s(n);
        s(m);
        LL maxi=0;
        f(i,n)
        {
            maxi=0;
            f(j,m)
            {
                sll(a[i][j]);
               // sll(b[i][j]);
           //     maxi=max(maxi,b[i][j]);
            }

        }
        f(i,n)
        {
            maxi=0;
            f(j,m)
            {
               // sll(a[i][j]);
                sll(b[i][j]);
                maxi=max(maxi,b[i][j]);
            }
            maxrow[i]=maxi;
        }
        f(j,m)
        {
            maxi=0;
            f(i,n)
                maxi=max(maxi,a[i][j]);
            maxcol[j]=maxi;
        }
        int cnt=0;
        f(i,n)
        {
            f(j,m)
            {
                if(maxrow[i]==b[i][j]&&maxcol[j]==a[i][j])
                    cnt++;
            }
        }
        cout<<cnt;
        ent;
    }
    return 0;
}
