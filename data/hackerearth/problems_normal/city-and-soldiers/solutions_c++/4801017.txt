#include <iostream>
using namespace std;
long long p[1000000],n,q,i,a,b,c,ans,ans2;
int root(int n){
	while(p[n]!=n){
		p[n]=p[p[n]];
		n=p[n];
	}
	return n;
}

int main()
{
   scanf("%d %d",&n,&q);
   for(i=1;i<=n;i++){
   	p[i]=i;
   }
   while(q--){
   	scanf("%d",&a);
   	if(a==1){
   		scanf("%d %d",&b,&c);
   		ans=root(b);
   		ans2=root(c);
   		if(ans!=ans2)
   		p[ans]=ans2;
   	}
   	else if(a==2){
   		scanf("%d",&b);
   		ans=root(b);
   		p[b]=b;
   		p[ans]=b;
   	}
   	else if(a==3){
   		scanf("%d",&b);
   		ans=root(b);
   		printf("%d\n",ans);
   	}
   }
    return 0;
}
