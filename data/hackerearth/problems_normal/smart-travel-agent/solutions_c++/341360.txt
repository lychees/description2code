#include<iostream>
#include<cmath>
using namespace std;
int ans[102],t_ans[102],t1=0,t2=0;
int n,r,visited[102];
int src,dest;
float tour;
int max_ans=0;
int rout_min,arr[102][102];;
void calculate(int idx,int value)
{
    if(visited[idx]==1)
      return;
    int x;
    visited[idx]=1;
    if(idx==dest&&(max_ans<value))
     {
         max_ans=value;
        for(int j=0;j<=t1;j++)
            ans[j]=t_ans[j];
         t2=t1;

     //return;
     }
     /*if(idx==dest)
     {
         for(int i=0;i<=t1;i++)
            cout<<t_ans[i]<<" ";
     cout<<"\n";
     }*/


    for(int i=0;i<r;i++)
    {
        if(arr[idx][i]!=-1){
        x=min(value,arr[idx][i]);
        t_ans[++t1]=i;
        calculate(i,x);
        --t1;
        }

    }
    visited[idx]=0;
}
int main()
{
    cin>>n>>r;
    int x,y,val;
    for(int i=0;i<101;i++)
        for(int j=0;j<101;j++)
        arr[i][j]=-1;
    for(int i=0;i<r;i++)
    {
      cin>>x>>y>>val;
      arr[x][y]=val;
      arr[y][x]=val;
    }


   cin>>src>>dest>>tour;
   t_ans[t1]=src;
   calculate(src,1000000);
   for(int i=0;i<=t2;i++)
    cout<<ans[i]<<" ";

   cout<<"\n"<<ceil(tour/(max_ans-1));
}
