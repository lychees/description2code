#include<cstdio>
#include<cstring>
#include<string>
#include<iostream>
using namespace std;
typedef long long int ll;
#define scant() int tc;scanf("%d",&tc)
double tot_prob[1002][1002];
double prob[1002][1002];
int main()
{
	scant();
	int n,m;
	for(int i=0;i<tc;i++)
	{
		scanf("%d%d",&n,&m);
		for(int j=0;j<n;j++)
		{
			for(int k=0;k<m;k++)
			{
				scanf("%lf",&prob[j][k]);
			}
		}
		tot_prob[0][0]=1;
		for(int j=1;j<m;j++)
		{
			tot_prob[0][j]=tot_prob[0][j-1]*prob[0][j-1];
		}
		for(int j=1;j<n;j++)
		{
			tot_prob[j][0]=tot_prob[j-1][0]*(1-prob[j-1][0]);
		}
		for(int j=1;j<n;j++)
		{
			for(int k=1;k<m;k++)
			{
				tot_prob[j][k]=tot_prob[j-1][k]*(1-prob[j-1][k]) + tot_prob[j][k-1]*prob[j][k-1];
			}
		}
		double expec=0.0;
		for(int j=0;j<n;j++)
			for(int k=0;k<m;k++)
				expec+=tot_prob[j][k];
		printf("%.6lf\n",expec);
	}
}