#include<bits/stdc++.h>
using namespace std;

#define boost ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);
#define vi vector<int>
#define pii pair<int,int>
#define vvii vector<vector<int> >
#define pb push_back
#define mp make_pair

int calc(vi a,int i,int j)
{
	//as i and j both belong to the same level, LCA can be found easily
	int sum=0;
	if(i==j)
		return a[i];
	else
	{
		while(i!=j)
		{
			sum+=a[i]+a[j];
			i=i/2;
			j=j/2;
		//	cout<<"here sum="<<sum<<endl;
		}
		sum+=a[i];
	}
	return sum;
}

int main()
{
	int t;
	cin>>t;
	while(t--)
	{
		int n;
		cin>>n;
		vi a(n+1);
		a[0]=0; //dummy
		int i,j;
		for(i=1;i<=n;i++)
		{
			int x;
			cin>>x;
			a[i]=x;
		}
		
		int max=a[n/2+1];
		for(i=n/2+1;i<=n;i++)
		{
			for(j=i;j<=n;j++)
			{
				int x=calc(a,i,j);
				if(max<x)
					max=x;
			}
		}
		cout<<max<<endl;
	}
	return 0;
}