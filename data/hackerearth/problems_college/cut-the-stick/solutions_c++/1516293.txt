#include<stdio.h>
#include<iostream>
#include<algorithm>
#include<vector>

#ifndef ONLINE_JUDGE
#define gc getchar
#else
#define gc getchar_unlocked
#endif // ONLINE_JUDGE

using namespace std;

int fast_input(){
    char c=gc();
    if(c<'0'||c>'9') c=gc();
    int ans=0;
    while(c>='0'&&c<='9'){
        ans=10*ans+c-'0';
        c=gc();
    }
    return ans;
}

int main(){
    int t,s,n,l,a[10010],i,j,k,count;
    int* b;
    t=fast_input();
    while(t--){
        //vector<int> ele;
        count=0;
        j=-1;
        s=fast_input();
        n=fast_input();
        l=fast_input();
        for(i=0;i<n;i++) a[i]=fast_input();
        sort(a,a+n);
        for(i=0;i<n;i++){
            if(a[i]>l){
                count+=(((n-i-1)*(n-i))/2);
                break;
            }
            //ele.push_back(a[i]);
            j=i;
        }
        //cout<<count<<"\n";
        //for(i=0;i<=j;i++) cout<<a[i]<<" ";
        //cout<<"\n";
        for(i=0;i<=j;i++){
            if((s-a[i])<=l){
                continue;
            }
            else if((s-a[i])>l){
                b=lower_bound(a+i+1,a+n,a[i]+l+1);
                count+=(a+n-b);
                //cout<<"1:"<<count<<"\n";
                b--;
                for(;b>(a+i);b--){
                    if(l<(s-(*b))){
                        count+=(b-a-i);
                        break;
                    }
                }
                //cout<<"2:"<<count<<"\n";
            }
        }
        printf("%d\n",count);
    }
return 0;
}
