///IN THE NAME OF MY CREATOR.........................
#include<bits/stdc++.h>
using namespace std;
 int main()
 {
       int n,m;
       cin>>n>>m;
       int a,b,c;
       vector<pair<int,int> >vc[1000];
       for(int i=0;i<m;i++)
       {
            cin>>a>>b>>c;
            vc[a].push_back(make_pair(b,c));
            vc[b].push_back(make_pair(a,c));

       }
       int d[1000];
       int parrent[1000]={-1};

       memset(d,0,sizeof(d));
       int source,dest,total;
       cin>>source>>dest>>total;


            queue<int>q;
            q.push(source);
            d[source]=INFINITY;
            while(!q.empty())
            {
                    int k=q.front();
                    q.pop();
                    for(int i=0;i<vc[k].size();i++)
                    {
                           pair<int,int>l =vc[k][i];
                           int x=l.first;
                           int y=l.second;
                           if(min(d[k],y)>d[x])
                           {
                                d[x]=min(d[k],y);
                                 parrent[x]=k;
                                 q.push(x);
                           }

                    }
            }
          // cout<<d[dest]<<endl;
            vector<int>vc1;
            vc1.push_back(dest);
            int k=dest;
            while(parrent[k]>0)
            {
                  k=parrent[k];
                  vc1.push_back(k);
            }
            for(int i=vc1.size()-1;i>=0;i--)
            {
                 cout<<vc1[i]<<" ";
            }
            printf("\n");

            float ans=(total/(1.0*(d[dest]-1)));
            //cout<<ans<<endl;
            cout<<ceil(ans)<<endl;
 }
