#include <iostream>
#include<limits.h>
using namespace std;

int main()
{
    long  a,b,c;
    long n;
    cin>>a>>b>>c;
    cin>>n;
    unsigned long A[n];
    unsigned long B[n];
    unsigned long i=0;
	A[0] = a*c%1000000007;
	for(i=1 ; i<n ; i++)
	{
	    A[i] = (((((((A[i-1]*(a%1000000007))%1000000007)*b)%1000000007)*c)%1000000007) + ((((A[i-1]*(a%1000000007))%1000000007)*b)%1000000007) + ((((A[i-1]*(a%1000000007))%1000000007)*c)%1000000007))%1000000007;
	    //cout<<A[i]<<" ";
	    A[i] = A[i]%1000000007;
	}
	//cout<<endl;
	B[0] = b*c%1000000007;
	for(i=1 ; i<n ; i++)
	{
	    B[i] = (((((((B[i-1]*(b%1000000007))%1000000007)*c)%1000000007)*a)%1000000007) + ((((B[i-1]*(b%1000000007))%1000000007)*a)%1000000007) + ((((B[i-1]*(b%1000000007))%1000000007)*c)%1000000007))%1000000007;
	    //cout<<B[i]<<" ";
	    B[i] = B[i]%1000000007;
	}
	//cout<<endl;
    //******important note*********
    		//max is min 
    unsigned long a_max=A[0];
    unsigned long a_max_2=ULONG_MAX;
    unsigned long a_maxi=0;
    for(i=1;i<n;i++)
    {
    	if(A[i]<a_max_2)
    	{
    		
    		if(A[i]<=a_max)
    		{
    			a_max_2=a_max;
    			a_max=A[i];
    			a_maxi=i;
    		}
    		else
    			a_max_2=A[i];
    	}
    	
    }
    unsigned long b_max=B[0];
    unsigned long b_max_2=ULONG_MAX;
    unsigned long b_maxi=0;
    for(i=1;i<n;i++)
    {
    	if(B[i]<b_max_2)
    	{
    		if(B[i]<=b_max)
    		{
    			b_max_2=b_max;
    			b_max=B[i];
    			b_maxi=i;
    		}
    		else
    			b_max_2=B[i];
    	}
    }
    
    if(b_maxi!=a_maxi)
    	cout<<b_max+a_max;
    	
    else
    {
    	a_max+b_max_2<a_max_2+b_max?cout<<a_max+b_max_2:cout<<a_max_2+b_max;
    }
    return 0;
}
