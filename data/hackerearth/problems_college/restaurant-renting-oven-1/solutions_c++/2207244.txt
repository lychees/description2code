#include <iostream>
using namespace std;
typedef pair<int,int> pii;
typedef pair <pii,int> p;
p P[150];
int N,M;

long long r=0;
void solv(int ind,int Ar[55],long long result)
{
	int f=0;
	for(int i=P[ind].first.first;i<P[ind].first.second;i++)
		if(Ar[i]==0)
		{
			f=1;
			break;
		}
	if(f==1||ind==N-1)
	{
		if(f==0&&ind==N-1)result+=P[ind].second;
		r=max(r,result);
		if(ind<N-1)
		{
			solv(ind+1,Ar,result);		
		}
		return;
	}
		int Br[55];
		for(int i=0;i<M;i++)Br[i]=Ar[i];
		solv(ind+1,Br,result);
			for(int i=P[ind].first.first;i<P[ind].first.second;i++)
			      Br[i]--;
			    
		solv(ind+1,Br,result+P[ind].second);
	

	
}	


int main()
{
	int T;
	cin>>T;
	while(T--)
	{
		cin>>N>>M;
		int Ar[55]={0};
		for(int i=0;i<N;i++)
		{
			cin>>P[i].first.first>>P[i].first.second>>P[i].second;
		}
		for(int i=0;i<M;i++)
		{
			cin>>Ar[i];
		}
		solv(0,Ar,0);
		cout<<r<<"\n";
	}
}
