#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <algorithm>
using namespace std;

typedef long long ll;
const int N = 300;
const ll INF = (ll)1e16;
ll a[N];
int n, m;
char b[N];

void init()
{
	for (int i = 0; i < n; i++)
		b[i] = '?';
	for (int i = 0; i < n; i++)
		a[i] = 1;
	m = n;
	while(a[m - 1] < INF)
	{
		a[m] = 0;
		for (int i = 0; i < n; i++)
			a[m] += a[m - n + i];
		m++;
	}
	return;
}

bool query(ll id, ll pos, char c)
{
	if (id > m)
		id -= ((id - m) / n) * n;
	while(id >= n)
	{
		id -= n;
		while(pos >= a[id])
		{
			pos -= a[id];
			id++;
		}
	}
	if (b[id] == '?')
		b[id] = c;
	return b[id] == c;
}

int main()
{
	int q;
	scanf("%d%d", &n, &q);
	init();
	while(q--)
	{
		ll id, pos;
		char c;
		scanf("%lld%lld %c", &pos, &id, &c);
		id--;
		pos--;
		if (!query(id, pos, c))
		{
			printf("0\n");
			return 0;
		}
	}
	ll ans = 1;
	for (int i = 0; i < n; i++)
		if (b[i] == '?')
			ans = (ans * 62) % ((ll)1e9 + 7);
	printf("%lld\n", ans);
	
    return 0;
}
