#include <bits/stdc++.h>
using namespace std;

#define FO(i,a,b) for (int i = a; i < b; i++)

int T;
int m[505][505], n, K, mod;
int inv[10005];

int main()
{
    scanf("%d", &T);
    FO(Z,0,T) {
        scanf("%d%d%d", &n, &K, &mod);
        inv[1] = 1;
        FO(i,2,mod) inv[i] = ((mod - mod/i)*inv[mod%i])%mod;
        FO(i,0,n) {
            FO(j,0,n) {
                if (abs(i-j) <= K) m[i][j] = abs(i-j)%mod;
                else m[i][j] = 0;
            }
        }

        int ans = 1%mod;
        FO(i,0,n) {
            for (int j = i; j < n && !m[i][i]; j++) {
                if (m[j][i] != 0) {
                    ans = (mod - ans) % mod;
                    FO(k,0,n) swap(m[i][k], m[j][k]);
                }
            }
            /*FO(i,0,n) {
                FO(j,0,n) printf("%d ", m[i][j]);
                printf("\n");
            }
            printf("---\n");*/
            FO(j,i+1,n) {
                int tmp = (m[j][i] * inv[m[i][i]]) % mod;
                FO(k,0,n) m[j][k] = (mod + m[j][k] - (tmp * m[i][k]) % mod) % mod;
            }
            /*FO(i,0,n) {
                FO(j,0,n) printf("%d ", m[i][j]);
                printf("\n");
            }
            printf("---\n");*/
            ans = (ans * m[i][i]) % mod;
        }
        printf("%d\n", ans);
    }
    return 0;
}
