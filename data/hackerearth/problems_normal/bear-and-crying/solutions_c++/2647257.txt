#include <bits/stdc++.h>

using namespace std;

#define ll long long

const ll mod = 1000000007;
const int maxn = 1000000;

char str[maxn];
int n;
ll p[maxn], m[maxn], dp[maxn];

ll solve(int cur)
{
	if(cur==n-1)
		return 0;
	if(dp[cur]!=-1)
		return dp[cur];
	ll x, y;
	if(str[cur]=='_'){
		if(str[cur+1]=='_')
			x = (2ll*solve(cur+1) + p[cur])%mod;
		else
			x = (2ll*solve(cur+1) + p[cur])%mod;
	}
	else{
		if(str[cur+1]=='_')
			x = solve(cur+1);
		else
			x = solve(cur+1);
	}
	return dp[cur] = x;
}

int main()
{
	//freopen("i.txt", "r", stdin);
	memset(dp, -1, sizeof(dp));
	int i, j, k, cnt;
	scanf("%s", str);
	n = strlen(str);
	p[n] = 0;
	for(i=n-1; i>=0; i--){
		if(str[i]==';')
			p[i] = p[i+1]+1;
		else
			p[i] = p[i+1];
	}
	for(i=n-1; i>=0; ){
		if(str[i]=='_'){
			j = i+1;
			cnt = 0;
			while(j<n){
				if(str[j]=='_')
					break;
				j++;
				cnt++;
			}
			j = i;
			while(j>=0){
				if(str[j]==';')
					break;
				m[j] = cnt;
				j--;
			}
			i = j;
		}
		else
			i--;
	}
	ll ans = solve(0);
	dp[n-1] = 0;
	/*for(i=n-1; i>=0; i--)
		cout << dp[i] << " ";
	cout << "\n";
	for(i=n-1; i>=0; i--)
		cout << p[i] << " ";
	cout << "\n";*/
	ans = 0;
	for(i=0; i<n; i++){
		if(str[i]==';')
			ans = (ans+dp[i])%mod;
	}
	printf("%lld\n", ans);
	return 0;
}