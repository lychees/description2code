#include<bits/stdc++.h>
#define ll long long

using namespace std;
char gp[50][50];
ll val[50][50];
bool visited[50][50];
ll X[]= {0,0,1,-1};
ll Y[]= {1,-1,0,0};
ll mn=(1e+9),t,i,j;
bool safe(ll x,ll y)
{
    return((x>=1&&x<=t)&&(y>=1&&y<=t))&&!visited[x][y]&&gp[x][y]!='T';
}

void dfs(ll x,ll y,ll cnt)
{
    visited[x][y]=1;

    if(gp[x][y]=='E')mn=min(mn,cnt);


    for(ll k=0;k<4;k++)
    {
        if(safe(x+X[k],y+Y[k]))
            dfs(x+X[k],y+Y[k],cnt+1);
    }

    visited[x][y]=0;
}

int main()
{
    ll sx,sy;
    cin>>t;
    for(i=1; i<=t; i++)
    {
        for(j=1; j<=t; j++)
        {
            cin>>gp[i][j];

            if(gp[i][j]=='S')
            {
                sx=i;
                sy=j;
            }
        }
    }
    dfs(sx,sy,0);
    cout<<mn<<endl;
}
