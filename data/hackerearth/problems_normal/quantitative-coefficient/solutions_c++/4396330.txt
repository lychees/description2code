//Sinha Saab
//NARUTO Fan



#include <cstdio>
#include <iostream>
#include <algorithm>
#include <string.h>
#include <vector>
#include <set>
#include <map>
#include <queue>
#include <list>
#include <math.h>

#define ll long long int
#define maxN 100000
#define maxVal 100000000
#define minVal -100000000
#define mod 1000000007LL

#define gcd(a,b) __gcd(a,b)

using namespace std;

ll n,m;
vector<pair<ll,pair<ll,ll> > > g;
ll parent[maxN+5];

ll get(ll i)
{
	if(parent[i]!=i)
		parent[i]=get(parent[i]);
	return parent[i];
}

int main()
{
	ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    #ifndef LOCAL_SYS
        //freopen("in.txt","r",stdin);
        //freopen("out.txt","w",stdout);
    #endif
    ll t,i,ans,u,v,w,x,y;
    cin>>t;
    while(t--)
    {
    	cin>>n>>m;
    	for(i=1;i<=n;i++)
    		parent[i]=i;
    	g.clear();
    	while(m--)
    	{
    		cin>>u>>v>>w;
    		g.push_back(make_pair(w,make_pair(u,v)));
    	}
    	ans=1;
    	sort(g.begin(),g.end());
    	for(i=0;i<(ll)g.size();i++)
    	{
    		w=g[i].first;
    		u=g[i].second.first;
    		v=g[i].second.second;
    		x=get(u);
    		y=get(v);
    		if(x!=y)
    		{
    			parent[x]=y;
    			ans*=w;
    			if(ans>mod)
    				ans%=mod;
    		}
    	}
    	cout<<ans<<"\n";
    }
    return 0;
}