#include <iostream>
#include <algorithm>
using namespace std;
typedef long long ll;

ll gcd(ll a, ll b) {
    while (b) swap(a %= b, b);
    return a;
}

void extgcd(ll a, ll b, ll& x, ll& y) {
	x = 1; y = 0;
    if (b == 0) return;
    
    ll d0 = a, d1 = b;
    while (1) {
    	ll q = d0 / d1, r = d0 % d1;
    	if (r == 0) {
    		x = y;
    		y = (d1 - a * y) / b;
    		return;
    	}
    	d0 = d1; d1 = r;
    	ll tmp = x - q * y;
    	x = y; y = tmp;
    }
}

ll mod_inverse(ll a, ll p) {
    ll x, y;
    extgcd(a, p, x, y);
    return (p + x % p) % p;
}

int main(void) {
    int T;
    cin >> T;
    while (T--) {
        ll a, p, n;
        cin >> a >> p >> n;
        if (gcd(a, p) != 1) {
            cout << -1 << endl;
            continue;
        }
        ll b = mod_inverse(a, p);
        ll ans = (a + b) * (n / 2) + a * (n % 2);
        cout << ans << endl;
    }
    return 0;
}
