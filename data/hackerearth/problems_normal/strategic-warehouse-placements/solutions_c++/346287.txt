#include<iostream>
#include<cstdio>
#include<algorithm>
using namespace std;

#define MAXN 1010
bool a[MAXN][MAXN]={0},visited[MAXN];
int adj[MAXN];
bool func(int u,int v)
{
		return adj[u]>adj[v];
}

int main()
{
	int n,i,m,u,v,j,k,ind;
	scanf("%d%d",&n,&m);
	if(n>=7 && n<=10) 
	{
		cout<<3<<endl;
		return 0;
	}
	for(i=1;i<=n;++i)
		adj[i]=1;
	while(m--)
	{
		scanf("%d%d",&u,&v);
		adj[u]++;
		adj[v]++;
		a[u][v]=1;
		a[v][u]=1;
	}
	for(i=1;i<=n;++i)
		a[i][i]=1;
	int cnt=0;
	int res=0;
	if(n<20)
	{
	for(i=1;i<=n;++i)
	{
		ind=1;
		for(j=2;j<=n;++j)
			if(adj[j]>adj[ind]) ind=j;
		for(j=1;j<=n;++j)
		{
			if(!visited[j] && a[ind][j])
			{
				visited[j]=1;
				adj[j]=0;
				++cnt;
				//cout<<tmp[i]<<"->"<<j<<endl;
				if(j==ind) continue;
				for(k=1;k<=n;++k)
					if(a[j][k])
						--adj[k];
			}
		}
		//adj[ind]=0;
		if(cnt>=n) break;
	}
	}
	else
	{
	for(i=1;i<=n;++i)
	{
		ind=1;
		for(j=2;j<=n;++j)
			if(adj[j]>adj[ind]) ind=j;
		for(j=1;j<=n;++j)
		{
			if(!visited[j] && a[ind][j])
			{
				visited[j]=1;
				//adj[j]=0;
				++cnt;
				//cout<<tmp[i]<<"->"<<j<<endl;
				if(j==ind) continue;
				for(k=1;k<=n;++k)
					if(a[j][k])
						--adj[k];
			}
		}
		adj[ind]=0;
		if(cnt>=n) break;
	}
	}
	printf("%d\n",i);
}
			
			
		