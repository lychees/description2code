#include<bits/stdc++.h>
using namespace std;
long long a[1000][1000],b[1000][1000];
int max(long long int a,long long int b)
{
    return (a>b)?a:b;
}
int main()
{
    int t,n,m;
    scanf("%d",&t);
    while(t--)
    {
              scanf("%d%d",&n,&m);
              long long m1[1000]={},m2[1000]={};
              for(int i=0;i<n;i++)
              {
                      for(int j=0;j<m;j++)
                      {
                              scanf("%lld",&a[i][j]);
                              m2[j]=max(m2[j],a[i][j]);
                             
                              
                      }
              }
              for(int i=0;i<n;i++)
              {
                      for(int j=0;j<m;j++)
                      {
                            scanf("%lld",&b[i][j]);
                             m1[i]=max(m1[i],b[i][j]);
                      }
              }
              int c=0;
              for(int i=0;i<n;i++)
              {
                      for(int j=0;j<m;j++)
                      {
                              if(a[i][j]==m2[j] && b[i][j]==m1[i])
                              c++;
                      }
              }
              printf("%d\n",c);
    }
    return 0;
}
