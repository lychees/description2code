'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''


def count_one(choice):
    j = 0
    for n in choice:
        count = 0
        while n:
            count += n & 1
            n >>= 1
        choice[j] = count
        j += 1


T = int(raw_input())

for i in range(T):
    N, K = [int(e) for e in raw_input().split()]
    choice = raw_input().split()
    res = 0
    for j in range(N):
        choice[j] = int(choice[j])
    count_one(choice)
    choice.sort()
    l = len(choice)
    for k in range(K):
        res += choice[l-1-k]
    print res
