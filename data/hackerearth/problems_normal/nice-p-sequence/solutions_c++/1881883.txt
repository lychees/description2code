//ITNOG
#include<bits/stdc++.h>

using namespace std;

#define int long long
#define rep(i, s, e) for(int i = s; i < e; i ++)
typedef long double ld;

const int maxN = 100*1000+5;
//const int mod = 1000*1000*1000 + 7;
const int maxM = 400000;

int mod;
int egcd(int a, int b, int &x, int &y)
{
    if(b == 0) { x = 1; y = 0; return a; }    
    int d, xp, yp;
    d = egcd(b, a % b, xp, yp);
    x = yp; y = xp - (a/b)*yp;
    x %= mod; y %= mod; x += mod; y += mod; x %= mod; y %= mod;
    return d;
}


void solve()
{
    int a, p, n; cin >> a >> p >> n; mod = p;
    if(__gcd(a,p) > 1) { cout << -1 << endl; return; }
    int d,x,y; 
    d = egcd(a,p,x,y);
    if(d > 1) { cout << -1 << endl; return; }
    int ra = x;
    long long ans = (1LL) * a * ((n+1)/2) + (1LL) * ra * (n/2);
    cout << ans << endl;
}

main()
{
    ios::sync_with_stdio(0); cin.tie();
    int T; cin >> T;
    rep(i,0,T) solve();
    return 0;
}
