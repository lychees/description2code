#include<bits/stdc++.h>
#define ll long long int
#define inp(x) scanf("%lld",&x)
#define inpc(x) cin >> x
using namespace std;
map< string , int > s;
static ll g[109][109];
int main(){
    memset(g,1000000007,sizeof(g));
    ll n,m,w;
    string x,y;
    inp(n);inp(m);
    for(ll i=0;i<n;++i){
        inpc(x);
        s[x] = i;
    }
    while(m--){
        inpc(x);inpc(y);inp(w);
        g[s[x]][s[y]] = w;
        g[s[y]][s[x]] = w;
    }
    /*for(ll i=0;i<n;++i){
        for(ll j=0;j<n;++j){
            cout<<g[i][j]<<" ";
        }cout<<endl;
    }*/
    for(ll k=0;k<n;++k){
        for(ll i=0;i<n;++i){
            for(ll j=0;j<n;++j){
                g[i][j] = min(g[i][j],g[i][k]+g[k][j]);
            }
        }
    }
    /*for(ll i=0;i<n;++i){
        for(ll j=0;j<n;++j){
            cout<<g[i][j]<<" ";
        }cout<<endl;
    }*/
    inp(m);
    while(m--){
        inpc(x);inpc(y);
        cout<<g[s[x]][s[y]]<<endl;
    }
    return 0;
}
