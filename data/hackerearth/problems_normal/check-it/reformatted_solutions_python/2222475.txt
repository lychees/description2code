def all(F, N):
    s = set()
    for (u, v) in F:
        s.add(u)
        s.add(v)
    return s == set(range(N))


T = int(raw_input())
for _ in xrange(T):
    N, M = map(int, raw_input().split())
    E = [0]*M
    F = [0]*(N-1)
    for i in xrange(M):
        u, v = map(int, raw_input().split())
        E[i] = (u-1, v-1)
    X = map(int, raw_input().split())
    for i in xrange(len(X)):
        F[i] = E[X[i]-1]
    if not all(F, N):
        print "NO"
    else:
        print "YES"
