#include <algorithm>
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <cstdio>
#include <vector>
#include <cstring>
#include <map>
#include <string>
#include <queue>
#include <set>
#include <stack>
#define rep(i, a, b) for(int i = a; i < b; i++)
#define red(i, a, b) for(int i = a; i > b; i--)
#define RED true
#define BLACK false
#define pb push_back
#define mk make_pair
#define fi first
#define se second
using namespace std;
typedef pair<int, int> ii;
typedef long long ll;
typedef pair<ii, int> iii;
typedef vector<ii> vii;
typedef vector<int> vi;
const int N = 3e5 + 7;
const int M = 257;
const int inf = 1e9 + 7;
const ll base = 1e18;
const double pi = acos(-1);
const double ep = 1e-18;




priority_queue<iii> heap;
int a[100];
int c[100];
int l[1000], r[1000];
int n;
map<string, char> st;

void DFS(int u, string x){
    if (l[u] != -1) DFS(l[u], x + "1");
    if (r[u] != -1) DFS(r[u], x + "0");
    if (l[u] == -1 && r[u] == -1){
        st[x] = c[u];
        //cout << char(c[u]) << " " << x <<endl;
    }
}

void solve(){
    cin >> n;
    char s1[2];
    int f;
    rep(i, 1, n + 1){
        scanf("%s %d", s1, &f);
        c[i] = s1[0];
        a[i] = f;
        l[i] = r[i] = -1;
        heap.push(mk(mk(f, c[i]), i));
    }

    while (heap.size() > 1){
        int f = heap.top().fi.fi, u = heap.top().se; heap.pop();
        f += heap.top().fi.fi;
        int v = heap.top().se; heap.pop();
        a[++n] = f;
        l[n] = u; r[n] = v;
        c[n] = max(c[u], c[v]);
        heap.push(mk(mk(f, c[n]), n));
    }
    while (!heap.empty()) heap.pop();
    st.clear();
    DFS(n, "");
    string s;
    cin >> s;
    int i = 0;
    while (i < s.size()){
        int j = i;
        while (j < s.size() && st.count(s.substr(i, j - i)) == 0)j++;
        cout << st[s.substr(i, j - i)];
        i = j;
    }
    cout << endl;


}

int main(){
#ifndef ONLINE_JUDGE
    freopen("in.txt", "r", stdin);
    //freopen("output.txt", "w", stdout);
#endif // ONLINE_JUDGE
    int t = 1;
    cin >> t;
    while (t--)
    solve();
}
