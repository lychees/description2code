#include<bits/stdc++.h>
using namespace std;
#define fast cin.sync_with_stdio(0);cin.tie(0)
#define pii pair<int,int>
#define ff first
#define ss second
#define mp make_pair
#define pb push_back
#define INF (((ll)1000000000) * ((ll)1000000000))
#define N 2*100005
#define ll long long
#define MOD 1000000007
#define gcd __gcd
#define fill(A,v) memset(A,v,sizeof(A))
#define all(x) (x).begin(), (x).end()
int a[N],l[N],r[N];
stack<int> s;
ll calc[N];
int main() {
	int t,i,j;
	int n;
	ll k,cnt=0;
	cin>>t;
	while(t--)
	{
		cnt=0;
		cin>>n>>k;
		for(i=1;i<=n;i++)
		  cin>>a[i];
		a[0]=INT_MAX;
	a[n+1]=INT_MAX;
	while(!s.empty())
	  s.pop();
    s.push(0);
	for(i=1;i<=n;i++)
	{
		while(a[s.top()]<a[i])
		  s.pop();
		l[i]=s.top();
		s.push(i);
	}
	while(!s.empty())
	  s.pop();
	s.push(n+1);  
	for(i=n;i>=1;i--)
	{
		while(a[s.top()]<=a[i])
		  s.pop();
		 r[i]=s.top();
		 s.push(i);
	}
	for(i=1;i<=n;i++)
	{

       calc[i]=1LL*(i-l[i])*(r[i]-i);
       
	}
	for(i=1;i<=n;i++)
	{
	   if(a[i]>k)
	     cnt+=calc[i];
	}
	cout<<cnt<<"\n";
	} 
	
	return 0;
}