#include "bits/stdc++.h"

using namespace std;

const int MAXN = 50000;
const int SQRT = 250;
int tab[MAXN+7], ile[MAXN+7], tmp[MAXN+7];
long long pref[SQRT+7][MAXN+7];

long long count(int a, int b)
{
  long long res = 0;
  for(int i=a/SQRT*SQRT+1; i <= a; i++)
    tmp[tab[i]]++;
  for(int i=b/SQRT*SQRT+1; i <= b; i++)
    res += tmp[tab[i]];
  for(int i=a/SQRT*SQRT+1; i <= a; i++)
    tmp[tab[i]]--;
  return res;
}

long long foo(int a, int b)
{
  return pref[a/SQRT][b] + pref[b/SQRT][a] - pref[a/SQRT][b/SQRT*SQRT] + count(a, b);
}


int main()
{
  ios_base::sync_with_stdio(0);
  int n;
  cin >> n;
  for(int i=1; i<=n; i++)
    cin >> tab[i];
  for(int i=1; i<=SQRT; i++)
  {
    for(int j=0; j<SQRT and (i-1)*SQRT+j < n; j++)
      ile[tab[(i-1)*SQRT+j+1]]++;
    for(int j=1; j<=n; j++)
      pref[i][j] = pref[i][j-1] + ile[tab[j]];
  }
  int Q;
  cin >> Q;
  while(Q--)
  {
    int a, b, c, d;
    cin >> a >> b >> c >> d;
    cout << foo(b,d) - foo(b,c-1) - foo(a-1,d) + foo(a-1,c-1) << "\n";
  }
}
