#include <iostream>
#include<stdio.h>

using namespace std;

int main()
{
    //cout << "Hello World!" << endl;
    int t,q,n,i,w,x,y,z;long long temp1,temp2;
    int mod=1000000007;
    long long *arr;long long *sum;long long *mult;long long *multsum;
    long long ans;
    
    scanf("%d",&t);
    while(t-->0)
    {
    	scanf("%d%d",&n,&q);
    	arr=new long long[n+5];
    	arr[0]=0;
    	sum=new long long[n+6];
    	sum[0]=0;
    	mult=new long long[n+6];
    	mult[0]=0;
    	multsum=new long long[n+6];
    	multsum[0]=0;
    	for(i=1;i<=n;i++)
    	{
    		scanf("%ld",&arr[i]);
    		sum[i]=(sum[i-1]+arr[i]);
    		mult[i]=(arr[i]*i);
    		multsum[i]=(multsum[i-1]+mult[i]);
    	}	
    	
    	
    	while(q-->0)
    	{
    		scanf("%d%d%d%d",&w,&x,&y,&z);
    		ans=0;
    		temp1=sum[x+z]-sum[x+y-1];
    		if(temp1<0)
    		temp1+=mod;
    		temp1=(temp1*(w-x));
    		
    		temp2=multsum[x+z]-multsum[x+y-1];
    		if(temp2<0)
    		temp2+=mod;
    		
    		ans=(temp1+temp2)%mod;
    		printf("%ld\n",ans);
    	}
    }
    return 0;
}
