def HQ(h, a, A):
    return h + a - float(A) / 2


t = int(raw_input())
while t > 0:
    t -= 1
    n = int(raw_input())
    list_a = list()
    for i in xrange(n):
        list_a.append([int(i) for i in raw_input().strip().split(' ')])

    A = sum([i[1] for i in list_a])
    H = sorted([HQ(i[0], i[1], A) for i in list_a], reverse=True)
    print int(H[0] + H[1])
