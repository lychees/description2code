#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
#define pb push_back
#define mp make_pair
#define MOD 1000000007
#define PI 3.1415926535897932
#define inf 10000000000000
int mark[1009][1009],a[1009][1009],b[1009][1009];
int main()
{   
      int t;
      scanf("%d",&t);
      while(t--)
      {
            int n,m,i,j;
            memset(mark,0,sizeof(mark));
            scanf("%d%d",&n,&m);
            for(i=0;i<n;i++)
            {
                  for(j=0;j<m;j++)
                  scanf("%d",&a[i][j]);
            }
            for(i=0;i<n;i++)
            {
                  for(j=0;j<m;j++)
                  scanf("%d",&b[i][j]);
            }
            for(i=0;i<n;i++)
            {
                  ll maxm=b[i][0];
                  for(j=1;j<m;j++)
                  {
                        if(maxm<b[i][j])
                        {
                              maxm=b[i][j];
                              
                        }
                  }
                  for(j=0;j<m;j++)
                  {
                        if(maxm==b[i][j])
                        {
                              mark[i][j]++;
                              
                        }
                  }
                  
            }
            for(i=0;i<m;i++)
            {
                  ll maxm=a[0][i];
                  for(j=1;j<n;j++)
                  {
                        if(maxm<a[j][i])
                        {
                              maxm=a[j][i];
                              //ind=j;
                        }
                  }
                  for(j=0;j<n;j++)
                  {
                        if(maxm==a[j][i])
                        {
                              mark[j][i]++;
                              
                        }
                  }
                  //mark[ind][i]++;
            }
            int c=0;
            for(i=0;i<n;i++)
            {
                  for(j=0;j<m;j++)
                  {
                        if(mark[i][j]==2)
                        c++;
                  }
            }
            printf("%d\n",c);
      }
      return 0;
}