/*
    	Author - Shubham Shukla (shuklas664)
*/

#include <bits/stdc++.h>

typedef long long 	ll;

#define scll(t)		scanf("%lld",&t)
#define sc(t)		scanf("%d",&t)
#define max(a,b)	(a>=b?a:b)
#define min(a,b)	(a<b?a:b)
#define gc			getchar_unlocked
#define mp			make_pair
#define pb			push_back
#define freinp		freopen("in.txt","r",stdin)
#define freout		freopen("out.txt","w",stdout)
#define Size(a)		int((a).size())
#define F			first
#define S			second
#define MAX         5000010
#define pi          pair<int,int>
#define MOD         1000000007
using namespace std;


/* This is for Fast Input

void scanint(int &x)
{
	register int c = gc();
	x = 0;
	for(;(c<48 || c>57);c = gc());
	for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
}
void scanint(int &x)
{
	register int c = gc();
	x = 0;
	int neg = 0;
	for(;((c<48 || c>57) && c != '-');c = gc());
	if(c=='-') {neg=1;c=gc();}
	for(;c>47 && c<58;c = gc()) {x = (x<<1) + (x<<3) + c - 48;}
	if(neg) x=-x;
}

*/

vector<pi> g[100010];
int del[100010];
int vis[100010];
int dis[100010];

void bfs(int s)
{
    int c;
    pi n;
    queue<int> q;
    vis[s] = 1;
    q.push(s);
    dis[s] = 0;
    while(!q.empty())
    {
        c = q.front();
        q.pop();
        for(int i=0;i<Size(g[c]);i++)
        {
            n = g[c][i];

            if(vis[n.F])
                continue;
            if(!del[n.S] || del[n.S]>dis[c])
            {
               // cout<<c<<"-->"<<n.F<<" "<<n.S<<" del at "<<del[n.S]<<endl;
                dis[n.F] = dis[c] + 1;
                vis[n.F] = 1;
                q.push(n.F);
            }
        }
    }
}

int main()
{
    //freinp;
    int i,n,m,k,u,v,t,e;
    sc(n);sc(m);sc(k);
    memset(dis,-1,sizeof dis);
    for(i=1;i<=m;i++)
    {
        sc(u);
        sc(v);
        g[u].pb(mp(v,i));
        g[v].pb(mp(u,i));
    }
    for(i=1;i<=k;i++)
    {
        sc(t);
        sc(e);
        del[e] = t;
        //cout<<e<<" ^^^ "<<del[e]<<endl;
    }
    bfs(1);

    cout<<dis[n];
}
