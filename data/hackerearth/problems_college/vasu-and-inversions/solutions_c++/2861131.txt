#include <iostream>
using namespace std;

int main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(0);
	int tc;
	cin >> tc;
	while(tc--)
	{
		int n,k,z=0,o=0;
		cin >> n >> k;
		for(int i=0;i<n;i++)
		{
			int x;
			cin >> x;
			if(x == 0) z++;
			else o++;
		}
		if(z >= k)
		{
			cout << o + k << "\n";
		}
		else
		{
			k -= z;
			long long ans = n;
			if(k & 1) ans--;
			cout << ans << "\n";
		}
		
	}
    return 0;
}
