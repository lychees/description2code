#include <bits/stdc++.h>
using namespace std;

int main() {
	int N;
	long long T;
	cin >> N >> T;
	vector<int> a(N), b(N), c(N), b2(N);
	for (int i = 0; i < N; ++i) cin >> a[i], c[i] = i;
	for (int i = 0; i < N; ++i) cin >> b[i], b[i]--;
	for (long long bi = 1; T; bi <<= 1) {
		if (T & bi) {
			T &= ~bi;
			for (int i = 0; i < N; ++i) c[i] = b[c[i]];
		}
		for (int i = 0; i < N; ++i) b2[i] = b[b[i]];
		b = b2;
	}
	for (int i = 0; i < N; ++i) cout << a[c[i]] << ' ';
	cout << endl;
    return 0;
}
