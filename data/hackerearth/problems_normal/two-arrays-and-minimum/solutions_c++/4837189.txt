#include <iostream>
using namespace std;
int main()
{
    long long a,b,c;
    cin>>a>>b>>c;
    long long n;
    cin>>n;
    long long A[n+1];
    long long B[n+1];
    long long i;
    
    A[1] = (a*c)%1000000007;
    long long min1 = A[1];
    long long min2 = 1000000007;
    long long i1=1,i2=1;
for(i=2 ; i<=n ; i++)
{
    A[i] = (((((A[i-1]*a)%1000000007)*b)%1000000007)*c)%1000000007 + (((A[i-1]*a)%1000000007)*b)%1000000007 + (((A[i-1]*a)%1000000007)*c)%1000000007;
    A[i]=A[i]%1000000007;
  //  cout<<A[i]<<" ";
    if(A[i]<=min1){
    	long long a= min1;
    	long long b = i1;
    	min1 = A[i];
    	i1 = i;
    	min2 = min1;
    	i2 = b;
     }
    else if(A[i] < min2)
    {
    	min2 = A[i];
    	i2 = i;
    }
}

B[1] = (b*c)%1000000007;
long long min3 =B[1];
long long min4 = 1000000007;
long long j1 =1;
long long j2 =1;
for(i=2 ; i<=n ; i++)
{
    B[i] = (((((B[i-1]*b)%1000000007)*c)%1000000007)*a)%1000000007 + (((B[i-1]*b)%1000000007)*a)%1000000007 + (((B[i-1]*b)%1000000007)*c)%1000000007;
    B[i]=B[i]%1000000007;
//    cout<<B[i]<<" ";
    if(B[i]<=min3){
    	long long a= min3;
    	long long b = j1;
    	min3 = B[i];
    	j1 = i;
    	min4 = min3;
    	j2 = b;
    }
    else if(B[i] < min4)
    {
    	min4 = B[i];
    	j2 = i;
    }
}
//cout<<"min1"<<min1<<" min2"<<min2<<"\n";
//cout<<"min3"<<min3<<" min4"<<min4<<"\n";
long long min = 1000000007;
if(i1!=j1){
	min = min1+min3;
}
else if(i1!=j2&&i2!=j1){
	if(i1+j2>=i2+j1){
		min = min2+min3;
	}
	else
	min =min1+min4; 
}
else if(i1==j2){
	min = min2+min3;
}
else if(i2 == j1){
	min = min1 + min4;
}
else{
	min = min2+min4;
}

cout<<min;
    return 0;
}
