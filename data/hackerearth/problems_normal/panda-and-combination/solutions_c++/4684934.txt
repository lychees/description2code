#include <iostream>
using namespace std;

int main()
{
long long int i,j,t,m,f,n,k;
      cin>>t;
      for(i=1;i<=t;i++)
      {
      	cin>>n>>m;
      	f=0;
      	if(m==1)
      	{
      	cout<<n<<endl;
      	continue;
      	}
      	while(n>0)
      	{
      	  k=n%m;
      	  if(k>0)
      	  {
      	  	n=n-k;
      	  	f=f+k;
      	  }
      	while(n>0&&n%m==0)
      	  n=n/m;
      	  }
      cout<<f<<endl;
      }
    return 0;
}
