#include <iostream>
#include <bits/stdc++.h>
using namespace std;

int main()
{
   // cout << "Hello World!" << endl;
   int t,x,n,i,j,k,l,m,p;
   ios_base::sync_with_stdio(0);
   cin>>t;
   while(t--)
   {
   	cin>>n>>k;
   	
   	m=0;
   	p=0;
   	for(i=0;i<n;i++)
   	{
   		cin>>x;
   		if(x)
   		m++;
   		else
   		p++;
   	}
   	int ans=0;
   	if(p>k)
   	ans=m+k;
   	else 
   	{
   		if((k-p)%2==0)
   		ans=n;
   		else
   		ans=n-1;
   	}
   	cout<<ans<<endl;
   	
   	
   }
    return 0;}