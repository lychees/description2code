#include <bits/stdc++.h>

using namespace std;

int dp[1000001];

int main(int argc, char **argv)
{
	int T,L,R,K;
	
	for(scanf("%d",&T);T>0;T--)
	{
		scanf("%d%d%d",&L,&R,&K);
		for(int i=0;i<=R;i++)
		{
			dp[i]=0;
		}
		for(int i=L;i<=R;i++)
		{
			if(i%K==0)
			{
				dp[i]=max(dp[i-1],dp[(i/K)-1]+1);
			}
			else
			{
				dp[i]=max(dp[i-1],dp[i/K]+1);
			}
		}
		printf("%d\n",dp[R]);
	}
	
	return 0;
}