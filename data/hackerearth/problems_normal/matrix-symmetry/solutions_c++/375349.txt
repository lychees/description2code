#include<iostream>
#include<cstdio>

using namespace std;
bool is_horizontal(char **G, int n){
	bool flag = 1;
	for(int i=1;i<=n/2;i++)
	{
		for(int j=1;j<=n;j++)
		{
			if(G[i][j] != G[n+1-i][j])
				flag = 0;
		}
	}
	return flag;
}
bool is_vertical(char **G, int n){
	bool flag = 1;
	for(int i=1;i<=n/2;i++)
	{
		for(int j=1;j<=n;j++)
		{
			if(G[j][i] != G[j][n+1-i])
				flag = 0;
		}
	}
	return flag;
}
int main(){
	
	char **G;
	int t,n;
	scanf("%d",&t);
	while(t--){
		
		scanf("%d",&n);
		G = new char *[n+1];
		for(int i = 0; i <=n; i++)
    		G[i] = new char[n+1];
    	for(int i=0;i<=n;i++)
    	{
    		for(int j=0;j<=n;j++){
    			if(i==0 || j==0)
					G[i][j]=0;
    			else 
    				cin>>G[i][j];
    		}
    	}
    	
    	bool horiz = is_horizontal(G,n);
    	bool vert  = is_vertical(G,n);
    	
    	if(horiz && vert)printf("BOTH\n");
    	else if(horiz)printf("HORIZONTAL\n");
    	else if(vert)printf("VERTICAL\n");
    	else printf("NO\n");
	}
	return 0;
}