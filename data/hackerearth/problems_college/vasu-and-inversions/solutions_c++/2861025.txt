#include <iostream>
using namespace std;

int main()
{
   long long int tc,n,k,a[100001],i,j,l,ans;
    scanf("%lld",&tc);
    while(tc--)
    {
    
    	long long int one,zero;
    	one=0;
    	zero = 0;
    	scanf("%lld %lld",&n,&k);
    	for(i=0;i<n;i++)
    	{
    		scanf("%lld",&a[i]);
    		if(a[i]==1)
    		one++;
    		else
    		zero++;
    	}
    	if(k==0)
    	{
    		printf("%lld\n",one);
    	}
   else if(k==zero)
    {
    	printf("%lld\n",one+zero);
    }
    else if(k<zero)
    {
    	printf("%lld\n",k+one);
    }
    else if(k>zero)
    {
    	k = k-zero;
      if(k%2==0)
    	printf("%lld\n",one+zero);
    	else
    	printf("%lld\n",one+zero-1);
    }
    }
    return 0;
}
