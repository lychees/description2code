#include<bits/stdc++.h>
using namespace std;
#define ll long long 
#define INF 100000000
#define pb push_back
#define mp make_pair
set <ll> myset,res;
ll dis[200][200];
bool vis[200];
vector <ll> v;

bool comp(const pair<ll,ll> &a, const pair<ll,ll> &b)
{
    return a.second<b.second;
}

int main()
{
    ll t,n,m,i,x,j,k,c,s,a,h,cnt,sum;
    
    cin>>t;
    
    while(t--)
    {
        cin>>n>>m;
        
        //Initialize
        
        
        for(i=1;i<=n;i++){
            for(j=1;j<=n;j++){
                if(i==j)
                dis[i][j]=0;
                else
                    dis[i][j]=INF;
            }
        }
      v.clear();
        /* ******************** */
        
        while(m--)
        {
            cin>>i>>j>>c;
            dis[i][j]=min(dis[i][j],c);
            dis[j][i]=dis[i][j];
        }
      
        for(k=1;k<=n;k++)
        {
            for(i=1;i<=n;i++)
            {
                for(j=1;j<=n;j++)
                {
                    dis[i][j]=min(dis[i][j],dis[i][k]+dis[k][j]);
                }
            }
        }
        cin>>s>>a>>h;
      
      //Calculate distances of all enemy bases from S + 2*distance from A + distance from H
        
        for(i=1;i<=n;i++)
        {
            if(i==s||i==a||i==h)
                continue;
            v.pb(dis[i][s]+2*dis[i][a]+dis[i][h]);
        }
        sort(v.rbegin(),v.rend());
        cout<<v[0]<<"\n";
    }

return 0;
}