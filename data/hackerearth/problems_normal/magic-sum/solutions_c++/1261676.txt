#include<bits/stdc++.h>
using namespace std;

const int N=520;
const int inf=1e9+9;

int tree[N];
int n;

int cal(int p) {
    if(p>n) {
        return 0;
    }
    int ret=-inf;
    return ret=max(ret,tree[p]+max(cal(p*2),cal(p*2+1)));
}
int main() {
    int tt;
    scanf("%d",&tt);
    while(tt--) {
        scanf("%d",&n);
        for(int i=1;i<=n;i++) {
            scanf("%d",tree+i);
        }
        int maxVal=-inf;
        for(int i=1;i<=n;i++) {
            maxVal=max(maxVal,tree[i]+cal(2*i)+cal(2*i+1));
        }
        printf("%d\012",maxVal);
    }
    return 0;
}
