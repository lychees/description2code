// @BEGIN OF SOURCE CODE
#include <bits/stdc++.h>
#include <sstream>
#include <set>
#include <map>
#include <vector>
#include <bitset>
#include <functional>

using namespace std;

typedef vector<int> vi;typedef vector<vi> vvi;typedef pair<int,int> ii;
#define sz(a) int((a).size())
#define pb push_back
#define ll long long
#define MOD 1000000007
#define mod 100005
#define unsigned32 4294967295
#define PrimeRange 1000006
/*bool Prime[PrimeRange];
void mark(int N)
{	for(int i= N*N; i<PrimeRange; i += N)Prime[i] = false;}
void sieve()
{	memset(Prime,true,PrimeRange);	mark(2);
	for(int i=3; i<=sqrt(PrimeRange); i += 2)if(Prime[i] == true)mark(i);}*/

int main()
{
 	ios_base::sync_with_stdio(false);
	//freopen("input.txt","r",stdin);
	//freopen("output.txt","w",stdout);
	//	sieve();
	ll T;
	cin>>T;
	while(T--)
	{
		ll N,K , sm = 0;
		cin>>N>>K;
		vector<pair<int,int> > V;
		ii P;
		ll arr[N];
		for(int i=0;i<N;i++)cin>>arr[i] , V.pb(make_pair(__builtin_popcount(arr[i]),arr[i]));
		sort(V.begin(),V.end(),greater<pair<int,int> >());
		for(int i=0;i<K;i++)
		{
			P = V[i];
			sm += P.first;	
		}
		cout<<sm<<endl;
	}

	return 0;
}
// @END OF SOURCE CODE
