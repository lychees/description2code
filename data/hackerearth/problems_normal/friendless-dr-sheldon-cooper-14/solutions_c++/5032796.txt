
#include<bits/stdc++.h>
#define int long long
#define endl '\n'
#define pi pair<long long,long long>
#define mp make_pair
#define mod 1000000007

using namespace std;
int n,m,id[(int)2e4];
vector<pair<int,pi>> edge;


void dsu_start()
{
    for(int i=1;i<=n;i++)id[i]=i;
}

int dsu_root(int x)
{
    while(x!=id[x])
    {
        id[x]=id[id[x]];
        x=id[x];
    }
    return x;
}

void dsu_union(int a,int b)
{
    int p=dsu_root(a);
    int q=dsu_root(b);
    id[p]=id[q];
}

int kruskal()
{
    dsu_start();
    int min_cost=0;
    for(int i=0;i<edge.size();i++)
    {
        int a=edge[i].second.first,b=edge[i].second.second,cost=edge[i].first;
        if(dsu_root(a)!=dsu_root(b))
        {
            min_cost+=cost;
            dsu_union(a,b);
        }
    }
    return min_cost;
}

main()
{
    int t;
    cin>>t;
    while(t--)
    {

    cin>>n>>m;
    edge.clear();
    for(int i=0;i<m;i++)
    {
        int u,v,w;
        cin>>u>>v;
        w=1;
        edge.push_back(mp(w,mp(u,v)));
    }
    sort(edge.begin(),edge.end());
    cout<<kruskal()<<endl;

    }
    return 0;
}
