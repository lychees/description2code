#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
vector<int> v[100005];
int a[100005],b[100005];

int main()
{
   int n;
   ll t;
   scanf("%d%lld",&n,&t);
   int i;
   for(i=1;i<=n;i++)
   scanf("%d",&a[i]);
   for(i=1;i<=n;i++)
   scanf("%d",&b[i]);
   int in = 0;
   map<int,int> pos,ran;
   set<int> s;
   for(i=1;i<=n;i++)
   {
   	if(s.find(b[i])==s.end())
   	{
   		int ind = 0;
   		int x =i ;
   		while(s.find(x)==s.end())
   		{
   			s.insert(x);
   			pos[x] = ind++;
   			ran[x] = in;
   			v[in].push_back(x);
   		
   			x = b[x];
   		}
   			in++;
   	}
   }
   for(i=1;i<=n;i++)
  {
  	int ind = ran[i];
  	int len = v[ind].size();
  	int rem = t%len;
  	int position = pos[i];
  	position = (position + rem)%len;
  	int nex = v[ind][position];
  	printf("%d ",a[nex]);
  }
    return 0;
}
