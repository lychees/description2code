#include<bits/stdc++.h>
using namespace std;
int visited[40][40];

int ctr=-1;
int ans=1000;
void funits(char  s[][40],int x,int y,int n,int ctr)
{
	
	 int  i=x;
     int  j=y;
    
	if(s[i][j]=='E')
 	{
 		if(ans>ctr)
  		{
     		ans=ctr; 
  		}
  		return;
 	}
 	
   	visited[x][y]=1;
   	
 	ctr++;
			
			if((s[i+1][j]=='P'||s[i+1][j]=='E' ) && visited[i+1][j]==0 && i+1<n)
			{
				//ctr++;
				//visited[x+1][y]=1;
				funits( s, i+1, j, n, ctr);
			}
			
			if((s[i-1][j]=='P'||s[i-1][j]=='E') && visited[i-1][j]==0 && i-1>=0)
			{
				//ctr++;
				//visited[x-1][y]=1;
				funits( s, i-1, j, n, ctr);
			}
			
			if((s[i][j+1]=='P'||s[i][j+1]=='E') && visited[i][j+1]==0 && j+1<n)
			{
				///ctr++;
			///	visited[x][y+1]=1;
				funits( s, i, j+1, n, ctr);
			}
			
			if((s[i][j-1]=='P'||s[i][j-1]=='E' )&& visited[i][j-1]==0 && j-1>=0)
			{
			//	ctr++;
			//	visited[x][y-1]=1;
				funits( s, i, j-1, n, ctr);
			}
			
			visited[i][j]=0;
			return ;
			
			
			
}
int main()
{
		int n;
		cin>>n;
		int x,y;
		char arr[40][40];	
			memset(visited,0,sizeof(visited));	
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				cin>>arr[i][j];
				
			}
		}
		
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				if(arr[i][j]=='S')
				{
					x=i;
					y=j;
					break;
				}
				
			}
		}
		
		
		int ctr=0;
		//memset(visited, 0, sizeof visited); 	
		funits(arr,x,y,n,ctr);
		cout<<ans;
		
		
}