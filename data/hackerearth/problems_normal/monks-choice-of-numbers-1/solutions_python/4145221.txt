import operator
t=input('')
cnt=0
def num_of_one(n):
	cnte=0
	while n:
		n=n&n-1
		cnte+=1
	return cnte

while t>cnt:
	num_of_one_list=[]
	n,k=raw_input('').split(' ')
	num_list=raw_input('').split(' ')
	for i in range(int(n)):
		num_of_one_list.append(num_of_one(int(num_list[i])))

	sorted_x=[y for (y,x) in sorted(zip(num_of_one_list,num_list),reverse=True)]
	ans=0
	for i in range(int(k)):
		ans+=sorted_x[i]
	print ans

	t-=1

