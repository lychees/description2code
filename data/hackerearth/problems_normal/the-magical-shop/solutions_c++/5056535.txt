#include <iostream>
using namespace std;

int main()
{
	long long int a,n,i,b;
	string s;
	long long int count=0;
    cin >> a >> n;
    cin >> s;
    
    for(i=0;i<s.size();i++){
    
    	if(s[i]=='1'){
    		
    		count +=a;
    		
    		a=a*a;
    		a=a%n;
    		
    	}else if(s[i]=='0'){
    		
    		a=a*a;
    		a=a%n;
    		
    	}
    }
    count=count%n;
    cout << count << endl;
    
    return 0;
}
