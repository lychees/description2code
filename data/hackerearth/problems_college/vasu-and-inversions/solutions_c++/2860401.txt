#include<bits/stdc++.h>
using namespace std;

const int N=1e5+10;

int main() {
  ios::sync_with_stdio(0);
  int tt;
  cin>>tt;
  while(tt--) {
    int n,k;
    cin>>n>>k;
    int cnt=0;
    for(int i=0;i<n;i++) {
      int val;
      cin>>val;
      if(!val) {
        cnt++;
      }
    }
    if(k<cnt) {
      cnt-=k;
      cout<<n-cnt<<endl;
    } else {
      k-=cnt;
      if(k&1) {
        cout<<n-1<<endl;
      } else {
        cout<<n<<endl;
      }
    }
  }
  return 0;
}
