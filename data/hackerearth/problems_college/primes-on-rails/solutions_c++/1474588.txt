#include <bits/stdc++.h>

typedef long long int li;

#define Fi(i, st, ft) for(i = st;i <= ft; ++i)
#define Fd(i, st, ft) for(i = st;i >= ft; --i)
#define pb(a, b) a.push_back(b)
#define mod 1000000007
#define MAXN 1500000
#define MX 1450000
#define inf 1000000000000000000ll
const int maxBufSize = (10000000);

using namespace std;

li n , h , m , s;
li arr[500005];
bool prime[500005];

void sieve(li n)
{
	//prime[i] = true if i is a prime number...prime is a boolean array...
	memset(prime , true , sizeof(prime));
	prime[0] = prime[1] = false;
	li m = (li)sqrt(n);
	li i , k;
	Fi(i , 2, m) {
      		if (prime[i]) {
         		for (int k=i*i; k<=n; k+=i) {
            			prime[k]=false;
            		}
            	}
	}
}

int main()
{
	li i , j , a , b , c;
	sieve(500001);
	scanf("%lld" , &n);
	Fi(i , 1 , n) {
		scanf("%lld %lld %lld" , &h , &m , &s);
		a = h*3600 + m*60 + s;
		if(prime[a]) {
			Fi(j , 1 , 5*60) {
				arr[a+j-1]++;
			}
		} else if(a%2 == 1) {
			Fi(j , 1 , 3*60) {
				arr[a+j-1]++;
			}
		} else if(a%2 == 0) {
			Fi(j , 1 , 2*60) {
				arr[a+j-1]++;
			}
		}
		
	}
	li ans = 0;
	Fi(i , 0 , 500000) {
		ans = max(ans , arr[i]);
	}
	printf("%lld\n" , ans);
	return 0;
}
