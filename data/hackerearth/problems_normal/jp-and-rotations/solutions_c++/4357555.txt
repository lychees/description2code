#include <bits/stdc++.h>

using namespace std;

const int MAXN = 100010;

int n, m;
int ar1[2 * MAXN];
int ar2[2 * MAXN];

void success(int x) {
	cout << x << endl;
	exit(0);
}
void fail() {
	cout << "-1" << endl;
	exit(0);
}

void check(int a, int b, int x) {
	for (int i = 0; i < n; i++) {
		if (ar1[i + a] != ar2[i + b]) {
			fail();
		}
	}
	success(x);
}

int main() {
	cin >> n >> m;
	for (int i = 0; i < n; i++) {
		cin >> ar1[i];
		ar1[i + n] = ar1[i];
	}
	int beg = -1;
	for (int i = 0; i < n; i++) {
		cin >> ar2[i];
		ar2[i + n] = ar2[i];
	}
	for (int i = 0; i < n; i++) {
		if (ar1[i] == ar2[0]) {
			if (beg != -1) while (true);
			beg = i;
		}
	}
	if (beg == -1) fail();
	if (beg == 0) check(0, 0, 0);
	long long cur = 0;
	for (int i = 0; i < m; i++) {
		char ch;
		int x;
		cin >> ch >> x;
		if (ch == 'R') cur -= x;
		else cur += x;
		cur = (cur % n + n) % n;
		if (cur == beg) {
			check(cur, 0, i + 1);
		}
	}
	fail();
}