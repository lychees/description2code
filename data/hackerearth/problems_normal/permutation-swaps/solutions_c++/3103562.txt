#include <bits/stdc++.h>

using namespace std;

const int N = 1e5 + 5;

int lab[N];
int a[N], b[N];
int pa[N], pb[N];
int n, m;

int root(int u) {
    if (lab[u] <= 0) return u;
    return lab[u] = root(lab[u]);
}

void join(int u, int v) {
    u = root(u); v = root(v);
    if (u == v) return;
    lab[u] = v;
}

int main() {
    ios::sync_with_stdio(false);
    int ntest; cin >> ntest;
    while (ntest--) {
        cin >> n >> m;
        for (int i = 1; i <= n; ++i) cin >> a[i];
        for (int i = 1; i <= n; ++i) cin >> b[i];
        for (int i = 1; i <= n; ++i) {
            pa[a[i]] = i;
            pb[b[i]] = i;
        }
        for (int i = 1; i <= n; ++i) lab[i] = 0;
        for (int i = 1; i <= m; ++i) {
            int u, v;
            cin >> u >> v;
            join(u, v);
        }
        bool fail = false;
        for (int i = 1; i <= n; ++i) {
            if (root(pa[i]) != root(pb[i])) {
                fail = true;
                break;
            }
        }
        if (fail)
            cout << "NO\n";
        else
            cout << "YES\n";
    }
    return 0;
}
