#include <iostream>
#include <stdio.h>
#include <string>
#include <vector>

using namespace::std;

int main()
{
	int T;
	cin >> T;

	for (int t = 0; t < T; t++)
	{
		int N, M, P, X;
		cin >> N >> M >> P >> X;
	
		vector<bool> A(M, false);
		string str;
		cin >> str;

		for (int i = 0; i < M; i++)
			if (str[i] == '1')
				A[i] = true;

		N--;

		int Q = M - P;

		vector<int> v;
		while (N)
		{
			if (N & 1)
				v.push_back(Q);	

			N >>= 1;
			Q <<= 1;
			if (Q >= M)
				Q -= M;
		} 

		vector<bool> prev(M, false);
		vector<bool> curr(M, false);

		for (int i = 0; i < M; i++)
			prev[i] = A[i];

		for (int i = 0; i < v.size(); i++)
		{
			for (int j = 0; j < M; j++)
			{
				int x = j;
				int y = (j + v[i]);
				if (y >= M)
					y -= M;

				curr[j] = prev[x] ^ prev[y];
			}

			for (int j = 0; j < M; j++)
				prev[j] = curr[j];
		}

		string ans = "";
		for (int i = 0; i < M; i++)
		{
			if (X == 1)
			{
				if (prev[i])
					ans.push_back('0');
				else
					ans.push_back('1');
			}
			else
			{
				if (prev[i])
					ans.push_back('1');
				else
					ans.push_back('0');
			}
		}

		std::cout << ans << std::endl;
	}

	return 0;
}

