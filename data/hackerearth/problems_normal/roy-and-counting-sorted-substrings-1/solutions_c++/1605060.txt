#include<bits/stdc++.h>
using namespace	std;

#define rep(i,a,b) for(int i = a; i < b; i++)
#define S(x) scanf("%d",&x)
#define P(x) printf("%d\n",x)
#define MAX_SIZE 1000010 
 
typedef long long int LL;
const int mod = 1000000007;

int main() {
   int t;S(t);
   while(t--){
	char s[MAX_SIZE];
	int len; S(len);
	cin>>s;
	LL start=0;
	LL ans = 0;
	int i=1;
	for(;i<len;i++){
		if(s[i] < s[i-1]){	
			LL temp = i-start;
			ans = ans + temp*(temp+1)/2;
			ans = ans-temp;
			start = i;
		}			
	}
	if(start!=i){
		LL temp = i-start;
			ans = ans + temp*(temp+1)/2;
			ans = ans-temp;
	}
	printf("%lld\n",ans+len);
	}
	
	
    return 0;
}