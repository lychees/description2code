    #include<bits/stdc++.h>
    using namespace std;
    int cs,n,l,r,i,j,k,a,b,s;
    int B[257];
    char x[10001],y[63];
    int S[10001];
    int main()
    {
    srand(29173);
    scanf("%d",&cs);
    while(cs--)
    {
   cin>>n>>k>>l>>r>>x>>y;
    memset(B,0,sizeof B);
    for(i=0;i<k;i++)
    B[y[i]]=1;
   
    for(i=1;i<=n;i++)
    S[i]=S[i-1]+B[x[i-1]];
    for(s=0,j=k=i=1;i<=n;i++)
    {
    j=max(j,i);
    k=max(k,i);
    while(j<=n && S[j]-S[i-1]<l)
    j++;
    while(k<=n && S[k]-S[i-1]<=r)
    k++;
    if(j<=n)
    s+=k-j;
    }
     
cout<<s<<endl;
    }
    return 0;
    }


