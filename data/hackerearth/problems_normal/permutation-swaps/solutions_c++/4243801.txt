#include <iostream>
#include <cstdio>
#include <algorithm>
#include <vector>
#include <queue>
#include <map>
#include <utility>
#include <string>
#include <cstring>
#include <set>

using namespace std;

#define ll long long int
#define MOD 1000000007

int to[100001], from[100001], par[100001];

int find_par(int);
void uni(int, int);

int main()
{
	//freopen("input", "rb", "stdin");
	//freopen("output", "w", "stdout");

	int t, n, m, flag, a, b, c, i, j, k;
	cin >> t;

	while (t--) {
		cin >> n >> m;
		for (i = 1; i <= n; ++i) {
			par[i] = i;
			cin >> a;
			from[a] = i;
		}
		for (i = 1; i <= n; ++i) {
			cin >> a;
			to[a] = i;
		}
		for (i = 0; i < m; ++i) {
			cin >> a >> b;
			uni(a, b);
		}

		flag = 1;
		for (i = 1; i <= n; ++i) {
			if (from[i] != to[i]) {
				if (find_par(from[i]) != find_par(to[i])) {
					flag = 0;
					break;
				}
			}
		}

		if (flag == 1) {
			cout << "YES" << endl;
		} else {
			cout << "NO" << endl;
		}
	}

	return 0;
}

int find_par(int x)
{
	if (par[x] == x) return x;
	return (par[x] = find_par(par[x]));
}

void uni(int x, int y)
{
	int px, py;
	px = find_par(x);
	py = find_par(y);
	if (px != py) {
		par[px] = py;
	}
}