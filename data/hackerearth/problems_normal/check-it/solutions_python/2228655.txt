for test in range(input()):
	n,m = map(int,raw_input().split())
	graph = []
	iv = set()
	for i in range(m):
	    graph.append(map(int,raw_input().split()))
	    iv.add(graph[-1][0])
	    iv.add(graph[-1][1])
	s = map(int,raw_input().split())
	fv = set()
	for i in s:
		fv.add(graph[i-1][0])
		fv.add(graph[i-1][1])
	if fv == iv:
		print 'YES'
	else:
		print 'NO'
