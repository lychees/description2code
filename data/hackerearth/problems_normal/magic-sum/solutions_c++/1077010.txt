#include <iostream>
#include <stdio.h>
#include <math.h>
#include <list>
#include <queue>
#include <vector>
#include <functional>
#include <stack>
#include <utility> 
#include <stdlib.h>
#include <map>
#include <string.h>
#include <algorithm>
typedef long long int ll;
#define SWAP(a, b) (((a) ^= (b)), ((b) ^= (a)), ((a) ^= (b)))
#define CLR(a, b) memset(a, b, sizeof(a))
#define MAX_INT numeric_limits<int>::max()
#define MIN_INT numeric_limits<int>::min()
using namespace std;
int xx[8] = { 1, -1, 1, -1, 1 , -1, 0, 0};
int yy[8] = { 1, -1, -1, 1, 0, 0, 1, -1};
int up[1000];
int maxi(int g[], int n, int pos) {
	if(n <= pos) return 0;
	up[pos] = max(maxi(g, n, pos*2 + 1), maxi(g, n , pos*2 +2)) + g[pos];
	return up[pos];
}
int main() {
	int t, n, i, g[1000], j, ans;
	cin>>t;
	while(t--) {
		cin>>n;
		for(i=0; i<n; ++i) {
			cin>>g[i];
			up[i] = g[i];
		}
		maxi(g, n, 0);
		ans = -999999;
		for(i=0; i<n; ++i) {
			if(2*i + 1 < n) {
				ans = max(up[i*2 + 1]+ up[2*i + 2]+g[i], ans);
			} else {
				ans = max(ans, g[i]);
			}
		}
		cout<<ans<<endl;
	}
	return 0;
}