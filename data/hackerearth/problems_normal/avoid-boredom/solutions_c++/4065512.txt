#include <iostream>
#include <algorithm>
#include <cstdlib>
using namespace std;

typedef long long int lli;

int main()
{
int t,n,k;
cin>>t;
while(t--)
{
	cin>>n>>k;
	lli a[n],q[n+3][k+3],ans=0;
	for(int i=0;i<n;i++){cin>>a[i];}

    if(k>1)
     {
	for(int i=0;i<n;i++)
	{
                q[i][2]=0;
                for(int w=0;w<i;w++)
                {
                    q[i][2]=max(q[i][2],abs(a[i]-a[w]));

                    ans=max(ans,q[i][2]);
                }
    }


 	for(int i=0;i<n;i++)
	{

        for(int j=3;j<=k;j++)
            {
                q[i][j]=0;
                for(int w=0;w<i;w++)
                {
                    q[i][j]=max(q[i][j],q[w][j-1]+abs(a[i]-a[w]));

                }
            ans=max(ans,q[i][j]);
        }
    }
    }



    cout<<ans<<endl;
}
    return 0;
}
