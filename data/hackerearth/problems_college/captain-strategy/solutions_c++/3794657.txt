#include <bits/stdc++.h>
using namespace std;

#define ll long long
#define dd double
#define ff first
#define ss second
#define pb(x) push_back(x)
#define mp(x,y) make_pair(x,y)
#define vi vector<ll>
#define pii pair<ll,ll>
#define vpi vector<pair<ll,ll> >
#define reset(a,b) memset(a,b,sizeof(a))
#define modu 1000000007
#define inf INT_MAX
#define fastio ios_base::sync_with_stdio(0);cin.tie(NULL);cout.tie(NULL)
#define block 317

inline ll scan(){
    char c = getchar_unlocked();
    register ll x = 0;
    bool neg=false;
    if(c=='-'){
        neg=true;
    }
    while(c<'0'||c>'9'){
        c=getchar_unlocked();
    }
    while(c>='0'&&c<='9'){
        x=(x<<1)+(x<<3)+c-'0';
        c=getchar_unlocked();
    }
    if(neg==false) return x;
    else if(neg==true) return -1*x;
}

ll n,m;
ll dad[12345],wt[12345];

ll check(ll i,ll x){
    if(dad[i]==x) return 1;
    while(1){
        if(dad[i]==x){
            return 1;
        }
        i=dad[i];
        if(i==dad[i]){
        	if(i==x) return 1;
        	else break;
        }
    }
    if(i==x) return 1;
    return 0;
}

int main(){
    ll t,i,j,k,x,y,px,py;
    cin>>n>>m;
    for(i=1;i<=n;i++){
        dad[i]=i;
        cin>>wt[i];
    }
    for(i=1;i<n;i++){
        cin>>x>>y;
        dad[y]=x;
    }
    char ch;
    while(m--){
        cin>>ch;
        if(ch=='U'){
            cin>>x>>y;
            wt[x]=y;
        }else if(ch=='Q'){
            cin>>x;k=0;
            for(i=1;i<=n;i++){
            	if(i==x){
            		k+=wt[i];
            	}
                else if(check(i,x)==1){
                    k+=wt[i];
                }
            }
            cout<<k<<endl;
        }
    }
    return 0;
}
//9231656527