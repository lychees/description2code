from math import *
T = input()
while (T):
    T -= 1
    N = raw_input()
    count_1 = 0
    count = 0
    for x in N:
        if (x == '{'):
            count_1 += 1
        elif (x == '}'):
            count_1 -= 1
        if (count_1 < 0):
            count += 1
            count_1 = 0
    if ((count+count_1) % 2 == 0):
        print int(ceil(count/2.0)) + int(ceil(count_1/2.0))
    else:
        print -1
