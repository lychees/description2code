perm_dict = {1:0, 2:1}
	
def combinations(number):
	if number in perm_dict:
		return perm_dict[number]
	#combs = myNc2(number)
	combs = (number) *(number-1)/2
	perm_dict[number] = combs
	return combs
	
for t in xrange(int(raw_input())):
	d = {}
	n = raw_input()
	for x in raw_input().split():
		d[x] = d.get(x,0) + 1
	count = 0
	for key in d.keys():
		count += combinations(d[key]) + d[key]
	print count