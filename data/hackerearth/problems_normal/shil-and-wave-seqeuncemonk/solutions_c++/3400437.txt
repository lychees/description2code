#include <bits/stdc++.h>
#define N 100001
#define MOD 1000000007
using namespace std;
int n;
long long int BIT[N];
long long int BITend[N];
long long int BITstart[N];
long long int query(long long int*tree,long long int pos)
{
	long long int i,val;
	val=0;
	for(i=pos;i>0;i-=i&-i)
	val=(val+tree[i])%MOD;
	return val;
}

void update(long long int*tree,int pos,long long int val)
{
	int i;
	for(i=pos;i<N;i+=i&-i)
	tree[i]=(tree[i]+val)%MOD;
}

int main()
{
    long long int i,num,glen,mlen,ans;
    cin>>n;
    long long int arr[n];
    ans=0;
    for(i=0;i<n;i++)
    cin>>arr[i];
    for(i=0;i<n;i++)
    {
    	glen=(query(BITstart,arr[i]-1)+query(BIT,arr[i]-1))%MOD;
    	mlen=((query(BITend,N-1)-query(BITend,arr[i]))%MOD+(query(BIT,N-1)-query(BIT,arr[i]))%MOD)%MOD;
    	if(mlen<0)
    	mlen+=MOD;
    	ans=(ans+mlen+glen)%MOD;
    	update(BIT,arr[i],1);
    	update(BITstart,arr[i],mlen);
    	update(BITend,arr[i],glen);
    }
    cout<<ans<<"\n";
    return 0;
}
