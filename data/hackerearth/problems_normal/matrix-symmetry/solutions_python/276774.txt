def Are_similar(lst1,lst2):
	return ''.join(lst1) == ''.join(lst2)

def solve_horizontal(lst1):
	for i in range(len(lst)/2):
		if not Are_similar(lst[i],lst[-1*i-1]):
			return False
	return True

def convert_verical(lst):
	new_lst = [[] for i in range(len(lst))]
	for i in range(len(lst)):
		for j in range(len(lst[i])):
			new_lst[j].append(lst[i][j])
	return new_lst
	
def solve_vertical(lst):
	lst = convert_verical(lst)
	for i in range(len(lst)/2):
		if not Are_similar(lst[i],lst[-1*i-1]):
			return False
	return True
	
def symmetry_lst(lst1):
	h =solve_horizontal(lst1)
	v = solve_vertical(lst1)
	if h and v:
		print "BOTH"
	elif h:
		print "HORIZONTAL"
	elif v:
		print "VERTICAL"
	else:
		print "NO"
		
for i in range(int(raw_input())):
	lst = []
	for j in range(int(raw_input())):
		lst.append(list(raw_input()))
	symmetry_lst(lst)