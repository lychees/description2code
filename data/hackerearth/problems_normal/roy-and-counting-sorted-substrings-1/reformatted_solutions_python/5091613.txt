for i in range(input()):
    a = input()
    b = raw_input()
    s = 1
    s1 = 0
    for j in range(1, len(b)):
        if ((b[j]) >= (b[j-1])):
            s += 1
        else:
            s1 += (s*(s+1))/2
            s = 1
    s1 += (s*(s+1))/2
    print(s1)
