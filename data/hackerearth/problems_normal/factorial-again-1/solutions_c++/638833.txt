#include<bits/stdc++.h>

using namespace std;

#define ull unsigned long long
#define ll long long
#define FOR(i,a,n) for(int i=a;i<n;i++)
#define FORE(i,a,n) for(int i=a;i<=n;i++)


/*long long modInverse(long long a, long long b)
{
long long b0 = b, t, q;
long long x0 = 0, x1 = 1;
if (b == 1) return 1;
while (a > 1) {
q = a / b;
t = b, b = a % b, a = t;
t = x0, x0 = x1 - q * x0, x1 = t;
}
if (x1 < 0) x1 += b0;
return x1;
}
*/
 long long expo( long long a,  long long b, ll p)
{
   long long result = 1ll;

  while (b){
    if (b&1){       //odd
      result = (result*a)%p;
      //result%=p;
    }
    b >>=1 ; //b/=2
    a = (a*a)%p;
//    a%=p;
  }

  return (ll)(result);
}

int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
        ll n,p;
        cin>>n>>p;
        /*ll ans2=expo(6L,n,p);
        ll ans1=expo(ans2,p-2,p);*/
        //ll x=p-1;
        if(3*n >= p)
            {
                cout<<"0\n";
                continue;
            }

        ll temp=1;
        for(ll i=3*n+1;i<=(p-1);i++)
        {
            temp=((temp%p)*(i%p))%p;
        }
        //temp=expo(temp,p-2,p);
        cout<<((p-1)*expo(temp,p-2,p)%p*expo(expo(6ll,n,p)%p,p-2,p)%p)%p<<"\n";

    }
	return 0;
}
