#include<bits/stdc++.h>
using namespace std;
#define ll long long int
ll dp[20][200][1500];
ll solve(string num,ll pos,ll tight,ll sum,ll sumsq)
{
    if(pos==-1)
    return __gcd(sum,sumsq)==1;
    if(!tight&&dp[pos][sum][sumsq]!=-1)
    return dp[pos][sum][sumsq];
    ll en,i,ans=0;
    if(tight==1)
    en=(ll)num[pos]-'0';
    else
    en=9;
    for(i=0;i<=en;i++)
    {
        ans=ans+solve(num,pos-1,tight&&i==en,sum+i,sumsq+i*i);
    }
    //cout<<ans<<endl;
    if(!tight)
    return dp[pos][sum][sumsq]=ans;
    return ans;
}
int main()
{
    ll t,l,r;
    cin>>t;
    string st,en;
    memset(dp,-1,sizeof(dp));
    while(t--)
    {
        cin>>l>>r;
        st=to_string(l-1);
        en=to_string(r);
        reverse(st.begin(),st.end());
        reverse(en.begin(),en.end());
        //cout<<st<<endl;
        r=solve(en,en.length()-1,1,0,0);//-solve(st,0,1,0,0)<<"\n";
        //memset(dp,-1,sizeof(dp));
        l=solve(st,st.length()-1,1,0,0);
        cout<<r-l<<"\n";
    }
    return 0;
}