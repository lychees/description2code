#include <cmath>
//#include <hash>
#include <vector>
#include <iostream>
#include <string>
using namespace std;


int main() {
    int n,m;
    cin>>n>>m;
   
  long long int a[n],t[n];
    for(int i=0;i<n;i++) {cin>>a[i];
                         }

    for(int i=0;i<n;i++) {cin>>t[i];}
    
    int si=-1;
    for(int i=0;i<n;i++){
      if(a[i]==t[0]) si=i;
    }
    if(si==-1) {cout<<-1;
               return 0;}
    int tsi=si,mcnt=0;
    
    for(int i=0;i<n;i++){
        if(tsi==n) tsi=0;
        if(a[tsi]==t[i]) mcnt++;
        if(a[tsi]!=t[i]) break;
        tsi++;
        
    }
    if(mcnt!=n){
        cout<<-1;
        return 0;
    }
    int cumval=0;
    for(int i=1;i<m+1;i++){
        char ch;
        cin>>ch;
        int val;
        cin>>val;
        if(ch=='L') cumval=cumval-val;

        if(ch=='R') cumval=cumval+val;
       // cout<<cumval<<" ";
         val=abs(cumval);
        val=val%n;
        if(cumval<=0 && val==si) {cout<<i;
                                  return 0; }
        if(cumval>0 && (n-val)==si) {cout<<i;
                                  return 0; }

    }
cout<<-1;
    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   
    return 0;
}
