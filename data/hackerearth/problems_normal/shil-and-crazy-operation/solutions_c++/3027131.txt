#include<iostream>
using namespace std;
long d[100005];long long a[100005];long p[100005];long ap[100005];int v[100005];
int main(){
	long n;long long int t;long k,l,s;
	cin>>n>>t;
	for(long i=1;i<=n;i++)cin>>a[i];
	for(long j=1;j<=n;j++)cin>>p[j];
	for(long i=1;i<=n;i++){
		if(v[i]==0){
		k=i;l=p[i];s=1;
		while(i!=l){d[s]=k;s=s+1;v[k]=1;
			k=l;l=p[l];
		}v[k]=1;long long int r=t;
		d[s]=k;r=r%s;
		for(long j=1;j<=s;j++){long o=j+r;o=o%s;if(o==0)o=s;ap[l]=d[o];l=p[l];
		}
		}
	}
	for(long i=1;i<=n;i++){cout<<a[ap[i]]<<" ";
	}
	cout<<endl;
	
	
}