'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
#dic = "abcdefghijklmnopqrstuvwxyz"

for i in xrange(int(raw_input())):
	N = int(raw_input())
	inpStr = str(raw_input())
	c = 1
	s = 0
	for j in xrange(N-1):
		if inpStr[j+1] < inpStr[j]:
			s += (c*(c+1))/2
			c = 1
		else:
			c += 1
		
	s += (c*(c+1))/2
	print s