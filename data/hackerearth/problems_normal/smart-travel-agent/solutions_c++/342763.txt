#include <iostream>
#include <cmath>
using namespace std;

int n,m,a[101][101],c[101][101];
char b[101];
int strt,fin,tn;

int travel(int strt,int fin,int max){
	if(strt==fin)
		return max;
	b[strt]='*';
	int temp_least=0,temp_val,temp_i;
	for(int i=1;i<=n;i++){
		temp_val=0;
		if(a[strt][i]!=0&&b[i]!='*')
		{
			if(a[strt][i]<max)
				temp_val=travel(i,fin,a[strt][i]);
			else
				temp_val=travel(i,fin,max);
				
			if(temp_val>temp_least){
				temp_least=temp_val;
				temp_i=i;
			}
		}		
	}
	b[strt]='%';
	if(c[strt][temp_i]<temp_least)
		c[strt][temp_i]=temp_least;
	return temp_least;
}


int main()
{
	int k,l,trip;
    cin>>n>>m;
    for(int i=0;i<m;i++)
    {
    	cin>>k>>l>>trip;
    	a[k][l]=trip;
    }
    cin>>strt>>fin>>tn;
    int least=travel(strt,fin,10000);
    
    while(1){
    	cout<<strt<<" ";
    	if(strt==fin)
    		break;
    	for(int i=1;i<=n;i++)
    		if(c[strt][i]==least)
    		{
    			strt=i;
    			break;
    		}	
    }
    cout<<endl<<ceil(tn/float(least-1))<<endl;
    return 0;
}
