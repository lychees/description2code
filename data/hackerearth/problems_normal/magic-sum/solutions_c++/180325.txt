#include <vector>
#include <list>
#include <map>
#include <set>
#include <queue>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include <cstring>

using namespace std;

#define MAX 100000
#define INF 2140000000
#define MOD 1000000007

int fun(int vals[], int i, int j) {
	if (i == j) {
		return vals[i];
	}

	int temp = 0;

	while (i != j) {
		temp += vals[i] + vals[j];
		if (i % 2) {
			i /= 2;	
		}
		else {
			i--;
			i /= 2;
		}

		if (j % 2) {
			j /= 2;	
		}
		else {
			j--;
			j /= 2;
		}		
	}

	temp += vals[i];
	return temp;
}

int main() {
	#ifndef ONLINE_JUDGE
		freopen("in.txt","r",stdin);
	#endif	
	
	int test;
	cin >> test;

	while (test--) {
		int n;
		int vals[600];
		cin >> n;

		for (int i = 0; i < n; ++i) {
			cin >> 	vals[i];
		}		

		int k = n/2;
		int ans = -INF;

		for (int i = k; i < n; ++i) {
			for (int j = i; j < n; ++j) {
				ans = max(ans,fun(vals,i,j));
			}
		}
		cout << ans << endl;
	}	
	
	return 0;
}