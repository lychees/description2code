#include <iostream>
using namespace std;

int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	int n;
    	cin>>n;
    	int *arr;
    	arr=new int[n+1];
    	int l;
    	cin>>l;
    	int *bottomup;
    	bottomup=new int[n+1];
    	for(int i=0;i<=n;i++)
    		bottomup[i]=-1;
    	for(int i=0;i<l;i++)
    	{
    		int temp;
    		cin>>temp;
    		cin>>bottomup[temp];
    	}
    	arr[n]=1000000;
    	arr[n-1]=1000000;
    	for(int i=n-2;i>=1;i--)
    	{
    		if(bottomup[i]!=-1)
    		{
    			arr[i]=arr[bottomup[i]];
    			continue;
    		}
    		if(n-i<=12 && n-i>1)
    			arr[i]=1;
    		else
    		{
    			int min=1000000;
    			for(int j=2;j<=12;j++)
    			{
    				if(bottomup[i+j]!=-1)
    				{
    					int temp=arr[bottomup[i+j]];
    					if(min>temp)
    						min=temp;
    				}
    				else
    				{
    					int temp=arr[i+j];
    					if(min>temp)
    						min=temp;
    				}
    			}
    			arr[i]=min+1;
    		}
    	}
//    	for(int i=100;i>=1;i--)
//    		cout<<i<<" "<<arr[i]<<endl;
    	cout<<arr[1]<<endl;
    }
    return 0;
}
