#include<bits/stdc++.h>
#define ll long long
#define ld long double
#define pb push_back
#define ff first
#define ss second
#define vii vector<int> :: iterator
#define vli vector<ll> :: iterator
#define miii map<int,int> :: iterator 
#define mlli map<ll,ll> :: iterator
#define mm(a,b) memset(a,b,sizeof(a)) 
#define f_i(a,b) fill(a.begin(),a.end(),b)
#define pp pair<ll,ll> 
#define p_q priority_queue
#define mp make_pair
#define MAX 100001
using namespace std;

vector<vector<pp> > gp(MAX);
vector<bool> inc(MAX) , vst(MAX) ;
p_q<pp> ed;


void mst()
{

	while(!ed.empty())
	{
		pp temp=ed.top() ;

		ed.pop() ;

		if(vst[temp.ss])continue;

		inc[temp.ff]=true;  //include this edge...yes first is edge 

		for(vector<pp> :: iterator i=gp[temp.ss].begin();i!=gp[temp.ss].end();i++)
			if(!vst[i->ff]) //node not visited push it in..
				ed.push(mp(i->ss,i->ff)) ;

		vst[temp.ss]=true;

	}
}


int main()
{
	  ios_base::sync_with_stdio(false);
	  cin.tie(0) ;

	  #ifndef ONLINE_JUDGE
	    freopen("INPUT.txt", "r", stdin);
	  #endif	  


	   int n,m,e1,e2;

	   cin>>n>>m;

	   f_i(inc,false) ;
	   f_i(vst,false) ;
	   
	   for(int i=0;i<m;i++)
	   {
	   		cin>>e1>>e2;

	   		gp[e1].pb(mp(e2,i)) ; 
	   		gp[e2].pb(mp(e1,i)) ;
	   	
	   	if(i==m-1)
	 		ed.push(mp(m-1,e1))  ;
	   
	   }

	   mst() ;

	  // cout<<"ok" ;
	   int ans=0;

	   for(int i=0;i<m;i++)
	   	if(!inc[i])
	   		ans++;//cout<<i+1<<"\n";

	   	cout<<ans<<"\n";
	   	for(int i=0;i<m;i++)
	   	if(!inc[i])
	   		cout<<i+1<<"\n";
}

