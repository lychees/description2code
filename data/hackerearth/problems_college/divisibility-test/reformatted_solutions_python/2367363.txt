t = int(raw_input())
for i in xrange(t):
    a = raw_input()
    a = list(a)
    n = int(raw_input())
    l, r = map(int, raw_input().split())
    a = a[l-1:r]
    # print a
    count = 0
    lis = map(int, a)
    for j in xrange(len(lis)):
        for k in range(j, len(lis)):
            str1 = ''.join(map(str, lis[j:k+1]))
            if int(str1) % n == 0:
                count += 1
    print count
