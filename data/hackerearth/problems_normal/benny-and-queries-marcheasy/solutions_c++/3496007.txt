/***********************

Shubham Singhal

Codechef - torque
Hackerearth - torque
Spoj - torque
Hackerrank - torquecode
Codeforces - torquecode
***********************/
# include <bits/stdc++.h>
# define MOD 1000000007
# define gc getchar
# define LL long long
# define L long
# define pb push_back
# define pINF 999999
# define nINF -999999
using namespace std;
#define ns(x,y) num[soc[x][y]]
using namespace std;
int m,t,root[600010],soc[20000010][2],num[20000010],newpoint,x,tot,l,r;
void add(int &cur,int cur1,int x,int t)
{
	cur=++newpoint;num[cur]=num[cur1]+1;
	soc[cur][0]=soc[cur1][0];soc[cur][1]=soc[cur1][1];
	if(t<0)return;add(soc[cur][x>>t&1],soc[cur1][x>>t&1],x,t-1);
}
int find(int cur,int cur1,int x,int t,int s)
{
	if(t<0)return s;int tt=x>>t&1;
	if(ns(cur,tt)>ns(cur1,tt))
		return find(soc[cur][tt],soc[cur1][tt],x,t-1,(s<<1)+tt);
	else return find(soc[cur][!tt],soc[cur1][!tt],x,t-1,(s<<1)+(!tt));
}
int main()
{
	int n,q,a;
	cin>>n>>q;
	for(int i=0;i<n;i++)
	{
		cin>>a;
		add(root[tot+1],root[tot],a,20),tot++;
	}
	int l,r,x;
	while(q--)
	{
		scanf("%d%d%d",&l,&r,&x);
		int xx=x;
		x=~x;
		printf("%d\n",find(root[r],root[l-1],x,20,0)^xx);
	}
	return 0;
} 