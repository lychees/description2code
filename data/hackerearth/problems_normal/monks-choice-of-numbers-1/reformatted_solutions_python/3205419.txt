def binary(b):
    c = 0
    while b >= 1:
        if b % 2 != 0:
            c = c+1
        b = b/2
    return c


t = input()
for x in range(t):
    n, k = map(int, raw_input().split())
    a = map(int, raw_input().split())
    s = 0
    for y in range(n):
        a[y] = binary(a[y])
    a.sort()
    a = a[::-1]
    for y in range(k):
        s = s+a[y]
    print s
