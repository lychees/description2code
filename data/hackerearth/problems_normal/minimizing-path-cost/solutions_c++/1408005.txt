#include <cmath>
#include <cmath>
#include <cstdio>
#include <climits>
#include <vector>
#include <map>
#include <iostream>
#include <algorithm>
#include <string>
using namespace std;

long long int res[105][105];

int main()
{
    int N, M;    
    map<string , int> m;
    cin>>N; cin>>M;
    for(int i = 0; i<N; i++){
        string temp;
        cin>>temp;
        m[temp] = i+1;
    }
    for(int i = 1;i<=N; i++){
    	for(int j = 1; j<=N; j++){
    		res[i][j] = INT_MAX;
    	}
    }
    for(int i = 0; i<M; i++){
        string first;
        string second;
        int dist;
        cin>>first;
        cin>>second;
        cin>>dist;
        int ft = m[first];
        int sd = m[second];
        res[ft][sd] = dist;
        res[sd][ft] = dist;        
    }
    
    for(int k = 1;k<=N;k++){
    	for(int i = 1;i<=N; i++){
    		for(int j = 1; j<=N; j++){
    			if(res[i][k] + res[k][j] < res[i][j])
    				res[i][j] = res[i][k] + res[k][j];
    		}
    	}
    }
    
    int q;
    cin>>q;
    while(q--){
    	string first;
        string second;
        int dist;
        cin>>first;
        cin>>second;
        int ft = m[first];
        int sd = m[second];
        dist = res[ft][sd];
        cout<<dist<<"\n";
    }    
    return 0;
}
