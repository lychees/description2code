#include <iostream>
using namespace std;
#define lli long long int
lli a[100005],bit[100005][10];
lli chk(lli s)
{
	lli ar[10],i,cnt=0;
	for(i=0;i<10;i++)
	{
		ar[i]=0;
	}
	while(s>0)
	{
		ar[s%10]++;
		s/=10;
	}
	for(i=0;i<10;i++)
	{
		if(ar[i])
		{
			cnt++;
		}
	}
	return cnt;
}
void add(lli ind,lli v,lli n)
{
	while(ind<=n)
	{
		bit[ind][v]++;
		ind+=(ind&(-ind));
	}
}
void upd(lli ind,lli v,lli nv,lli n)
{
	while(ind<=n)
	{
		bit[ind][nv]++;
		bit[ind][v]--;
		ind+=(ind&(-ind));
	}
}
lli que(lli ind,lli c)
{
	lli s=0;
	while(ind>0)
	{
		s+=bit[ind][c];
		ind-=(ind&(-ind));
	}
	return s;
}
int main()
{
    lli n,q,i,u,v,x;
    cin>>n;
    for(i=1;i<=n;i++)
    {
    	cin>>a[i];
    	add(i,chk(a[i]),n);
    }
    cin>>q;
    while(q--)
    {
    	cin>>x;
    	if(x==0)
    	{
    		cin>>u>>v;
    		upd(u,chk(a[u]),chk(a[u]+v),n);
    		a[u]+=v;
    	}
    	else if(x==1)
    	{
    		cin>>u>>v;
    		upd(u,chk(a[u]),chk(v),n);
    		a[u]=v;    		
    	}
    	else
    	{
    		cin>>u>>v>>i;
    		cout<<que(v,i)-que(u-1,i)<<endl;
    	}
    }
    return 0;
}
