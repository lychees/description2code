#include<iostream>
using namespace std;

void ProcessPotions(long long arr[],unsigned int strLength,long long modVal)
{
	for(unsigned int i=1;i<strLength;i++)
	{
		arr[i] = (arr[i-1]%modVal * arr[i-1]%modVal )%modVal;				
	}
}

int main()
{
	long long A,B,val=0;
	string str ;
	
	cin>>A>>B>>str;
	unsigned int strLength = str.length();
	long long potions[strLength];
	potions[0]=A;
	ProcessPotions(potions,strLength,B);
	//cout<<GetNumberofPotions(str,A,B,strLength);
	for(int i=0;i<strLength;i++)
	{
		if(str[i]=='1')
		{
			val = (val + potions[i])%B;
		}
		//cout<<"potion : "<<i<<" - "<<potions[i]<<endl;
	}
	cout<<val;
	return 0;
}