#include <iostream>
using namespace std;
#include<bits/stdc++.h>
int prior[26];
int min(int a,int b)
{
	return a>b?b:a;
}
bool cmp(string a,string b)
{
	int l=min(a.length(),b.length());
	//cout<<"the lenght ud "<<l<<endl;
	for(int i=0;i<l;i++)
	{
		if(prior[a[i]-'a']<prior[b[i]-'a'])
		return true;
		else if(prior[a[i]-'a']>prior[b[i]-'a'])
		return false;
		
	}
	if(a.length()<b.length())
	return true;
	else return false;
	
}
int main()
{
	string a[100];
	int t,n1;
	cin>>t;
	while(t--)
	{
		string s;
		cin>>s;
		int n=s.length();
		for(int i=0;i<n;i++)
		{
			prior[s[i]-'a']=i;
		}
		cin>>n1;
		n=n1;
		int i=0;
		while(n1--)
		{
			cin>>a[i];
			i++;
		}
		sort(a,a+n,cmp);
		
		for(int i=0;i<n;i++)
		{
			cout<<a[i]<<endl;
		}
		
		
		
		
		
		
	}
    //cout << "Hello World!" << endl;
    return 0;
}
