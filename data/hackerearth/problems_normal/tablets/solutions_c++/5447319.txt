#include<bits/stdc++.h>
#define mp make_pair
#define endl '\n'
#define pi pair<int,int>
#define int long long
#define mod (1000*1000*1000 +9)
using namespace std;

int n,dp[(int)1.2e7];
vector<pi>v;
int k[100005];
 main()
{
   cin>>n;
   for(int i=0;i<n;i++)
    {cin>>k[i];
    v.push_back({k[i],i});}
    sort(v.begin(),v.end());

    for(int i=0;i<n;i++)
    {
        dp[i]=1;
    }

    for(int i=1;i<n;i++)
    {
        int inx=v[i].second;
        if(inx-1>=0&&k[inx-1]<k[inx])dp[inx]=1+dp[inx-1];
        if(inx+1<n&&k[inx+1]<k[inx])dp[inx]=max(dp[inx],1+dp[inx+1]);
    }
    int ans=0;
    for(int i=0;i<n;i++)
    {
        ans+=dp[i];
    }

    cout<<ans;
    return 0;
}
