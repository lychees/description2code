#include <bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define N 500005
#define ll long long
#define p(t) cout<<t;
#define f(i,n) for(i=0;i<n;i++)
#define g(i,n) for(i=1;i<=n;i++)
#define s(x) scanf("%I64d",&x);
#define pb push_back
#define mp make_pair

ll a[N],b[N],g,m=1e7,siz,n,r;



int main()
{
ios_base::sync_with_stdio(0);
ll k=0,t=0,x,sum=0,q=0,z=0,y=0,i,j,l=0,x1,y1,x2,y2;
cin>>n;
multiset<ll>s;
f(i,n)cin>>a[i],b[a[i]]++;
f(i,N){
	if(b[i]>n/2+n%2){cout<<"-1"; return 0;}
}
f(i,n)b[a[i]]=0;
for(i=1;i<n;i++){z=0;
  while(i<n && a[i]==a[i-1])z++,i++;
  if(z){i--;
  if(b[a[i]]!=0){
  multiset<ll>::iterator it=s.find(b[a[i]]);
  s.erase(it);}
  b[a[i]]+=z; s.insert(b[a[i]]);
  i++;
  //cout<<s.size()<<" ";
  }
}
 t=0; 
 if(s.size()>0){
multiset<ll>::iterator it=s.end();
while(1){it--; q=*it;
    if(q>t){r+=q-t; t=q-t;}
    else {t-=q;}
    if(it==s.begin())break;
     //cout<<r<<" \n";
	}}
cout<<r;
return 0;
}
