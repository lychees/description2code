    #include <iostream>
    #include <string>
    using namespace std;
    int main()
    {
    	int t=0;cin >> t;
    	while (t--)
    	{
    		int n=0;
    		cin >> n;
    		string s[n];
    		for (int i=0;i<n;i++)
    		cin >> s[i] ;
    		bool horizontal=true,vertical=true;
    		//Checking Horizontal
    		for (int i=0;i<n;i++)
    		{
    			if (s[i]!=s[n-i-1])
    			{horizontal=false;break;}
    		}
    		for (int i=0;i<n;i++)
    		{
    			for (int j=0;j<n;j++)
    			{
    				if (s[i][j]!=s[i][n-j-1])
    				{vertical=false;break;}
    			}
    			if (!vertical)
    			break;
    		}
    		if (horizontal&&vertical)
    		cout << "BOTH" << endl;
    		else if (!horizontal&&!vertical)
    		cout << "NO" << endl;
    		else if (horizontal)
    		cout << "HORIZONTAL" << endl;
    		else
    		cout << "VERTICAL" << endl;
    	}
    	return 0;
    }