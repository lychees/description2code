#include <iostream>
#include <algorithm>
using namespace std;
int so[30];
bool sosanh(string a, string b)
{
	for (int i = 0; i<min(a.size(), b.size()); i++)
	{
		if (so[a[i] - 'a']<so[b[i] - 'a'])
			return true;
		else if (so[a[i] - 'a']>so[b[i] - 'a'])
			return false;
	}
	if (a.size()<b.size())
		return true;
	else
		return false;
}
int main()
{
	int t, n, i, j, u, v, k;
	string s, ds[1000];
	cin >> t;
	while (t--)
	{
		cin >> s;
		for (j = 0; j<s.size(); j++)
		{
			so[s[j] - 'a'] = j;
		}
		cin >> n;
		for (j = 1; j <= n; j++)
			cin >> ds[j];
		sort(ds + 1, ds + n + 1, sosanh);
		for (j = 1; j <= n; j++)
			cout << ds[j] << endl;
	}
}
