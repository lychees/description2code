#include <bits/stdc++.h>
using namespace std;
int t,n,m,p,x,i,j,k,pw,f[31][1000100];
char s[1000100];
int main() {
  scanf("%d",&t);
  while (t--) {
    scanf("%d%d%d%d",&n,&m,&p,&x);
    scanf("%s",s);
    if (n==1) { puts(s); continue; } else n--;
    for (j=0; (1<<j)<=n; j++) 
    pw=p;
    for (i=0; i<m; i++) {
      f[0][i]=(s[i]-'0');
      if (n&1) {
        k=i-pw;
        if (k<0) k+=m;
        f[0][i]^=(s[k]-'0');
      }
    }
    for (j=1; (1<<j)<=n; j++) {
      pw=(pw*2)%m;
      if (n&(1<<j)) for (i=0; i<m; i++) {
        k=i-pw;
        if (k<0) k+=m;
        f[j][i]=f[j-1][i]^f[j-1][k];
      } else for (i=0; i<m; i++) f[j][i]=f[j-1][i];
    }
    for (i=0; i<m; i++) printf("%d",f[j-1][i]^x);
    puts("");
  }
  return 0;
}
