#include <bits/stdc++.h>
using namespace std;
int id[5001],n;
long int mp=0,m,i;

pair<int,pair<int,int> > p[100001];

bool compare(pair<int,pair<int,int> > a,pair<int,pair<int,int> > b){
return a>b;
}
void in(){
for(i=0;i<=5000;i++)
id[i]=i;
}

int root(int x){
    while(id[x]!=x){
        id[x]=id[id[x]];
        x=id[x];
    }
    return x;
}

void unin(int x,int y){
    int p=root(x);
    int q=root(y);
    id[p]=id[q];
}


void max(){
    for(i=0;i<m;i++){
    int a=p[i].second.first;
    int b=p[i].second.second;
    int c=p[i].first;
    if(root(a)!=root(b)){
        mp=mp+c;
        unin(a,b);
        
    }}
}

int main()
{
 int z,x,y,t;
 cin>>t;
 
 while(t--){
cin>>n>>m;
in();
for(i=0;i<m;i++){
cin>>x>>y>>z;
p[i]=make_pair(z,make_pair(x,y));
}
mp=0;
sort(p,p+m,compare);
max();

cout<<mp<<endl;

}}