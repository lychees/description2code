#include <iostream>
#include <algorithm>
using namespace std;


int getmax3sum(int a[],int n){
	int f=0,s=0,t=0;
	for(int i = 0; i < n;i++){
		if(a[i]>f)f=a[i];
		if(a[i]<=f && a[i]>s) s=a[i];
		if(a[i]<=s && a[i]>t) t=a[i];
	}
	return(f+s+t);
}


bool compare(int a,int b){
	return (a>b);
}
int main()
{
	int t;
	cin>>t;
	while(t--){
		int n,k;
		cin>>n>>k;
		int a[n];
		for(int i =0 ; i < n; i++){
			cin>>a[i];
		}
		int setbits[n];
		for(int i = 0; i < n;i++){
			int curr_count=0;
			while(a[i]){
				a[i]=(a[i]&(a[i]-1)); 
				curr_count++;
			}
			setbits[i]=curr_count;
		}
		sort(setbits,setbits+n,compare);
		int res=0;
		for( int i = 0; i < k;i++)res+=setbits[i];
		cout<<res<<endl;
		
	}
    return 0;
}
