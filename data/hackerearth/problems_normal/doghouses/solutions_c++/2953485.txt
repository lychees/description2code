#include <bits/stdc++.h>
using namespace std;
#define fo(i,n) for(int i=0;i<(n);i++)
#define MOD 1000000007
typedef long long ll;

int N, a[1100], mx = 1, t[2200];

void u (int p) {
	for (t[p += 1005]++; p > 1; p >>= 1) t[p>>1] = max(t[p], t[p^1]);
}

int q (int l, int r) {
	int res = 0;
	for (l += 1005, r += 1005; l < r; l >>= 1, r >>= 1) {
		if (l&1) res = max(res, t[l++]);
		if (r&1) res = max(res, t[--r]);
	}
	return res;
}

int main () {
	scanf("%d", &N);
	fo(i, N) scanf("%d", &a[i]);
	fo(i, N) {
		fo(j, 2200) t[j] = 0;

		for (int j = i+1; j < N; j++) {
			int top = max(a[i], a[j]), bot = min(a[i], a[j]);

			if (top != bot) mx = max(mx, 2 + q(top, 1005) + q(0, bot+1));
			else {
				mx = max(mx, 2 + q(top, 1005) + q(0, bot));
				mx = max(mx, 2 + q(top+1, 1005) + q(0, bot+1));
			}

			u(a[j]);
		}
	}
	printf("%d\n", mx);
	return 0;
}
