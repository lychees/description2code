#include <bits/stdc++.h>
using namespace std;

typedef long long int li;
#define inf 100000000000000ll

string s1, s2;
map <char, li> mp;
vector <li> dp;

void pre()
{
    li i;
    dp.push_back(0);
    for(i = 0;i < s1.size(); ++i){
        if(mp[s1[i]] == 1){
            dp.push_back(dp[i] + 1);
        }
        else{
            dp.push_back(dp[i]);
        }
    }

    for(i = 0;i < dp.size(); ++i){
        //cout << dp[i] << " ";
    }
    //cout << "\n";

}

int main()
{
    //freopen("input.txt", "r", stdin);
    li t, n, i;
    cin >> t;
    while(t--){
            //cout << "yes";
            dp.clear();
            mp.clear();
            li n, k, l, r;
            cin >> n >> k >> l >> r;
            cin >> s1;
            cin >> s2;
            for(i = 0;i < s2.size(); ++i){
                mp[s2[i]] = 1;
            }
            pre();
            li ans = 0;

            vector <li>::iterator it = dp.begin();

            for(i = 0;i < dp.size() - 1; ++i){
                ++it;
                li pre = dp[i];
                //vector <li>::iterator it = dp.begin();
                li ind1 = lower_bound(it, dp.end(), pre + l) - dp.begin();
                li ind2 = upper_bound(it, dp.end(), pre + r) - dp.begin();
                ans += (ind2 - ind1);
                //cout << ind1 << " " << ind2 << "\n";
            }
            cout << ans << "\n";
    }
    return 0;
}
