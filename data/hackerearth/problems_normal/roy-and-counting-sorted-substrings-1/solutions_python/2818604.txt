for _ in xrange(int(raw_input())):
	num=int(raw_input())
	str=raw_input()
	res=0
	i=0
	while i<num:
		c=1
		while i<num-1 and str[i]<=str[i+1]:
			i+=1
			c+=1
		res+=((c*(c+1))/2)
		i+=1
	print res