t = int(raw_input())
for test_cases in range(t):
    l = int(raw_input())
    s = str(raw_input())
    count = 0
    a = 0
    for i in range(l-1):
        if s[i] <= s[i+1]:
            a = a + 1
        elif s[i] > s[i+1]:
            count = count + ((a+1) * (a+2))/2
            a = 0
    count = count + ((a+1) * (a+2))/2
    print count