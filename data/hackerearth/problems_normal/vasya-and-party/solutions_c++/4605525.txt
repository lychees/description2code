#include <bits/stdc++.h>

using namespace std;

#define maxN 100000
#define ll long long int
#define mod (ll)1000000007

ll n,m;
ll a[maxN+5];
ll visit[maxN+5]={0};
vector<ll> g[maxN+5];
vector<ll> h[maxN+5];

void dfs(ll u,ll p)
{
	ll i,v;
	visit[u]=1;
	h[p].push_back(u);
	for(i=0;i<(ll)g[u].size();i++)
	{
		v=g[u][i];
		if(visit[v]==0)
			dfs(v,p);
	}
}

int main()
{
	ll i,u,v,ans=1,j,c;
    scanf("%lld%lld",&n,&m);
    for(i=1;i<=n;i++)
    	scanf("%lld",&a[i]);
   	while(m--)
   	{
   		scanf("%lld%lld",&u,&v);
   		g[u].push_back(v);
   		g[v].push_back(u);
   	}
   	for(i=1;i<=n;i++)
   		if(visit[i]==0)
   		{
   			dfs(i,i);
   			m=c=0;
   			for(j=0;j<(ll)h[i].size();j++)
   				m=max(m,a[h[i][j]]);
   			for(j=0;j<(ll)h[i].size();j++)
   				if(a[h[i][j]]==m)
   					c++;
   			ans=(ans*c)%mod;
   		}
   	printf("%lld\n",ans);
    return 0;
}
