#include<bits/stdc++.h>
using namespace std;
#define F first
#define S second
#define pb push_back
#define mp make_pair
typedef long long ll;
typedef vector<ll> vi;
typedef pair<ll,ll> ii;
ll n,f;
vector<ii> e;
vector<vi> g(100004);
map<ii,ll> m;
void bfs(ll x)
{
	queue<ii> q;
	bool*vis=new bool[n+2];
	for(ll i=0;i<=n+2;i++)
	vis[i]=0;
	vis[x]=1;
	q.push(ii(x,0));
	while(q.empty()==0)
	{
		ll a=q.front().first,b=q.front().second;
		q.pop();
		vis[a]=1;
		if(a==n)
		{
			cout<<b<<"\n";
			f=1;
			return;
		}
		for(ll i=0;i<g[a].size();i++)
		{
			ll p=g[a][i];
			if(vis[p]==0)
			if(m.find(ii(a,p))!=m.end())
			{
				if(m[ii(a,p)]>b)
				q.push(ii(p,b+1));
			}
			else
			q.push(ii(p,b+1));
		}
	}
}
int main()
{
	ll mx,k,x,y;
	cin>>n>>mx>>k;
	for(ll i=0;i<mx;i++)
	{
		cin>>x>>y;
		e.pb(ii(x,y));
		g[x].pb(y);
		g[y].pb(x);
	}
	for(ll i=0;i<k;i++)
	{
		cin>>x>>y;
		m[e[y-1]]=x;
		m[ii(e[y-1].second,e[y-1].first)]=x;
	}
	bfs(1);
	if(!f)
	cout<<"-1\n";
	return 0;
}