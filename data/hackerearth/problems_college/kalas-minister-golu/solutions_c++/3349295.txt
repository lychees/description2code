#include<bits/stdc++.h>

using namespace std;

#define ll long long int
#define T ll t; cin>>t ; while(t--)
#define fin freopen("i1.txt","r",stdin)
#define fout freopen("o1.txt","w",stdout)
#define fastio ios_base::sync_with_stdio(false); cin.tie(0)
#define pf(n) cout<<n<<endl;

vector<ll> Wmin;
vector<ll> v[200005];
ll w[100005];
bool visited[100005];

ll dfs(ll V){
    //printf(">>> %lld\n",V);

    visited[V]=1;

    ll mn=w[V];

    for(int i=0;i<v[V].size();i++){
        ll u=v[V][i];
        if(!visited[u]){
            ll y=dfs(u);
            mn=min(mn,y);
        }
    }
    return mn;
}

int main(){

    #ifndef ONLINE_JUDGE
        fin;
    #endif // ONLINE_JUDGE

    ll t;
    cin>>t;

    while(t--) {
        //printf("T : %lld\n",t);

        ll n,m;
        cin>>n>>m;

        //cout<<n<<" "<<m<<endl;

        //printf("started....\n");

        for(ll i=1;i<=n;i++) cin>>w[i];

        //printf("n/8\n");

        for(ll i=0;i<m;i++){
            ll x,y;
            cin>>x>>y;

            v[x].push_back(y);
            v[y].push_back(x);
        }

        //printf("n/4\n");

        for(ll i=0;i<=n;i++) visited[i]=0;

        for(ll i=1;i<=n;i++){
            if(!visited[i]){
                ll y=dfs(i);
                Wmin.push_back(y);
            }
        }

        //printf("n/2\n");

        sort(Wmin.begin(),Wmin.end());

        ll ans=0;

        for(ll i=1;i<Wmin.size();i++){
            ans+=Wmin[i];
        }

        if(Wmin.size()>1){
            ans=ans*Wmin[0];
        }

        printf("%lld\n",ans,Wmin.size());

        Wmin.clear();

        for(ll i=0;i<=100004;i++){
            v[i].clear();
        }

        //printf("completed....\n");
    }

    return 0;
}
