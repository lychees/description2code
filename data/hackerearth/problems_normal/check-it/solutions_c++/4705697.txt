#include <iostream>
#include <string.h>
using namespace std;

#define MAX 40100

int main()
{
	int tc, n, m, u, v, e;
	pair<int, int> edges[MAX];
	
	cin >> tc;
	while (tc--)
	{
		cin >> n >> m;
		
		int check[MAX];
		memset(check, 0, n * sizeof(int));
		
		for (int i = 0; i < m; i++)
		{
			cin >> u >> v;
			edges[i] = make_pair(--u, --v);
		}
		
		int count = 0;	
		for (int i = 0; i < n - 1; i++)
		{
			cin >> e;
			u = edges[--e].first;
			v = edges[e].second;
			
			if (check[u] == 0)
			{
				check[u] = 1;
				count++;
			}
			
			if (check[v] == 0)
			{
				check[v] = 1;
				count++;
			}
		}
		
		if (count == n)
			cout << "YES" << endl;
		else cout << "NO" << endl;
	}
	
	return 0;
}