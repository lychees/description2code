#include <bits/stdc++.h>
using namespace std;

int fp() {
int val = 0;
char c = getchar_unlocked();
while (c<33) c = getchar_unlocked();
while (c>33) val = (val<<1) + (val<<3) + (c-'0'), c = getchar_unlocked();
return val;
}

int main() {
long  int t,n,i,j,k,l,g,f,d;

t=fp();
while(t--){
n=fp();
k=fp();
	j=0,g=0;
	for(i=0;i<n;i++){
	d=fp();
	if(!d)
	j++;
	else
	g++;
	}
	// g-1 j=0
	
	if(j>=k){
		
	l=k+g;
	cout<<l<<"\n";}
	else
	{
		k-=j;
		if(k%2==0)
		l=g+j;
		else
		l=g+j-1;
		cout<<l<<"\n";
	}
}

}