#include <iostream>
#define MAXN 100010
using namespace std;

int edges[MAXN][2];
int par[MAXN];
bool selected[MAXN];
int n;
int findpar(int i)
{
	int j=i;
	while(par[j]!=j)
	{
		j=par[j];
	}
	par[i]=j;
	return j;
}
void make()
{
	for(int i=1;i<=n;++i) par[i]=i;
}
int main()
{
    int m,p1,p2,u,v;
    scanf("%d %d",&n,&m);
    for(int i=1;i<=m;++i)
    {
    	scanf("%d %d",&edges[i][0],&edges[i][1]);
    }
    make();
    int ans=m;
    for(int i=m;i>0;--i)
    {
    	u=edges[i][0];v=edges[i][1];
    	p1=findpar(u);
    	p2=findpar(v);
    	if(p1!=p2){
    		selected[i]=1;
    		par[p2]=p1;
    		ans--;
    	}
    }
    printf("%d\n",ans);
    for(int i=1;i<=m;++i)
    {
    	if(!selected[i]) printf("%d\n",i);
    }
    return 0;
}
