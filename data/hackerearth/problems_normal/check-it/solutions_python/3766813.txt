for _ in xrange(input()):
	n, m = map(int, raw_input().split())
	edges = []
	nodes = [0]*(n)
	for i in xrange(m):
		a,b = map(int, raw_input().split())
		edges.append((a,b))
	l = map(int, raw_input().split())
	val = 0
	chk = True
	for i in l:
		nodes[edges[i-1][0]-1]+=1
		nodes[edges[i-1][1]-1]+=1
	for item in nodes:
		if item == 0:
			chk = False
			break
		else:
			val+=item
	if chk and val == 2*(n-1):
		print "YES"
	else:
		print "NO"