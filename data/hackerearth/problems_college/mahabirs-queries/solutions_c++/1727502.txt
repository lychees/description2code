#include <iostream>
using namespace std;

int main()
{
	int n,q,i,j,A;
	cin>>n>>q;
	int a[n][n];
	int m = n;
	for(i = 0; i < n; i++) {
		for(j = 0; j < m; j++) {
			cin>>a[i][j];
		}
	}
	while(q--) {
		cin>>A;
		if(A%360 == 0) {
			for(i = 0; i < n; i++) {
				for(j = 0; j < m; j++) {
					cout<<a[i][j]<<" ";
				}
				cout<<endl;
			}
		}
		else if(A%360 == 90) {
			for(i = 0; i < n; i++) {
				for(j = n-1; j >= 0; j--) {
					cout<<a[j][i]<<" ";
				}
				cout<<endl;
			}
		}
		else if(A%360 == 180) {
			for(i = n-1; i >= 0; i--) {
				for(j = n-1; j >= 0; j--) {
					cout<<a[i][j]<<" ";
				}
				cout<<endl;
			}
		}
		else {
			for(i = n-1; i >= 0; i--) {
				for(j = 0; j < m; j++) {
					cout<<a[j][i]<<" ";
				}
				cout<<endl;
			}
		}
		cout<<endl;
	}
    return 0;
}
