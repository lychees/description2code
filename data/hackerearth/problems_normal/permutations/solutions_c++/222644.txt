#include<iostream>
#include<cstdio>
#include<vector>
#include<algorithm>
#define max 105
using namespace std;
vector<int>v;
char adj[max][max];
vector<vector<int> >adjv(max);
int mark[max];
vector<int>cmp;
vector<int>pv;
void DFS(int n)
{
     mark[n]=1;
     cmp.push_back(n);
     for(int j=0;j<adjv[n].size();j++)
          if(!mark[adjv[n][j]] )
             DFS(adjv[n][j]);
}

void small(int K)
{
     for(int i=0;i<K;i++)
                  cout<<v[i]<<" ";
             cout<<endl;
}
int main()
{
    int K,n;
    string str[109];
    scanf("%d",&K);
    for(int i=0;i<K;i++)
    {
            scanf("%d",&n);
            v.push_back(n);
    }
 
    for(int i=0;i<K;i++)
               cin>>str[i];
 
 
    for(int i=0;i<K;i++)
         for(int j=0;j<str[i].size();++j)
             adj[i][j]=str[i][j];
 
 
    for(int i=0;i<K;i++)
    for(int j=0;j<K;j++)
     if(adj[i][j]=='Y')
         adjv[i].push_back(j);  
 
            for( int i=0;i<K ;i++)
            {   
                if(!mark[i])
                { 
 
                    DFS(i); 
                    for(int x=0;x<cmp.size();x++)
                    {
                            pv.push_back(v[cmp[x]]);
                    }
                    sort(cmp.begin(),cmp.end());
                    sort(pv.begin(),pv.end());
                    for(int x=0;x<cmp.size();x++)
                    {
                            v[cmp[x]]=pv[x];
                    }
                    cmp.clear();
                    pv.clear();
                }
            }
            small(K);
    return 0;
}