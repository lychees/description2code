#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
#define ll  long long
using namespace std;

ll a[1000001],x[100000];
void f(){
    ll i,j;
    for(i=2;i<=1000;i++){
        if(a[i]==0){        
            for(j=i*i;j<=1000000;j=j+i){
            a[j]=1;
        }
    }
    }
    i=0;
    
    for(j=2;j<=1000000;j++){
        if(a[j]==0){
            x[i]=j;
            i++;
        }
    }
}
int main() {
   ll t,l,r,k,i,q[100000],z[100000],j,m,c,w;
    double b,v;
f();
  cin>>t;
    while(t--){
        c=0;
        cin>>l>>r>>k;
        for(i=0;i<r-l+1;i++){
            q[i]=z[i]=l+i;
        }
        for(j=0;j<78498;j++){
            w=(l+x[j]-1)/x[j];
            w=w*x[j];
            m=r-(r%x[j]);
            for(i=w;i<=m;i=i+x[j]){
                    z[i-l]=z[i-l]-z[i-l]/x[j];
                    while(q[i-l]%x[j]==0)
                        q[i-l]=q[i-l]/x[j];
                }
            }
        for(i=0;i<r-l+1;i++){
            if(q[i]!=1)
                z[i]=z[i]*(q[i]-1);
            if(z[i]%k==0)
                c++;
        }
       b=c;
        v=r-l+1;
        printf("%.6lf\n",b/v);
        }
return 0;
}
