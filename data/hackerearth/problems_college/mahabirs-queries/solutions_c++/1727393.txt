#include <bits/stdc++.h>
using namespace std;
class Solution {
public:
    void rotate(vector<vector<int> > &v) {
        int i,j , n = v.size();
        for(i=0;i<n;i++)
        for(j=i+1;j<n;j++)
            swap(v[i][j],v[j][i]);
        for(i=0;i<n;i++)
        {
            for(j=0;j<n/2;j++)
                swap(v[i][j],v[i][n-j-1]);
        }
    }
};
int main()
{
    int n,q;
    cin>>n>>q;
    vector < vector<int> > v;
    for(int i=0;i<n;i++){
		vector <int> v1;
		for(int j=0;j<n;j++){
			int temp;
	  		cin>>temp;
		  	v1.push_back(temp);
	    }
	    v.push_back(v1);
    }
    	vector <vector <int> > sample;
    while(q--) {
    	int temp;
    	cin>>temp;
    	temp /= 90;
    	temp = temp%4;
    	Solution s;
    	sample = v;
    	for(int i=0;i<temp;i++)
    		s.rotate(sample);
    	for(int i=0;i<n;i++)
    	{
    		for(int j=0;j<n;j++)
    			cout<<sample[i][j]<<" ";
    		cout<<endl;
    	}
    	cout<<endl;
    }
    
}
