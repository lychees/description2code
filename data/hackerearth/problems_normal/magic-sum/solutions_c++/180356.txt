#include<cstdio>
#include<algorithm>
#include<vector>
using namespace std;

int get(vector<int> &v , int x,int y)
{
	if(x==y) return v[x];
	else return v[x]+v[y] + get(v,x/2,y/2);
}

int main()
{
	int T;
	scanf(" %d",&T);
	while(T--){
		int N;
		scanf(" %d",&N);

		int i,j,x;
		vector<int> v,v1;
		v.push_back(0);
		for(i=0;i<N;i++) {
		  scanf(" %d",&x);
		  v.push_back(x);
		}
		v1 = v;
		x=N+1;
		int NL=x/2;
		int ans=-(1<<30);
		for(i=NL;i<=N;i++) {
		  for(j=i;j<=N;j++){
	//		printf("%d,%d = %d\n",i,j,get(v,i,j));
			ans=max(ans,get(v,i,j));
			
		  }
		}
		printf("%d\n",ans);
		
	}
	return 0;
}
