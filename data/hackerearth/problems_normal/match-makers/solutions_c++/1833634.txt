//case#1
/*< SHRI GANESHAY NAMAH >*/
/* <rakesh kumar pal >*/
#include <stdio.h>
#include <stdlib.h>
#include <algorithm>
#include <iostream>
#include <math.h>
#include <string.h>
#include <bitset> 
#include <vector>
#include <iomanip>
#include <iostream>
#include <string.h>
#include <fstream>
using namespace std;

int main()
{
	int t=0;
	cin>>t;
	while(t--)
	{
		int girl[100001]={0};
		int boy[100001]={0};
		int n;
		cin>>n;
		int x;
		int i=0;
		while(i<n)
		{
			scanf("%d",&x);
			++girl[x];
			++i;
		}
		i=0;
		while(i<n)
		{
			scanf("%d",&x);
			++boy[x];
			++i;
		}
		int c=100000;
		int d=0;
		int g=0;
		int b=0;
		int count=0;
		for(i=0;i<=100000;)
		{
			while(girl[i]==0)
			{
				++i;
			}
			g=i;
			--girl[i];
			while(boy[c]==0)
			{
				--c;
			}
			b=c;
			--boy[c];
			if(g%b==0 || b%g==0)++count;
		}
cout<<count<<endl;	
	}
	return 0;
}