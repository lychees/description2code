#include <iostream>
using namespace std;

int main()
{
    int n,q;
    cin>>n>>q;
    int ar[n][n];
    for(int i=0;i<n;i++){
    	for(int j=0;j<n;j++)
    	cin>>ar[i][j];
    }
    int p=0,t;
    while(q--){
    	cin>>t;
    	p+=t;
    p%=360;
    int p1=p;
    p/=90;
    if(p==0){
    	for(int i=0;i<n;i++){
    		for(int j=0;j<n;j++){
    			cout<<ar[i][j]<<' ';
    		}
    		cout<<endl;
    	}
    }
    else if(p==1){
    	for(int i=0;i<n;i++){
    		for(int j=0;j<n;j++){
    			cout<<ar[n-j-1][i]<<' ';
    		}
    		cout<<endl;
    	}		

	}
	else if(p==2){
    	for(int i=0;i<n;i++){
    		for(int j=0;j<n;j++){
    			cout<<ar[n-i-1][n-j-1]<<' ';
    		}
    		cout<<endl;
    	}		

	}
	else{
    	for(int i=0;i<n;i++){
    		for(int j=0;j<n;j++){
    			cout<<ar[j][n-i-1]<<' ';
    		}
    		cout<<endl;
    	}		
	}
	cout<<endl;
	p1=p;
	}
    return 0;
}
