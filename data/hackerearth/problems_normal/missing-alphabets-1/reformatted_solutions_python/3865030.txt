from string import ascii_lowercase as al


def tr(s):
    o = ""
    for i in range(len(s)):
        o += d[s[i]]
    return o


for _ in range(int(raw_input())):
    e = raw_input().strip()
    d = {}
    for i in range(len(e)):
        d[e[i]] = al[i]
    s = [raw_input().strip() for __ in range(int(raw_input()))]
    s = sorted(s, key=tr)
    for w in s:
        print w
