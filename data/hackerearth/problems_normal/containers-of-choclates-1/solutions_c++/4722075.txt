#include <iostream>
#include<cstdio>
#include<set>
#include<vector>
#include<queue>
using namespace std;
int main()
{
    int t,tt;
    scanf("%d",&tt);
    for(t=1;t<=tt;t++)
    {
        int n,j,i,a,b,e1;
        scanf("%d",&n);
        set < int > s;
        vector < int > adj[100005];
        for(i=1;i<=n;i++)
        {
            scanf("%d%d",&a,&b);
            s.insert(a);
            s.insert(b);
            adj[a].push_back(b);
            adj[b].push_back(a);
        } //input
        /*set < int > :: iterator it;
        for( it=s.begin();it!=s.end();it++)
            cout<<*it<<" ";*/
        int vis[100005],mx=0;
        fill(vis,vis+100005,0);
        queue < int > q;
        int l=s.size();
        for(i=1;i<=l;i++)
        {
            int c1=0,c2=0;
            e1=*s.begin();
            /*cout<<e1<<" ";
            cout<<"\n";*/
            s.erase(s.begin());
            if(vis[e1]!=0)
                continue;
            q.push(e1);
            vis[e1]=1;
            c1++;
            while(!q.empty())
            {
                e1=q.front();
                q.pop();
                for(j=0;j<adj[e1].size();j++)
                {
                    if(vis[e1]==1)
                    {
                        if(vis[adj[e1][j]]==0)
                        {
                            q.push(adj[e1][j]);
                            vis[adj[e1][j]]=2;
                            c2++;
                        }
                    }
                    else if(vis[e1]==2)
                    {
                        if(vis[adj[e1][j]]==0)
                        {
                            q.push(adj[e1][j]);
                            vis[adj[e1][j]]=1;
                            c1++;
                        }
                    }
                }
            } // bfs
            if(c1>=c2)
                mx+=c1;
            else
                mx+=c2;
            while(!q.empty())
                q.pop();
            /*cout<<c1<<" "<<c2;
            cout<<"\n";*/
        } //set
        printf("Case %d: %d\n",t,mx);
        s.clear();
    } //test case
    return 0;
}
