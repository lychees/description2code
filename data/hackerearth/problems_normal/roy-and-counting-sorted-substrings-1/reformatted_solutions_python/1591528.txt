import os


T = input()
for t in xrange(0, T):
    N = input()
    S = raw_input()

    continous_order = 1
    count = 0
    for i in xrange(1, N):
        if S[i] >= S[i-1]:
            continous_order += 1
        else:
            count += (continous_order) * (continous_order + 1) / 2
            continous_order = 1
    count += (continous_order) * (continous_order + 1) / 2
    print count
