#include<stdio.h>
#include<bits/stdc++.h>
using namespace std;
priority_queue<pair<int,int>,vector<pair<int,int> >,greater<pair<int,int> > >que;
map<int ,int>mp;
int adj[3007][3007];
int d[3007];
int main()
{
	int t;
	int i;
	int j;
	scanf("%d",&t);
	while(t--)
	{
		int m,p;
		scanf("%d %d",&m,&p);
		i=1;
		for(;i<=m;i++)
		{
			d[i]=10000000;
			j=1;
			for(;j<=m;j++)
			adj[i][j]=10000000;
		}
		for(i=0;i<p;i++)
		{
			int a,b,q;
			scanf("%d %d %d",&a,&b,&q);
			adj[a][b]=min(adj[a][b],q);
			adj[b][a]=adj[a][b];
		}
		int tem;
		scanf("%d",&tem);
		que.push(make_pair(0,tem));
		while(!que.empty())
		{
			pair<int,int>temp=que.top();
			que.pop();
			if(mp[temp.second]==1)
			continue;
			mp[temp.second]=1;
			for(i=1;i<=m;i++)
			{
				if(mp[i]!=1&&adj[temp.second][i]!=10000000)
				{
					que.push(make_pair(min(d[i],temp.first+adj[temp.second][i]),i));
					d[i]=min(d[i],temp.first+adj[temp.second][i]);
				}
			}
		}
		for(i=1;i<=m;i++)
			if(i!=tem)
				if(d[i]!=10000000)
					printf("%d ",d[i]);
				else
					printf("-1 ");
		mp.clear();
		printf("\n");
	}
	return 0;
}