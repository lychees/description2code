#include <stdio.h>
#include <algorithm>
#include <queue>
#pragma comment (linker,"/STACK:16777216")
#define FOR(i,n,m) for (int i=(n);i<=(m);i++)
#define NM 2005
#define NN 55
typedef long long int LL;
using namespace std;
FILE *in=stdin,*out=stdout;
int n,K;
int a[6][1005];
int place[6][1005];
int dy[1005];
int map[1005][1005],ind[1005];
void pro(){
    int ans=1;
    FOR (i,1,n){
        dy[i]=1;
        FOR (j,1,n){
            if (i==j) continue;
            int flag=0;
            FOR (k,1,K){
                if (place[k][j]>place[k][i]) flag=1;
            }
            if (flag==0) map[j][i]=1,ind[i]++;
        }
    }
    queue<int>Q;
    FOR (i,1,n) if (ind[i]==0) Q.push(i);
    while (!Q.empty()){
        int x=Q.front(); Q.pop();
        ans=ans<dy[x]?dy[x]:ans;
        FOR (i,1,n){
            if (map[x][i]){
                ind[i]--;
                dy[i]=dy[i]<dy[x]+1?dy[x]+1:dy[i];
                if (ind[i]==0){
                    Q.push(i);
                }
            }
        }
    }
    fprintf(out,"%d",ans);
}
int main(){
    fscanf(in,"%d %d",&n,&K);
    FOR (i,1,K){
        FOR (j,1,n){
            fscanf(in,"%d",&a[i][j]);
            place[i][a[i][j]]=j;
        }
    }
    pro();
    return 0;
}