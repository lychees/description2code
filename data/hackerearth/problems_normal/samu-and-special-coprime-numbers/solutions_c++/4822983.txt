#include <stdio.h>
#include <string.h>
typedef long long ll;
ll dp[20][2][170][1500];

void itoa(ll num, char *str)
{
	int i=0;
	while(num!=0)
	{
		str[i++] = num%10 + 48;
		num/=10;
	}
	//printf("%s ",str);
	str[i] = '\0';
	//printf("%s ",str);
}

int gcd(int a, int b)
{
	return (a==0?b:gcd(b%a,a));	
}

ll count(char *str, int pos, int dig, int dig_sum, int sqr_sum)
{
	
	int hcf = gcd(dig_sum,sqr_sum);
	//printf("%d ",hcf);
	if(pos == -1)
	{
		if(hcf==1) return 1;
		return 0;
	}
	
	ll &cnt = dp[pos][dig][dig_sum][sqr_sum];
	//printf("%lld ",cnt);
	if(cnt==-1 || dig ) cnt=0;
	else return cnt;
	
	int i,lt = 9;
	if(dig)
		lt = str[pos]-'0';
	for(i=0;i<=lt;++i)
	{
		int tmp=0;
		if(i==lt) tmp = dig;
		dig_sum += i;
		sqr_sum += (i*i);
		//printf("%d\n",tmp);
		cnt += count(str,pos-1,tmp, dig_sum, sqr_sum);
		dig_sum -= i;
		sqr_sum -= (i*i);
		//printf("%d ",cnt);
	}
	//printf("\n%d %d %d %d\n",pos,dig_sum,sqr_sum,dig);
	dp[pos][dig][dig_sum][sqr_sum] = cnt;
	return cnt;
}
int main()
{
    //printf("Hello World!\n");
    int tc;
    scanf("%d",&tc);
    memset(dp,-1,sizeof(dp));
    while(tc--)
    {
    	ll a,b;
    	char l[20],r[20];
    	int lenl,lenr;
    	scanf("%lld %lld",&a,&b);
    	--a;
    	itoa(a,l);
    	itoa(b,r);
    	lenl = strlen(l);
    	lenr = strlen(r);
    	//printf("%s %s\n",l,r);
    	
    	ll ans = count(r,lenr-1,1,0,0);
    				
    	//printf("%lld\n",ans);
    	ans -= count(l,lenl-1,1,0,0);
    	printf("%lld\n",ans);
    }
    return 0;
}
