#include<bits/stdc++.h>
using namespace std;
static int a[200001],ind[200001];
int main(){
	int t;
	scanf("%d",&t);
	while(t--){
		int n;
		scanf("%d",&n);
		for(int i=0;i<n;i++)
		   scanf("%d",&a[i]),ind[a[i]]=i;
	    int m;
	    scanf("%d",&m);
	    vector<long long int> imp;
	    for(int i=0;i<m;i++){
	    	int x,y;
	    	scanf("%d %d",&x,&y);
	    	if(abs(ind[x]-ind[y])==1){
	    		imp.push_back((long long)min(ind[x],ind[y]));
	    	}
	    }
	    sort(imp.begin(),imp.end());
	    long long int last=-1;
	    long long ans=0;
	    for(int i=0;i<imp.size();i++){
	    	ans+=(imp[i]-last)*(n-imp[i]-1);
	    	last=imp[i];
	    }
	    printf("%lld\n",ans);
	}
	return 0;
}