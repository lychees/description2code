#include<bits/stdc++.h>
using  namespace  std;

#define all(p) p.begin(), p.end()
#define mp make_pair
#define pb push_back
#define rep(i,a,b) for(int i=a;i<=b;i++)
#define ren(i,a,b) for(int i=a;i>=b;i--)
#define ff first
#define ss second
#define ll long long
#define llu unsigned long long
#define vll vector<long long int>
#define vi vector<int>
#define nl cout<<"\n"
#define sp cout<<" "
#define tr(container, it) for(__typeof(container.begin()) it = container.begin(); it != container.end(); it++)

ll parent[200005], w[200005];
vll v;

int fp (int a)
{
    if(parent[parent[a]]!=parent[a])
        parent[a]= fp(parent[a]);
    return parent[a];
}


void dsu(int a, int b)
{
    int pa = fp(a), pb = fp(b);
    if(pa==pb) return;
    if(w[pa]<=w[pb]) parent[pb] = pa;
    else parent[pa] = pb;
}

int  main ()
{
	ios_base::sync_with_stdio(false);
    //freopen ("cppinp5.txt", "r", stdin);
    //freopen ("out_dsu_new5.txt", "w", stdout);
    ll t, n, m, x, y;
    cin>>t;
    while(t--)
    {
        v.clear();
        cin>>n>>m;
        rep(i, 1, n)
        {
            cin>>w[i];
            parent[i] = i;
        }
        rep(i, 1, m)
        {
            cin>>x>>y;
            dsu(x,y);
        }
        rep(i, 1, n)
        {
            if(fp(i)==i)
                v.pb(w[i]);
        }
        sort(all(v));
        ll cost = 0;
        for(int i=1; i<v.size(); i++)
            cost += v[i];
        cost *= v[0];
        cout<<cost<<"\n";
    }
    return  0;
}
