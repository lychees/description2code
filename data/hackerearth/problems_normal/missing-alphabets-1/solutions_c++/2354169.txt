#include <iostream>
#include<string.h>
#include<map>;
#include<vector>
#include<algorithm>
using namespace std;
map<char,int> mp;

bool myCompare(string a, string b){
	int i;
	for(i=0;a[i]&&b[i];i++){
	if(mp[a[i]]>mp[b[i]]) return false;	
		if(mp[a[i]]<mp[b[i]]) return true;	
	}
	if(i==a.length()) return true;
	return false;
}	
int main()
{   
    int t;
    cin>>t;
    while(t--){
    	string s;
    	cin>>s;
    
    	for(int i=0;i<s.length();i++){
    		mp[s[i]]=i;
    	}
    	int m;
    	cin>>m;
    	vector<string> v;
    	for(int i=0;i<m;i++){
    		string test;
    		cin>>test;
    		v.push_back(test);
    	}
    	sort(v.begin(),v.end(),myCompare);
    	for(int i=0;i<m;i++){ cout<<v[i]<<endl;}
    	v.clear();
    	mp.clear();
    	
    }
}
