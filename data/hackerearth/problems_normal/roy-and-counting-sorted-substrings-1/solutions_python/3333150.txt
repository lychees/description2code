t=input()
while t:
	t -= 1
	n = input()
	st = raw_input()
	c = 1
	s= 0
	for i in range(1,n):
		if ord(st[i]) >= ord(st[i-1]):
			c += 1
		else:
			c = c*(c+1)/2
			s += c
			c = 1
	c = c*(c+1)/2
	s += c
	print s