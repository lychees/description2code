#include<bits/stdc++.h>
#define ll long long
using namespace std;
int main(){

 cin.sync_with_stdio(false);
    int t;
    cin >> t;
    while(t--){

       int n , k;
       cin >> n >> k;

       int o = 0;
       for(int i = 1 ; i <= n ; ++i ){
         int x;
         cin >> x;
         if(x)
         o++;
       }
       if(o==n){

        if(k&1)
        cout << o - 1 << endl;
        else
        cout << o << endl;

       }
       else {

       int ans = o;
       o = n - o;
       if( k <= o ){
       ans = ans + k;
       cout << ans << endl;
       }
       else {
       ans = ans + o;
       k = k - o;
         if(k&1)
         cout << ans - 1 << endl;
         else
         cout << ans << endl;
       }

       }



    }
    return 0;

}
