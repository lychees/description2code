#include <iostream>
using namespace std;

int main()
{
    //cout << "Hello World!" << endl;
    int t;
    cin>>t;
    while(t--)
    {
    	int n;
    	cin>>n;
    	
    	long long time[n];
    	string s[n];
    	char ch[n];
    	long long c[n];
    	int valid[n];
    	
    	int i;
    	for(i=0;i<n;i++)
    	{
    		cin>>time[i];
    		cin>>s[i];
    		if(s[i]=="type")
    			cin>>ch[i];
    		else
    			cin>>c[i];
    		
    		valid[i]=1;
    	   
    	}
    	for(i=n-1;i>=0;i--)
    	{
    		if(s[i]=="undo" && valid[i]==1)
    		{
    			int j=i-1;
    			while(time[i]-time[j]<=c[i] && j>=0)
    			{
    				if(valid[j]==0)	
    					valid[j]=1;
    				else
    					valid[j]=0;
    				j--;
    			}
    		}
    	}
    	/*for(i=0;i<n;i++)
    		cout<<valid[i]<<" ";
    	cout<<endl;*/
    	string final ="";
    	for(i=0;i<n;i++)
    	{
    		if(valid[i]==1 && s[i]=="type")
    			final+=ch[i];
    	}
    	cout<<final<<endl;
    	
    }
    return 0;
}
