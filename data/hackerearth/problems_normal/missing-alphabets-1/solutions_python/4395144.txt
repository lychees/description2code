'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
for _ in range(input()):
	
	art=list(raw_input())
	arr=[]
	for x in range(input()):
		a=list(raw_input())
		i=0
		for item in a:
			a[i]=art.index(item)
			i=i+1
		
		
		arr.append(a)
	
	final=sorted(arr)
 
	for it in final:
		j=0
		for key in it:
			it[j]=art[key]
			j=j+1
		print ''.join(it)
		
	