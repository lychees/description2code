#include <iostream>
#include <cstdlib>
#include <cstring>
#include <cstdio>
#include <string>
using namespace std;

char arr[502][502];
int ans;
int l;
void search(int x, int y, int cur);
string s;
int main(void)
{
	int T;
	cin >> T;
	for(int i=0; i<T; i++)
	{
		l=0;
		ans=0;
		int N;
		
		cin >> N;
		
		for(int k=0; k<502; k++)
		{
			for(int l=0; l<502; l++)
			{
				arr[k][l]='0';
			
			}
			
		}
		
		
		//char arr[N+2][N+2];
		
		for(int k=1; k<=N; k++)
		{
			for(int l=1; l<=N; l++)
			{
				cin>>arr[k][l];
			
			}
			
		}
		/*for(int k=1; k<=N; k++)
		{
			for(int l=1; l<=N; l++)
			{
				cout << arr[k][l] << " ";
			
			}
			
		}*/
		
		
		
		cin >> s;
		
		l = s.length();
		
		//cout << l;
		
		for(int k=1; k<=N; k++)
		{
			for(int l=1; l<=N; l++)
			{
				if(arr[k][l]==s[0])
				{
					search(k, l, 1);
				
				}
			
			}
			
		}
		
		cout << ans << endl;
		
		
		
	
	
	}
	
	


	return 0;
}


void search(int x, int y, int cur)
{

	if(cur == l)
	{
		ans++;
		return;
	}

	if(arr[x+1][y+1]==s[cur])
	{
		search(x+1, y+1, cur+1);
	}
	
	
	if(arr[x-1][y+1]==s[cur])
	{
		search(x-1, y+1, cur+1);
	}
	
	
	if(arr[x+1][y-1]==s[cur])
	{
		search(x+1, y-1, cur+1);
	}
	
	
	if(arr[x-1][y-1]==s[cur])
	{
		search(x-1, y-1, cur+1);
	}
	
	return;


}
