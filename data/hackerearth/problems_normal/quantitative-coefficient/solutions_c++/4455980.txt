#include <iostream>
#include <vector>
#include <queue>
#define mod 1000000007
using namespace std;

vector<pair<int,long long int> > v[1501];
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	int n,m;
    	cin>>n>>m;
    	
    	for(int i=0;i<m;i++)
    	{
    		int a,b;
    		long long int c;
    		cin>>a>>b>>c;
    		v[a].push_back(make_pair(b,c%mod));
    		v[b].push_back(make_pair(a,c%mod));
    	}
    	
    	bool visited[5001]={false};
    	priority_queue<pair<long long int,int>, vector<pair<long long int,int> >, greater<pair<long long int,int> > > q;
    	long long int cost=1;
    	q.push(make_pair(1,1));
    	while(!q.empty())
    	{
    		pair<long long int,int> p=q.top();
    		q.pop();
    		int x=p.second;
    		if(visited[x]==true)
    		   continue;
    		
            cost=(cost*p.first)%mod; 
    		visited[x]=true;
    		for(int i=0;i<v[x].size();i++)
    		{
    			int y=v[x][i].first;
    			long long int z=v[x][i].second;
    			if(visited[y]==false)
    			{
    				q.push(make_pair(z,y));
    			}
    		}
    	}
    	
    	cout<<cost%mod<<endl;
    	
    	for(int i=1;i<=n;i++)
    	{
    		v[i].clear();
    	}
    }
    return 0;
}
