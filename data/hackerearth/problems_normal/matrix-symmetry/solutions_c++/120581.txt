#include <bits/stdc++.h>
using namespace std;

#define s(a) scanf("%d",&a)
#define ss(a) scanf("%s",a)
#define FOR(i,a,b) for(i=a;i<b;i++)

int main() {
	int t;
	s(t);
	while(t--)
	{
		int f1=1,f2=1;
		int n;
		int i,j;
		char s[100][100];
		s(n);
		FOR(i,0,n)
		{
			ss(s[i]);
		}
		FOR(i,0,n)
		{
			FOR(j,0,n/2)
			{
				if(s[i][j]!=s[i][n-1-j])
				f1=0;
			}
		}
		FOR(i,0,n)
		{
			FOR(j,0,n/2)
			{
				if(s[j][i]!=s[n-1-j][i])
				f2=0;
			}
		}
		if(f1&&f2)
		{
			printf("BOTH\n");
		}
		else if(f1)
		{
			printf("VERTICAL\n");
		}
		else if(f2)
		{
			printf("HORIZONTAL\n");
		}
		else
		{
			printf("NO\n");
		}
	}
	return 0;
}