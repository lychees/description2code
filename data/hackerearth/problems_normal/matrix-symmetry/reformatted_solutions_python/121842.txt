'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''


def checkPalindrome(l):
    length = len(l)
    for i in xrange(length//2):
        if l[i] != l[length-1-i]:
            return False
    return True


n = int(raw_input())
for i in xrange(n):
    k = int(raw_input())
    horizontal = vertical = True
    temp = []
    for j in xrange(k):
        s = raw_input()
        if not checkPalindrome(s):
            vertical = False
        temp.append(s)
    if not checkPalindrome(temp):
        horizontal = False
    if vertical and horizontal:
        print 'BOTH'
    elif vertical and not horizontal:
        print 'VERTICAL'
    elif horizontal and not vertical:
        print 'HORIZONTAL'
    else:
        print 'NO'
