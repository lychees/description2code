#include <iostream>
using namespace std;
#include <stdio.h>
#define getcx getchar_unlocked
inline void fastIO( int &n )//fast input function
{
	n=0;
	int ch=getcx();
	int sign=1;
	while( ch < '0' || ch > '9' ){if(ch=='-')sign=-1; ch=getcx();}
	
	while( ch >= '0' && ch <= '9' ) // n<<3 + n<<1 --> n*8 + n*2 --> n*10 
	n = (n<<3)+(n<<1) + ch-'0', ch=getcx();
	n=n*sign;
}


int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	int n;
    	fastIO(n);
    	int a[n][n][n], b[n][n][n];
    	for(int i=0; i<n; i++)
    		for(int j=0; j<n; j++)
    			for(int k=0; k<n; k++)
    				fastIO(b[i][j][k]);
    	
    	a[0][0][0] = b[0][0][0];
    	
    	for(int i=1; i<n; i++)
    	{
    		a[i][0][0] = b[i][0][0] - b[i-1][0][0];
    		a[0][i][0] = b[0][i][0] - b[0][i-1][0];
    		a[0][0][i] = b[0][0][i] - b[0][0][i-1];
    	}
    	
		for(int j=1; j<n; j++)
		{
			for(int k=1; k<n; k++)
			{
				a[0][j][k] = b[0][j][k] - (b[0][j][k-1] + b[0][j-1][k] - b[0][j-1][k-1]);
			}
		}
		for(int i=1; i<n; i++)
		{
			for(int k=1; k<n; k++)
			{
				a[i][0][k] = b[i][0][k] - (b[i][0][k-1] + b[i-1][0][k] - b[i-1][0][k-1]);
			}
		}
		for(int i=1; i<n; i++)
		{
			for(int j=1; j<n; j++)
			{
				a[i][j][0] = b[i][j][0] - (b[i][j-1][0] + b[i-1][j][0] - b[i-1][j-1][0]);
			}
		}    	
		for(int i=1; i<n; i++)
		{
			for(int j=1; j<n; j++)
			{
				for(int k=1; k<n; k++)
				{
					//a[i][j][k] = b[i][j][k] - (b[i-1][j][k] + b[i][j-1][k] + b[i][j][k-1]) +
					//			2*b[i-1][j-1][k-1] + a[i-1][j-1][k] + a[i-1][j][k-1] + a[i][j-1][k-1];
					int sum=0;
					for(int p=0; p<i; p++)
						sum += a[p][j][k];
					a[i][j][k] = b[i][j][k] - (b[i][j-1][k] + b[i][j][k-1] + sum) + b[i][j-1][k-1];
				}
			}
		}
    	
    	for(int i=0; i<n; i++)
    	{
    		for(int j=0; j<n; j++)
    		{
    			for(int k=0; k<n; k++)
    				printf("%d ", a[i][j][k]);
    			printf("\n");
    		}
    	}
    	
    }
    return 0;
}
