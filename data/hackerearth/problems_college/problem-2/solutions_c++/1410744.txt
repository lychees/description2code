#include <iostream>
#include <cstring>
#include<vector>
using namespace std;
int s[50];


void totalSalary(vector <string> relations) {
	  int n = relations.size();
	  //cout<<n;

	  // for local
	  for(int i=0 ; i<n ; i++){
		  s[i] = 0;
	  }

	  bool end;
	  bool noY;

	  for(int k=0 ; k<n ; k++){

		  for(int i=0 ; i<n ; i++){
			  end = false;
			  noY = true;
			  int tmp = 0;

			  for(int j=0 ; j<n ; j++){
				  if(relations[i][j]=='Y'){
					  if(s[j]==0){
						  end = true;
						  break;
					  }
					  tmp += s[j];
					  noY = false;
				  }  

			  }
			  if(end) continue;

			  if(noY) s[i]=1;
			  else s[i] = tmp;
		  }

		  /*
		  for(int i=0 ; i<n ; i++){
			  cout << s[i] << " ";
		  }
		  cout << endl;
		  */
	  }

	  int ans = 0;
	  //cout<<s[0]<<s[1];
	  for(int i=0 ; i<n ; i++) ans += s[i];
	  
	  cout<<ans<<"\n";
  }

int main()
{
    int T,n;
    vector<string> relations;
    cin>>T;
    for(int i = 0 ; i < T; i++)
    {
    	cin>>n;
    	string line;
    	for(int j =0 ; j<n; j++)
    	{
    	    //getline(cin, line);
    	    cin>>line;
    	    relations.push_back(line);
    	}
    	//printf("%d\n", totalSalary(relations));
    	totalSalary(relations);
    	relations.clear();
    	
    }
}
