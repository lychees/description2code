#include<bits/stdc++.h>
using namespace std;

typedef long long LL;

int main()
{
      int t;
      cin >> t;
      while(t--)
      {
            int n,k,l,r;
            cin >> n >> k >> l >> r;
            string a,b;
            cin >> a >> b;
            int abc[300] = {0};
            for(int i = 0;i<b.size();i++) abc[b[i]] = 1;
            vector<int> cf(n+1);
            cf[0] = 0;
            for(int i = 1;i<=n;i++)
            {
                  int add = 0;
                  if(abc[a[i-1]]) add = 1;
                  cf[i] = cf[i-1] + add;
            }
            LL ans = 0;
            for(int i = 1;i<=n;i++)
            {
                  int top = (int)(upper_bound(cf.begin()+i,cf.end(),cf[i-1] + r) - cf.begin()) - 1;
                  int base = (int)(lower_bound(cf.begin()+i,cf.end(),cf[i-1]+l) - cf.begin());
                  int temp = top - base + 1;
                  ans += temp;
            }
            cout << ans << endl;
      }
      return 0;
}
