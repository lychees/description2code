#include <bits/stdc++.h>
using namespace std;
#define INF 0x3f3f3f3f
#define REP(i,n) for(int i=0; i<n; i++)
#define R(x) scanf("%d",&x)
#define F first
#define S second
typedef long long int64;
typedef pair<int,int> pii;

#define N 2010
#define M 1000000007
int pd[N][N],sum[N],ult[N],v[N],c[N],g[N];

int main() {
	int nt,n,m,p;

	R(nt);
	while (nt--) {
		int low;
		R(n),R(m);

		REP(i,n) {
			R(p),R(c[i]);
			if (p==0) low=i;
			else g[p-1]=i;
		}

		for (int x=low,i=0;i<n;i++) {
			v[i]=c[x];
			x=g[x];
		}

		memset(pd,0,sizeof(pd));
		memset(sum,0,sizeof(sum));
		memset(ult,-1,sizeof(ult));

		for (int x=n-1;x>=0;x--) {
			pd[x+1][0]=1;
			for (int t=1;t<=m;t++) {
				int u=(ult[v[x]]!=-1)?pd[ult[v[x]]+1][t-1]:0;

				sum[t]=(sum[t]+pd[x+1][t-1])%M;
				sum[t]=(sum[t]-u+M)%M;
			}
			ult[v[x]]=x;

			for (int t=1;t<=m;t++)
				pd[x][t]=sum[t];
		}

		int res=0;

		REP(i,m)
			res=(res+pd[0][i+1])%M;

		printf("%d\n",res);
	}
	return 0;
}

