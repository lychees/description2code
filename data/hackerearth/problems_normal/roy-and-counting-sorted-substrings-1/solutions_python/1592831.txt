t=input()
k=0
while k<t:
  n=input()
  s=raw_input()
  c=0
  i=1
  count=n
  while i<n:
        if s[i-1]>s[i]:
            l=[j for j in range(i-c)]
            count+=sum(l)
            c=i
        i+=1
  count+=sum([j for j in range(i-c)])
    
  print count
  k+=1
