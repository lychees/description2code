#include <iostream>
#include<algorithm>
using namespace std;

int main()
{
   long long int t;
   cin>>t;
   while(t--)
   {
   	  long long int n,A[1000001],ans=0;
   	   cin>>n;
   	   for(long long int i=0;i<n;i++)
   	   cin>>A[i];
   	   sort(A,A+n);
   	   int cnt=0;
   	   for(long long int i=1;i<n;i++)
   	   {
   	   	if(A[i]==A[i-1])
   	   	cnt++;
   	   	else{
   	   	ans+=(cnt*(cnt+1))/2;
   	   	cnt=0;
   	   	}
   	   }
   	   if(cnt!=0)
   	   ans+=(cnt*(cnt+1))/2;
   	   cout<<ans+n<<endl;
   	   
   }
    return 0;
}
