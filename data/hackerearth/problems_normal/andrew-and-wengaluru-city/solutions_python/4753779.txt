m = input()

for i in range(m):
	k = int(raw_input())
	l = [int(i) for i in raw_input().split()]
	left = [0]*len(l)
	right = [0]*len(l)
	for i in range(1,len(l)):
		left[i] = max(left[i-1], l[i-1])
	
	for i in range(len(l)-2,-1,-1):
		right[i] = max(right[i+1], l[i+1])
		
	ans = 0
	for i in range(len(l)):
		if min(left[i],right[i]) > l[i]:
			ans += min(left[i],right[i]) - l[i]
	
	print ans%1000000007
	