#include <iostream>
#include<cstring>
#include<string>
#include<stdio.h>
#define MOD 100000
using namespace std;
typedef long long int ll;
ll is_special[202][202];
char s[202];
int main()
{
	int n;
	scanf("%d",&n);
	scanf("%s",&s);
	for(int i=0;i<n;i++)
	{
		is_special[i][i]=0;
	}
	for(int i=0;i<n-1;i++)
	{
		if((s[i]=='A' && s[i+1]=='a') || (s[i]=='B' && s[i+1]=='b') || (s[i]=='C' && s[i+1]=='c'))
		{
			is_special[i][i+1]=1;
		}
		if(s[i]=='?' || s[i+1]=='?')
		{
			if(s[i]=='A' || s[i+1]=='a')
			{
				is_special[i][i+1]=1;
			}
			else if(s[i]=='B' || s[i+1]=='b')
			{
				is_special[i][i+1]=1;
			}
			else if(s[i]=='C' || s[i+1]=='c')
			{
				is_special[i][i+1]=1;
			}
			else
			{
				if(s[i]=='?' && s[i+1]=='?')
					is_special[i][i+1]=3;
			}
		}
	}
	for(int l=2;l<n;l++)
	{
		for(int i=0;i<n-l;i++)
		{
			is_special[i][i+l]=0;
			if((s[i]=='A' && s[i+l]=='a') || (s[i]=='B' && s[i+l]=='b') || (s[i]=='C' && s[i+l]=='c'))
			{
				is_special[i][i+l]=(is_special[i][i+l]+is_special[i+1][i+l-1])%MOD;
			}
			if(s[i]=='?' || s[i+l]=='?')
			{
				if(s[i]=='A' || s[i+l]=='a')
				{
					is_special[i][i+l]=(is_special[i][i+l]+is_special[i+1][i+l-1])%MOD;
				}
				else if(s[i]=='B' || s[i+l]=='b')
				{
					is_special[i][i+l]=(is_special[i][i+l]+is_special[i+1][i+l-1])%MOD;
				}
				else if(s[i]=='C' || s[i+l]=='c')
				{
					is_special[i][i+l]=(is_special[i][i+l]+is_special[i+1][i+l-1])%MOD;
				}
				else
				{
					if(s[i]=='?' && s[i+l]=='?')
						is_special[i][i+l]=(is_special[i][i+l]+(3*is_special[i+1][i+l-1])%MOD)%MOD;
				}
			}
			is_special[i][i+l] = (is_special[i][i+l]+is_special[i][i+1]*is_special[i+2][i+l])%MOD;
			for(int k=i+2;k<i+l;k++)
			{
				if((s[i]=='A' && s[k]=='a') || (s[i]=='B' && s[k]=='b') || (s[i]=='C' && s[k]=='c'))
					is_special[i][i+l]=(is_special[i][i+l]+(is_special[i+1][k-1]*is_special[k+1][i+l])%MOD)%MOD;
				if(s[i]=='?' || s[k]=='?')
				{
					if(s[i]=='A' || s[k]=='a')
					{
						is_special[i][i+l]=(is_special[i][i+l]+(is_special[i+1][k-1]*is_special[k+1][i+l])%MOD)%MOD;
					}
					else if(s[i]=='B' || s[k]=='b')
					{
						is_special[i][i+l]=(is_special[i][i+l]+(is_special[i+1][k-1]*is_special[k+1][i+l])%MOD)%MOD;
					}
					else if(s[i]=='C' || s[k]=='c')
					{
						is_special[i][i+l]=(is_special[i][i+l]+(is_special[i+1][k-1]*is_special[k+1][i+l])%MOD)%MOD;
					}
					else
					{
						if(s[i]=='?' && s[k]=='?')
						{
							is_special[i][i+l]=(is_special[i][i+l]+(3*((is_special[i+1][k-1]*is_special[k+1][i+l])%MOD))%MOD)%MOD;
						}
					}
				}
			}
		}
	}
	//cout<<is_special[3][3]<<endl;
	cout<<is_special[0][n-1]<<endl;
}
