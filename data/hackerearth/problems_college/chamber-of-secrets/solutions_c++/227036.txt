#include<bits/stdc++.h>
using namespace std;
#define MOD 1000000007
int main()
{
    ios::sync_with_stdio(false);
    int t;
    cin>>t;
    while(t--)
    {
        int n,a[100002]={0},i,q,w,x,y,z;
        long long b[100002]={0},c[100002]={0},ans,temp,temp2;
        cin>>n>>q;
        for(i=1;i<=n;i++)
            cin>>a[i];
        for(i=n;i>=0;i--)
            b[i]=(b[i+1]+a[i])%MOD;
        for(i=n;i>=0;i--)
            c[i]=(c[i+1]+b[i])%MOD;

        while(q--)
        {
            cin>>w>>x>>y>>z;

            temp=c[x+y]-c[x+z+1];
            if(temp<0)
                temp+=MOD;
            temp+=y*(b[x+y]);
            temp%=MOD;
            temp-=((z+1)*b[x+z+1]);
            while(temp<0)
                temp+=MOD;
            temp2=(w-1)*(b[x+y]-b[x+z+1]);
            temp2%=MOD;
            ans=(temp+temp2)%MOD;
            cout<<ans<<endl;

        }

    }
    return 0;
}
