 #include <bits/stdc++.h>
  
 using namespace std;
  
 #define REP(i, n) for(int i=0; i<(n); i++)
 #define FOR(i, a, b) for(int i=(a); i<(b); i++)
 #define IFOR(i, a, b) for(int i=(a); i>=(b); i--)
 #define FORD(i, a, b, c) for(int i=(a); i<(b); i+=(c))
  
 #define SS ({int x;scanf("%d", &x);x;})
 #define SI(x) ((int)x.size())
 #define PB(x) push_back(x)
 #define MP(a,b) make_pair(a, b)
 #define SORT(a) sort(a.begin(),a.end())
 #define ITER(it,a) for(typeof(a.begin()) it = a.begin(); it!=a.end(); it++)
 #define ALL(a) a.begin(),a.end()
 #define INF 1000000000
 #define V vector
 #define S string
 #define FST first
 #define SEC second
 typedef V<int> VI;
 typedef V<S> VS;
 typedef long long LL;
 typedef pair<int, int> PII;
 
int mp[1007][1007];
void bfs(int i1, int j1){
	mp[i1][j1]=0;
	for(int i=1;i<=1000;i++){
		if(mp[i1][i]) bfs(i1, i);
	}
	for(int i=1;i<=1000;i++){
		if(mp[i][j1]) bfs(i, j1);
	}
	return;
}

 int main(){
 	int ite;
 	cin>>ite;
 	while(ite--){
 		memset(mp, 0 , sizeof(mp));
 		int n,a,b;
 		cin>>n;
 		int maxi=0;
 		REP(i,n){
 			cin>>a>>b;
 			mp[a][b]=1;
 		}
 		int count=0;
 		for(int i=0;i<=1000; i++){
 			for(int j=0;j<=1000;j++){
 			if(mp[i][j]){
 				bfs(i,j);
 				count++;
 			}
 		}
 		}
 		cout<<count-1<<endl;
 	}
 }