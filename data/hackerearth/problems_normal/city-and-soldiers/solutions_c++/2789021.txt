#include <iostream>
using namespace std;

int par[100001];

int root(int x)
{
	if(par[x]==x)
		return x;
	return par[x] = root(par[x]);
}

int main()
{
	int n,q,i,ch,a,b,r_a,r_b;
	
	cin>>n>>q;
	for(i=1;i<=n;i++)
		par[i]=i;
		
	while(q--)
	{
		cin>>ch;
		switch(ch)
		{
		case 1:
			cin>>a>>b;
			
			r_a = root(a);
			r_b = root(b);
			
			if(r_a!=r_b)
				par[r_a]=r_b;
			
			break;
			
		case 2:
			cin>>a;
			r_a = root(a);
			par[r_a] = a;
			par[a] = a;
			break;
		
		case 3:
			cin>>a;
			r_a = root(a);
			cout<<r_a<<endl;
			break;
		}
	}
    return 0;
}
