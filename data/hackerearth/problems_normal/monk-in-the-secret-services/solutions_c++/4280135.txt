#include <iostream>
using namespace std;
#include<vector>
#include<queue>
#include<cstring>
#include<limits.h>
#define ll long long
ll s,ad,h,n;


int main()
{
    ll t,i,j,k,l,m;
    cin>>t;
    while(t--){
    
        cin>>n>>m;
        vector<vector<pair<ll,ll> > > g(n);
        ll x,y,c;
        ll a[n][n];
        for(i=0;i<n;i++){
        	for(j=0;j<n;j++){
        		a[i][j]=INT_MAX;
        		if(i==j)
        			a[i][j]=0;
        	}
        }
        for(i=0;i<m;i++){
            cin>>x>>y>>c;
            a[x-1][y-1]=min(a[x-1][y-1],c);
            a[y-1][x-1]=a[x-1][y-1];
        }
        cin>>s>>ad>>h;
        for(l=0;l<n;l++){
        	for(i=0;i<n;i++){
        		for(j=0;j<n;j++){
        			a[i][j]=min(a[i][j],a[i][l]+a[l][j]);
        		}
        	}
        }
        ll mx=-1;
        for(i=0;i<n;i++){
        	if(i==s-1 || i==ad-1 || i==h-1)
        	continue;
        	mx=max(mx,a[s-1][i]+a[i][ad-1]+a[ad-1][i]+a[i][h-1]);
        }
        cout<<mx<<endl;
    }
    return 0;
}
