initial, divi = map(int, raw_input().split())
choice = raw_input()
total = 0
for i in choice:
    if int(i) == 1:
        total = ((total % divi)+(initial % divi)) % divi
    initial = (initial*initial) % divi
print total
