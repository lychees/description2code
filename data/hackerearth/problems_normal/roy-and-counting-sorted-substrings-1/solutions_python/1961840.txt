def perm(x):
    #print x
    c=(len(x)*(len(x)+1))/2
    return c


c=input()

for _ in range(0,c):
	c1=input()
	x=raw_input()
	l=0
#x="abc"
	i=0
	old=i
	while i < len(x)-1:
		if x[i]>x[i+1]:
			l=l+perm(x[old:i+1])
			old=i+1
        #print l
		i=i+1
	l=l+perm(x[old:i+1])
	print l