#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define xx first
#define yy second
#define mod 1000000007
#define pb push_back
#define mp make_pair
ll modpow ( ll a , ll b )
{
ll res =1;
while ( b )
{
if ( b &1) res =( res * a )  ;
a =( a * a ) ;
b >>=1;
}
return res ;
}
ll n,m,i,j,k,ans=0,sum=0,q,x,y,t,r,h,w,b,c,d,z;
vector<vector<pair<ll,ll> > >v;
vector<ll> visit;
ll dfs(ll x){
  if(v[x].size()==0)
    return visit[x]=0;
  ll count=0;
  for(ll i=0;i<v[x].size();i++){
    if(visit[v[x][i].xx]==-1){
      count=max(v[x][i].yy+dfs(v[x][i].xx),count);
    }
    else{
      count=max(count,visit[v[x][i].xx]+v[x][i].yy);
    }
  }
  return visit[x]=count+=2;
}
int main(){
  
  scanf("%lld %lld",&n,&k);
  v.resize(n);
  visit.resize(n);
  for(i=0;i<n;i++)visit[i]=-1;
  while(k--){
    scanf("%lld %lld %lld",&x,&y,&z);
    v[x-1].pb(mp(y-1,z));
  }
  for(i=0;i<n;i++){
    if(visit[i]==-1){
      ans=max(ans,dfs(i));
    }
  }
  //for(i=0;i<n;i++)cout<<visit[i]<<" ";
  cout<<ans<<endl;
    
  return 0;
    
    
}