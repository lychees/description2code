#include<iostream>
#include<algorithm>
#include<stdio.h>
typedef long long ll;
using namespace std;
struct node
{
    ll key;
    ll id;
}a[1500];
ll arr[1500],b[40][1500]={0};
bool compare(node a,node b)
{
    if(a.key!=b.key)
        return a.key<b.key;
    return a.id<b.id;
}
int main()
{
    ll n,q,i,j;
    scanf("%lld",&n);
    for(i=1;i<=n;i++)
    {
        scanf("%lld",&arr[i]);
        a[i].key=arr[i];
        a[i].id=i;
    }
    sort(a+1,a+n+1,compare);
    for(i=1;i<=n;i++)
        b[(i-1)/38][a[i].id]=1;
    for(i=0;i<39;i++)
    {
        for(j=1;j<=n;j++)
            b[i][j]+=b[i][j-1];
    }
    scanf("%lld",&q);
    while(q--)
    {
        ll l,r,k,x=0;
        scanf("%lld",&l);
        scanf("%lld",&r);
        k=r-l+1;
        if(k%2==0)
            k/=2;
        else
            k=k/2+1;
        for(i=0;i<39;i++)
        {
            if(x+b[i][r]-b[i][l-1]>=k)
            {
                for(j=i*38;j<(i+1)*38&&j<n;j++)
                {
                    if(a[j+1].id>=l&&a[j+1].id<=r)
                        x++;
                    if(x==k)
                    {
                        printf("%lld\n",arr[a[j+1].id]);
                        break;
                    }
                }
                break;
            }
            else
                x+=b[i][r]-b[i][l-1];
        }
    }
    return 0;
}
