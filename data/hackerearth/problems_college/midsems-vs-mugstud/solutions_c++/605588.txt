#include<bits/stdc++.h>

using namespace std;
long read()
{
	long num=0;
	char ch=getchar_unlocked();
	while(ch < '0' || ch >'9')
		ch=getchar_unlocked();
	while(ch >= '0' && ch <= '9')
	{
		num=(num<<1)+(num<<3)+(ch-48);
		ch=getchar_unlocked();
	}
	return num;
}
int main()
{
	long i, j, k, t, n, m;
	t=read();
	while(t--)
	{
		long ans[52][52][52]={0}, mat[52][52][52]={0};
		n=read();
		for(i=0; i<n; i++)
			for(j=0; j<n; j++)
			for(k=0; k<n; k++)
				mat[i][j][k]=read();
		ans[0][0][0]=mat[0][0][0];
		for(i=1; i<n; i++)
		{
			ans[0][0][i]=mat[0][0][i]-mat[0][0][i-1];
			ans[0][i][0]=mat[0][i][0]-mat[0][i-1][0];

			ans[i][0][0]=mat[i][0][0]-mat[i-1][0][0];
		}

		for(i=1; i<n; i++)
		for(j=1; j<n; j++)
		{
			ans[0][i][j]=mat[0][i][j]-(mat[0][i-1][j]+mat[0][i][j-1]-mat[0][i-1][j-1]);
			ans[i][0][j]=mat[i][0][j]-(mat[i][0][j-1]+mat[i-1][0][j]-mat[i-1][0][j-1]);
			ans[i][j][0]=mat[i][j][0]-(mat[i-1][j][0]+mat[i][j-1][0]-mat[i-1][j-1][0]);
		}
/*		for(i=0; i<n && printf("\n"); i++)
			for(j=0; j<n && printf("\n"); j++)
			for(k=0; k<n; k++)
			printf("%ld ", ans[i][j][k]);
		printf("\n");
*/		for(i=1; i<n; i++)
		for(j=1; j<n; j++)
		for(k=1; k<n; k++)
		{
			ans[i][j][k]=mat[i][j][k]-mat[i][j-1][k];
			ans[i][j][k]-=mat[i-1][j][k]-mat[i-1][j-1][k];
			ans[i][j][k]-=mat[i][j][k-1]-mat[i][j-1][k-1];
			ans[i][j][k]+=mat[i-1][j][k-1]-mat[i-1][j-1][k-1];
		}
		for(i=0; i<n; i++)
			for(j=0; j<n; j++)
            {
                for(k=0; k<n; k++)
                printf("%ld ", ans[i][j][k]);
                printf("\n");
            }
	}
	return 0;
}
