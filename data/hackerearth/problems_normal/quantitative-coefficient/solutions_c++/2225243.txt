#include<bits/stdc++.h>
using namespace std;
typedef pair<long long, int> PII;
bool marked[100005];
#define mod 1000000007
vector <PII> adj[100005];
long long int prim(int x)
{	//cout<<"yes";
	priority_queue<PII, vector<PII>, greater<PII> > Q;
	long long int ma=1,y;
	PII p;
	Q.push(make_pair(1,x));
	while(!Q.empty())
	{
		p = Q.top();
        Q.pop();
        x = p.second;
		if(marked[x] == true)
            continue;
        ma =(ma* p.first)%mod;
        marked[x] = true;
        for(int i = 0;i < adj[x].size();++i)
        {
            y = adj[x][i].second;
            if(marked[y] == false)
                Q.push(adj[x][i]);
        }
    }
    return ma;
}
int main()
{
	int nodes,edges,i,x,y,t;
	long long int maxm,k;
	cin>>t;
	while(t--)
	{
		cin>>nodes>>edges;
	for(int i=0;i<=nodes;i++)
    marked[i]=false;	
	
	for(int i=0;i<edges;i++)
	{
		cin>>x>>y>>k;
		adj[x].push_back(make_pair(k,y));
		adj[y].push_back(make_pair(k,x));
		
	}
	//cout<<"yes";
	//cout<<maxm<<endl;
	maxm=prim(1);
	cout<<maxm%(mod)<<endl;
	for(int i=0;i<=nodes;i++)
    adj[i].clear();
	}
	return 0;
}