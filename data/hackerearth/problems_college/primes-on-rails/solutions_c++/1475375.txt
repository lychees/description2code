#include <bits/stdc++.h>
using namespace std;

int main()
{
    vector<bool>v(100001,1);v[0]=v[1]=0;
    for(int i=0;i<100001;i++){
    	if(v[i]){
    		for(int j=2*i;j<100001;j+=i){
    			v[j]=0;
    		}
    	}
    }
    int n,h,m,s,t,ans,x,y;cin>>n;
    vector<int>a(n),d(n);
    for(int i=0;i<n;i++){
    	cin>>h>>m>>s;
    	t=3600*h+60*m+s;
    	a[i]=t;
    	if(v[t])d[i]=t+5*60;
    	else if(t&1)d[i]=t+3*60;
    	else d[i]=t+2*60;
    }
	sort(a.begin(),a.end());
	sort(d.begin(),d.end());
	ans=t=1;
	x=1;y=0;
	while(x<n&&y<n){
		if(a[x]<d[y]){
			t++;
			x++;
			ans=max(ans,t);
		}
		else{
			t--;
			y++;
		}
	}
	cout<<ans<<endl;
    return 0;
}
