for t in range(input()):
    n = input()
    s = raw_input()
    #print n, s,
    res, i, c, = 0, 1, 1 # continuous sorted letters
    while(i < n):
        if(s[i - 1] > s[i]):
            #print c, s[i - 1], s[i]
            res += ((c * (c + 1)) >> 1)
            c = 0
        c += 1
        i += 1
    res += ((c * (c + 1)) >> 1)
    print res

