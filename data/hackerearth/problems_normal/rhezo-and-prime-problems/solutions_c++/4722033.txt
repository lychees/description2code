#include<bits/stdc++.h>
#define ll long long
#define ull unsigned long long
#define e 1000000007
#define MAX 1000006
#define INF 1e8
#define rep(i,a,b) for(i=a;i<b;i++)
#define pb push_back
#define mp make_pair
#define F first
#define S second
#define sl(a) scanf("%lld",&a)
#define pl(a) printf("%lld\n",a)
#define MM(a,x) memset(a,x,sizeof(a)) 
using namespace std;

ll n,a[MAX],p[MAX],sum[MAX],dp[MAX];

int seive(long long n)
{
	bool a[n+1];
	long long i,j;
	for(i=0;i<n+1;i++)
	a[i]=true;
	for(i=2;i*i<=n;i++)
	{
		a[0]=false;
		a[1]=false;
		for(j=i*i;j<=n;j+=i)
		{
			a[j]=false;
		}
	}
	ll k=0;
	for(i=0;i<=n;i++)
	{
		if(a[i]==true)
		p[k++]=i;
		//printf("\n%lld",i);
	}
	return k;
}

int main()
{
	ll i,pp;
	ll k=seive(5005);
	cin>>n;
	rep(i,1,n+1)
	{
		cin>>a[i];
		sum[i]=sum[i-1]+a[i];
	}
	dp[0]=0,dp[1]=0;
	rep(i,0,n+1)
	{
		dp[i]=dp[i-1];
		for(ll j=0;j<k and p[j]<=i;j++) {
			pp=i-p[j]-1;
			if(pp==-1) dp[i]=max(dp[i],sum[i]);
			else 
			dp[i]=max(dp[i],dp[pp]+sum[i]-sum[pp+1]);
		}
	}
	cout<<dp[n]<<endl;
	return 0;
}