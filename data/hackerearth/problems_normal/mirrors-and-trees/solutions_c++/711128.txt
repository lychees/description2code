#include <bits/stdc++.h>
using namespace std;
long long a[1007000];

int main()
{
	long long t,n,i,j,k,p,q;
	vector<long long> l;
	vector<long long> r;
	vector<long long> li;
	vector<long long> ri;
	cin>>t;
	while(t--)
	{
		cin>>n;
		for(i=0;i<n;i++)
			cin>>a[i];
		for(i=0;i<=log2(n);i++)
		{
			p=pow(2,i)-1;q=pow(2,i+1)-2;
			for(j=q;j>=p;j--)
			{
				if(a[j]!=0)
				{
					r.push_back(a[j]);
					ri.push_back(j);
					break;
				}
			}
			for(k=p;k<=q;k++)
			{
				if(a[k]!=0)
				{
					l.push_back(a[k]);
					li.push_back(k);
					break;
				}
			}
		}
		//cout<<r.size()<<" "<<l.size()<<endl;
		for(i=0;i<r.size();i++)
		{
			cout<<r[i]<<endl;
		}
		for(i=0;i<l.size();i++)
		{
			if(r[i]!=l[i]||(r[i]==l[i]&&ri[i]!=li[i]))
				cout<<l[i]<<endl;
		}
		cout<<endl;
		r.clear();
		l.clear();
		ri.clear();
		li.clear();
	}
    return 0;
}
