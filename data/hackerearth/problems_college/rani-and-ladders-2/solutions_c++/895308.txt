/*Deathsurgeon
 *B.Tech-3rd semester
 *IIIT - Allahabad
 */

#include <iostream>
#include <cstdio>
#include <math.h>
#include <string>
#include <cstring>
#include <algorithm>
#include <cstdlib>
#include <stack>
#include <queue>
#include <vector>
#include <map>

typedef long long LL;

#define MOD 1000000007
#define MAX 160015
#define sd(x) scanf("%d", &x)

using namespace std;

int lad[MAX];
int arr[MAX];

int main() {
	int t;
	cin >> t;
	
	while (t--) {
		int n, l;
		cin >> n >> l;
		
		for (int i=2; i<MAX; i++) {arr[i]=MAX;lad[i]=0;}
		lad[1]=0;
		arr[1]=0;
		while (l--) {
			int a, b;
			scanf("%d%d", &a, &b);
			
			if (lad[a]) {
				while(1);
				return -1;
			}
			lad[a]=b;
		}
		
		--n;
		for (int i=1; i<n; i++) {
			if (lad[i]) {
			//	puts("1");
				if (arr[lad[i]]>arr[i]) arr[lad[i]]=arr[i];
			} else {
				int k=i+13;
				for (int j=i+2; j<k; j++) {
					if (arr[j]>arr[i]+1) arr[j]=arr[i]+1;
				}
			}
		}
		
		cout << arr[n+1] << endl;
	}
	
	return 0;
}