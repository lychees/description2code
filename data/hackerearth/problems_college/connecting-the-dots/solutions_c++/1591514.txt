#include<bits/stdc++.h>
using namespace std;
int f=0;
int dp[1005][4];
vector<pair<int,int> > v[1005];
int visit[1003]={0};
int find_total(int i,int n,int c) {
	if(i==n) {
		f=1;
		return 0;
	}
	if(c!=-1&&dp[i][c]!=-1) {
		return dp[i][c];
	}
	int l,t=100000000;
	int j;
	l=v[i].size();
	for(j=0;j<l;j++) {
		if(v[i][j].second!=c&&visit[v[i][j].first]==0) {
			visit[v[i][j].first]=1;
			t=min(t,1+find_total(v[i][j].first,n,v[i][j].second));
			visit[v[i][j].first]=0;
		}
		
	}
	if(c!=-1)
	return dp[i][c]=t;
	else {
		return t;
	}
}
int main()
{
	memset(dp,-1,sizeof(dp));
	int n,m,a,b,c,i,ans;
	cin>>n>>m;
	for(i=0;i<m;i++) {
		scanf("%d%d%d",&a,&b,&c);
		v[a].push_back(make_pair(b,c));
	}
	ans = find_total(1,n,-1);
	if(f==0) {
		printf("-1\n");
	}
	else {
		printf("%d\n",ans);
	}
	return 0;
}