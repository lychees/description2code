#include <bits/stdc++.h>
using namespace std;
int order[26] = {0};
bool mycomp(string a, string b) {
	int n = a.length();
	int m = b.length();
	for (int i = 0; i < n && i < m; ++i) {
		if(order[a[i] - 'a'] == order[b[i] - 'a'])
		  continue;
		else
		  return order[a[i] - 'a'] < order[b[i] - 'a'];
	}
	return n < m;
}
int main(){
    
    int t;
	cin >> t;
	string str[100],priority;
	while (t--) {
		cin >> priority;
		int count = 0;
		for (int i = 0, n = priority.length(); i < n; ++i)
		   order[priority[i] - 'a'] = count++;
		int m;
		cin >> m;
		for (int i = 0; i < m; ++i) {
			cin >> str[i];
		}
		sort(str, str+m, mycomp);
		for (int i = 0; i < m; ++i)
		  cout << str[i] << endl;
	}
    return 0;
}
