#include<cstdio>
#include<cstdlib>
#include<iostream>

using namespace std;

int n;
int **A,**is1,**is2,**p1,**p2;
void update1(int **a,int i,int j){
	int v=1;is1[i][j]=1;p1[i][j]=1;
	if(i!=n-1){
		if(j!=n-1) if (a[i+1][j+1]==v) if(!is1[i+1][j+1])update1(a,i+1,j+1);
		if (a[i+1][j]==v) if(!is1[i+1][j])update1(a,i+1,j);
		if(j!=0)   if (a[i+1][j-1]==v) if(!is1[i+1][j-1])update1(a,i+1,j-1);
		
	}
	if(i!=0){
		if(j!=n-1) if (a[i-1][j+1]==v) if(!is1[i-1][j+1])update1(a,i-1,j+1);
		if (a[i-1][j]==v) if(!is1[i-1][j])update1(a,i-1,j);
		if(j!=0)   if (a[i-1][j-1]==v) if(!is1[i-1][j-1])update1(a,i-1,j-1);
		
	}
		if(j!=n-1) if (a[i][j+1]==v) if(!is1[i][j+1])update1(a,i,j+1);

		if(j!=0)   if (a[i][j-1]==v) if(!is1[i][j-1])update1(a,i,j-1);
}
void update2(int **a,int i,int j){
	int v=2;is2[i][j]=1;p2[i][j]=1;
	if(i!=n-1){
		if(j!=n-1) if (a[i+1][j+1]==v) if(!is2[i+1][j+1])update2(a,i+1,j+1);
		if (a[i+1][j]==v) if(!is2[i+1][j])update2(a,i+1,j);
		if(j!=0)   if (a[i+1][j-1]==v) if(!is2[i+1][j-1])update2(a,i+1,j-1);
		
	}
	if(i!=0){
		if(j!=n-1) if (a[i-1][j+1]==v) if(!is2[i-1][j+1])update2(a,i-1,j+1);
		if (a[i-1][j]==v) if(!is2[i-1][j])update2(a,i-1,j);
		if(j!=0)   if (a[i-1][j-1]==v) if(!is2[i-1][j-1])update2(a,i-1,j-1);
		
	}
		if(j!=n-1) if (a[i][j+1]==v) if(!is2[i][j+1])update2(a,i,j+1);

		if(j!=0)   if (a[i][j-1]==v) if(!is2[i][j-1])update2(a,i,j-1);
}
int main(){
	int i,j;	
	cin>>n;
	A=new int* [n];is1=new int*[n];is2=new int* [n]; p1=new int* [n];p2=new int* [n];
	for(i=0;i<n;i++){
		A[i]=new int[n];is1[i]=new int[n];is2[i]=new int [n]; p1[i]=new int [n];p2[i]=new int [n];
	}
	for(i=0;i<n;i++){
		for(j=0;j<n;j++){
			scanf("%d",&A[i][j]);
			is1[i][j]=is2[i][j]=0;
			p1[i][j]=p2[i][j]=0;			
		}
	}
	for( i=0;i<n;i++){
		if(A[i][0]==2){
			update2(A,i,0);
		}
	}
	for(i=0;i<n;i++){
		if(A[0][i]==1){
			update1(A,0,i);
		}
	}
	int i1=0,i2=0;
for(i=0;i<n;i++){if(is1[n-1][i])i1=1;if(is2[i][n-1])i2=1;}
	if(i1==1 && i2==1){cout<<"AMBIGUOUS";}
else if(i1==1)cout<<"1";
else if(i2==1)cout<<"2";
else cout<<"0";

return 0;
}
