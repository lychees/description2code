#include <iostream>
#include <algorithm>
using namespace std;

#define M 1000000007

int main()
{ long long a,b,c,n,Amin=0,Bmin,indexA=0,indexB=0,i,Amin2,Bmin2,sum,indexA2,indexB2,sum1,sum2;
   cin>>a>>b>>c;
   //input array size
   cin>>n;
   long long A[n],B[n];
   // array generator
A[0]=a*c;
A[0]%=M;
for(i=1 ; i<n ; i++)
{
A[i] = (((((A[i-1]*a)%M)*b)%M)*c)%M + (((A[i-1]*a)%M)*b)%M + (((A[i-1]*a)%M)*c)%M;
A[i] = A[i]%M;
}
B[0] = b*c;
B[0]%=M;
for(i=1 ; i<n ; i++)
{
B[i] = (((((B[i-1]*b)%M)*c)%M)*a)%M + (((B[i-1]*b)%M)*a)%M + (((B[i-1]*b)%M)*c)%M;
B[i] = B[i]%M;
}
/* for (i=0;i<n;i++)
  cout<<A[i]<<" ";
  cout<<"\n";
  for (i=0;i<n;i++)
  cout<<B[i]<<" ";
*/
 Amin2=99999;
 Amin=A[indexA];
 Bmin2=99999;
 Bmin=B[indexB];


 for(i=1;i<n;i++)
  {   
  	if(Amin>=A[i])
  	
  		{ Amin2=Amin;
  		Amin=A[i];
  			indexA2=indexA;
  			indexA=i;
  		}
  			
  			else if( Amin2>A[i])
  			    { indexA2=i;
  			    	Amin2=A[i];
  			    
  			    
  			    }
  	if(Bmin>=B[i])
  	{	 Bmin2=Bmin;
  		Bmin=B[i];
  		indexB2=indexB;
  		indexB=i;
  			}
  				else if(  Bmin2>B[i])
  			    {	indexB2=i;
  			    	Bmin2=B[i];
  			    }
  }
//    cout<<Amin<<"\n"<<Bmin<<"\n";
  // cout<<indexA<<"\n"<<indexB<<"\n"<<indexA2<<"\n"<<indexB2<<"\n";
  			 if(indexA==indexB)
  			 {
  			 //	   if(indexA==indexB2)
  			 //	   {
  			 	   	 sum1=Amin2+Bmin;
  			 //	   }
  			 		
  			 //	else if(indexA2==indexB)
  			 			sum=Amin+Bmin2;
  			 //	else
  			 		sum2=Amin2+Bmin2;
  			 	sum=min(sum1,sum2);
  			 }
  			 
  			 else 
  			 	sum=Amin+Bmin;
  			 

  			
  			 
  		
  	//}
cout<<sum;

    return 0;
}
