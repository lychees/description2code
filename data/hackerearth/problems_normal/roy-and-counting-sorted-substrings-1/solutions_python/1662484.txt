t=input()
for _ in xrange(t):
    n=input()
    s=raw_input().strip()
    r,c,f=n,1,False
    for i in xrange(1,n):
        f=False
        if s[i]>=s[i-1]:
            c+=1
        else:
            r=r+(((c*(c+1))/2)-c)
            c=1
            f=True
    if not f:
        r=r+(((c*(c+1))/2)-c)
        
    print r 
            
        