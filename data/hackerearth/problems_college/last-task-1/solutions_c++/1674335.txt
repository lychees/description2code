#include <bits/stdc++.h>
#define _ ios_base::sync_with_stdio(false);cin.tie(0);
using namespace std;
#define pb push_back
#define pob pop_back
#define pf push_front
#define pof pop_front
#define mp make_pair
#define all(a) a.begin(),a.end()
#define bitcnt(x) __builtin_popcountll(x)
#define MOD 1000000007
#define MAXN 500005
typedef unsigned long long int uint64;
typedef long long int int64;
 
vector<int>v[300005];
vector<int>factor[300005];
int leq(int val,int a){
	if(v[a].empty())
	return 0;
	int lo=0;
	int hgh=v[a].size()-1;
	if(val<v[a][lo])
	return lo;
	if(val>v[a][hgh])
	return hgh+1;
	
	int ret=0;
	while(lo<=hgh){
		int mid=(lo+hgh)/2;
		if(v[a][mid]>=val){
			ret=mid;
			hgh=mid-1;
		}
		else{
			lo=mid+1;
		}
	}
	return ret;
}
int geq(int val,int a){
	if(v[a].empty())
	return 0;
	int lo=0;
	int hgh=v[a].size()-1;
	if(val<v[a][lo])
	return lo;
	if(val>v[a][hgh])
	return hgh+1;
	
	int ret=hgh+1;
	while(lo<=hgh){
		int mid=(lo+hgh)/2;
		if(v[a][mid]>val){
			ret=mid;
			hgh=mid-1;
		}
		else{
			lo=mid+1;
		}
	}
	return ret;
}

int main(){
	int t,val,i,j;
	
	for(i=1;i<=300000;i++){
		for(j=i;j<=300000;j+=i){
			factor[j].pb(i);
		}
	}
	
	
	scanf("%d\n",&t);
	char ch;
	int x,y,a;
	while(t--){
		scanf("\n%c",&ch);
		if(ch=='+'){
			scanf("%d",&val);
			for(i=0;i<factor[val].size();i++){
			v[factor[val][i]].pb(val);
			}
		}
		else{
			scanf("%d%d%d",&x,&y,&a);
			int idx1=leq(x,a);
			int idx2=geq(y,a);
			printf("%d\n",idx2-idx1);
		}
	}
	return 0;
}