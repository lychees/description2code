#include<iostream>
#include<limits>
#include<cstring>
using namespace std;

long long int dp[200][200];
long num = 100000;
char str[201];	

int calcBase(char first, char second) {
	if(first == '?')
		return (second == '?') ? 3 : ((second == 'a' || second == 'b' || second == 'c') ? 1 : 0);
	else if(first == 'A')
		return (second == '?' || second == 'a') ? 1 : 0;
	else if(first == 'B')
		return (second == '?' || second == 'b') ? 1 : 0;
	else if(first == 'C')
		return (second == '?' || second == 'c') ? 1 : 0;
	else
		return 0;
}

long long int calculate(int l, int r) {
long long int ret;
	if(l > r)
		ret = 1;
	else if(l == r)
		ret = 0;
	else if(dp[l][r] != -1)
		ret = dp[l][r];
	else {
			ret = 0;
			for(int k=l+1; k<=r; k++) {
				ret += calcBase(str[l],str[k]) * calculate(l+1, k-1) *  calculate(k+1, r);
				ret %= num;
			}
			dp[l][r] = ret;
	}
	//cout<<"dp of "<<l<<" "<<r<<" is "<<dp[l][r]<<endl;
	return ret;
}

int main() {
	
	int length;
	/* Get all inputs */
	cin>>length;
	cin.ignore(numeric_limits<streamsize>::max(), '\n');	
	cin.getline(str, 201);

	memset(dp, -1, sizeof(dp));			
	/* Final solution */
	cout<<calculate(0, length-1);
	return 0;
}
