#include <bits/stdc++.h>
#define MAX 555555

using namespace std;

typedef long long ll;
int A[MAX * 3];
int pos[MAX];
int N, M;
int T[MAX * 3];

void up(int x, int v)
{
	for (; x < MAX * 3; x += x & -x)
		T[x] += v;
}
 
int read(int x)
{
	int sum = 0;
	for (; x > 0; x -= x & -x) sum += T[x];
	return sum;
}
 
 
int main()
{
    cin >> N >> M;
    int st = MAX, en = MAX + N + 1;
    ll ans = 0;
    for (int i = 1; i <= N; i++)
    	scanf("%d", &A[i + st]), pos[A[i + st]] = i + st, up(i + st, 1);
    char c[2]; int x;
    
    while (M--)
    {
    	scanf("%d %s", &x, c);
    	int p = read(pos[x]);
    	ans += min((p - 1), (N - p));
    	up(pos[x], -1);
    	if (c[0] == 'l')
    		pos[x] = st--;
    	else
    		pos[x] = en++;
    	up(pos[x], 1);
    }
    cout << ans << endl;
}
