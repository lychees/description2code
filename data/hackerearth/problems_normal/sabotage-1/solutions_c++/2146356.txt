#include <bits/stdc++.h>

using namespace std;

#define rep(i, a, b) for(int i = (a); i < int(b); ++i)
#define rrep(i, a, b) for(int i = (a) - 1; i >= int(b); --i)
#define trav(it, v) for(typeof((v).begin()) it = (v).begin(); it != (v).end(); ++it)
#define all(v) (v).begin(), (v).end()

typedef double fl;
typedef long long ll;
typedef pair<int, int> pii;
typedef vector<int> vi;
typedef vector<pii> vpi;

struct UF{
	int a[100005];

	int find(int x){
		if(a[x] == -1)
			return x;
		return a[x]=find(a[x]);
	}

	void join(int x, int y){
		x=find(x);
		y=find(y);
		if(x == y)
			return;
		a[x]=y;
	}
} uf;

pair<int, int> V[100005];

int main(){
	int N, M;
	scanf("%d%d", &N, &M);
	rep(i,0,N)
		uf.a[i]=-1;
	rep(i,0,M){
		int u, v;
		scanf("%d%d", &u, &v);
		--u;--v;
		V[i]=make_pair(u,v);
	}
	vector<int> ans;
	rrep(i,M,0){
		if(uf.find(V[i].first) == uf.find(V[i].second)){
			ans.push_back(i);		
		}
		uf.join(V[i].first, V[i].second);
	}
	printf("%d\n", ans.size());
	rrep(i,ans.size(),0)
		printf("%d\n", ans[i]+1);
}
