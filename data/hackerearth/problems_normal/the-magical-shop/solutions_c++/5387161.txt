#include <bits/stdc++.h>
using namespace std;

int main()
{
    long long int a, b, ans;
    int i;
    string s;
    cin>>a>>b;
    cin>>s;
   	a = a%b;
    for(i=0;i<s.size();i++){
    	if(s[i]=='1') ans += a%b;
    	a = (a*a)%b;
    }
    ans = ans%b;
    cout<<ans;
}
