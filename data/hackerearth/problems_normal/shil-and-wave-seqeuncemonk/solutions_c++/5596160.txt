	#include<bits/stdc++.h>
	using namespace std;
	#define ll long long
	ll bit[100005][2];
	ll bit1[100005];
	#define MAX 100005
	#define mod 1000000007
	void update(int x,int val,int pos){
		for(;x<=MAX;x+=(x&-x)){
			bit[x][pos]+=val;
			bit[x][pos]%=mod;
		}
	}
	ll query(int x,int pos){
		ll ans=0;
		for(;x>0;x-=(x&-x)){
			ans+=bit[x][pos];
			ans%=mod;
		}
		return ans%mod;
	}
	void update1(int x,int val){
		for(;x<=MAX;x+=(x&-x)){
			bit1[x]+=val;
			bit1[x]%=mod;
		}
	}
	ll query1(int x){
		ll ans=0;
		for(;x>0;x-=(x&-x)){
			ans+=bit1[x];
			ans%=mod;
		}
		return ans%mod;
	}
	main(){
		int n;
		int a[100005];
		cin>>n;
		for(int i=1;i<=n;i++)
			cin>>a[i];
		int ans=0;
		for(int i=1;i<=n;i++){
			int num=a[i];
			ll l=query1(num-1)%mod;
			ll l1=(query1(MAX)-query1(num)+mod)%mod;
			int dl=query(num-1,1)+l;
			dl%=mod;
			int du=(query(MAX,0)-query(num,0)+mod)%mod+l1;
			du%=mod;
			update(a[i],dl,0);
			update(a[i],du,1);
			update1(a[i],1);
			ans+=(dl+du)%mod;
			ans%=mod;

		}
		printf("%lld\n",ans%mod);
	}