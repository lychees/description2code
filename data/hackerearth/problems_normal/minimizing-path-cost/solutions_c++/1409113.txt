#include <iostream>
#include <stdio.h>
#include <vector>
#include <map>
#include <limits.h>

using namespace std;

int main()
{
	int n, m, i, j, k, q, d;
	
	map<string, int> M;
	
	cin >> n >> m;
	
	for( i = 0;i < n;i++ ) {
		string s;
		cin >> s;
		M[ s ] = i;
	} 
	
	vector< vector<int> > A( n, vector<int> ( n , INT_MAX ) );
	
	for( i = 0;i < n;i++ )
		A[ i ][ i ] = 0;
		
	for( i = 0;i < m;i++ ) {
		
		string s1, s2;		
		cin >> s1 >> s2 >> d;
		A[ M[ s1 ] ][ M[ s2 ] ] = d;
		A[ M[ s2 ] ][ M[ s1 ] ] = d;	
	}
	
	for( k = 0;k < n;k++ ) {
		
		for( i = 0;i < n;i++ ) {
			for( j = 0;j < n;j++ ) {
				
				if( ( A[ i ][ k ] != INT_MAX ) && ( A[ k ][ j ] != INT_MAX ) && ( A[ i ][ j ] > A[ i ][ k ] + A[ k ][ j ] ) )
					A[ i ][ j ] = A[ i ][ k ] + A[ k ][ j ];
			}
		}
	}
	
	cin >> q;
	
	while( q-- ) {
		
		string s1, s2;
		cin >> s1 >> s2;
		printf("%d\n", A[ M[ s1 ] ][ M[ s2 ] ] );
	}
	
	return 0;
}
