#include<iostream>
#include<vector>
#include<algorithm>
#include<cstdio>

using namespace std;

int dset[100001];

int find(int x)
{
	if(dset[x]==x)
	 return x;
	return dset[x] = find(dset[x]);
}

int main()
{
	int n,m;
	scanf("%d%d",&n,&m);
	vector< pair<int,int> > V;
	vector<int> answer;
	for(int i=0;i<=n;i++)
	   dset[i]=i;
	for(int i=0; i<m; i++)
	{
		int u,v;
		scanf("%d%d",&u,&v);
		V.push_back(pair<int,int>(u,v));	
	}
	for(int i=m-1;i>=0;i--)
	{
		int u = V[i].first;
		int v = V[i].second;
		int pu = find(u);
		int pv = find(v);
		if(pu!=pv)
		dset[pv] = pu;
		else
		answer.push_back(i+1);
	}
	printf("%d\n",answer.size());
	for(int i=answer.size()-1;i>=0;i--)
	 printf("%d\n",answer[i]);
	return 0;
}
