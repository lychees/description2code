#include<stdio.h>
#include<string.h>
#include<math.h>
#include<algorithm>
#include<string>
#include<queue>
#include<stack>
#include<map>
#include<set>
#include<iostream>
#include<vector>
#define MAX 1000020
#define MOD 1000000007
#define pb push_back
#define mp make_pair
#define sc(t) scanf("%d",&t)
#define scll(t) scanf("%lld",&t)
#define max(a,b) a>b?a:b
#define min(a,b) a<b?a:b
#define ll long long
#define fre freopen("in.txt","r",stdin),freopen("out.txt","w",stdout)
using namespace std;
int i,n,m,x,y,z;
ll ans;
pair<ll,pair<int,int> >a[1000000];
int parent[1000000];
int fin(int aa)
{
	if(parent[aa]==aa)
		return aa;
	return parent[aa]=fin(parent[aa]);
}
int un(int aa,int b,ll w)
{
	int u=fin(aa);
	int v=fin(b);
	if(u!=v)
	{
		parent[u]=v;
		ans=(ans*w)%MOD;
	}
}
int main()
{
	int t;
	sc(t);
	while(t--)
	{
		ans=1;
		sc(n);
		sc(m);
		for(i=1;i<=n;i++)
			parent[i]=i;
		for(i=0;i<m;i++)
		{
			sc(x);
			sc(y);
			sc(z);
			a[i]=(mp(z,mp(x,y)));
		}
		sort(a,a+m);
		for(i=0;i<m;i++)
		{
			un(a[i].second.first,a[i].second.second,a[i].first);
		}
		printf("%lld\n",ans);
	}
}