//https://www.hackerearth.com/code-monk-number-theory-i/algorithm/the-magical-shop/

#include<iostream>
#include<string>

using namespace std;

long long ModExp(long long a, long long b, string c)
{
    long long sum = 0;
    const char *cstr = c.c_str();

    a = a%b;
    for (int i = 0; i < c.size(); i++)
    {
        if (cstr[i] == '1')
            sum = (sum+a)%b;

        a = (a*a)%b;
    }
    return sum;
}

int main()
{
    long long a, b;
    cin >> a >> b;
    string c;
    cin >> c;

    cout << ModExp(a, b, c) << endl;
    return 0;
}
