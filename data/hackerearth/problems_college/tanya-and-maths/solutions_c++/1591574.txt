#include<stdio.h>
#include<math.h>
int phi(long long x)
 {
   int ret = 1,i,pow;
   for (i = 2; x != 1; i++) 
   {
     pow = 1;
     if(i>sqrt(x))break;
     while (!(x%i)) 
     {
       x /= i;
       pow *= i;
     }
     ret *= (pow - (pow/i));
    }
    if(x!=1)ret*=(x-1);
    return ret;
}
 
int gcd(int a,int b)
	{
		int temp;
		if(b>a)
			{
				temp=a;
				a=b;
				b=temp;
			}
		if(b==0)
			return a;
		else
			return gcd(b,a%b);
	}
 
 
int main()
	{
		int t,a,b,temp,x,sum,prex,i;
		scanf("%d",&t);
		while(t-->0)
			{
				sum=0;
				prex=0;
				scanf("%d%d",&a,&b);
				if(b>a)
					{
						temp=a;
						a=b;
						b=temp;
					}
				x=gcd(a,b);
				if(x==1)
					{
						printf("%d\n",1);
					}
				else
					{
						for(i=x;i>=1;--i)
							{
								if(a%i==0&&b%i==0)
									sum+=phi(i);
							}
						printf("%d\n",sum);
					}
 
			}
	}