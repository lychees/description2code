#include <iostream>
#include <algorithm>
#include <cstdio>
#include <set>
#include <cstring>
using namespace std;

int t, bal, empt, ans, bad, len, i ;
char s[200000] ;

int main()
{
    cin >> t ; scanf("%c", &s[0] ) ; while( t-- ) {
        ans = bad = bal = len = 0 ;
        cin.getline(s,200000) ; len = strlen(s) ;
        for(i=0;i<len;++i) {
             if( s[i] == '}' )
                --bal ;
             else if( s[i] == '{' )
                ++bal ;
             if( bal < 0 ) {
                bad = 1 ;
                bal = 1 ;
                ++ans ;
                s[i] = '{' ;
             }
        }
        bal = 0 ;
        for(i=len-1;i>=0;--i) {
            if( s[i] == '}' )
                ++bal ;
            else if( s[i] == '{' )
                --bal ;
            if( bal < 0 ) {
                bad = 1 ;
                bal = 1 ;
                ++ans ;
                s[i] = '}' ;
            }
        }
        if( bal )
            cout << -1 << endl ;
        else if( !bad )
            printf("0\n") ;
        else
            printf("%d\n", ans) ;
    }
}
