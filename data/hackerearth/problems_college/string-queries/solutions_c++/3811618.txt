// O(nlog^2n)

#include<bits/stdc++.h>
using namespace std;

#define pii pair<int,int>
#define ft first
#define sd second

bool cmp(const pair< pii,int > &a, const pair< pii,int > &b) {
	if (a.ft.ft == b.ft.ft) {
		return a.ft.sd < b.ft.sd;
	}
	return a.ft.ft < b.ft.ft;
}

int suffix_arr(string &str, vector<int> &suff_arr, vector< vector<int> > &P) {//O(nlog^2n)
	int l = str.length();
	for (int i = 0; i < l; i++) {
		P[0][i] = str[i] - 'a';
	}
	int stp = 1;
	vector< pair< pii,int > > tuple(l, { {0,0}, 0 } );
	for (int cnt = 1; (cnt >> 1) < l; stp++, cnt <<= 1) {//O(logn)
		for (int i = 0; i < l; i++) {//O(n)
			tuple[i].ft.ft = P[stp - 1][i];
			tuple[i].ft.sd = (i + cnt < l) ? P[stp - 1][i + cnt] : -1;
			tuple[i].sd = i;
		}
		sort(tuple.begin(),tuple.end(), cmp);//O(n(logn))
		for (int i = 0; i < l; i++) {
			P[stp][tuple[i].sd] = ( (i > 0 && tuple[i].ft.ft == tuple[i-1].ft.ft && tuple[i].ft.sd == tuple[i-1].ft.sd) ? P[stp][tuple[i-1].sd] : i );
		}
	}
	for (int i = 0; i < l; i++) {
		suff_arr[P[stp - 1][i]] = i;
	}
	return stp;//cout << stp << "\n";
}

int lcp(int x, int y, int stp, int l, vector< vector<int> > &P) {//O(logn)
	int ans = 0;
	if (x == y) {
		return l - x;
	}
	for (int k = stp - 1; k >=0; k--) {
		if (x < l && y < l) {
			if (P[k][x] == P[k][y]) {
				x += 1 << k;
				y += 1 << k;
				ans += 1 << k;
			}
		}
		else break;
	}
	return ans;
}

vector< vector<int> > P(25,vector<int> (100005));
vector<int> S(100005);

int main(){
	int n,m;
	cin >> n >> m;
	string str;
	cin >> str;
	int stp=suffix_arr(str,S,P);
	while(m--){
		int x,y;
		cin >> x >> y;
		x--;y--;
		cout << lcp(x,y,stp,n,P) << "\n";
	}
	return 0;
}
