#include <iostream>
using namespace std;

int main()
{
    int t;
    cin>>t;
    while(t--){
    	int i,n;
    	cin>>n;
    	int a[n],b[4],x;
    	for(i=0;i<5;i++){
    		b[i]=0;
    	}
    	x=0;
    	for(i=0;i<n;i++){
    		cin>>a[i];
    		if(a[i]==4)
    			x++;
    	}
    	for(i=0;i<n;i++){
    		if(a[i]!=4)
    			b[a[i]]++;
    	}
    	/*for(i=1;i<4;i++)
    		cout<<b[i]<<" ";*/
    	if(b[1]>=b[3]){
    		x=x+b[3];
    		x+=b[2]/2;
    		b[1]-=b[3];
    		x+=b[1]/4;
    		if(b[2]%2==1){
    			if(b[1]%4>0){
    			if(b[1]%4>2)
    				x+=2;
    			else
    				x++;
    			}
    			else
    				x++;
    		}    		
    		else{
    			if(b[1]%4>0)
    				x++;
    		}
    	}
    	else{
    		x=x+b[1];
    		x+=b[2]/2;
    		b[3]-=b[1];
    		x+=b[3];
    		x+=b[2]%2;
    	}
    	cout<<x<<endl;
    }
    return 0;
}
