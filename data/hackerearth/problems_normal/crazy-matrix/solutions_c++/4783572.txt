#include<iostream>
using namespace std;


bool dfs(char a[][100],char aa,int i,int j,int n,int c)
{
	if(c==n)
	return true;
	
	if(i<0||i>n)return false;
	if(j<0||j>n) return false;
	if(a[i][j]!=aa)
	return false;
	
	a[i][j]=-aa;
	c++;
	
	
	if(dfs(a,aa,i-1,j,n,c)||dfs(a,aa,i+1,j,n,c)||
	dfs(a,aa,i,j+1,n,c)||
	dfs(a,aa,i,j-1,n,c)||
	dfs(a,aa,i-1,j-1,n,c)||
	dfs(a,aa,i+1,j-1,n,c)||
	dfs(a,aa,i-1,j+1,n,c)||
	dfs(a,aa,i+1,j+1,n,c))
	return true;
	return false;
	
		
}
int main()
{int n;
	int f=0,g=0;
	cin>>n;
	bool visit[100][100];
	char a[100][100];
	for(int i=0;i<n;i++)

	for(int j=0;j<n;j++)
	cin>>a[i][j];
	for(int i=0;i<n;i++)

	for(int j=0;j<n;j++)
	visit[i][j]=false;
int c=0;

int i=0;
	for(int j=0;j<n;j++)
	{
		if(a[i][j]=='1')
		{
			if(dfs(a,'1',0,j,n,c)==true)
			{
			g=1;
		break;	
		}}
	}
	
	
	i=0;
	c=0;
	for(int j=0;j<n;j++)
	{
		if(a[j][0]=='2')
		{
			if(dfs(a,'2',j,0,n,c)==true)
			{
			f=1;
		break;	
		}
		}
	}

if(g==1&&f==1)
cout<<"AMBIGUOUS";
else if(g==1)
cout<<"1";
else
if(f==1)
cout<<"2";
else
cout<<"0";
	
	return 0;
}