#include <bits/stdc++.h>
using namespace std;
map<string,int>stringMap;
int calculate(string s,int idx){
	int dp[s.size()+1];
	dp[0]=1;
	for(int i=1;i<s.size();i++){
		string storage="";
		storage+=s[i-1];
		storage+=s[i];
		if(i==1){
			dp[i]=stringMap[storage];
		}
		else
			dp[i]=dp[i-2]+stringMap[storage];
		string str="";
		str+=s[i];
		int valueWithOneChar=max(1,stringMap[str]);
		dp[i]=max(dp[i-1]+valueWithOneChar,dp[i]);
	}
	return dp[s.size()-1];
}
int main()
{
	int n,m;
	cin>>n>>m;
	string s;
	cin>>s;
	while(m--)
	{
		string t;
		int val;
		cin>>t>>val;
		stringMap[t]=max(stringMap[t],val);//to avoid repeated input case
	}
	cout<<calculate(s,0)<<endl;
    return 0;
}
