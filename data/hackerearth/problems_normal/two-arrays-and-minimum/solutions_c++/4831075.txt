    #include<bits/stdc++.h>
    using namespace std;
    #define M 1000000007
    #define ll long long
    int main()
    {
    ios_base :: sync_with_stdio(false);
    cin.tie(0);
    ll a, b, c, n;
    cin >> a >> b >> c >> n;
    vector<ll> A(n), B(n);
    A[0] = a*c;
    A[0]%=M;
    for(int i=1 ; i<n ; i++)
    {
    A[i] = (((((A[i-1]*a)%M)*b)%M)*c)%M + (((A[i-1]*a)%M)*b)%M + (((A[i-1]*a)%M)*c)%M;
    A[i] = A[i]%M;
    }
    B[0] = b*c;
    B[0]%=M;
    for(int i=1 ; i<n ; i++)
    {
    B[i] = (((((B[i-1]*b)%M)*c)%M)*a)%M + (((B[i-1]*b)%M)*a)%M + (((B[i-1]*b)%M)*c)%M;
    B[i] = B[i]%M;
    }
     
    int mnA=0,mnA1=1;
    for(int i=2;i<n;i++)
    {
    	if(A[i]<A[mnA])
    	{
    		mnA1=mnA;
    		mnA=i;
    	}
    	if(A[i]<A[mnA1])
    	{
    		mnA1=i;
    	}
    	
    }
    int mnB=0,mnB1=1;
    for(int i=2;i<n;i++)
    {
    	if(B[i]<B[mnB])
    	{
    		mnB1=mnB;
    		mnB=i;
    	}
    	if(B[i]<B[mnB1])
    	{
    		mnB1=i;
    	}
    	
    }
    long long ans;
      if(mnA==mnB)
       ans=min((A[mnA]%M+B[mnB1]%M)%M,(A[mnA1]%M+B[mnB]%M)%M);
       else
       ans=(A[mnA]%M+B[mnB]%M)%M;
    
    cout << ans << "\n";
    }