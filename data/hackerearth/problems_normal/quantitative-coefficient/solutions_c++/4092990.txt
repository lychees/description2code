#include<stdio.h>
#include<stdlib.h>
#include<utility>
#include<algorithm>
using namespace std;

int pai[2010];

pair < long long int, pair<int, int> > estrd[40010];

int n, m;

int root(int x){
    int k=x;
    while(pai[x]!=x)
        x=pai[x];

    pai[k]=x;

    return x;
}

int unir(int a, int b){
    pai[root(a)]=pai[root(b)];
    pai[a]=pai[root(b)];
}

long long int kruskal(){
    int ar1, ar2, peso;
    long long int resp=1;

    for(int i=0;i<m;i++){
        ar1=estrd[i].second.first;
        ar2=estrd[i].second.second;
        peso=estrd[i].first;


        if(root(ar1) != root(ar2)){
            unir(ar1, ar2);
            resp*=peso;
        }
        resp=resp%1000000007;
    }

    return resp;
}

int main(){
    int t;
    scanf("%d", &t);

    for(int i=0;i<t;i++){
        for(int j=0;j<=2010;j++)
            pai[j]=j;

        for(int j=0;j<=40000;j++){
            estrd[j].first=0;
            estrd[j].second.first=0;
            estrd[j].second.second=0;
        }

        scanf("%d %d", &n, &m);

        for(int j=0;j<m;j++){
            int a, b, c;
            scanf("%d %d %d", &a, &b, &c);
            estrd[j]=make_pair(c, make_pair(a, b));
        }

        sort(estrd, estrd+m);

        printf("%lld\n", kruskal());
    }
}
