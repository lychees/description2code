#include <iostream>
#include <cstdio>
#include <climits>
#include <cstring>
#include <bitset>
#include <vector>
#include <queue>
#include <stack>
#include <string>
#include <set>
#include <list>
#include <cmath>
#include <numeric>
#include <map>
#include <utility>
#include <algorithm>
using namespace std;

#define BUF 100001
#define LEN 400
#define MOD 1000000007
#define PI 3.1415926535
#define lu unsigned long long int
#define ll long long int
#define pp pair<long int, long int>
#define vp vector< pp >
#define vl vector< ll >
#define vi vector< long int >
#define vvi vector< vi >
#define qi queue< int >
#define st stack< long int >
#define bt bitset<100>
#define pb(n) push_back(n)
#define setl set<long int>

typedef struct
{
	long int start,end;
}course;

bool sortfunc(course i, course j)
{
	if(i.start == j.start)
		return (i.end < j.end);
	return (i.start < j.start);
}

inline int log5(ll n)
{
	int ans = 0;
	while(n>=5)
	{
		n/=5;
		ans++;
	}
	return ans;
}

inline ll powr(ll n)
{
	ll p = 1;
	for (int i = 0; i < n; ++i)
	{
		p *= 10;
	}
	return p;
}

int main(int argc, char const *argv[])
{
	int t;
	scanf("%d", &t);
	while(t--)
	{
		long int n,su=0,a,b,ma1 = -1, ma2 = -2;
		scanf("%ld", &n);

		vp score;

		for (long int i = 0; i < n; ++i)
		{
			scanf("%ld %ld", &a, &b);
			score.pb(pp(a,b));
			if(ma1 < a+b)
			{
				ma2 = ma1;
				ma1 = a+b;
			}
			else if(ma2 < a+b)
				ma2 = a+b;
			su += b;
		}

		printf("%ld\n", ma1 + ma2 - su);

	}

	return 0;
}