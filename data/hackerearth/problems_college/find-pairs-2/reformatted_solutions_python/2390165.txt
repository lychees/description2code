t = input()
for kkk in range(0, t):
    n = input()
    l = sorted([int(i) for i in raw_input().split()])
    l.append('*')
    data = []
    count = 1
    for i in range(0, n):
        if l[i] == l[i+1]:
            count += 1
        else:
            data.append(count)
            count = 1
    # print data
    ans = 0
    for i in data:
        if i >= 2:
            ans += (i+(i)*(i-1)/2)
        else:
            ans += i
    print ans
