#include <iostream>

using namespace std;

int main()
{
    int t,n,i,j,k,k1,k2;
    cin>>t;
    //char a[50][50];
    while(t--)
    {
    	cin>>n;
    	char a[n+1][n+1] ;   	
    	for(i=0;i<n;i++)
    	for(j=0;j<n;j++)
    	  {
    	  	cin>>a[i][j];
    	  }
    	   
      	 
     
     int   flag_h=1,flag_v=1;
      
      for(i=0;i<n;i++)
             {
             	for(j=0;j<n;j++)
      		   {
      			if(a[i][j]!=a[n-i-1][j])
      		    flag_h=0;
      		    
      		     if(a[i][j]!=a[i][n-j-1])
      		    flag_v=0;    
      		  
      		      		}    
             }    		       	     
     if(flag_v!=0 && flag_h!=0)
    cout<<"BOTH\n";
    
    else if( flag_v!=0)
    cout<<"VERTICAL\n";
    else if(flag_h!=0)
    cout<<"HORIZONTAL\n";
    else
    cout<<"NO\n";
    
    flag_v=1;
    flag_h=1;
    
    
    }
      
    }