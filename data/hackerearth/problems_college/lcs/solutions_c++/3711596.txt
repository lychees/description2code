/* My First Template  
   :P
*/
#include <bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define ll long long int
#define pb push_back
#define mk make_pair
ll power(ll a, ll b) {
ll x = 1, y = a;
    while(b > 0) {
        if(b%2 == 1) {
            x=(x*y);
            if(x>mod) x%=mod;
        }
        y = (y*y);
        if(y>mod) y%=mod;
        b /= 2;
    }
    return x;
}
#define FORD(i, n, a) for(i = n; i > a; i--)
#define FOR(i, a, n) for (i = a; i < n; i++)

ll n, k;
ll a[6][1002];
ll ans[1002];
ll pos[6][1002];


int check(ll b, ll a)
{
    int flag = 1;
    int p = 1;
    for (p = 1; p < k; p++) {
        if (pos[p][a] < pos[p][b]) {
            flag = 0;
        }
    }
    return flag;

}

int main()
{
    ll i, j;
    cin >> n >> k;
    FOR(j, 0, k) {
        FOR (i, 0, n) {
            cin >> a[j][i];
            pos[j][a[j][i]] = i+1;
        }

    }


    FOR(i, 0, n) {

        ans[a[0][i]] = 1;

        for (j = 0; j < i; j++) {
            if (check(a[0][j], a[0][i]) == 1) {
                ans[a[0][i]] = max(ans[a[0][i]],ans[a[0][j]]+1);
            }
        }
    }

    ll m = 0;
    for (i = 0; i < n;i++) {
        if (m < ans[a[0][i]]) {
            m = ans[a[0][i]];
        }
    }

    cout << m << endl;

    return 0;
}
