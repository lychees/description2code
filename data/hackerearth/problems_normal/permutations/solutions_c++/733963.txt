/* ----Akash Agarwal---- */

#include <stdio.h>
#include <iostream>
#include <string.h>
#include <algorithm>
#include <stdlib.h>
#include <fstream>
#include <string>
#include <cmath>
#include <utility> 
#include <iomanip> 
#include <vector>
#include <stack>
#include <queue>
#include <map>
#include <sstream>
#include <list>
#include <set>
#include <bitset>

using namespace std;

#define LL long long int
#define iin(a) int a;cin >> a;
#define lin(a) LL a;cin >> a;
#define sin(a) string a;cin >> a;

#define myf(a,b,i) for(int i=a;i<b;i++)

#define mod 1000000007

int main()
{
	iin(k);

	int a[k];

	myf(0,k,i) {
		cin >> a[i];
	}

	vector<string> flag;
	string temp;

	myf(0,k,i) {
		cin >> temp;
		flag.push_back(temp);
	}

	int x[k];

	myf(0,k,i) {

		myf(0,k,j) {
			x[j]=0;
		}



		x[i]=1;
		stack<int> found;
		found.push(i);
		while ( !found.empty() ) {

			int curr= found.top();
			found.pop();
			myf(0,k,p) {
				if ( x[p]==0 && flag[curr][p] == 'Y' ){
					x[p]=1;
					found.push(p);
				}
			}
		}

		int min=a[i];
		int index=i;

		myf(i+1,k,j) {
			if ( x[j] == 1 && a[j] < min ) {
				min=a[j];
				index=j;
			}
		}

		if (index!=i)
			swap(a[i],a[index]) ;

	}

	myf (0,k,i) 
		cout << a[i] << " ";

	return 0;
}
