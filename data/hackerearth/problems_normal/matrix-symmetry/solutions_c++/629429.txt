#include <iostream>
using namespace std;
#include<stdio.h>
#include<stdlib.h>

int main()
{
    int t,i,j,n,c,d,b,x1,x2;
    cin>>t;
    while(t--){
    	cin>>n;
    	char a[50][50];
    	for(i=0;i<=n-1;i++){
    		for(j=0;j<=n-1;j++){
    			cin>>a[i][j];
    		}
    		
    	}

    	x1=0;
      	for(i=0;i<n/2;i++){
      		c=0;
    		for(j=0;j<=n-1;j++){
    			if(a[i][j]==a[n-1-i][j])
    			c++;
    		}
    		if(c==n)
    		x1++;
    	}

x2=0;
      	for(i=0;i<n/2;i++){
      		d=0;
    		for(j=0;j<=n-1;j++){
    			if(a[j][i]==a[j][n-1-i])
    			d++;
    		}
    		if(d==n)
    		x2++;
    	}

    	if(x1==n/2&&x2==n/2)
    	cout<<"BOTH"<<endl;
    else if(x1==n/2)	
    cout<<"HORIZONTAL"<<endl;
    else if(x2==n/2)
    	cout<<"VERTICAL"<<endl;
   else
    cout<<"NO"<<endl;
    	
    }
    return 0;
}
