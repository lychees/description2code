#include<bits/stdc++.h>
#define ll long long
#define max 10000000
#define mod 1000000007
using namespace std;
int main()
{
ll a,b,c,n,i,k;
cin>>a>>b>>c;
cin>>n;
ll A[max],B[max];
A[0] = (a*c)%mod;
B[0] = (b*c)%mod;
ll p,q,min1=9999999999,min2=9999999999,temp=9999999999;
for(i=1 ; i<n ; i++)
{
    A[i] = ((((((((A[i-1])%mod)*a)%mod)*b)%mod)*c)%mod + ((((A[i-1]%mod)*a)%mod)*b)%mod + (((A[i-1]%mod)*a)%mod*c)%mod)%mod;
    A[i] = A[i]%mod;
    
    B[i] = (((((((B[i-1]%mod)*b)%mod)*c)%mod)*a)%mod + ((((B[i-1]%mod)*b)%mod)*a)%mod + (((((B[i-1]%mod)*b)%mod)*c)%mod))%mod;
    B[i] = B[i]%mod;
    
    temp=min(temp,min(A[i],B[i]));
        }
ll f=0;
for(i=0;i<n;i++)
{
if(A[i]==temp)
    {
   // min1=A[i];
    k=i;
    f=1;
    }
    else if(B[i]==temp)
    {
    k=i;
    f=2;
    }
    }
    
    
    if(f==1)
    {
    for(i=0;i<n;i++)
    {
    if(B[i]<min2 && i!=k)
    {
    min2=B[i];
        }
    }
     cout<<temp+min2<<endl;
    }
    else if(f==2)
        {
        for(i=0;i<n;i++)
        {
        if(A[i]<min1 && i!=k)
    {
    min1=A[i];
        }
        }
        cout<<temp+min1<<endl;
        }
//cout<<min1+min2<<endl;
return 0;
}