#include <bits/stdc++.h>
using namespace std;

int main()
{
    // cout << "Hello World!" << endl;
    int n, m;
    cin >> n >> m;
    int a[n+1];
    vector<int> v[n+1];
    for(int i = 1; i <= n; i++)
    	a[i] = -1;
    for(int l = 1; l  <= m; l++){
    	int i1, j, k;
    	cin >> i1 >> j ;
    	if(i1 == 2){
    		int k;
    		cin >> k;
    		// if(j > k)swap(j,k);
    		v[j].push_back(k);
    		// v[k].push_back(j);
    		if(a[j] != -1){
    			queue<int> q;
    			q.push(j);
    			while(!q.empty()){
    				int top = q.front();
    				q.pop();
    				for(int i = 0; i < v[top].size(); i++){
    					if(a[v[top][i]] == -1){
    						q.push(v[top][i]);
    						a[v[top][i]] = a[top]+1;
    					}
    					else if(a[v[top][i]] > a[top]+1){
    						a[v[top][i]] = a[top]+1;
    						q.push(v[top][i]);
    					}
    				}
    			}
    		}
    		if(j == 1 && a[1] == -1){
    			a[j]=0;
    			queue<int> q;
    			q.push(1);
    			while(!q.empty()){
    				int top = q.front();
    				q.pop();
    				for(int i = 0; i < v[top].size(); i++){
    					if(a[v[top][i]] == -1){
    						q.push(v[top][i]);
    						a[v[top][i]] = a[top]+1;
    					}
    					else if(a[v[top][i]] > a[top]+1){
    						a[v[top][i]] = a[top]+1;
    						q.push(v[top][i]);
    					}
    				}
    			}
    		}
    	}
    	else{
    		if(j==1 && a[j] == -1){cout << "0" << "\n";}else
    		cout << a[j] << "\n";
    	}
    }
    return 0;
}
