#include <iostream>
#include<cstdio>
#include<map>
#include<string.h>
#include<vector>
#include<limits.h>
using namespace std;

int fun(int n)
{
int count = 0;
  while(n)
  {
    count += n & 1;
    n >>= 1;
  }
  return count;
}

int main()
{
int t;
scanf("%d",&t);
while(t--)
{
int n,k;
scanf("%d %d",&n,&k);
map<int,int>mp;
for(int i=0;i<n;i++)
{
int v;
scanf("%d",&v);
int count=fun(v);
//cout<<count<<"\n";
mp[count]++;

}


map<int,int>::reverse_iterator rit;
int sum=0;
for (rit=mp.rbegin(); rit!=mp.rend(); ++rit)
 {
 if(k==0)
 break;

 int c=rit->second;
 if(c>1)
 {
 while(k>0&&c>0)
 {
 sum=sum+(rit->first);
 k=k-1;
 c=c-1;
 }
 if(k==0)
 break;

 }
 else
 {
 sum=sum+(rit->first);
 k=k-1;
 }
//cout<<"p";



 }

cout<<sum<<"\n";

}




    return 0;
}













