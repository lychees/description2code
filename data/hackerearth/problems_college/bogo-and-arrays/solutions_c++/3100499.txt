#include<iostream>
using namespace std;
#define inf 9999999999999
#define ll long long
ll L[200005],R[200005],s[200005],a[200005];
int main()
{
	ll count=0;
	ll t,n,k;
	cin>>t;
	while(t--)
	{
		count=0;
		cin>>n>>k;
		for(long i=1;i<=n;i++)
			cin>>a[i];
		a[0]=a[n+1]=inf;
    	s[0] = 0;
    	for (ll q = 0, i = 1; i <= n; i++) {
      	  while (a[s[q]] <  a[i]) q--;
     	   L[i] = s[q];
      	  s[++q] = i;
    	}
	//	cout<<"3"<<endl;
    // compute R from right to left
   	 s[0] = n+1;
  	  for (ll q = 0, i = n; i; i--) {
   	     while (a[s[q]] <= a[i]) q--;
  	      R[i] = s[q];
 	       s[++q] = i;
   	 }
  	  for(ll i=1;i<=n;i++)
  	  		if(a[i]>k)
   	 		count+=(R[i]-i)*(i-L[i]);
   	 cout<<count<<endl;
   }
   	return 0;
}	