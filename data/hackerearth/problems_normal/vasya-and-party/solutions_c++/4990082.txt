#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define xx first
#define yy second
#define mod 1000000007
#define pb push_back
ll modpow ( ll a , ll b )
{
ll res =1;
while ( b )
{
if ( b &1) res =( res * a )  ;
a =( a * a ) ;
b >>=1;
}
return res ;
}
ll n,m,i,j,k,ans=0,sum=0,q,x,y,t,r,h,w,b,c,d,z;
vector<ll> lev;
vector<bool> visit;
vector<vector<ll> > v;
void dfs(ll x){
  visit[x]=true;
  if(lev[x]>z){
    z=lev[x];
    b=1;
  }
  else if(lev[x]==z){
    b++;
  }
  for(ll i=0;i<v[x].size();i++){
    if(!visit[v[x][i]]){
      dfs(v[x][i]);
    }
  }
}
int main(){
  
    ans=1;
    scanf("%lld %lld",&n,&m);
    lev.clear();lev.resize(n);
    v.clear();v.resize(n);
    visit.resize(n);
    for(i=0;i<n;i++)visit[i]=false;
    for(i=0;i<n;i++)cin>>lev[i];
    while(m--){
      cin>>x>>y;
      x--;y--;
      v[x].pb(y);
      v[y].pb(x);
    }
    for(i=0;i<n;i++){
      if(!visit[i]){
        z=0;b=0;
        dfs(i);
        //cout<<b<<endl;
        ans=(ans*b)%mod;
      }
    }
    cout<<ans<<endl;
    
  return 0;
    
    
}