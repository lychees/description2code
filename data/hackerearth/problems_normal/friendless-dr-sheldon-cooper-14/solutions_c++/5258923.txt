#include <iostream>
#include <vector>
#include <queue>

using namespace std;

int main()
{
    int test;
    cin>>test;
    while(test--)
    {
    	int a,b;
    	cin>>a>>b;
    	int m,n;
    	vector <int> v[a+1];
    	while(b--)
    	{
    		cin>>m>>n;
    		v[m].push_back(n);
    		v[n].push_back(m);
    	}
    	bool marked[a+1];
    	for(int i=0;i<=a;i++)
    	marked[i]=false;
    	queue <int> q;
    	q.push(1);
    	int t,count=-1;
    	while(!q.empty())
    	{
    		t=q.front();
    		q.pop();
    		if(marked[t]==false)
    		{
    			marked[t]=true;
    			count+=1;
    			for(int i=0;i<v[t].size();i++)
    			{
    				q.push(v[t][i]);
    			}
    		}
    	}
    	cout<<count<<endl;
    }
    return 0;
}
