#include<bits/stdc++.h>
using namespace std;
int main()
{
    long long int t,n,k,i,j,m,a[100000];
    scanf("%lld",&t);
    while(t--)
    {
    	j=0;
    	scanf("%lld%lld",&n,&k);
    	for(i=0;i<n;i++)
    	{
    		scanf("%lld",&a[i]);
    		if(a[i]==1)
    		j++;
    	}
    	m=n-j;
    	if(k<=m)
    	j+=k;
    	else if((k>m)&&((k-m)%2==1))
    	{
    		j+=m-1;
    	}
    	else
    	j+=m;
    	printf("%lld\n",j);
    }
    return 0;
}
