#include <bits/stdc++.h>
using namespace std;

int dp[1003][1003],dp2[1003][1003];
int a[1003],b[1003];
int main()
{
    int i,j,t,n,k,s,ans;
    cin>>t;
    while(t--)
    {
    	scanf("%d%d%d",&n,&k,&s);
    	memset(dp,0,sizeof dp);
    	memset(dp2,0,sizeof dp2);
    	for(i=0;i<n;i++)
    		scanf("%d",a+i);
    	b[0]=a[0];
    	for(i=1;i<n;i++)
    		b[i]=b[i-1]+a[i];
    	for(i=1;i<=k;i++)
    		for(j=i*s-1;j<n;j++)
    		{
    			dp[i][j]=b[j]-b[j-s]+dp2[i-1][j-s];
    			dp2[i][j]=max(dp2[i][j-1],dp[i][j]);
    		}
//    		for(i=1;i<=k;i++)
//    		{
//    			for(j=0;j<n;j++)
//    			cout<<dp[i][j]<<" ";
//    			cout<<"\n";
//    			for(j=0;j<n;j++)
//    			cout<<dp2[i][j]<<" ";
//    			cout<<"\n";
//    		}
    
    	ans=0;
    	for(i=1;i<=k;i++)
    		ans=max(ans,dp2[i][n-1]);
    		cout<<ans<<"\n";
    }
    return 0;
}
