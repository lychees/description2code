#include <bits/stdc++.h>
#define X first
#define Y second

using namespace std;

typedef pair<int, int> II;

const int MOD = 1000000007;
const int N = 1010;

int a[N][N], dp[N][N];
int n;

void add(int &a, int b) {
    a += b;
    if (a >= MOD) a -= MOD;
}

bool decValue(const II &u, const II &v) {
    return a[u.X][u.Y] > a[v.X][v.Y];
}

int main() {
    ios::sync_with_stdio(0); cin.tie(0);
    cin >> n;
    vector<II> C;
    for (int i = 1; i <= n; ++i) for (int j = 1; j <= n; ++j) {
        cin >> a[i][j];
        dp[i][j] = 1;
        C.push_back(II(i, j));
    }
    sort(C.begin(), C.end(), decValue);
    int ans = 0;
    for (auto it: C) {
        int i = it.X, j = it.Y;
        if (i > 1 && a[i - 1][j] > a[i][j])
            add(dp[i][j], dp[i - 1][j]);
        if (j > 1 && a[i][j - 1] > a[i][j])
            add(dp[i][j], dp[i][j - 1]);
        if (i < n && a[i + 1][j] > a[i][j])
            add(dp[i][j], dp[i + 1][j]);
        if (j < n && a[i][j + 1] > a[i][j])
            add(dp[i][j], dp[i][j + 1]);
        add(ans, dp[i][j]);
    }
    cout << ans << endl;
    return 0;
}
