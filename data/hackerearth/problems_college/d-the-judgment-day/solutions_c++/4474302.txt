#include <bits/stdc++.h>
using namespace std;
int main() {
long long int flag,n,i,a,t,p,b,c,d;
cin>>t;
while(t--){  
      long long int N[10000];
       cin>>n;
       for(i=0;i<n;i++){
                  cin>>N[i];
                       }
       a=0,b=0,c=0,d=0;
        for(i=0;i<n;i++){
              if(N[i]%4==0){
                 a=a+1;  
                           }
               if(N[i]%4==1){
                   b=b+1;
                         }
            if(N[i]%4==2){
                   c=c+1;
                         }
            if(N[i]%4==3){
                   d=d+1;
                         }
                
        }
 
    
   
    if(b<=d && d!=0 ){
        b=0;
      
    }
    if(b>d ){
        b=b-d;
    
        
    }
    if(c%2==1  && c!=0){
      
       if(b==1){
           b=b-1;
       }
       if(b>1){
           b=b-2;
       }
   }
    
   
    cout<<a+(b+3)/4+(((c*2)+2)/4)+d<<"\n";
}
  
    return 0;
    
}      