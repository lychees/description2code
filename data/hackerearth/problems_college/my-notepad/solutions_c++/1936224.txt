#include <bits/stdc++.h>
using namespace std;
typedef struct np{
	int tme;
	string cmd;
	char ch;
	int tm;
}ntpd;

stack<ntpd> st;

int main(){
	
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	
    int t,n,v1,v4, ign;
    char v3;
    string v2,ans;
    ntpd temp;
    
    cin>>t;
    while(t--){
    	ans = "";
    	cin>>n;
    	for(int i=0;i<n;i++){
    		cin>>v1>>v2;
    		if(v2=="type") cin>>v3;
    		else cin>>v4;
    		temp={v1,v2,v3,v4};
    		st.push(temp);
    		ign = v1 + 1;
    	}
    	while(st.size()){
    		temp = st.top();
    		if(temp.tme < ign){
    			if(temp.cmd == "undo") ign = temp.tme - temp.tm;
    			else ans = temp.ch + ans;
    		}
    		st.pop();
    	}
    	cout << ans << endl;
    }
    
    return 0;
}
