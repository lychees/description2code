
#include<bits/stdc++.h>

using namespace std;

#define si(x) scanf("%d",&x)
#define sll(x) scanf("%lld",&x)
#define sstr(s) scanf("%s",s)
#define nl printf("\n")
#define ll long long int
#define pii pair<int,int>
#define pll pair<ll,ll>
#define vi vector<int>
#define pb push_back
#define mp make_pair
#define fr first
#define se second
#define mod 1000000007

int out[1000001];
ll dp[1000001];
vector< pii > g[1000001];
ll ans = 0;
int r,temp;
int visited[1000001];
int cnt;

ll dfs(int u) {
    visited[u] = cnt;
    ll cur = 0;
    for(int i=0;i<g[u].size();++i) {
	int v = g[u][i].fr;
	if(visited[v] != cnt) {
	    if(u != temp) {
		cur = max(cur,g[u][i].se+dfs(v));
	    }
	    else {
		cur = max(cur,g[u][i].se+dfs(v));
	    }
	}
	else {
	    cur = max(cur,g[u][i].se+dp[v]);
	}
    }
    if(u!=temp)
	return dp[u]=cur+2;
    return dp[u]=cur;
}

int main()
{
    int p,r1,r2,t;
    si(r); si(p);
    for(int i=0;i<p;++i) {
	si(r1); si(r2); si(t);
	out[r1]++;
	g[r2].pb((pii)mp(r1,t));
    }
    for(int i=1;i<=r;++i) {
	if(!out[i]) {
	    cnt = i;
	    temp = i;
	    ans = max(ans,dfs(i));
	}
    }
    printf("%lld\n",ans);
    return 0;
}
