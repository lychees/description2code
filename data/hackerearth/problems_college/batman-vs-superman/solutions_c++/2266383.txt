#include<bits/stdc++.h>
#define ll long long int 
using namespace std;
bool cmp(ll a,ll b)
{
	return a>=b;
}
int main()
{
	int t;
	scanf("%d",&t);
	vector<ll>::iterator up;
	ll n,na,nb,q;
	char str[100005];
	vector<ll> ans,sum;
	while(t--)
	{
		ans.clear();sum.clear();
		scanf("%lld %lld %lld %lld",&n,&na,&nb,&q);
		scanf("%s",str);
		ll a=0,b=0,i=0;
		ll j=0;
		while(1)
		{
			if(a>=na&&b>=nb) 
			{
				if(str[i]=='a')a--;
				else b--;
				ans.push_back(n-j+1);
				i++;
			}
			else
			{
				if(j<n)
				{
					if(str[j]=='a') a++;
					else b++;
					j++;
				}
				else
					break;
			}
		}
		for(j=i;j<n;j++)
			ans.push_back(0);
		sum.push_back(ans[0]);
		for(int i=1;i<n;i++)
		{
			sum.push_back(ans[i]+sum[i-1]);
		}
		while(q--)
		{
			ll l,r;
			scanf("%lld %lld",&l,&r);
			l--;r--;
			up=upper_bound(ans.begin()+l,ans.begin()+r,n-r-1,cmp);
			if(up-ans.begin()-1<0)
				printf("0\n");
			else if(sum[up-ans.begin()-1]<=n-r-1)
				printf("0\n");
			else
				printf("%lld\n",sum[up-ans.begin()-1]-(l>=1?sum[l-1]:0)-(up-ans.begin()-l)*(n-r-1));
		}
	}
	return 0;
}