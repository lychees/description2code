#include <bits/stdc++.h>
#define ll long long int
using namespace std;
int main()
{
    int t;
    scanf("%d", &t);
    while(t--)
    {
    	ll n;
    	scanf("%lld", &n);
    	ll p[n];
    	ll root;
    	set<ll> child[n];
    	for(int i = 0; i < n; i++)
    	{
    		scanf("%lld", &p[i]);
			p[i]--;//0-based indexing
			if(p[i] == -1)
				root = i;
			else
				child[p[i]].insert(i);
    	}
    	
    	ll th = 0, tb = 0;
    	
    	ll l = 1;
		queue<ll> q;
		q.push(root);
		while(!q.empty())
		{
			queue<ll> q2;
			do{
				ll node = q.front();
				q.pop();
				th += l * child[node].size();
				set<ll>::iterator it = child[node].begin();
				for( ; it != child[node].end(); ++it)
				{
					ll g = *it;
					q2.push(g);
				}
			}while(!q.empty());
			q = q2;
			l++;
		}
    	tb = n*(n-1)/2 - th;
    	printf("%lld %lld\n", th, tb);
    }
    return 0;
}
