#!/usr/bin/env python

t = raw_input()
t = int(t)

for i in xrange(t):
    n = raw_input()
    n = int(n)
    l = []
    for j in xrange(n):
        r = raw_input()
        r = [ r[k] for k in xrange(len(r)) ]
        l.append(r)
    # l is the array
    h = "HORIZONTAL"
    v = "VERTICAL"
    # Horizontal
    x = 0
    y = n-1
    while y>x:
        if(l[x] != l[y]):
           h = ""
           break
        x = x + 1
        y = y - 1
    # Vertical
    x = 0
    y = n-1
    while y>x:
        for p in xrange(n):
            if l[p][x] != l[p][y]:
                v = ""
                break
        x = x + 1
        y = y - 1
    if v == "VERTICAL" and h == "HORIZONTAL":
        print "BOTH"
    elif v != "VERTICAL" and h != "HORIZONTAL":
        print "NO"
    elif v == "VERTICAL":
        print "VERTICAL"
    elif h == "HORIZONTAL":
        print "HORIZONTAL"

