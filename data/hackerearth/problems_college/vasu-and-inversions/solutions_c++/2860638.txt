#include <bits/stdc++.h>

using namespace std;

int main()
{
	int t;
	cin>>t;
	int n,k;
	//cin>>n>>k;
	while(t--)
	{
		scanf("%d %d",&n,&k);
		
		int count0=0, count1=0;
		int arr;
		for(int i=0;i<n;i++)
		{
			scanf("%d",&arr);
			if(arr==0)
				count0++;
			else
			count1++;
		}
		int ans;
		if(k>=count0)
		{
			k=k-count0;
			if(k%2==1)
			{
				count1--;
				ans=count0+count1;
			}
			else
			{
				ans=count0+count1;
			}
		}
		else
		{
			ans=count1+k;
		}
		printf("%d\n",ans);
			
	}
		
		
	
	return 0;
}