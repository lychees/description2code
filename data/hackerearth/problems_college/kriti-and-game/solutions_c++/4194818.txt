#include<bits/stdc++.h>
using namespace std;
int me[100003];
int she[100002];
int meset[100002];
int sheset[100002];
int main()
{
    me[0]=0;
    she[0]=0;
    int a,b,i,j;
    cin>>a>>b;
    for(i=1;i<=a;i++)
        cin>>sheset[i];
    for(i=1;i<=b;i++)
        cin>>meset[i];
    for(i=1;i<=100000;i++)
    {
        for(j=1;j<=b;j++)
        {
            if(i-meset[j]>=0)
            me[i]=me[i]|(!she[i-meset[j]]);
        }
         for(j=1;j<=a;j++)
        {
            if(i-sheset[j]>=0)
            she[i]=she[i]|(!me[i-sheset[j]]);
        }
    }
   int q;
   cin>>q;
   int num;
   char ch;
   
   while(q--)
   {
       cin>>num;
       cin>>ch;
       if(ch=='S')
       {
           if(me[num]==1)
            cout<<"YES"<<endl;
           else
            cout<<"NO"<<endl;
       }
       else
       {
           if(she[num]==1)
            cout<<"NO"<<endl;
           else
            cout<<"YES"<<endl;

       }
   }

}
