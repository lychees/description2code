#include <bits/stdc++.h>
#define ll long long int
using namespace std;

const ll mod=1000000007;

ll f1 (ll x, ll a, ll b, ll c)
{
	x=(x*a)%mod;
	x=(x*b)%mod;
	x=(x*c)%mod;
	return x;
}

ll f2 (ll x, ll a, ll b)
{
	x=(x*a)%mod;
	x=(x*b)%mod;
	return x;
}


int main()
{
    ll a,b,c,n,i;
    scanf ("%lld %lld %lld",&a,&b,&c);
   	scanf ("%lld",&n);
   	ll s1,s2,mn11,mn12=INT_MAX,mn21,mn22=INT_MAX,idx11,idx12,idx21,idx22;
   	s1=mn11=(a*c)%mod;
   	s2=mn21=(b*c)%mod;
   	idx11=idx21=1;
   	//cout<<mn11<<" "<<mn21<<" "<<idx11<<" "<<idx21<<endl;
   	for (i=2;i<=n;++i)
   	{
   		s1=(f1(s1,a,b,c)+f2(s1,a,b)+f2(s1,a,c))%mod;
   		s2=(f1(s2,a,b,c)+f2(s2,b,a)+f2(s2,b,c))%mod;
   		//cout<<s1<<" "<<s2<<endl;
   		if (mn12==INT_MAX)
   		{
   			if (s1<mn11)
   			{
   				mn12=mn11;
   				idx12=idx11;
   				mn11=s1;
   				idx11=i;
   			}
   			else
   			{
   				mn12=s1;
   				idx12=i;
   			}
   		}
   		else if (s1<mn11)
   		{
   			mn12=mn11;
   			idx12=idx11;
   			mn11=s1;
   			idx11=i;
   		}
   		else if (s1<mn12)
   		{
   			mn12=s1;
   			idx12=i;
   		}
   		if (mn22==INT_MAX)
   		{
   			if (s2<mn21)
   			{
   				mn22=mn21;
   				idx22=idx21;
   				mn21=s2;
   				idx21=i;
   			}
   			else
   			{
   				mn22=s2;
   				idx22=i;
   			}
   		}
   		else if (s2<mn21)
   		{
   			idx22=idx21;
   			mn22=mn21;
   			mn21=s2;
   			idx21=i;
   		}
   		else if (s2<mn22)
   		{
   			mn22=s2;
   			idx22=i;
   		}
   	}
   	ll ans;
   	if (idx11!=idx21)
   		ans=mn11+mn21;
   	else
   		ans=min(mn11+mn22,mn12+mn21);
   	printf ("%lld\n",ans);
    return 0;
}
