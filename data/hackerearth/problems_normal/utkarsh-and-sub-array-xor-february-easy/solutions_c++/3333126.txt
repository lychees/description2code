///Nothing is more intolerable than to have to admit to yourself your own errors
#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
typedef pair<int, int> pii;
typedef vector<int> vi;
 
#define X first
#define Y second
#define rep(i,n) for(ll i=0; i<(n); i++)
#define rep1(i,a,b) for(ll i=a; i<=(b); i++)
#define rep2(i,b,a) for(ll i=b; i>=(a); i--)
#define mem(a,val) memset(a, (val), sizeof a)
#define mp make_pair
#define pb push_back
#define all(c) (c).begin(), (c).end()
#define uni(c) c.resize(distance(c.begin(), unique(all(c))))
#define fix(c,sz_val...) c.clear();c.resize(sz_val);
#define tr(c,it,ctype...) for(ctype::iterator it = c.begin(); it != c.end(); ++it)
#define io ios_base::sync_with_stdio(false);cin.tie(NULL)
#define IO(input_file_name) ifstream cin(input_file_name);ofstream cout("output.txt")
#define print(ans) cout<<"Case #"<<_t<<": "<<ans<<"\n"
const int mod = 1e9 + 7;
///.............................................................................///
ll inv = (mod+1)/2;
map<ll,ll> clr;
 
ll pos(ll n)
{
    if(clr.find(n) == clr.end() || clr[n] == n)
        return n;
    return clr[n] = pos(clr[n]);
}
 
int main()
{
    io;
    ll n, k, u, v;cin>>n>>k;
    
    ll ans(1), pro(2), rem(n);
    while(rem)
    {
        if(rem&1) ans = ans*pro%mod;
        pro = pro*pro%mod;
        rem = rem/2;
    }
    
    while(k--)
    {
        cin>>u>>v;u--;
        if(pos(u) != pos(v))
        {
            ans = ans*inv%mod;
            clr[pos(u)] = pos(v);
        }
        cout<<ans<<endl;
    }
    return 0;
}