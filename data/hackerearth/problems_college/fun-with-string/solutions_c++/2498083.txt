#include <iostream>
#include<string.h>
#include<algorithm>
#include<cctype>
using namespace std;
int num=0,z=0,n=0;

bool cmpp(pair<string,int> a,pair<string,int> b)
{
	if(a.first<b.first)
	return true;
	else if(a.first==b.first)
	{
		if(a.second<b.second)
		return true;
	}
	return false;
}
string s[200000]="",tmp[200000]="";

int main()
{  
	cin >> s[0];

	while(!isdigit(s[z][0]))
	{
		z++;
		cin >> s[z];
	}
	for(int i=0;i<s[z].size();i++)
		n=n*10+(int)(s[z][i]-'0');

	while(n--)
	{
		string ss="";
		cin >> ss >> num;
		if(ss == "Wordrev")
		{
			for(int i=0;i<min(num,z-1);i++)
			{
				int qq=s[i].size();
				for(int j=0;j<s[i].size();j++)
					cout<<s[i][qq-j-1];
				cout<< " ";
			}
			for(int i=min(num,z-1);i<z-1;i++)
				cout<<s[i]<<" ";
			cout<<s[z-1];
			cout<<endl;
		}
		else if(ss == "sortword")
		{
			int st[z+1];
			
			for(int i=0;i<z;i++)
				st[i]=i;
				
			for(int i=0;i<num;i++)
			{
				int ind=i;
				for(int j=i+1;j<z;j++)
				{
					if(s[st[j]]<s[st[ind]])
					{
						ind=j;
					}
				}
				swap(st[i],st[ind]);
			}
			
			for(int i=0;i<z-1;i++)
				cout<<s[st[i]]<<" ";
			cout<<s[st[z-1]]<<endl;
			
			/*vector<pair<string,int> > v;
			for(int i=0;i<z;i++)
			{
				string s1="";
				for(int j=0;j<num;j++)
				{
					char c = s[i][j];
					s1 = s1 + c;
				}
				v.push_back(make_pair(s1,i));
			}
			sort(v.begin(),v.end(),cmpp);
			for(int i=0;i<z-1;i++)	
			cout<<s[v[i].second]<<" ";
			cout<<s[v[z-1].second];
			cout<<endl;*/
		}
		else
		{
			  int nn =s[0].size();
			  int table[nn+1][nn+1];
			  memset(table,0,sizeof(table));
			  
			  for (int i = 0; i < nn; i++) {
			    table[i][i] = 1;
			  }
			  
			  for (int i = 0; i < nn-1; i++) {
			    if (s[0][i] == s[0][i+1]) {
			      table[i][i+1] = 1;
			    }
			  }
			  
			  for (int len = 3; len <= nn; len++) {
			    for (int i = 0; i < nn-len+1; i++) {
			      int j = i+len-1;
			      if (s[0][i] == s[0][j] && table[i+1][j-1]) {
			        table[i][j] = 1;
			      }
			    }
			  }
			  
			  int cnt=0;
			  for(int i=0;i<nn;i++)
			  {
			  	for(int j=i+1;j<nn;j++)
			 	{
			 		if(table[i][j]==1)
			 			cnt++;
			 		if(cnt==num)
			 		{
			 			for(int x=i;x<=j;x++)
			 				cout<<s[0][x];
			 			cout<<endl;
			 			break;
			 		}
			 	}
			 	if(cnt==num)
			 		break;
			  }	
		}
	}
    return 0;
}
