#include <bits/stdc++.h>
std::vector<long long> list[1000000];
bool visit[1000000];
void dfs(long long n);
long  long ans;
int main()
{     
	long long t,n,f,s,i,a,b,q;
    scanf("%lld",&t);
    while(t--){
    	scanf("%lld %lld %lld",&n,&f,&s);
    	for(i=1;i<=n;i++){
    		visit[i]=false;
    		list[i].clear();
    	}
    	for(i=0;i<f;i++){
    		scanf("%lld %lld",&a,&b);
    		list[a].push_back(b);
    	//	list[b].push_back(a);
    	}
    	ans=0;
    	for(i=0;i<s;i++){
    		
       scanf("%lld",&q);
    	if(visit[q]==false)
    	dfs(q);
    	}
    	
    
    	printf("%lld\n",ans);
    }
    return 0;
}
void dfs(long long n)
{
	
	visit[n]=true;
	ans++;
	for(int i=0;i<list[n].size();i++){
		if(visit[list[n][i]]==false){
			dfs(list[n][i]);
		}
		}}
