#include <iostream>
#include<algorithm>
#include<limits.h>
using namespace std;
 
int main() {
	int t,n,m,a,h,s;
	cin>>t;
	while(t--)
	{
		
		cin>>n>>m;
	
		int mat[n][n];
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				mat[i][j]=1000000;
			}
			mat[i][i]=0;
		}
		for(int i=0;i<m;i++)
		{
			int x,y,w;
			
			cin>>x>>y>>w;
		
			x--;y--;
			if(mat[x][y]>w)
			{	mat[x][y]=w;
			mat[y][x]=w;
			}
		}
		cin>>s>>a>>h;
		s--;a--;h--;
		for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				for(int k=0;k<n;k++)
				{
					mat[j][k]=min(mat[j][k],mat[j][i]+mat[i][k]);
				}
			}
		}
	/*	for(int i=0;i<n;i++)
		{
			for(int j=0;j<n;j++)
			{
				cout<<mat[i][j]<<" ";
			}
			cout<<endl;
		}*/
		int ans=0;
	
		for(int i=0;i<n;i++)
		{
			if(i==s||i==a||i==h)
				continue;
			ans=max(ans,mat[s][i]+mat[i][a]+mat[a][i]+mat[i][h]);
		}
		cout<<ans<<endl;
	}
	return 0;
}