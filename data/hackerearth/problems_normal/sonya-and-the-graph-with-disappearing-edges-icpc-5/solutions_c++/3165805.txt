#include<bits/stdc++.h>
#define ll long  
#define maxe 100009
#define INF 1e16
#define si(x) scanf("%d",&x);
#define sl(x) scanf("%ld",&x);
#define sll(x) scanf("%lld",&x);
#define ss(x) scanf("%s",x);
#define iter(i,a,b) for(int i=a; i<b; i++)
#define mp make_pair 
#define pb push_back 
#define max(a,b) a>b?a:b
#define min(a,b) a<b?a:b
//#define pop pop_back 
#define mod 1000000007
using namespace std;
vector< pair<int,int> > vec[maxe];
queue< pair<int,int> >que;
int main()
{
	//printf("fuck");
	int n,m,k,u,v;
	scanf("%d %d %d",&n,&m,&k);
	if(n==1)
	{
		printf("0\n");
		return 0;
	}
	int has[m];
	iter(i,0,m)
	{
		scanf("%d %d",&u,&v);
		vec[u].pb(mp(v,i));
		vec[v].pb(mp(u,i));
		has[i]=maxe;
	}
	int t,x,y;
	iter(i,0,k)
	{
		scanf("%d %d",&t,&x);
		has[x-1]=t;
	}
	pair<int,int> xy,uv;
	que.push(mp(1,0));
	bool vis[n+1];
	iter(i,0,n+1)
		vis[i]=false;
	int ans,fg=0;
	vis[1]=true;
	while(!que.empty())
	{
		//printf("fucker\n");
		xy=que.front();
		x=xy.first;
		y=xy.second;
		que.pop();
		iter(i,0,vec[x].size())
		{
			uv=vec[x][i];
			u=uv.first;
			v=uv.second;
			//printf("%d %d %d\n",u,v,has[v]);
			if(vis[u]==false && has[v]>=y+1)
			{
				if(u==n)
				{
					fg=1;
					ans=y+1;
					break;
				}
				vis[u]=true;
				que.push(mp(u,y+1));
				//printf("%d %d\n",u,y+1);
			}
		}
		if(fg==1)
			break;
	}
	if(fg==0)
		printf("-1\n");
	else
		printf("%d\n",ans);
	return 0;
}