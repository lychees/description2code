#include <bits/stdc++.h>

using namespace std;

#define bug() printf("BUG\n")
#define bug1(n) printf("bg1 %d\n",n)
#define bug2(a,b) printf("bg2 %d %d\n",a,b)
#define MOD 1000000007
#define ll long long
#define vi vector< int >
#define vll vector< long long >
#define vvi vector< vector< int > >
#define vvll vector< vector< long long > >
#define pi pair< int, int >
#define pll pair< long long, long long >
#define vpi vector< pair< int, int > >
#define vpll vector< pair< long long, long long > >
#define pb(n) push_back(n)
#define mp(a,b) make_pair(a,b)
#define printA(a,n) for(int i = 0;i < n;++i) cout<<a[i]<<" "; cout<<endl;

int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		int n,k;
		scanf("%d %d",&n,&k);
		int a[n];
		int cnt = 0;
		for (int i = 0; i < n; ++i)
		{
			scanf("%d",&a[i]);
			if(a[i] == 1)
				cnt++;
		}
		if(cnt+k <= n)
		{
			printf("%d\n", cnt+k);
		}
		else
		{
			int n1 = cnt+k-n;
			if(n1%2 == 0)
				printf("%d\n", n);
			else
				printf("%d\n", n-1);
		}
	}
	return 0;
}