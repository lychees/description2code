#include <bits/stdc++.h>
#define INF INT_MAX
using namespace std;
map<string, int > st_ind;
int a[101][101];
int main(){
int n, m, q, w;
string s, sx, sy;
scanf("%d %d", &n, &m);
for(int i=1; i<=n; i++){
	cin>>s;
	st_ind[s]=i;
}
for(int i=0; i<=n; i++){
	for(int j=0; j<=n; j++){
		a[i][j]=INF;
		if(i==j){a[i][j]=0;}
	}
}
for(int i=1; i<=m; i++){
	cin>>sx>>sy>>w;
	a[st_ind[sx]][st_ind[sy]]=w;
	a[st_ind[sy]][st_ind[sx]]=w;
}
///compute shortest path
for(int k=1; k<=n; k++){
	for(int i=1; i<=n; i++){
		for(int j=1; j<=n; j++){
			if(a[i][k]!=INF && a[k][j] !=INF && a[i][j] > a[i][k]+a[k][j]){
				a[i][j]=min(a[i][j], a[i][k]+a[k][j]);
			}
		}
	}
}
scanf("%d", &q);
for(int i=1; i<=q; i++){
	cin>>sx>>sy;
	cout<<a[st_ind[sx]][st_ind[sy]]<<endl;
}
}
