def getBits(a):
	count = 0
	while(a != 0):
		if a & 1:
			count += 1
		a = a>>1
	return count

testCases = int(raw_input())
for i in range(testCases):
	n,k = map(int,raw_input().split(" "))
	l = map(int,raw_input().split(" "))
	bits = []
	for j in range(n):
		bits.append(getBits(l[j]))
	bits.sort()
	cakes = 0
	for x in range(k):
		cakes += max(bits[:len(bits)-x])
	
	print(cakes)
		
