#include <bits/stdc++.h>

using namespace std;

#define pb push_back
#define mp make_pair
#define REP(i, n) for (int i = 0; i < (int)(n); ++i)
typedef long long LL;
typedef pair<int, int> PII;

int tt, n;
int a[100000];

int main() {
    scanf("%d", &tt);
    REP(test, tt) {
        scanf("%d", &n);
        REP(i, n) scanf("%d", a + i);
        if (n == 1) {
            printf("1\n");
            continue;
        }
        int f, ans = n;
        if (a[0] < a[1]) f = -1;
        else if (a[0] == a[1]) f = 0;
        else f = 1;
        for (int i = 2; i < n; ++i) {
            int cur;
            if (a[i - 1] < a[i]) cur = -1;
            else if (a[i - 1] == a[i]) cur = 0;
            else cur = 1;
            if (cur == f && cur != 0) --ans;
            if (cur == 0) f *= -1;
            else f = cur;
        }
        printf("%d\n", ans);
    }
    return 0;
}
