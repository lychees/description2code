#include <iostream>
#include<bits/stdc++.h>
using namespace std;
int parent[100001];
int find(int x)
{
	if(parent[x]==x)
	return x;
	return parent[x]=find(parent[x]);
}	


int main()
{
	int i,n,q,type,x,y,xp,yp;
	cin>>n>>q;
	for(i=1;i<=n;i++)
	parent[i]=i;
	while(q--)
	{
		cin>>type;
		if(type==1)
		{
			cin>>x>>y;
			xp=find(x);
			yp=find(y);
			parent[xp]=yp;
		}
		else if(type==2)
		{
			cin>>x;
			xp=find(x);
			parent[xp]=x;
			parent[x]=x;
		}
		else
		{
			cin>>x;
			cout<<find(x)<<endl;
		}
	}
	return 0;
}