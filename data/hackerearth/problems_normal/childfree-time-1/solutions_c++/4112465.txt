#include<cstdio>
#include<cstdlib>
#include<vector>
#include<queue>
#define Maxn 1000010

using namespace std;

vector< pair<int, int> > sai[Maxn];
int entra[Maxn];
long long int peso[Maxn];
queue <int> room;

long long int resp=0;

void topo(){
    while(room.size()!=0){
        int p=room.front();

        for(int i=0;i < sai[p].size();i++){
            if(peso[sai[p][i].second]<peso[p]+sai[p][i].first){
                peso[sai[p][i].second] = peso[p]+sai[p][i].first;
            }
            entra[sai[p][i].second]--;
            if(entra[sai[p][i].second]==0)
                room.push(sai[p][i].second);
        }

        room.pop();
    }


}

int main(){
    int n, m;
    scanf("%d %d", &n, &m);
    for(int i = 0;i < m; i++){
        int x, y, t;
        scanf("%d %d %d", &x, &y, &t);
        sai[x].push_back(make_pair(t+2, y));
        entra[y]++;
    }

    for(int i = 1;i <= n; i++){

        if(entra[i]==0)
            room.push(i);
    }

    topo();

    for(int i = 1;i <= n; i++){
        if(peso[i]>resp)
            resp=peso[i];
    }

    printf("%lld\n", resp);
}
