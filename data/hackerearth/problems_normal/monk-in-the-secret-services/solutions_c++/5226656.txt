#include <iostream>
#include <stdio.h>
using namespace std;
#define inp(n)  scanf("%d",&n)
#define INF 1<<15
int N,M,S,A,H;
int g[110][110];

int main()
{
    int t; 
    inp(t);
    while(t--){
    	inp(N);
    	inp(M);

    for(int i=0;i<=N;i++){
    	for (int j = 0; j <=N; ++j)
    	{
    		/* code */
    		if(i==j) g[i][j]=0;
    		g[i][j]=INF;

    	}
    }
    int a,b,c;
    for (int i = 0; i < M; ++i)
    {
    	inp(a); inp(b);inp(c);
    	g[a][b]=min(g[a][b],c); 
    	g[b][a]=min(g[b][a],c);
    }
    inp(S);inp(A); inp(H);

    for(int k=1;k<=N;k++)
        {
        for(int i=1;i<=N;i++)
        {
            for(int j=1;j<=N;j++)
                {
                if (g[i][k] + g[k][j] < g[i][j])
                    g[i][j] = g[i][k] + g[k][j];
            }
        }
    }
    int p=0;
    for(int i=1;i<=N;i++){
    	if(i!=A && i!=S && i!=H){
    		p=max(g[S][i]+2*g[i][A]+g[i][H],p);
    	}
    }
    printf("%d\n", p);
 }
	return 0;
}
