#include <iostream>
#include<limits.h>
#include<algorithm>
#define ull unsigned long long
using namespace std;

int main()
{
    ull a,b,c,n,i;
    cin>>a>>b>>c>>n;
    ull arr[n],brr[n];
    
    arr[0] = ((a%1000000007) * (c%1000000007))%1000000007;
	for(i=1 ; i<n ; i++)
	{
	    arr[i] = ((arr[i-1] % 1000000007) * (a % 1000000007))%1000000007;
		ull rhs = ((b%1000000007) * (c%1000000007))%1000000007;
		rhs = (rhs + (b%1000000007) + (c%1000000007))%1000000007;
		arr[i] = (arr[i] * rhs)%1000000007;
	}

	brr[0] = ((b%1000000007) * (c%1000000007))%1000000007;
	for(i=1 ; i<n ; i++)
	{
	   brr[i] = ((brr[i-1] % 1000000007) * (b % 1000000007))%1000000007;
		ull rhs = ((a%1000000007) * (c%1000000007))%1000000007;
		rhs = (rhs + (a%1000000007) + (c%1000000007))%1000000007;
		brr[i] = (brr[i] * rhs)%1000000007;
	}
	
	ull a1 = INT_MAX,a2 = INT_MAX,pos1;
	for(i=0;i<n;i++)
	{
		if(arr[i]<a1)
		{
			a2 = a1;
			a1 = arr[i];
			pos1 = i;
		}
		else if(arr[i]<a2)
		{
			a2 = arr[i];
		}
	}
	 

	
	ull b1 = INT_MAX,b2 = INT_MAX,p1;
	for(i=0;i<n;i++)
	{
		if(brr[i]<b1)
		{
			b2 = b1;
			b1 = brr[i];
			p1 = i;
		}
		else if(brr[i]<b2)
		{
			b2 = brr[i];
		}
	}
	

	
	if(pos1 != p1)
	{
		cout<<a1+b1;
	}
	else
	{
		if(a1+b2  > a2+b1) 
		{
			cout<<a2+b1;
		}
		else
		{
			cout<<a1+b2;
		}
	}

    return 0;
}