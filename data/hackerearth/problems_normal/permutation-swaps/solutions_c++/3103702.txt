#include <cstdlib>
#include <cstdio>
#include <algorithm>
#include <vector>
#include <queue>
#include <cmath>
#include <stack>
#include <map>
#include <set>
#include <deque>
#include <cstring>
#include <functional>
#include <climits>
#include <list>
#include <ctime>
#include <complex>
 
#define F1(x,y,z) for(int x=y;x<z;x++)
#define F2(x,y,z) for(int x=y;x<=z;x++)
#define F3(x,y,z) for(int x=y;x>z;x--)
#define F4(x,y,z) for(int x=y;x>=z;x--)
#define pb push_back
#define LL long long
#define co complex<double>
 
#define MAX 100005
#define AMAX 1500
#define MOD ((LL)1000000007)

#define f(c,d) ((1<<(c))*(d))

using namespace std;

int t,n,m,ta,tb,x[MAX],y[MAX],par[MAX];
vector<int> za[MAX],zb[MAX];
bool ok;

int find(int a){
	if(par[a]==a)return a;
	return par[a]=find(par[a]);
}

int main(){
	scanf("%d",&t);
	while(t--){
		scanf("%d%d",&n,&m);
		F1(a,0,n)scanf("%d",&x[a]);
		F1(a,0,n)scanf("%d",&y[a]);
		F1(a,0,n){
			par[a]=a;
			za[a].clear();
			zb[a].clear();
		}
		while(m--){
			scanf("%d%d",&ta,&tb);
			par[find(ta-1)]=find(tb-1);
		}
		F1(a,0,n){
			find(a);
			za[par[a]].pb(x[a]);
			zb[par[a]].pb(y[a]);
		}
		F1(a,0,n){
			sort(za[a].begin(),za[a].end());
			sort(zb[a].begin(),zb[a].end());
		}
		ok=1;
		F1(a,0,n)if(za[a]!=zb[a])ok=0;
		printf(ok?"YES\n":"NO\n");
	}
	//system("pause");
	return 0;
}
