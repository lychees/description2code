#include <iostream>
#include<algorithm>
using namespace std;
int CountOnes(int n)
{
	int c=0;
	while(n)
	{ n&=(n-1); c++;
	}
	return c;
}
int main()
{
    //cout << "Hello World!" << endl;
   int t;
   cin>>t;
   while(t--)
   {
   	int n,k;
   	long globalCount=0;
   	cin>>n>>k;
   	int arr[n],countArr[n];
   		for(int i=0;i<n;i++)
   		countArr[i]=0;
   	for(int i=0;i<n;i++)
   	  cin>>arr[i];
   	//sort(arr,arr+n);
  	for(int i=0;i<n;i++)
   	 { countArr[i]=CountOnes(arr[i]); }
   	  sort(countArr,countArr+n);
   	  for(int i=n-1,c=1;c<=k;c++,i--)
   	     globalCount+=countArr[i];
   	  cout<<globalCount<<endl;
   	
   	
   }
    return 0;
}
