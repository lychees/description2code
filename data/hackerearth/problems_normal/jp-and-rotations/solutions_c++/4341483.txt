#include <iostream>
#include <stdio.h>
#include <stdlib.h>
using namespace std;

int isRotatable(int* A,int* T,int n);
int main()
{
	int n,m,i;
	scanf("%d %d",&n,&m);
	int* A=new int[n];
	int* T=new int[n];
	for(i=0;i<n;++i){
		scanf("%d",&A[i]);
	}
	for(i=0;i<n;++i){
		scanf("%d",&T[i]);
	}
	int rotatedBy=isRotatable(A,T,n);
	// cout<<rotatedBy<<endl;
	if(rotatedBy!=-1){
		char* ops=new char[m];
		int* x=new int[m];
		int shifts=0;
		for(i=0;i<m;++i){
			cin>>ops[i]>>x[i];
			if(ops[i]=='R'){
				shifts=(shifts%n)+(x[i]%n);
			}else if(ops[i]=='L'){
				shifts=(shifts%n)+(n-x[i]%n);
			}
			
			if(shifts%n==rotatedBy){
				printf("%d",i+1);
				return 0;
			}
		}
		
		
	}
	printf("%d",-1);
	
	return 0;
}

int isRotatable(int* A,int* T,int n){
	int rotatedBy=-1;
	for(int i=0;i<n;++i){
		if(T[i]==A[0]){
			rotatedBy=i;
			for(int j=(i+1)%n,k=1;k<n;j=(j+1)%n,++k){
				if(A[k]!=T[j]){
					break;
				}
			}
			return rotatedBy;
		}
		
	}
	return rotatedBy;
}