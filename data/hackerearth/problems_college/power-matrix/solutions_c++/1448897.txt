#include <bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define ll long long
int m,n;
ll a[100][100];
void power()
{
	ll x[m][m];
	ll y[m][m];
	for(int i = 0;i<m;i++){
		for(int j = 0;j<m;j++){
			x[i][j] = 0;
			y[i][j] = a[i][j];
		}
		x[i][i] = 1;
	}
	ll c[m][m];
	while(n){
		if(n&1){
			memset(c,0,sizeof c);
			for(int i = 0;i<m;i++){
				for(int j = 0;j<m;j++){
					for(int k = 0;k<m;k++){
						c[i][j] = (c[i][j]+x[i][k]*y[k][j])%mod;
					}
				}
			}
			for(int i = 0;i<m;i++){
				for(int j = 0;j<m;j++){
					x[i][j] = c[i][j];
				}
			}
		}
			memset(c,0,sizeof c);
			for(int i = 0;i<m;i++){
				for(int j = 0;j<m;j++){
					for(int k = 0;k<m;k++){
						c[i][j] = (c[i][j]+y[i][k]*y[k][j])%mod;
					}
				}
			}
			for(int i = 0;i<m;i++){
				for(int j = 0;j<m;j++){
					y[i][j] = c[i][j];
				}
			}
			n=n/2;
		}
		for(int i = 0;i<m;i++){
			for(int j = 0;j<m;j++){
				cout<<x[i][j]<<" ";
			}
			cout<<endl;
		}
	}
int main()
{
	int test;
	scanf("%d",&test);
	while(test--){
		scanf("%d %d",&m,&n);
		for(int i = 0;i<m;i++){
			for(int j = 0;j<m;j++){
				scanf("%lld",&a[i][j]);
			}
		}
		power();
	}
}