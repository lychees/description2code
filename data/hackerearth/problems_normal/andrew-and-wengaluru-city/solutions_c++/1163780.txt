#include<stdio.h>
#include<iostream>
#include<stack>
using namespace std;



int solve()
{
	long long int n,i,sum=0,x,mi,ma;
	cin >> n;
	int A[n], B[n],C[n];
	for(i=0;i<n;i++)
	{
		cin >> A[i];
		B[i] = C[i] = A[i];
	}
	
	for(i=1;i<n;i++)
	{
		if(B[i] < B[i-1])
			B[i] = B[i-1];
	}
	for(i=n-2;i>=0;i--)
	{
		if(C[i] < C[i+1])
			C[i] = C[i+1];
	}
	for(i=0;i<n;i++)
	{
		//cout << B[i] << " ";
	}
	//cout <<endl;
	for(i=0;i<n;i++)
	{
		//cout << C[i] << " ";
	}
	//cout <<endl;
	for(i=0;i<n;i++)
	{
		if(min(C[i],B[i]) > A[i])
			sum += min(B[i],C[i]) - A[i];
		else	continue;
		sum = sum % 1000000007;
	}
	cout << sum <<endl;
	return 0;		
}


int main()
{
	int n;
	cin >> n;
	while(n--)
	{
		solve();
	}
}