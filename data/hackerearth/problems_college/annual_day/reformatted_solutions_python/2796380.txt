def c(n):
    count = 0
    while (n):
        count += n & 1
        n >>= 1
    return count


t = int(raw_input())
while (t > 0):
    n, k = map(int, raw_input().split(' '))
    l = map(int, raw_input().split(' '))
    ll = []
    for ch in l:
        ll.append(c(ch))
    ll = sorted(ll)
    i = n-1
    sum = 0
    while (i >= 0 and k > 0):
        sum += ll[i]
        i -= 1
        k -= 1
    print sum
    t -= 1
