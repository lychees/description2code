#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
typedef pair<int,int> ii;
typedef vector<int> vi;
typedef vector<ii> vii;

const int  MOD=1000000007;
const int  INF= int(1e9);
const int  MAX=1000007;
ll r,p;
vector< pair<ll,ll> > pred[MAX];
vi g[MAX];
vi topOrder;
int visited[MAX];
ll dp[MAX];
void dfs(int x) {
    if(visited[x]) {
        return ;
    }
    visited[x]=1;
    for(int u : g[x]) {
        dfs(u);
    }
    topOrder.push_back(x);
}

int main()
{
	ios_base::sync_with_stdio(false);
    cin>>r>>p;
    for(int i=0;i<p;i++) {
        int u,v,t;
        cin>>u>>v>>t;
        u--;
        v--;
        g[u].push_back(v);
        pred[v].push_back(make_pair(u,t));
    }
    for(int i=0;i<r;i++) {
        if(!visited[i]) {
            dfs(i);
        }
    }
    reverse(topOrder.begin(),topOrder.end());
    ll res=0;
    for(int i=0;i<r;i++ ) {
        int v=topOrder[i];
        for(ii edge : pred[v]) {
            int u = edge.first;
            int t = edge.second;
            dp[v] =max(dp[v],dp[u]+2+t);
        }
        res=max(res,dp[v]);
    }

    cout<<res<<"\n";


	return 0;

}
