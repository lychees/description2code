#include <bits/stdc++.h>
using namespace std;

vector<int> adj[1000001];
int heightOf[1000001];

void dfs(int at, int height){
	vector<int>::iterator it;
	heightOf[at] = height;

	it = adj[at].begin();

	while(it!=adj[at].end()){
		dfs(*it, height + 1);
		it++;
	}

	return;
}

int main(){
	int t, n;
	scanf("%d", &t);

	while(t--){
		int root, i, par;
		scanf("%d", &n);

		i = 1;

		while(i<=n){
			adj[i].clear();
			i++;
		}

		i = 1;
		while(i<=n){
			scanf("%d", &par);
			if(par==0)
				root = i;
			else
				adj[par].push_back(i);
			i++;
		}

		dfs(root, 0);

		i=1;
		long long sumOfHeights = 0, total = (long long)n*(n-1);

		total /= 2;

		while(i<=n){
			sumOfHeights += (long long)heightOf[i];
			i++;
		}

		printf("%lld %lld\n", sumOfHeights, total - sumOfHeights);
	}
	return 0;
}