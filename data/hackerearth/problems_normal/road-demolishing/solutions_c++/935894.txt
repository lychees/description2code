#include<bits/stdc++.h>
#include<cstdio>
#include<iostream>
#include<algorithm>
#include<cmath>
#include<queue>
#include<set>
#include<map>
#include<cstring>
#define rep(i,n) for(int i=0;i<n;i++)
#define foru(i,l,r) for(int i=l;i<=r;i++)
#define ford(i,r,l) for(int i=r;i>=l;i--)
typedef long long ll;
using namespace std;

int main(){
//    freopen("test.inp","r",stdin);
	int t;
	ll n,q;
	scanf("%d",&t);
	while(t--){
		cin>>n>>q;
//		n=rand()*rand()%1000000+1;q=rand()*rand()%n+1;
		if (q==1){
			printf("0\n");
			continue;
		}
		int k1=n/(q-1),k2=n%(q-1);
		long long t1=1ll*(q-1-k2)*k1*(k1-1)/2;
//		cout<<t1;
		long long t2=1ll*k2*k1*(k1+1)/2;
		printf("%lld\n",t1+t2);

	}
}
