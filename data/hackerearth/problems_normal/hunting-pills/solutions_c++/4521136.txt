#include <bits/stdc++.h>

#define ss(n) scanf("%d", &n)
#define pb push_back
using namespace std;
void topoSort(int s, stack<int> &St, vector<vector<int> > &adj, bool visited[])
{
    visited[s]=1;
    int i, x;
    for(i=0;i<adj[s].size();i++)
    {
        x=adj[s][i];
        if(!visited[x])
        topoSort(x, St, adj, visited);
    }
    St.push(s);

}
void dfs(int s, vector<vector<int> > &adj, bool visited[], int &cnt, int pills[])
{
    visited[s]=1;
    //cout<<s<<"#"<<endl;
    cnt+=pills[s];
    int i, x;
    for(i=0;i<adj[s].size();i++)
    {
        x=adj[s][i];
        if(!visited[x])
        dfs(x, adj, visited, cnt, pills);
    }
}
int main()
{
    stack<int> St;
    bool visited[101];
    int pills[101];
    int n, m, x, y, i, t, cnt, mcnt;
    ss(t);
    while(t--)
    {
        ss(n);ss(m);
        vector<vector<int> > adj(n), radj(n);
        for(i=0;i<n;i++)
            ss(pills[i]);
        for(i=0;i<n;i++)
            visited[i]=false;
        for(i=0;i<m;i++)
        {
            ss(x);ss(y);
            adj[x].pb(y);
            radj[y].pb(x);
        }
        for(i=0;i<n;i++)
            if(!visited[i])
            topoSort(i, St, adj, visited);
        mcnt=0;
        for(i=0;i<n;i++)
            visited[i]=0;
        while(!St.empty())
        {
            x=St.top();
      //      cout<<x<<"##"<<endl;
            St.pop();
            cnt=0;
            if(!visited[x])
            dfs(x, radj, visited, cnt, pills);
            mcnt=max(mcnt, cnt);
        }
        cout<<mcnt<<endl;
    }
}
