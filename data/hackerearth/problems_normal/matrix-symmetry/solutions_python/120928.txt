c=int(raw_input())
while c!=0:
	n=int(raw_input())
	l=[]
	for i in range(n):
		k=raw_input()
		l.append(k)
	t=[list(i) for i in zip(*l)]
	h=True
	v=True
	for i in range(0,n//2):
		if h==True:
			if l[i]!=l[n-i-1]:
				h=False
		if v==True:
			if t[i]!=t[n-i-1]:
				v=False
	if h==True and v==True:
		print "BOTH"
	elif h==True:
		print "HORIZONTAL"
	elif v==True:
		print "VERTICAL"
	else:
		print "NO"
	c-=1