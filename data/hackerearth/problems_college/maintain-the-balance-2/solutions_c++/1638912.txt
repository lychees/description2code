#include <iostream>
#include <bits/stdc++.h>
using namespace std;

int main() {
	// your code goes here
	
	int t;
	cin>>t;
	while(t--)
	{
		char ch;
		int cnt=0,last=0,cnt2=0;
			while(1){
				cin>>ch;
				if(ch=='.')break;
				if(ch==' ')continue;
				else if(ch=='{')last++;
				else last--;
				if(last<0){
					cnt++;
					last=1;
				}
				cnt2++;
			}
			if(cnt2&1)cout<<"-1\n";
			else cout<<cnt+last/2<<endl;
	}
	
	return 0;
}