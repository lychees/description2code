def cadd(m):
    sum = (1 + m) * m / 2
    return sum


T = raw_input("")
for i in range(int(T)):
    N = raw_input("")
    string = raw_input("")
    a = []
    l = 0
    count = 0
    for j in range(len(string) - 1):
        if string[j] > string[j + 1]:
            a.append(string[l: j + 1])
            l = j + 1
    a.append(string[l:])
    for m in a:
        count += cadd(len(m))
    print(count)
