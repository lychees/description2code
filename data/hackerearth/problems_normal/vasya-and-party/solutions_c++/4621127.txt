#include<bits/stdc++.h>
using namespace std;
#define s(x) scanf("%d",&x);
#define sl(x) scanf("%lld",&x);
#define p(x) printf("%d",x);
#define pl(x) printf("%lld",x);
#define fr(i,a,n) for(i=a;i<n;i++)
#define ln() printf("\n");
typedef long long ll;
ll mod=1000000007;
ll visited[1000069]={0},maxx=0,cnt=0,a[100069];
vector<int> adj[100069];
void dfs(int x)
{
    visited[x]=1;
    int i;
    if(maxx==a[x])
        cnt++;
    else if(maxx<a[x])
    {
        maxx=a[x];
        cnt=1;
    }
    for(i=0;i!=adj[x].size();i++)
    {
        if(visited[adj[x][i]]==0)
        {
            dfs(adj[x][i]);
        }
    }
}
int main()
{
    ll n,ans=1,m,i,j,x,y;
    sl(n)sl(m);
    for(i=1;i<=n;i++)
    {
        sl(a[i]);
    }
    while(m--)
    {
        sl(x)sl(y);
        adj[x].push_back(y);
        adj[y].push_back(x);
    }
    for(i=1;i<=n;i++)
    {
        if(visited[i]==0)
        {
            dfs(i);
            ans=(ans*cnt)%mod;
            maxx=0,cnt=0;
        }
    }
    pl(ans);
    ln();
    return 0;
}
