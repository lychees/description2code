#include <bits/stdc++.h>
#define fi "b.inp"
#define fo "b.out"
#define For(i,a,b) for(int i=a;i<=b;i++)
#define Ford(i,a,b) for(int i=a;i>=b;i--)
using namespace std;
const int inf = 1000000000;
int n,mark[2000001],f[501][501],Next[2000001],last,Next1[2000001],a[10000],pre[2000001];
int cal(int x,int y)
{
    int ans1,ans2;
    int u,v,t;
    u = a[x];
    v = a[y];
    t = Next1[u];
//    cout<<u<<" "<<v<<" "<<t<<" "<<Next[t]endl;
    if (Next[t]<v) ans1 = inf;
    else ans1 =  t-u+Next[t]-v;
    t = Next1[v];
    if (pre[t]<u) ans2 = inf;
    else ans2 = t-v+pre[t]-u;
//    cout<<ans1<<" "<<ans2<<endl;
    return min(ans1,ans2);
}
int main()
{
    
    scanf("%d", &n);
    For(i,2,2000)
    if (!mark[i])
    {
        for(int j=i*i;j<=2000000;j+=i)
        {
            mark[j] = 1;
        }
    }
    last = 2;
    For(i,3,2000000) if (!mark[i])
    {
        Next[last] = i;
        pre[i] = last;
        last = i;
    }
    last = 0;
    last = 0;
    For(i,2,2000000)
    {
        if (!mark[i])
        {
            For(j,last+1,i) Next1[j] = i;
            last = i;
        }
    }
    For(i,1,n) scanf("%d", &a[i]);
//    cout<<cal(1,4)<<endl;
//    return 0;
    For(i,1,n)
    {
        For(j,1,n) f[i][j] = inf;
    }
    Ford(i,n,1)
    {
        for(int j = i+1;j<=n;j+=2)
        {
            if (j==i+1)
                {
                    f[i][j] = cal(i,j)+1;
                }
            else
            {
                f[i][j] = cal(i,j)+1+f[i+1][j-1];
                for(int k=i+1;k<=n;k+=2)
                {
                    f[i][j] = min(f[i][j],f[i][k]+f[k+1][j]);
                }
            }
        }
    }
//    cout<<f[2][3]<<endl;
    cout<<f[1][n];
    return 0;
}
