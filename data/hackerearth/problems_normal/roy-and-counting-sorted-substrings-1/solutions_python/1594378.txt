import sys
inp = sys.stdin.readline

def main():
    t = int(inp())
    for test in range(t):
        n = int(inp())
        s = list(inp().strip())

        count = len(s)
        cont = 0

        for i in range(len(s)-1):
            if s[i] <= s[i+1]:
                cont += 1
            else:
                count += (cont*(cont+1))/2
                cont = 0
        
        if cont > 0:
            count += (cont*(cont+1))/2

        print count

if __name__ == "__main__":
    main()