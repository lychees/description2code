#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<cstring>
#include<string>
using namespace std;
const int inf=1e9+9;
const int maxn=2*1e5+5;
int asc[maxn];
int desc[maxn];
int dp[maxn];
int main() {
    int t;
    scanf("%d",&t);
    while(t--) {
        int n,l;
        memset(asc,0,sizeof(asc));
        memset(desc,0,sizeof(desc));
        memset(dp,127,sizeof(dp));
        scanf("%d%d",&n,&l);
        for(int i=0;i<l;i++) {
            int bottom,up;
            scanf("%d%d",&bottom,&up);
            asc[bottom]=up;
            desc[up]=bottom;
        }
        dp[1]=0;
        for(int i=2;i<=n;i++) {
            if(desc[i]) dp[i]=dp[desc[i]];
            int min=dp[i]-1;
            for(int j=2;j<=12&&i-j>=1;j++) {
                if(asc[i-j]==0&&dp[i-j]<min) min=dp[i-j];
            }
            dp[i]=min+1;
        }
        printf("%d\012",dp[n]);
    }
    return 0;
}
