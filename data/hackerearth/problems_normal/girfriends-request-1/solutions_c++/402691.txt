#include <bits/stdc++.h>

using namespace std;

int N, A[2000];
int ans[2000][2000];

void solve(int idx){
	priority_queue<int,vector<int>,less<int> > Q1;
 	priority_queue<int,vector<int>,greater<int> > Q2;
 	Q1.push(A[idx]);
 	ans[idx][idx] = A[idx];
	for(int i=idx+1;i<N;++i){
		int x = Q1.top(), y = A[i];
		if((i-idx)&1) {
			   if(y>=x) { Q2.push(y);}
			   else { Q1.push(y); Q2.push(Q1.top()); Q1.pop();  }
			}
		else {
			if(y<=x) { Q1.push(y); }
			else { Q2.push(y); Q1.push(Q2.top()); Q2.pop();  }
			}
		ans[idx][i] = Q1.top();
	}
	while(!Q1.empty()){
		Q1.pop();
	}
	while(!Q2.empty()){
		Q2.pop();
	}
}

int main()
{
	int Q ;
	scanf("%d",&N);
	for(int i=0;i<N;++i)
		scanf("%d",A+i);
	for(int i=0;i<N;++i)
		solve(i);
	scanf("%d",&Q);
	while(Q--){
		int l, r;
		scanf("%d %d",&l,&r);
		l--, r--;
		printf("%d\n",ans[l][r]);
	}
	
	return 0;
}