#include <bits/stdc++.h>
using namespace std;

int main()
{
    int t,temp;
    cin>>t;
    string s;
    while(t--){
    	stack <int> stk;
    	cin>>s;
    	vector <int> v;
    	for(int i=s.length()-1;i>=0;i--){
            if(s[i]=='X'){
                cin>>temp;
                v.push_back(temp);
            }
    	}

		sort(v.rbegin(),v.rend());
		
        for(int i=s.length()-1;i>=0;i--){
            if(s[i]=='X'){
                stk.push(1);
            }else{
                int r1 = stk.top();  stk.pop();
                int r2 = stk.top();  stk.pop();
                if(s[i]=='A')   stk.push(r1+r2);
                else stk.push((r1>r2)?r1:r2);
            }
    	}
    	
    	int sum=0;
    	for(int i=0;i<stk.top();i++)
    		sum+=v[i];
    		
    	stk.pop();
    	cout<<sum<<endl;
    }
    return 0;
}
