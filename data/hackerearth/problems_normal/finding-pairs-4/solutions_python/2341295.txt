import math

T = int(raw_input())
for i in range(0,T):
	
	N = int(raw_input())
	A = map(int,raw_input().split())
	
	ans = N
	A.sort()
	cnt = 1
	for j in range(1,N):	
		if A[j]==A[j-1]:
			
			cnt+=1
		elif A[j]-A[j-1]!=0 and cnt>1:
			
			ans+=math.factorial(cnt)/(2*math.factorial(cnt-2))
			cnt = 1
		if j==N-1 and cnt>1:
			
			ans+=math.factorial(cnt)/(2*math.factorial(cnt-2))
		
	print ans
	
