#include <iostream>
#include <vector>
using namespace std;

int main()
{int n;
long long t;
cin>>n>>t;

vector<int> period(n+1,0);
    int A[n+1],P[n+1];
    for(int i = 1;i<=n;i++)
    {cin>>A[i];}
    for(int i = 1;i<=n;i++)
    {cin>>P[i];
   }
   vector <bool> done(n+1,0);
   vector<int> answer(n+1,0);
    for(int i = 1;i<=n;i++)
    {if(!done[i]){
    	done[i] = 1;
    
    	int j = i;
    	vector<bool> use(n+1,0);
    	vector<int> ans(n+1,0);
    	ans[0] = i;
    
    	while(!use[j])
    	{
    		use[j] = 1;
    		j = P[j];
    		done[j] = 1;
    
    	period[i]++;
    	ans[period[i]] = j;
    	}
    	int t1=t%period[i];
    for(int k =0;k<period[i];k++)
    {answer[ans[k]] = ans[(k+t1)%period[i]];
    	
    }}}
    for(int i = 1;i<=n;i++)
    {cout<<A[answer[i]]<<" ";}
 
    
    return 0;
}
