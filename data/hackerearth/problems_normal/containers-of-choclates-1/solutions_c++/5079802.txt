#include<bits/stdc++.h>
using namespace std;
#define ll long long
int main()
{
	list<ll>graph[20004];
	list<ll>::iterator it;
	ll color[20004];
	ll sum,tw,i,t,j,ans,val,n,a,b;
	cin>>tw;
	for(t=1;t<=tw;t++)
	{
		scanf("%lld",&n);
		val=0;
		memset(color,0,sizeof(color));
		for(i=0;i<20004;i++)
		  graph[i].clear();
		for(i=0;i<n;i++)
		{
			scanf("%lld%lld",&a,&b);
			graph[a].push_back(b);
			graph[b].push_back(a);
		}
		for(i=0;i<20004;i++)
		{
			if(!graph[i].empty()&&color[i]==0)
			{
				queue<ll>q;
				ll count1=0,count2=0;
				q.push(i);
				count1++;
				color[i]=1;
				while(!q.empty())
				{
				 ll node=q.front();
				 q.pop();
					for(it=graph[node].begin();it!=graph[node].end();it++)
					{
					   if(color[*it]==0)
					   {	
						 q.push(*it);
						if(color[node]==1)
						{
							color[*it]=2;
							count2++;
						//	cout<<"hi"<<endl;
						}
						else
						{
							color[*it]=1;
							count1++;
						}
					 }
					}
			   }
			    val+=max(count1,count2);
			}
			}
				printf("Case %lld: %lld\n", t, val);
			//	cout<<val<<endl;
		}
	
	}

	
