#include <bits/stdc++.h>
#define ll long long
#define ull unsigned long long
#define MOD 1000000007
#define INF 999999999
using namespace std;


int main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(0);
	int n,m;
	cin >> n >> m;
	string s;
	cin >> s;
	map<string, int>mp;
	for(int i=0;i<m;i++)
	{
		string q;
		int x;
		cin >> q >> x;
		mp[q] = x;
	}
	int dp[100005] = {};
	dp[0] = 1;
	string ff = "";
	ff += s[1];
	string ss = "";
	ss += s[0];
	string full = "";
	full +=ss;
	full += ff;
	if(mp.find(ss) != mp.end())
	{
		dp[0] = max(dp[0], mp.find(ss)->second);
	}
	if(mp.find(ff) != mp.end())
	{
		dp[1] = max(dp[1], dp[0] + mp.find(ff)->second);
	}
	if(mp.find(full) != mp.end())
	{
		dp[1] = max(dp[1], mp.find(full)->second);
	}
	
	
	
	
	
	
	
	for(int i=2;i<n;i++)
	{
		
		
		string ff = "";
		ff += s[i];
		string ss = "";
		ss += s[i-1];
		string full = "";
		full +=ss;
		full += ff;
		//cout << full << endl;
		
		if(mp.find(ff) != mp.end())
		{
			dp[i] = max(dp[i], dp[i-1] + mp.find(ff)->second);
		}
		else
		{
			dp[i] = dp[i-1] + 1;
		}
		if(mp.find(full) != mp.end())
		{
			dp[i] = max(dp[i], dp[i-2] + mp.find(full)->second);
		}
		//cout << dp[i] << " ";
	}
	cout << dp[n-1] << "\n";
}
