//Sinha Saab
//NARUTO Fan



#include <cstdio>
#include <iostream>
#include <algorithm>
#include <string.h>
#include <vector>
#include <set>
#include <map>
#include <queue>
#include <list>
#include <math.h>

#define ll long long int
#define maxN 1000
#define maxVal 100000000
#define minVal -100000000
#define mod 1000000007LL

#define gcd(a,b) __gcd(a,b)

using namespace std;

int n,m;
int d[maxN+5][maxN+5];
vector<pair<int,int> > g[maxN+5];
int visit[maxN+5];
int timer;

void dfs(int u,int x)
{
	int i,v,w;
	visit[u]=timer;
	for(i=0;i<(int)g[u].size();i++)
	{
		v=g[u][i].first;
		w=g[u][i].second;
		if(visit[v]!=timer&&w<x)
			dfs(v,x);
	}
}

int main()
{
    int t,i,q,u,v,w,c,x;
    scanf("%d",&t);
    while(t--)
    {
    	scanf("%d%d",&n,&m);
    	for(i=1;i<=n;i++)
    	{
    		g[i].clear();
    		visit[i]=0;
    	}
    	while(m--)
    	{
    		scanf("%d%d%d",&u,&v,&w);
    		g[u].push_back(make_pair(v,w));
    		g[v].push_back(make_pair(u,w));
    		d[u][v]=d[v][u]=w;
    	}
    	scanf("%d",&q);
    	c=0;
    	timer=0;
    	for(i=0;i<q;i++)
    	{
    		scanf("%d%d",&u,&v);
    		timer++;
			dfs(u,d[u][v]);
			if(visit[v]!=timer)
				c++;
    	}
    	x=gcd(c,q);
    	c=c/x;
    	q=q/x;
    	printf("%d/%d\n",c,q);
    }
    return 0;
}