#include <iostream>
#include<cstdio>
using namespace std;

int main()
{
	int t;
	cin >> t;
	while (t--)
	{
		long long int l, r;
		cin >> l >> r;
		int k;
		cin >> k;
		long long int final[1000009];
		long long int left[1000009];
		int arr[1000009];
		long long int i;
		for (i = l; i <= r; i++)
		{
			final[i - l] = i; left[i - l] = i;
		}
		for (i = 2; i*i <= r; i++)arr[i] = 1;
		for (i = 2; i*i <= r; i++)
		{
			if (arr[i] == 1)
			{
				long long	int start = l / i*i;
				while (start<l)
					start += i;
				while (start <= r)
				{
					final[start - l] = final[start - l] - final[start - l] / i;
					while (left[start - l] % i == 0)
						left[start - l] = left[start - l] / i;
					start += i;

				}
				long long int j;

				for (j = 2 * i; j*j <= r; j += i)
					arr[j] = 0;
			}
		}
		for (i = l; i <= r; i++)
			if (left[i - l]>1)
				final[i - l] = final[i - l] - final[i - l] / left[i - l];
		long long int count = 0;
		for (i = l; i <= r; i++)
		{

			if (final[i - l] % k == 0)
				count++;

		}

		double ans = 1.0*count / (r - l + 1);
		printf("%.6lf\n", ans);
	}
	return 0;
}