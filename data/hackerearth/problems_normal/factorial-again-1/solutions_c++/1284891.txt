#include <bits/stdc++.h>
using namespace std;
#define ll long long

long long modPow(long long a, long long x,long long p) {
    long res = 1;
    while(x > 0) {
        if( x % 2 != 0) {
            res = (res * a) % p;
        }
        a = (a * a) % p;
        x /= 2;
    }
    return res;
}

long long modInverse(long long a, long long p) {
    return modPow(a, p-2, p);
}

int main()
{
    ll t;
    cin>>t;
    while(t--){
    	ll n,p;
    	cin>>n>>p;
    	ll six = modInverse(6,p);
    	ll div = modPow(six,n,p);
    	ll ans = 1;
    	if(3*n>=p){
	    	for(ll i = p-1 ; i<=3*n;i++){
	    		ans = (i*ans)%p;
	    	}
	    	ans = (ans * div)%p;
	    	cout<<ans<<endl;
    	}else{
    		for(int i=3*n+1;i<p;i++)	{
    			ans = (ans * i)%p;
    		}
    		ans = modInverse(ans,p);
    		ans = (-1*ans + p)%p;
    		ans = (ans * div)%p;
    		cout<<ans<<endl;
    	}
    }
    return 0;
}
