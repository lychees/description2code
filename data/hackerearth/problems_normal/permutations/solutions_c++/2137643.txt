//BIG OH                           I am back
#include<cstdio>
#include<iostream>
#include<cstring>
#include<sstream>
#include<stdlib.h>
#include<algorithm>
#include<cmath>
#include<vector>
#include<map>
#include<set>
#include<list>
#include<stack>
#include<queue>
#include<iomanip>
#include<ctype.h>
#include<complex>
#include<utility>
#include<functional>
#include<bitset>
#include<numeric>
#include<cassert>
#include<climits>
#include <fstream> 
using namespace std;
#define ll  long long 
#define gc getchar_unlocked
#define mod 1000000007
#define pq priority_queue
#define vi vector<int>
#define eps 1e-9
#define inf (1 << 28)
#define  MX 100003
#define pi pair<int ,int >
bool cmp(pi p,pi q){if(p.first==q.first)return p.second>q.second;return p.first<q.first;}


int k;
char adj[102][102];
int arr[102];
bool vis[102];
vector<int>v,v1;
void dfs(int u)
{
	 vis[u]=true;
	 v.push_back(u);
	 for(int v=0;v<k;v++)
	 {
	 	if(adj[u][v]=='Y' and adj[v][u]=='Y' and !vis[v])
	 	 dfs(v);
	 }
}

int main()
{
	  cin>>k;
	  for(int i=0;i<k;i++)
	   cin>>arr[i];
	  for(int i=0;i<k;i++)
	   scanf("%s",adj[i]);
	  for(int i=0;i<k;i++)
	  {
	  	if(!vis[i])
	  	{
	  		v.clear();
	  		v1.clear();
	  		dfs(i);
	  		if(v.size()>1)
	  		{
	  			sort(v.begin(),v.end());
	  			for(int i=0;i<v.size();i++)
	  			 v1.push_back(arr[v[i]]);
	  			sort(v1.begin(),v1.end()) ;
                for(int i=0;i<v1.size();i++)	  			
                 arr[v[i]]=v1[i];
                
	  		}
	  	}
	  }
	  for(int i=0;i<k;i++)
	   cout<<arr[i]<<" ";
	  
}