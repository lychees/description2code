#include <algorithm>
#include <iostream>
#include <math.h>
#define P 1000000007
using namespace std;
int main() {
  int t;
  cin >> t;
  while (t--) {
    long long int n, k = 1, p = 0, i;
    cin >> n;
    long long int a[n];
    for (i = 0; i < n; i++)
      cin >> a[i];
    for (i = 0; i < n - 1; i++)
      k = (k * 2) % P;

    for (i = 0; i < n; i++)
      p = (p + (a[i] * k)) % P;
    cout << p << "\n";
  }
}