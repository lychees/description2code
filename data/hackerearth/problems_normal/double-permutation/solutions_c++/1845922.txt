#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define mod 1000000007
ll a[10000000],tree[10000000],n;
int query(ll idx){
    ll sum = 0;
    while (idx > 0){
        sum += tree[idx];
        idx -= (idx & -idx);
    }
    return sum;
}
void update(ll idx ,ll val){
    while (idx <= n){
        tree[idx] += val;
        idx += (idx & -idx);
    }
}
ll fun(ll base, ll exponent, ll modulus)
{
    ll result = 1;
    while (exponent > 0)
    {
        if (exponent % 2 == 1)
            result = (result * base) % modulus;
        exponent = exponent >> 1;
        base = (base * base) % modulus;
    }
    return result;
}
int main()
{
    ll i,sum1=0,sum2=0,p,q,r,sum3=0,ans;
    scanf("%lld",&n);
    for(i=0;i<2*n;i++)
    {
        scanf("%lld",&a[i]);
    }
    for(i=2*n-1;i>=0;i--)
    {
        p=query(a[i]-1);
        q=query(a[i]);
        r=query(n);
        sum1+=p;
        sum2+=q;
        sum3+=(r-q);
        update(a[i],1);
    }
    ans=((((sum1+sum3)%mod)*fun(2,n-2,mod))%mod+((sum2%mod)*fun(2,n-1,mod))%mod)%mod;
    printf("%lld",ans);
    return 0;
}
