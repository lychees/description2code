t = input()
while t>0:
	t-=1
	n = input()
	d = {}
	a = map(int, raw_input().split())
	for i in range(n):
		if a[i] not in d:
			l = []
			l.append(i)
			d[a[i]] = l
		else:
			l = d[a[i]]
			l.append(i)
	tot = 0
	for k in d:
		l = d[k]
		x = len(l)
		tot += (x*(x-1))/2
	print tot + len(a)