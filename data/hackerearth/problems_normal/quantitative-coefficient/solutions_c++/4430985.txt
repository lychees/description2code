#include <bits/stdc++.h>
#define ll long long int
#define mod 1000000007

using namespace std;

int A[100001];

void as(int n)
{
	for(int i=1;i<=n;i++)
	{
		A[i]=i;
	}
}

int root(int i)
{
	while(i!=A[i])
	{
		A[i]=A[A[i]];
		i=A[i];
	}
	return i;
}

void join(int a,int b)
{
	int ra=root(a);
	int rb=root(b);
	
	A[ra]=A[rb];
}

int main()
{
    int t,n,m,a,b;
    ll sum,c;
    cin>>t;
    while(t--)
    {
    	sum=1;
    	cin>>n>>m;
    	pair<ll,pair<int,int> >P[m];
    	for(int i=0;i<m;i++)
    	{
    		cin>>a>>b>>c;
    		P[i]=make_pair(c,make_pair(a,b));
    	}
    	sort(P,P+m);
    	as(n);
    	for(int i=0;i<m;i++)
    	{
    		c=P[i].first;a=P[i].second.first;b=P[i].second.second;
    		if(root(a)!=root(b))
    		{
    			sum=((sum%mod)*(c%mod))%mod;
    			join(a,b);
    		}
    	}
    	cout<<sum%mod<<endl;
    }
    return 0;
}
