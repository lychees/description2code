#include<bits/stdc++.h>
#define maxn 500001
int root[500010];
int ch[20000010][2]={0},sum[20000010]={0};
int tot;
using namespace std; 
int insert(int x,int val) {
    int tmp,y;
    tmp = y = ++tot;
    for (int i = 20; i >= 0; i--) {
        int t = (val & (1 << i)) >> i;
        ch[y][0] = ch[x][0];
        ch[y][1] = ch[x][1];
        x = ch[x][t];
        y = ch[y][t] = ++tot;
        sum[y] = sum[x] + 1;
    }
    return tmp;
}
   
int query(int val,int l,int r) {
    int tmp = 0;
    for (int i = 20; i >= 0; i--) {
        int t = (val & (1 << i)) >> i;
        if (sum[ch[r][t ^ 1]] - sum[ch[l][t ^ 1]]) {
            l = ch[l][t ^ 1];
            r = ch[r][t ^ 1];
            tmp |= (1 << i);
        }
        else {
            l = ch[l][t];
            r = ch[r][t];
        }
    }
    return tmp;
}
 
int a[1000001];
int main()
	{
		int m,i,j,q,L,R,x,temp,maxx;
		int ans;
		cin>>m>>q;
		int n=0;
		for(i=1;i<=m;++i)
			{
				cin>>a[i];
				n++;
				root[n] = insert(root[n - 1],a[i]);
			}
		while(q--)
			{
				cin>>L>>R>>x;
				ans = query(x,root[L - 1],root[R]);
				cout<<((ans))<<endl;
			}
	}