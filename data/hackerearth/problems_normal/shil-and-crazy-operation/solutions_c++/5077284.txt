#include <iostream>     
#include <algorithm>    
#include<vector>
#define MOD 1000000007
using namespace std;
int hash1[100001][2];
vector<int>lists[100001];
int visited[100001];
int A[100001],P[100001],ans[100001];

int main()
{
        
        int vectors=0,count=0;
        int N;
        long long T;
        cin>>N>>T;
        for(int i=1;i<=N;i++)
        {
                visited[i]=0;
                hash1[i][0]=0;
                hash1[i][1]=0;
                cin>>A[i];
        }
        for(int i=1;i<=N;i++)
        {
                cin>>P[i];
        }
        while(count<N)
        {
                //cout<<"In While\n";
                int i=1;
                while(visited[i]!=0)
                        i++;
                visited[i]=1;
                count++;
                hash1[i][0]=vectors;
                hash1[i][1]=lists[vectors].size();
                lists[vectors].push_back(i);
                int temp=i;
                while(P[i]!=temp)
                {
                        i=P[i];
                        count++;
                        visited[i]=1;
                        hash1[i][0]=vectors;
                        hash1[i][1]=lists[vectors].size();
                        lists[vectors].push_back(i);
                        
                }
                vectors++;
        }
        for(int i=1;i<=N;i++)
        {
                long long temp1=hash1[i][0];
               // long long temp2=hash1[i][1];
                long long temp3=(T%(lists[temp1].size()));
                long long temp4=hash1[i][1]-temp3;
                if(temp4<0)
                        temp4+=lists[hash1[i][0]].size();
                ans[lists[temp1][temp4]]=A[i];
        }
        for(int i=1;i<=N;i++)
                cout<<ans[i]<<" ";
       // print();
        return 0;     
}