#include<iostream>
using namespace std;

int adj[50][50];
int sol[50][50];
int N;

int calc(int i)
{
  int ans=0;
  for(int j=0; j<N; j++){
    //    cout<<"eahh"<<adj[i][j]<<endl;
    if(adj[i][j]){
      ans += calc(j);
    }
  }
  if(ans)
    return ans;
  else 
    return 1;
}

int main(void)
{
  int T;
  char c;
  cin>>T;
  while(T--){
    cin>>N;
    for(int i=0; i<N; i++){
      for(int j=0; j<N; j++){
	cin>>c;
	if(c == 'N')
	  adj[i][j] = 0;
	else
	  adj[i][j] = 1;
      }
    }
    int ans=0;
    //    cout<<calc(1)<<endl;
    for(int i=0; i<N; i++)
      ans += calc(i);
    cout<<ans<<endl;
  }
  return 0;
}
