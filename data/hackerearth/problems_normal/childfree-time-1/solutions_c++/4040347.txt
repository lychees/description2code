#include<bits/stdc++.h>
using namespace std;

#define ll long long
#define inf 0x7fffffff
#define SCD(t) scanf("%d",&t)
#define SCLD(t) scanf("%ld",&t)
#define SCLLD(t) scanf("%lld",&t)
#define SCC(t) scanf("%c",&t)
#define SCS(t) scanf("%s",t)
#define SCF(t) scanf("%f",&t)
#define SCLF(t) scanf("%lf",&t)
#define pr pair<int,ll>
#define mp(a,b) make_pair(a,b)
#define pb push_back
#define ne first
#define w second
#define mset(arr,val) memset(arr,val,sizeof(arr));

const int MAX = 1000005;
const int MOD = 1e9+7;

std::vector< ll > dp;
int n,m;
std::vector< pr > v[MAX];
std::vector< bool > vis;

ll dfs(int pos){
	if(vis[pos]) return dp[pos];

	vis[pos] = true;
	if(v[pos].size() == 0)
		dp[pos] = 0;
	else{
		ll ans = 2;
		for(int i = 0;i<v[pos].size();i++){
			ans = max( ans, 2 + dfs( v[pos][i].ne ) + v[pos][i].w );
		}
		dp[pos] = ans;
	}

	return dp[pos];
}

int main(){
	// freopen("input.txt","r",stdin);
	cin>>n>>m;
	vis.resize(n+1);
	dp.resize(n+1);
	for (int i = 0; i < m; ++i)
	{
		int r1,r2,w;
		SCD(r1);
		SCD(r2);
		SCD(w);
		v[r1].pb(mp(r2,w));
	}

	ll ans = 0;
	for (int i = 1; i <= n; ++i)
	{
		if(!vis[i]){
			ans = max(ans,dfs(i));
		}
	}

	cout<<ans<<endl;
}