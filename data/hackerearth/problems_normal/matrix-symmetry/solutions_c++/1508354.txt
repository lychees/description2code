#include<bits/stdc++.h>
//#include<stdbool.h>
using namespace std;
bool check_horizontal(char mat[][50],int n)
{
	int i,j;
	for(i=0;i<n/2;i++)
	{
		for(j=0;j<n;j++)
		{
			if(mat[i][j]!=mat[n-1-i][j])
			{
				return false;
			}
		}
	}
	return true;
}
bool check_vertical(char mat[][50],int n)
{
	int i,j;
	for(i=0;i<n/2;i++)
	{
		for(j=0;j<n;j++)
		{
			if(mat[j][i]!=mat[j][n-i-1])
			{
				return false;
			}
		}
	}
	return true;
}
int main()
{
	int test,n,i,j;
	char mat[50][50];
	cin>>test;
	while(test--)
	{
		cin>>n;
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				cin>>mat[i][j];
			}
		}
		bool t=check_horizontal(mat,n);
		bool s=check_vertical(mat,n);
		if(t && s)
		{
			printf("BOTH\n");
		}
		else if(t)
		{
			printf("HORIZONTAL\n");
		}
		else if(s)
		{
			printf("VERTICAL\n");
		}
		else
		{
			printf("NO\n");
		}
		
	}
}