#include <bits/stdc++.h>

using namespace std;

# define pb push_back
# define mp make_pair
# define FORN( a , b , c ) for ( int a = b ; a <= c ; ++ a )
# define FORNBACK( a , b , c ) for ( int a = b ; a >= c ; -- a )
const int MAX = 1e5 + 14 ;

int v [ MAX ] ;
int p [ MAX ] ;
vector < int > gr [ MAX ] ;
int care [ MAX ] ;
int pos [ MAX ] ;

int main()
{
    ios :: sync_with_stdio ( false ) ;

    //freopen( "input" , "r" , stdin ) ;
    //freopen( "output" , "w" , stdout ) ;

    int n ;
    cin >> n ;

    long long t ;
    cin >> t ;

    FORN ( i , 1 , n ) cin >> v [ i ] ;
    FORN ( i , 1 , n ) cin >> p [ i ] ;
    int C = 0 ;
    FORN ( i , 1 , n )
    {
        if ( care [ i ] ) continue ;
        ++ C ;
        int s = v [ i ] ;
        int poz = i ;
        int op = 0 ;
        while ( 1 )
        {
            if ( poz == i and op ) break ;
            ++ op ;
            care [ poz ] = C ;
            //cerr << s << endl ;
            gr [ C ].pb ( s ) ;
            pos [ poz ] = gr [ C ].size ( ) - 1 ;
            s = v [ p [ poz ] ] ;
            poz = p [ poz ] ;

        }
    }
    //cerr << endl << endl << endl ;
   // FORN ( i , 1 , C ) {
   //     for ( auto x : gr [ i ]) cerr << x << ' ' ;
   //     cerr << endl ;
   // }

    FORN ( i , 1 , n )
    {
     //   cerr << ( pos [ i ] + t ) % gr [ care [ i ] ].size ( ) << endl ;
        cout << gr [ care [ i ] ] [ ( pos [ i ] + t ) % gr [ care [ i ] ].size ( ) ] << ' ' ;
    }

    return 0 ;
}
