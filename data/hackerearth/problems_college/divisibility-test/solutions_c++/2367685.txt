#include <iostream>
#include <vector>

using namespace std;

bool isDiv( string s, int b ) {
	
	int val = 0, i, n;
	n = s.length();
	
	for( i = 0;i < n;i++ ) {
		val = ( val * 10 ) + ( s[ i ] - '0' );
		val = val % b;
	}
	
	return ( val == 0 );
}

int main()
{
	ios_base::sync_with_stdio( false );
	int t, n, i, b, l, r, sum, j;
	
	cin >> t;
	
	while( t-- ) {
		
		string s, s2, s3;
		cin >> s;
		n = s.length();
		
		cin >> b;
		cin >> l >> r;
		l -= 1;
		r -= 1;
		
		vector< vector<bool> > A( n, vector<bool> ( n, false ) );
		
		for( i = 0;i < n;i++ ) {
			s2 = "";
			for( j = 0;j < n - i;j++ ) {
				s3 = s[ i + j ];
				s2 += s3;
				if( isDiv( s2, b ) ) {
					A[ i ][ i + j ] = true;
				}
			}
		}
		
		sum = 0;
		for( i = l;i <= r;i++ ) {
			for( j = i;j <= r;j++ )
				sum += ( A[ i ][ j ] ? 1 : 0 );
		}
		
		cout << sum << endl;
	}
	return 0;
}
