#include <bits/stdc++.h>
typedef long long int ll;

using namespace std;

int main()
{
    //cout << "Hello World!" << endl;
    int t;cin>>t;
    while(t--)
    {
    	ll n,i,c,j;map<ll,ll>m;map<ll,ll>visited;
    	cin>>n;
    	for(i=1;i<=n;i++) cin>>m[i];
    	for(i=1;i<=n;i=i*2)
    	{
    		c=0;
    		for(j=i;j<2*i;j++)
    		{
    			if(m[j]!=0) c=j;
    		}
    		if(c!=0) {cout<<m[c]<<endl;visited[c]=1;}
    	}
    	for(i=1;i<=n;i=i*2)
    	{
    		c=0;
    		for(j=i;j<2*i;j++)
    		{
    			if(m[j]!=0&&visited[j]==0) {c=j;break;}
    		}
    		if(c!=0) cout<<m[c]<<endl;
    	}
    	cout<<endl;
    }
    return 0;
}
