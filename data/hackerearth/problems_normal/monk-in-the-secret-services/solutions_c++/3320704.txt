# include<iostream>
# include<climits>
#define max INT_MAX
using namespace std;
int g[102][102];
int main()
{
	int t,i,m,n,a,j,s,h,k;
	long long int ans;
	cin>>t;
	while(t--)
	{
		cin>>n>>m;
		ans=0;
		for(i=1;i<=n;i++)
		{
			for(j=1;j<=n;j++)
			{
				if(i==j)
					g[i][j]=0;
				else g[i][j]=100000;
			}
		}
		for(i=1;i<=m;i++)
		{
			cin>>a>>s>>h;
			if(h<g[a][s])
				g[a][s]=h;
			if(h<g[s][a])
				g[s][a]=h;
		}
		cin>>s>>a>>h;
		for(k=1;k<=n;k++)
		{
			for(i=1;i<=n;i++)
			{
				for(j=1;j<=n;j++)
				{
					if(g[i][j]>g[i][k]+g[k][j])
					{
						g[i][j]=g[i][k]+g[k][j];
					} 
				}
			}
		}
		ans=0;
		for(i=1;i<=n;i++)
		{
			if(i!=s && i!=a && i!=h)
			{
				if(g[s][i]+2*g[i][a]+g[i][h]>ans)
					ans=g[s][i]+2*g[i][a]+g[i][h];
			}
		}
		cout<<ans<<endl;
	}
	return 0;
}