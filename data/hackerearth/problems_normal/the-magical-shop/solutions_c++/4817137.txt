#include <bits/stdc++.h>
using namespace std;
#define pb push_back
#define ll long long int
#define INF 10000000000000000
int main()
{
	ll a,b;
	cin>>a>>b;
	string s;
	cin>>s;
	std:: string ::iterator it;
	ll sum=0;
	
	for( it=s.begin();it!=s.end();it++)
	{

		if(*it=='1')
			sum=(sum%b+a%b)%b;
		a=((a%b)*(a%b))%b;

	}
	cout<<sum%b<<endl;
}
