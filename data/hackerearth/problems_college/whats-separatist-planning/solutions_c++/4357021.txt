#include<stdio.h>
#include<string.h>
#include<iostream>
using namespace std;
void convertfortoken(char *str);
int main()
{
	int l,d,n,i,flag,count,j,k,intflag,index;
	cin>>l>>d>>n;
	char arr[d][l+1],temp[100000],temparr[d][27];
	char buffer[20],*pch;
	for(i=0;i<d;i++)
	{
		cin>>arr[i];
	}
	for(i=0;i<n;i++)
	{
		cin>>temp;
		//cout<<"temp is "<<temp<<'\n';
		convertfortoken(temp);
		pch = strtok (temp," ()");
		strcpy(temparr[0],pch);
		j=1;
  		while (pch != NULL)
  		{
    		strcpy(temparr[j],pch);
    		j++;
    		pch = strtok (NULL, " ()");
  		}
  		count=0;
		for(j=0;j<d;j++)
		{
			flag=0;
			for(k=0;k<l;k++)
			{
				//cout<<"temp is "<<arr[j][k]<<" temparr is "<<temparr[k+1]<<'\n';
				intflag=0;
				for(index=0;index<strlen(temparr[k+1]);index++)
				{
					if(arr[j][k]==temparr[k+1][index])
					{
						intflag=1;
						break;
						
					}
				}
				if(intflag==0)
				{
					flag=1;
					break;
				}
			}
			if(flag==0)
			{
				count++;
			}
		}
		cout<<count<<'\n';
	}
	return 0;
}
void convertfortoken(char *str)
{
	int i,index=0,dep=0;
	char tempstr[100000];
	strcpy(tempstr,str);
	for(i=0;i<strlen(tempstr);i++)
	{
		if(tempstr[i]=='(')
		{
			dep=1;
		}
		else if(tempstr[i]==')')
		{
			dep=0;
		}
		if((dep==0)&&(tempstr[i]!='(')&&(tempstr[i]!=')'))
		{
			str[index]='(';
			index++;
			str[index]=tempstr[i];
			index++;
			str[index]=')';
			index++;
		}
		else if((dep==1)&&(tempstr[i]=='('))
		{
			str[index]='(';
			index++;
		}
		else if((dep==1)&&(tempstr[i]!='(')&&(tempstr[i]!=')'))
		{
			str[index]=tempstr[i];
			index++;
		}
		else
		{
			str[index]=')';
			index++;
		}
	}
	str[index]='\0';
}