#include <bits/stdc++.h>
using namespace std;



int main()
{
	long n;
	long dp[101][101];
	cin>>n;int i,j,k;
	long a[101][101];
	long b[101][10001];
	for(i=1;i<=100;++i)for(j=1;j<=10000;++j)b[i][j]=0;
	for(i=1;i<=n;++i)
	{ long flag=1;
	    int ctr=1;
		
		
			for(j=1;flag;j*=2)
			for(k=0;k<j;++k)
			{if(i*j+k>n){flag=0;break;}b[i][ctr++]=i*j+k;}
		
		flag=i;
		while(flag%2==0&&flag!=0)
		{
			flag/=2;
			if(flag!=0)
			for(j=1;b[flag][j];++j)
			b[i][ctr++]=b[flag][j];
			
				
			}
		}
	
  
	for(i=1;i<=n;++i)
	for(j=1;j<=n;++j)
	{
		cin>>a[i][j];
		if(i==1)
		dp[1][j]=a[1][j];
		else
		{
			dp[i][j]=dp[i-1][j];
			for(k=1;b[j][k];++k)
			dp[i][j]=max(dp[i][j],dp[i-1][b[j][k]]);
			dp[i][j]+=a[i][j];
				
			
			
		}
	}
	long ans=dp[n][1];
	for(i=2;i<=n;++i)
	ans=max(ans,dp[n][i]);
	cout<<ans;
    
    return 0;
}
                    