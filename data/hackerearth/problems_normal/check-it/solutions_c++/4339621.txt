#include <bits/stdc++.h> 
#define mp make_pair 

using namespace std; 

int main()
{
	int t ; 
	cin >> t ;

	set<int> s;

	vector < pair < int , int > > vp ; 
	
	int a, nn ,x,y, n , m;
	
	while (t--)
	{
		cin >> n >> m ; 

		vp .clear();
		s.clear();
				
		while(m--)
		{
			cin >> x >> y ;
			vp.push_back(mp(x,y));
		}

		nn = n;
		n--;
		
		while(n--)
		{
			cin >> a ; 

			s.insert(vp[a-1].first);
			s.insert(vp[a-1].second) ;
		}

		if(s.size()==nn)
			cout << "YES";
		else
			cout << "NO";

		cout << endl ;


	}


	return 0;
}