#include <bits/stdc++.h>
#define ll long long int
 
using namespace std;

long long mult(long long a, long long b, long long mod)
{
	__int128 res = a;
	res *= b;
	res %= mod;
	a = res;
	return a;
}
long long modulo(long long a, long long b, long long c){
	long long x = 1, y = a; 
	while (b > 0){
		if (b % 2 == 1){
			x = mult(x, y, c);
		}
		y = mult(y, y, c);
		b /= 2;
	}
	return x%c;
}
bool Miller(long long p, int iteration){
	if (p<2){
		return false;
	}
	if (p != 2 && p % 2 == 0){
		return false;
	}
	long long s = p - 1;
	while (s % 2 == 0){
		s /= 2;
	}
	for (int i = 0; i<iteration; i++){
		long long a = rand() % (p - 1) + 1, temp = s;
		long long mod = modulo(a, temp, p);
		while (temp != p - 1 && mod != 1 && mod != p - 1){
			mod = mult(mod, mod, p);
			temp *= 2;
		}
		if (mod != p - 1 && temp % 2 == 0){
			return false;
		}
	}
	return true;
}

int main()
{
    ll n,q,f,k,op,t=1,sum=0,entry=0;
    cin>>n>>q;
    while(q--)
    {
        cin>>op;
        if(op==1)
        {
            cin>>f>>k;
            if(Miller(f+k, 15))
            {
                sum+=abs(t-f);
                t=f;
                entry+=k;
            }
        }
        else
        {
            cin>>f>>k;
            ll div=f+k;
            ll sq=sqrt(div + .5);
            if(sq*sq==div)
            {
                sum+=abs(t-f);
                t=f;
                entry-=k;
            }
        }
    }
    cout<<sum%1000000007<<" "<<entry<<endl;
    return 0;
}