#include <bits/stdc++.h>

typedef long long int li;

#define min(a,b) a<=b?a:b
#define max(a,b) a>=b?a:b
#define Fi(i, st, ft) for(i = st;i <= ft; ++i)
#define Fd(i, st, ft) for(i = st;i >= ft; --i)
#define pb(a, b) a.push_back(b)
#define mod 1000000007
#define MAXN 1500000
#define MX 1450000
#define inf 1000000000000000000ll
const int maxBufSize = (10000000);

using namespace std;

li n , m;
li mat[1005][1005] , vis[1005] , res[1005];
queue< pair<li,li> > que;

int main()
{
	li i , j , a , b , c , ans;
	pair<li,li> p , q;
	scanf("%lld %lld" , &n , &m);
	Fi(i , 1 , m) {
		scanf("%lld %lld %lld" , &a , &b , &c);
		mat[a][b] = c;
	}
	p.first = 1 , p.second = -1;
	que.push(p);
	res[1] = 0;
	vis[1] = 1;
	while(!que.empty()) {
		p = que.front();
		que.pop();
		a = p.first , b = p.second;
		//cout << a << " " << b << "\n";
		Fi(i , 1 , n) {
			if(i != a && !vis[i] && mat[a][i] != b && mat[a][i] > 0) {
				res[i] = res[a]+1;
				q.first = i , q.second = mat[a][i];
				vis[i] = 1;
				que.push(q);
			}
		}
	}
	if(vis[n]) {
		ans = res[n];
	} else {
		ans = -1;
	}
	printf("%lld\n" , ans);
	return 0;
}