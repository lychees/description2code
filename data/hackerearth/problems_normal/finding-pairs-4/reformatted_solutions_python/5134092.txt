
for _ in range(int(raw_input())):
    no = int(raw_input())
    arr = [int(x) for x in raw_input().split()]

    count = {}
    for a in arr:
        if a not in count:
            count[a] = 0
        count[a] += 1

    res = len(arr)
    for a in count:
        count[a] -= 1
        if count[a] > 0:
            res += (count[a] * (count[a] + 1)) / 2
    print res
