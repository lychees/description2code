#include "bits/stdc++.h"
using namespace std;

int main()
{
    int T;
    cin>>T;
    while(T--){
    	int n, m;
    	cin>>n>>m;
    	int a[n];
    	for(int i = 0;i<n;i++){
    		cin>>a[i];
    	}
    	vector<vector<long long int>> res(n, vector<long long int>(m,INT_MIN));
    	for(int i = 0;i<n;i++){
    		res[i][0] = 0;
    	}
    	
    	for(int i = 1;i<m;i++){
    		for(int j = i;j<n;j++){
    			long long int max=INT_MIN;
    			for(int k = 0;k<j;k++){
    				long long int temp = res[k][i-1] + abs(a[k]-a[j]);
    				if(temp>max){
    					max = temp;
    				}
    			}
    			res[j][i] = max;
    		}
    	}
    	long long int max = INT_MIN;
    	for(int i = m-1;i<n;i++){
    		if(res[i][m-1]>max){
    			max = res[i][m-1];
    		}
    	}
    	cout<<max<<endl;
    }
    return 0;
}
