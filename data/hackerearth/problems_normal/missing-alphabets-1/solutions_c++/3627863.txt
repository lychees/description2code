#include<bits/stdc++.h>
using namespace std;
typedef struct item
{
	string p;
	string q;
}item;
bool fun(item x,item y)
{
	return x.q < y.q;
}
int main()
{
	int t,i,j,l,l1,n;
	string s,str;
	cin>>t;

	while(t--)
	{
			cin>>s;
	map<char,int>my;
	l=s.length();
	for(i=1;i<=l;i++)
	{
		my[s[i]]=i;
	}
		cin>>n;
		item a[n];
		for(i=0;i<n;i++)
		{
			cin>>str;
			l1=str.length();
			string ch="";
			for(j=0;j<l1;j++)
			{
				ch+=char(my[str[j]]);
			}
			a[i].p=str;
			a[i].q=ch;
		}
		sort(a,a+n,fun);
		for(i=0;i<n;i++)
		{
			cout<<a[i].p<<"\n";
		}
	}
	return 0;
}