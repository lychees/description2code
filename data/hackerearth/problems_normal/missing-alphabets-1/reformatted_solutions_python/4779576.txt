def lex_order(x, y, alphabet):
    if (len(x) > len(y)):
        k = len(y)
    else:
        k = len(x)
    for i in range(k):
        if (x[i] != y[i]):
            if (alphabet.find(x[i]) < alphabet.find(y[i])):
                return -1
            else:
                return 1
    return len(x) - len(y)


num_tests = int(raw_input().rstrip("\n"))
for count_test in range(num_tests):
    alphabet = raw_input().rstrip("\n")
    num_cases = int(raw_input().rstrip("\n"))

    input_strings = []
    for count_input in range(num_cases):
        input = raw_input().rstrip("\n")
        if len(input_strings) == 0:
            input_strings.append(input)
        else:
            for i in range(len(input_strings)):
                if lex_order(input_strings[i], input, alphabet) > 0:
                    input_strings.insert(i, input)
                    break
                if i == (len(input_strings) - 1):
                    input_strings.append(input)
                    break

    for sorted_strings in input_strings:
        print sorted_strings
