/*
*/
 
//#pragma comment(linker, "/STACK:16777216")
#include <fstream>
#include <iostream>
#include <string>
#include <complex>
#include <math.h>
#include <set>
#include <vector>
#include <map>
#include <queue>
#include <stdio.h>
#include <stack>
#include <algorithm>
#include <list>
#include <ctime>
#include <memory.h>
#include <ctime> 
 
#define y0 sdkfaslhagaklsldk
#define y1 aasdfasdfasdf
#define yn askfhwqriuperikldjk
#define j1 assdgsdgasghsf
#define tm sdfjahlfasfh
#define lr asgasgash
 
#define eps 1e-9
//#define M_PI 3.141592653589793
#define bs 1000000007
#define bsize 256
 
using namespace std;

long long tests,n,k,p;

long long pw(long long a,long long b)
{
	if (b==0)return 1%p;
	if (b%2)return a*pw(a,b-1)%p;
	return pw(a*a%p,b/2);	
}

long long gcd(long long a,long long b)
{
	while (a&&b)a>b?a%=b:b%=a;
	return a+b;
}

int pr[1<<20];
vector<int> P;

long long phi(long long x)
{
	long long q=x;
	for (int ii=0;P[ii]*P[ii]<=q;ii++)
	{
		int i=P[ii];
		if (q%i==0)
		{
			x/=i;
			x*=(i-1);
			while (q%i==0)q/=i;
		}
	}
	if (q>1)
		x=x/q*(q-1);
	return x;
}

int H(int x)
{
	int res=0;
	for (int i=1;i<x;i++)
	 if (gcd(x,i)==1)++res;
	 return res;
}
int main(){
//freopen("newlines.in","r",stdin);
//freopen("newlines.out","w",stdout);
//freopen("F:/in.txt","r",stdin);
//freopen("F:/output.txt","w",stdout);
ios_base::sync_with_stdio(0);
//cin.tie(0);

pr[1]=1;
for (int i=2;i<=35000;i++)
 if (pr[i]==0)
  for (int j=i*2;j<=35000;j+=i)
   pr[j]=1;

for (int i=2;i<=35000;i++)
 if (pr[i]==0)
  P.push_back(i);
  
cin>>tests;
//cout<<phi(tests)<<endl;

for (;tests;--tests)
{
	long long a1;
	
	cin>>a1>>p>>n;
//	cout<<H(p)<<endl;
	
	if (gcd(a1,p)>1)
	{
		cout<<-1<<endl;
		continue;
	}
	int qq=phi(p);
//	cout<<qq<<endl;
	int a2=pw(a1,qq-1);
	//cout<<1ll*a1*a2%p<<endl;
	
	cout<<1ll*a1*(n/2)+1ll*a2*(n/2)+a1*(n%2)<<endl;
}
//cin.get();cin.get();
return 0;}