    #include <iostream>
    #include <string>
    #define ll long long int
    using namespace std;
     
    ll substr(ll n)
    {
    	return ((n*(n+1))/2);
    }
     
    ll sortedSubStr(string str, ll len)
    {
    	int length = 1;
    	ll strCount = 0;
    	for(int i=1; i<len; i++)
    	{
    		if(str[i] >= str[i-1])
    		  {
    		  	length++;
    		  }
    		  else
    		  {
    		  	strCount += substr(length);
    		  	length = 1;
    		  }
    	}
    	strCount += substr(length);
    	return strCount;
    }
     
     
    int main()
    {
        int test;
        ll length;
        string str;
        cin>>test;
        while(test)
        {
        	cin>>length;
        	cin>>str;
        	cout<<sortedSubStr(str,length)<<endl;
        	test--;
        }
        return 0; 
    }