#include <bits/stdc++.h>
using namespace std;
 
typedef long long LL;
 
#define PII       pair<int,int>
#define all(c)    c.begin(),c.end()
#define sz(c)     (int)c.size()
#define clr(c)    c.clear()
#define pb        push_back
#define mp        make_pair
#define cin(x)	scanf("%d" , &x)
#define MOD		1000000007
#define EPS       1E-10

int par[100001] = {0};
int mn[100001] = {0};

int FIND(int x)
{
	if(x != par[x]) par[x] = FIND(par[x]);
	return par[x];
}

void solve()
{
	int n,m;
	cin(n);
	cin(m);
	priority_queue< PII , vector<PII> , greater<PII> > pq;
	LL ans = 0;
	for(int i = 0; i < n; i++)
	{
		int x;
		cin(x);
		par[i] = i;
		mn[i] = x;
	}
	while(m--)
	{
		int a,b;
		cin(a);
		cin(b);
		a -= 1;
		b -= 1;
		a = FIND(a);
		b = FIND(b);
		if(a == b) continue;
		par[a] = b;
		mn[b] = min(mn[b] , mn[a]);
	}
	int f = 0;
	for(int i = 0; i < n; i++)
		if(FIND(i) == i)
		{
			pq.push(mp(mn[i] , i));
			f += 1;
		}
	while(f > 1)
	{
		f -= 1;
		PII a = pq.top();
		pq.pop();
		PII b = pq.top();
		pq.pop();
		ans += 1LL * a.first * b.first;
		pq.push(mp(min(a.first,b.first) , a.second));
	}
	printf("%lld\n", ans);
}

int main()
{
	int t;
	cin(t);
	while(t--)
		solve();
	return 0;
}