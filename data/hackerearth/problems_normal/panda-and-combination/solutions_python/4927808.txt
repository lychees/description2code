from sys import stdin
t = int(stdin.readline())
for _ in xrange(t):
	n,m = map(int,stdin.readline().split())
	ans = 0
	if m==1:
		ans = n
	else:
		j = 65
		while n:
			while True:
				if m**j <=n:
					break
				j-=1
			#print "we can remove ",m**j
			k = n/(m**j)
			#print "times ",k
			n-=k*(m**j)
			ans+=k
			#print "after removing",m**j,"times",k,"we remain ",n
	print ans