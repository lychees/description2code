#include <bits/stdc++.h>

using namespace std;

void swap(int *a, int *b) {
    int t = *a;
    *a = *b;
    *b = t;
}

void rotateB(int A[], int l, int r) {
    int i = l, j = r;
    while (i < j) {
        swap(&A[i], &A[j]);
        i++;
        j--;
    }
}

void rotateA(int A[], int n, int x) {
    rotateB(A, 0, x - 1);
    rotateB(A, x, n - 1);
    rotateB(A, 0, n - 1);


}

bool match(int A[], int T[], int n, int st) {
    int i = 0, j = st;
    while (j < n) {
        if (A[j] != T[i]) {
            return false;
        }
        j++;
        i++;
    }
    j = 0;
    while (j < st) {
        if (A[j] != T[i]) {
            return false;
        }
        j++;
        i++;
    }
    return true;

}

int main() {

    int t, n, p, m, x, q;
    int A[100005], T[100005];

    cin >> n >> m;
    for (int i = 0; i < n; i++) {
        cin >>  A[i];
    }

    for (int i = 0; i < n; i++) {
        cin >>  T[i];
    }
    int st = 0;
    for (int i = 0; i < m; i++) {
        char c;
        cin >> c >> x;
        x = x % n;
        if (c == 'R') {
            st = (st - x);
            if (st < 0) {
                st = (n + st);
            } else {
                st = st  % n;
            }
        } else {
            st = (st + x);
            if (st < 0) {
                st = (n + st);
            } else {
                st = st  % n;
            }
        }
        //cout << st << endl;

        if (match(A, T, n, st)) {
            cout << i + 1 << endl;
            return 0;
        }

    }
    cout << "-1\n";

    return 0;
}
