#include<bits/stdc++.h>
#define ll long long
using namespace std;
ll p[100005],q[100005];

void update(ll index,ll val,ll val1,ll n)
{
	while(index<=n)
	{
		p[index]+=val;
		q[index]+=val1;
		index+=index&(-index);
	}
}

ll query(ll index)
{
	ll sum=0;
	while(index!=0)
	{
		sum+=p[index];
		index&=index-1;
	}
	return sum;
}

ll query1(ll index)
{
	ll sum=0;
	while(index!=0)
	{
		sum+=q[index];
		index&=index-1;
	}
	return sum;
}


int main()
{
//	freopen("in.txt","r",stdin);

	ll n,q;
	cin>>n>>q;
	for(ll i=1;i<=n;i++)
	{
		ll x;
		cin>>x;
		update(i,x,-x*i,n);
	}
	
	while(q--)
	{
		ll id,k,l,r;
		cin>>id;
		if(id==1)
		{
			cin>>k>>l>>r;
			ll sum1;
			ll sum2;
			ll ans;
			if(l==1)
			{
				if(k>r)
				{
					sum1=query(r);
					sum2=query1(r);
					ans=k*sum1+sum2;
				}
				else if(k==l)
				{
					sum1=query(r)-query(l);
					sum2=query1(r)-query1(l);
					ans=-(k*sum1+sum2);
				}
				else if(k==r)
				{
					sum1=query(r-1);
					sum2=query1(r-1);
					ans=k*sum1+sum2;
				}
				else
				{
					sum1=query(k-1);
					sum2=query1(k-1);
					ans=k*sum1+sum2;
				//	cout<<ans<<" ";
					sum1=query(r)-query(k);
					sum2=query1(r)-query1(k);
					ans=ans-(k*sum1+sum2);
				//	cout<<ans<<" ";
				}
				
			}
			else
			{
				if(k>r)
				{
					sum1=query(r)-query(l-1);
					sum2=query1(r)-query1(l-1);
					ans=(k*sum1+sum2);
				}
				else if(l>k)
				{
					sum1=query(r)-query(l-1);
					sum2=query1(r)-query1(l-1);
					ans=-(k*sum1+sum2);
				}
				else
				{
					sum1=query(r)-query(k);
					sum2=query1(r)-query1(k);
					ans=-(k*sum1+sum2);
					sum1=query(k-1)-query(l-1);
					sum2=query1(k-1)-query1(l-1);
					ans+=(k*sum1+sum2);
				}
			}
			cout<<ans<<endl;
		}
		else
		{
			ll s;
			cin>>k>>s;
			update(k,s,-s*k,n);
		}
	}

	return 0;
}