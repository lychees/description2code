#include <bits/stdc++.h>
using namespace std;
int dp[1009][1009];
#define MOD 100000007

int main()
{
    //freopen("file1.txt","r",stdin);
    //freopen("out.txt","w",stdout);

    int t;
    cin>>t;
    while(t--)
    {
    	int n;
    	cin>>n;
    	int p1[1001],p2[1001],a;
    	//dp[0][0] = 0;
    	memset(dp,0,sizeof dp);
    	for(int i=1;i<=n;i++)
    	{
    	    cin>>a;
    		p1[a] = i;
    		cin>>a;
    		p2[a] = i;
    		//dp[0][i] = dp[i][0] = 0;
    	}
    	for(int i=1;i<=n;i++)
    	{
    		for(int j=1;j<=n;j++)
    		{
    			if(p1[i]==p2[j])
    				dp[i][j] = dp[i-1][j-1]+1;
    			else if(dp[i-1][j]>dp[i][j-1])
                {
                    dp[i][j]=dp[i-1][j];
                }
                else
                {
                    dp[i][j]=dp[i][j-1];
                }
    		}
    	}

    	cout<<dp[n][n]<<endl;

    }
}
