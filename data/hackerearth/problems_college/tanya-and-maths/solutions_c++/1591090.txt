#include<bits/stdc++.h>
using namespace std;
long long int n, m;

long long int gcd(long long int a, long long int b) {
  if (b == 0) {
    return a;
  }
  else {
    return gcd(b, a % b);
  }
}

long long int fi(long long int n) { 
       long long int result = n, i; 
       for(i=2;i*i <= n;i++) 
       { 
         if (n % i == 0)
		 	result -= result / i; 
         while (n % i == 0) 
		 	n /= i; 
       } 
       if (n > 1) 
	   		result -= result / n; 
       return result; 
}
int main()
{
	long long int i, a[100005];
	a[1] = 1;
	for(i = 2; i < 100005; i++) {
		a[i] = fi(i);
	}
	long long int t;
	scanf("%lld", &t);
	while(t--) {
		long long int j, k, l, b, c, s = 0;
		scanf("%lld%lld", &n, &m);
		k = gcd(n, m);	
		for(i = 1; i*i <= k; i++) {
			if(n%i == 0 && m%i == 0) {
				s += a[i];
				b = k/i;
				if(i != b)
					s += a[b];
			}
		}
		printf("%lld\n", s);	
	}
	return 0;
}