#include <iostream>
#include <vector>
#include <cstring>
#define MAX 100011
using namespace std;

bool visited[100011];

int main()
{
	long long int N;
	long long T;
	
    cin >> N >> T;
    
    long long A[MAX],B[MAX],P[MAX];
    
    for(int i=1;i<=N;i++)
    {
    	cin>>A[i];
    }
    for(int i=1;i<=N;i++)
    {
    	cin>>P[i];
    }
    
  	vector <vector <int> > cycle;
  	memset(visited,0,sizeof(visited));
  	for(int i=1;i<=N;i++)
  	{
  		if(!visited[i])
  		{
  			vector <int> temp;
  			int curr=i;
  			while(!visited[curr])
  			{
	  			visited[curr] = 1;
	  			temp.push_back(curr);
	  			curr=P[curr];
  			}
  			cycle.push_back(temp);
  		}
  		
  	}
  	
  	int shift;
  	
  	for(int i=0;i<cycle.size();i++)
  	{
  		shift = T%(cycle[i].size());
  		for(int j=0;j<cycle[i].size();j++)
  		{
  			B[cycle[i][j]] = A[cycle[i][(j+shift)%cycle[i].size()]];
  		}
  	}
  	
  	for(int i=1;i<=N;i++)
    	printf("%lld ",B[i]);
    	
}
