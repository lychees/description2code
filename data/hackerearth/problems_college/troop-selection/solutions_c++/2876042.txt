#include<bits/stdc++.h>
using namespace std;

#define ll long long int

int a[1003],freq[1003],dp[1003][1003];


void solve()
{
    int n,k,s;
    cin >> n >> k >> s;
    memset(dp,0,sizeof(dp));
    memset(freq,0,sizeof(freq));
    for(int i=0;i<n;i++){
        cin >> a[i];
        if(i==0)
            freq[0]=a[0];
        else
            freq[i]=freq[i-1]+a[i];
    }
    int  ans=0;
    for(int i=1;i<=k;i++){
        for(int j=(s*i)-1;j<n;j++){
            dp[i][j]=max(dp[i][j-1],freq[j]-freq[j-s]+dp[i-1][j-s]);
            ans=max(ans,dp[i][j]);
        }
    }
    cout << ans << endl;


}

int main()
{
    int t;
    cin >> t;
    while(t--)solve();
    return 0;
}
