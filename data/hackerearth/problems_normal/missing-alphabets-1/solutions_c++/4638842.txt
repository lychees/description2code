#include <iostream>
#include <algorithm>
#include <string>
#include <vector>

using namespace std;
int idx[26];

bool cmp(string a, string b)
{
	int len = min(a.length(), b.length());
	
	for (int i = 0; i < len; ++i)
	{
		if (idx[a[i] - 'a'] < idx[b[i] - 'a'])
			return true;
		else if (idx[a[i] - 'a'] > idx[b[i] - 'a'])
			return false;
	}
	return (a.length() < b.length());
}

int main()
{
    int t, m;
    string s, alp;
    vector<string> vs;
    
    cin >> t;
    cin.ignore();
    while (t--)
    {
    	vs.clear();
    	cin >> alp;
    	cin >> m;
    	cin.ignore();
    	
    	while (m--)
    	{
    		cin >> s;
    		vs.push_back(s);
    	}
    	for (int i = 0; i < 26; ++i)
    	{
    		idx[alp[i] - 'a'] = i;
    	}
    	sort(vs.begin(), vs.end(), cmp);
    	
    	for (int i = 0; i < vs.size(); ++i)
    		cout << vs[i] << endl;
    }
    return 0;
}
