#include<bits/stdc++.h>
using namespace std;

int main()
{
	long long dp[100005],arr[100005],i,j,n,h;
	cin>>n;
	for(i=1;i<=n;i++)
	cin>>arr[i];
	dp[1]=1;
	for(i=2;i<=n;i++)
	{
	 if(arr[i]>arr[i-1])
		{
			dp[i]=dp[i-1]+1;
		}
		else
		dp[i]=1;
	}
	for(i=n-1;i>=0;i--) //now start scanning from the last as backtracking and check whether the rating is greater and tablets provided is satisfies the rating condition..if yes the add 1 tablet to the current due to high rating
  {
    if(arr[i]>arr[i+1]&&dp[i]<=dp[i+1])
    {
    dp[i]=dp[i+1]+1;  
    }

  }
	long long sum=0;
for(i=1;i<=n;i++)
sum+=dp[i];
cout<<sum<<endl;
}
