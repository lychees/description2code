t = input()
for _ in xrange(t):
    n, m = map(int, raw_input().split())
    f = dict()
    ecount = 1
    reference = [i for i in xrange(1, n+1)]
    for _ in xrange(m):
        a, b = map(int, raw_input().split())
        f[ecount] = [a, b]
        ecount += 1
    sc = map(int, raw_input().split())
    check_list = []
    for i in sc:
        check_list.extend((f[i][0], f[i][1]))
    if set(check_list) == set(reference):
        print 'YES'
    else:
        print 'NO'