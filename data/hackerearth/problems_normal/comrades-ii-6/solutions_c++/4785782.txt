#include <bits/stdc++.h>
#define pb push_back
using namespace std;
const int MAX = 1e6 + 9;
typedef long long ll;
ll arr[MAX];
vector <ll> adj[MAX];
ll DFS (int v)
{
	ll c = 1;
	for (int i = 0 ; i < adj[v].size(); i++) {
		int u = adj[v][i];
		c += DFS(u);
	}
	arr[v] = c;
	return c;
}
int main ()
{
	int t;
	cin >> t;
	while (t--)
	{
		ll n, root = -1;
		cin >> n;
		for (int i = 1 ; i <= n ; i++) {
			int x;
			cin >> x;
			if (x) adj[x].pb(i);
			else root = i;
		}
		DFS (root);
		ll sum = 0LL;
		for (int i = 1 ; i <= n; i++)
			sum += arr[i] - 1;
		ll shit = ll(ll(ll(n * (n - 1)) / ll(2))) - sum ;
		cout << sum << " " << shit << endl;
		memset(arr, 0, sizeof(arr));
		memset(adj, 0, sizeof(adj));
	}
	return 0;
}
