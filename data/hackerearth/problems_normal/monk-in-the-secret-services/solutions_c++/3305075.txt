#include <iostream>
#include <cstdio>
#include <cstring>
#include <vector>

using namespace std;

vector<int>mat[110];

int main()
{
	int t,n,m,x,y,s,a,c,h;
	scanf("%d", &t);
	while(t--) {
		scanf("%d%d", &n,&m);
		for(int i = 0; i < n; i++){
			
		mat[i].clear();
			mat[i].resize(m,1000000);
}
		for(int i = 0; i < m; i++) {
			scanf("%d%d%d", &x,&y,&c);
			x--;
			y--;
			mat[x][y] = min(mat[x][y], c);
			mat[y][x] = mat[x][y];
		}
		scanf("%d%d%d", &s,&a, &h);
		s--;
		a--;
		h--;
		for(int k = 0; k < n; k++)
			for(int i = 0; i < n; i++)
				for(int j = 0; j < n; j++)
					mat[i][j] = min(mat[i][j] ,mat[i][k]+mat[k][j]);
	

		int ans = 0;
		for(int i = 0; i < n; i++) {
			if(!(i == s || i == a || i == h)) {
				ans = max(ans, mat[s][i]+2*mat[i][a]+mat[i][h]);
				//cout << ans << " " << i << " " << mat[i][h] << endl;
			}
		}
		printf("%d\n", ans);
	}	

return 0;
}