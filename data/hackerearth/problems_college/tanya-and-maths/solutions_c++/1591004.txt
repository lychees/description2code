#include<bits/stdc++.h>
using namespace std;
long long int gcd(long long int a, long long int b)
{
	if (b == 0)
		return a;
	else 
		gcd(b, a % b);
}
long long int totient(long long int m)
{
	long long int r, i;
	r = m;
	for (i = 2; (i * i) <= m; i++) {
		if (m % i == 0) {
			r = r - (r / i);
		}
		while (m % i == 0)
			m = m / i;
	}
	if (m > 1)
		r = r - (r / m);
	return r;
}
int main()
{
	long long int t,a,b,c,i,p,q,ans;
	cin>>t;
	long long int array[100005];
	array[1] = 1;
	for(i=2;i<=100000;i++) {
		array[i]=totient(i);
	}
	while(t--) {
		ans=0;
		scanf("%lld%lld",&a,&b);
		c=gcd(a,b);
		for(i=1;i*i<=c;i++) {
			if(c%i==0) {
				q=c/i;
				if(i*i==c)
				ans+=array[i];
				else
				ans+=array[i]+array[q];
			}
		}
		cout<<ans<<endl;
	}
	return 0;
}