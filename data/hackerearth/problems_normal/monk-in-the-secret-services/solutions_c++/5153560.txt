#include <bits/stdc++.h>
using namespace std;
#define inf 10000005
#define N 104
int d[N][N];
int main()
{
    int t;
    cin>>t;
    while(t--){
    	//memset(d, 0, sizeof(d[0][0]) * N * N);
    	int n,m,x,y,c;
    	cin>>n>>m;
    	for(int i=0;i<n;i++)
    		for(int j=0;j<n;j++)
    			d[i][j]=inf;
    	for(int i=0;i<n;i++)d[i][i]=0;
    	for(int i=0;i<m;i++){
    		cin>>x>>y>>c;
    		x--;y--;
    		if(d[x][y]>c){
    			d[x][y]=c;
    			d[y][x]=c;
    		}
    	}
    	//cout<<"hghg\n";
    	int s,a,h;
    	cin>>s>>a>>h;
    	s--;a--;h--;//cout<<"hghg\n";
    	for(int k=0;k<n;k++){
    		//cout<<"hghg\n";
    		for(int i=0;i<n;i++)
    			for(int j=0;j<n;j++)
    			   d[i][j]=min(d[i][j],d[i][k]+d[k][j]);
    	}
    	/*for(int i=0;i<n;i++){
    		for(int j=0;j<n;j++)
    			cout<<d[i][j]<<" ";
    			cout<<endl;
    	}*/
    	int ans=0;
    	for(int i=0;i<n;i++){
    		if(i==s||i==a||i==h)continue;
    		ans=max(ans,d[s][i]+d[a][i]+d[i][a]+d[i][h]);
    	}
    	cout<<ans<<endl;
    }
    return 0;
}
