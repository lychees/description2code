#include <stdio.h>
int t,n,m,i,a,s[100100];
long long r;
int main() {
  scanf("%d",&t);
  while (t--) {
    scanf("%d",&n);
    for (r=m=i=0; i<n; i++) {
      scanf("%d",&a);
      while (m>1 && s[m-1]<=a) r+=s[--m];
      if (m>0 && s[m]<=a) { r+=a; m--; }
      s[++m]=a;
    }
    for (i=0; i<m; i++) r+=s[i];
    printf("%lld\n",r);
  }
  return 0;
}
