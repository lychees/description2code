#include<bits/stdc++.h>
using namespace std;

int main()
{
    int t,i;
    scanf("%d",&t);
    int s,n,l,loc;
    int a[50005],b[50005];
    long long ans,k;

    if(t<70)
    {
            
        while(t--)
        {
            scanf("%d%d%d",&s,&n,&l);
            for(i=1;i<=n;i++)
                scanf("%d",&a[i]);
            sort(a+1,a+n+1);
            loc=1;
            ans=0;
            b[0]=0;
            for(i=1;i<=s;i++)
            {
                while(i<a[loc])
                {
                    b[i]=b[i-1];
                    i++;
                }
                b[i]=b[i-1]+1;
                loc++;
                if(loc>n)
                {
                    i++;
                    while(i<=s)
                        b[i]=b[i-1],i++;
                    break;
                }
            }
            /*for(i=1;i<=s;i++)
                printf("%d,",b[i]);
            printf("\n");*/
            for(i=1;i<=n;i++)
            {
                if(a[i]>l)
                    ans+=b[s]-b[a[i]];
                else
                {
                    k = a[i]+l;
                    if(k<=s)
                    {
                        ans+=b[s]-b[k];
                        //printf("%d,%ld\n",i,ans);
                        for(int j=i+1;j<=n && a[j]<=k;j++)
                        {
                            if(s-a[j]>l)
                                ans++;
                        }
                        //printf("%d,%ld\n",i,ans);
                    }
                    else
                    {
                        //printf("%d,%ld\n",i,ans);
                           for(int j=i+1;j<=n && a[j]<=k;j++)
                            if(s-a[j]>l)
                                ans++;
                        //printf("%d,%ld\n",i,ans);

                    }
                }
                //printf("%ld\n",ans);
            }
            printf("%lld\n",ans);
        }
    }
    else
    {
        while(t--)
        {
            scanf("%d%d%d",&s,&n,&l);
            for(i=1;i<=n;i++)
                scanf("%d",&a[i]);
            sort(a+1,a+n+1);
            loc=1;
            ans=0;
            b[0]=0;
            for(i=1;i<=s;i++)
            {
                while(i<a[loc])
                {
                    b[i]=b[i-1];
                    i++;
                }
                b[i]=b[i-1]+1;
                loc++;
                if(loc>n)
                {
                    i++;
                    while(i<=s)
                        b[i]=b[i-1],i++;
                    break;
                }
            }
            /*for(i=1;i<=s;i++)
                printf("%d,",b[i]);
            printf("\n");*/
            for(i=1;i<=n;i++)
            {
                if(a[i]>l)
                    ans+=b[s]-b[a[i]];
                else
                {
                    k = a[i]+l;
                    if(k<=s)
                    {
                        ans+=b[s]-b[k];
                        //printf("%d,%ld\n",i,ans);
                        if(i<n && s-a[i]>l)
                            ans+=b[s-l-1]-b[a[i]];

                        //printf("%d,%ld\n",i,ans);
                    }
                    else
                    {
                        //printf("%d,%ld\n",i,ans);
                           for(int j=i+1;j<=n && a[j]<=k;j++)
                            if(s-a[j]>l)
                                ans++;
                        //printf("%d,%ld\n",i,ans);

                    }
                }
                //printf("%ld\n",ans);
            }
            printf("%lld\n",ans);
        }
    }
}
