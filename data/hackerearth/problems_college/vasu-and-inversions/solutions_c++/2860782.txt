#include <iostream>
#include <cstdio>
using namespace std;

int main()
{
   
   long t,n,k,num[2],i;
   int in;
   
   cin>>t;
   while(t--)
   {
   	//cin>>n;
   	scanf("%ld",&n);
   //	cin>>k;
   scanf("%ld",&k);
   	num[0]=0;
   	num[1]=0;
   	for(i=0;i<n;++i)
   	{
   		//cin>>in;
   		scanf("%d",&in);
   		++num[in];
   	}
   	
   	if(k<=num[0])
   	{
   		//cout<<(num[1]+k)<<'\n';
   		printf("%ld\n",num[1]+k);
   	}
   	else
   	 {
   	  k-=num[0];
   	  if(k&1)
   	   //cout<<(num[1]+num[0]-1)<<'\n';
   	   printf("%ld\n",(num[1]+num[0]-1));
   	  else
   	   //cout<<(num[1]+num[0])<<'\n';
   	   printf("%ld\n",(num[1]+num[0]));
   	 }
   }
}
