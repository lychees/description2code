#include <bits/stdc++.h>
using namespace std;

int func(string &s,int& i, int& option) {
	
	if(s[i] == 'A') {
		int t1,t2;i++;
		
		t1 = func(s, i, option);i++;
		t2 = func(s, i, option);
		return t1 + t2;
	}
	else if(s[i] == 'B'){
		int t1,t2;i++;
	
		t1 = func(s, i, option);i++;
		t2 = func(s, i, option);
		return max(t1,t2);
	}
	else {
	return 1;
	}
}

int main()
{
    int t;
    cin >> t;
    while(t--) {
    	string s;
    	cin >> s;
    	int n = count(s.begin(), s.end(),'X');
    //	cout << n << endl;
    	vector<int> a;
    	int te;
    	for(int i=0;i<n;i++) {
    		cin >> te;
    		a.push_back(te);
    	}
    	sort(a.rbegin(), a.rend());
    //	for(auto x:a)
    //		cout << x << " ";
    	int i=0;
    	int option=0;
    	int ans = func(s,i, option);
    	//cout << ans << endl;
    	ans = accumulate(a.begin(), a.begin()+ans, 0);
    	cout << ans << endl;
    }
    return 0;
}
