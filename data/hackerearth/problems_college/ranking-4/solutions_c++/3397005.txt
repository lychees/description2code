#include <bits/stdc++.h>

using namespace std;

#define lb      lower_bound
#define ub      upper_bound
#define pb      push_back
#define pf      push_front
#define mp      make_pair
#define gcd     __gcd
#define all(x)  x.begin(), x.end()
#define S(x)    scanf("%d", &x)
#define Sl(x)   scanf("%lld", &x)
#define P(x)    printf("%d", x)
#define Pl(x)   printf("%lld", x)
#define PS(x)   printf("%s", x)
#define MOD     1000000007LL

typedef long long       ll;
typedef vector<int>     vi;
typedef vector<vi>      vvi;
typedef pair<int, int>  ii;
typedef vector<ii>      vii;

int a[100005];
int main()
{
	int t,n,x;
	scanf("%d",&t);
	vector<pair<int, int> > as;
	while(t--) {
		as.clear();
		S(n);
		for(int i = 0; i < n; i++) {
			cin >> x;
			as.pb(mp(x, i+1));
		}
		sort(as.begin(), as.end());
		int cnt1 = 1, cnt2 = 2;
		a[as[n-1].second] = 1;
		for(int i = n-2; i >= 0; i--) {
			if(as[i].first == as[i+1].first) {
				cnt2++;
				a[as[i].second] = cnt1;
			} else {
				a[as[i].second] = cnt2;
				cnt1 = cnt2;
				cnt2++;
			}
		}
		for(int i = 1; i <= n; i++) {
			printf("%d ", a[i]);
		}	
		cout << endl;
	}
	return 0;
}
