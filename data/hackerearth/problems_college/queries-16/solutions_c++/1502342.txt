#include<bits/stdc++.h>
using namespace std;

long a[10000005]={0};

void add(long int x)
{
    while(x>0)
    {
        a[x]++;
        x/=2;;
    }
    a[0]++;
}

void remove(long int x)
{
    while(x>0)
    {
        a[x]--;
        x/=2;
    }
    a[0]--;
}

int main()
{
    long t,q,x;
    int type;
    scanf("%ld",&t);

    while(t--)
    {
        scanf("%d%ld",&type,&x);
        if(type==0)
        {
            add(x);
        }
        else if(type==1)
        {
            remove(x);
        }
        else
        {
            printf("%ld\n",a[x]);
        }
    }
    return 0;
}
