#include <iostream>
#include <stdio.h>
#include <vector>
#include <string.h>
using namespace std;
int a[1000];
int dp[1001][1001];
int main()
{
    int t,n,k,s;
    scanf("%d",&t);
    int temp,zero,one;
    vector<int> v;
    while(t--)
    {
        memset(dp,0,sizeof(dp));
        cin>>n>>k>>s;
        for(int i=0;i<n;i++)
        {
            cin>>a[i];
        }
        int temp = 0;
        for(int i=0;i+s<=n;i++)
        {
            temp = 0;
            for(int j=0;i+j<n&&j<s;j++)
            {
          //      cout<<a[i+j]<<" "<<i+j<<endl;
                temp+=a[i+j];
            }
            v.push_back(temp);
          //  cout<<temp<<" ";
        }
        //cout<<endl;
        int x,y,z;
        for(int i=0;i<=k;i++)
        {
            for(int j=0;j<=v.size();j++)
            {
                if(i==0)
                {
                    dp[i][j] = 0;
          //          cout<<dp[i][j]<<" ";
                    continue;
                }

                x = j>0?dp[i-1][j-1]:0;
                y = j-s>0?dp[i-1][j-s]:0;
                y+=j>0?v[j-1]:0;
                z = j>0?dp[i][j-1]:0;
                dp[i][j] = max(x,max(y,z));
         //       cout<<dp[i][j]<<" ";
            }
           // cout<<endl;
        }
        int maxx = 0;
        for(int i=0;i<=v.size();i++)
        {
            maxx = max(maxx, dp[k][i]);
        }
        cout<<maxx<<endl;
        v.clear();
    }
    return 0;
}
