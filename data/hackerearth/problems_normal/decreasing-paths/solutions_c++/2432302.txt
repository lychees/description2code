#include <iostream>
#include <vector>
#include <cstdio>
#include <sstream>
#include <map>
#include <string>
#include <algorithm>
#include <queue>
#include <cmath>
#include <set>
using namespace std;

int dx[] = {0,0,-1,1};
int dy[] = {-1,1,0,0};

#define MOD 1000000007

int main(){
	int n;
	cin >> n;
	vector<vector<int>> v(n, vector<int>(n));
	priority_queue<pair<int,int>, vector<pair<int,int>>, less<pair<int,int>>> q;
	for(int i=0; i<n; i++){
		for(int j=0; j<n; j++){
			cin >> v[i][j];
			q.push({v[i][j], j+i*n});
		}
	}

	long long ans = 0;
	vector<vector<int>> dp(n, vector<int>(n, 1));
	while(q.size()){
		int pos = q.top().second;
		ans = (ans + dp[pos/n][pos%n]) % MOD;
		q.pop();
		for(int k=0; k<4; k++){
			int x = pos%n + dx[k];
			int y = pos/n + dy[k];
			if(x<0 || x>=n || y<0 || y>=n) continue;
			if(v[pos/n][pos%n] <= v[y][x]) continue;
			dp[y][x] += dp[pos/n][pos%n];
			dp[y][x] %= MOD;
		}
	}

	cout << ans << endl;
	return 0;
}