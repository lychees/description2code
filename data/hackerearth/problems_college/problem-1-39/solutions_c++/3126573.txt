#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define lim 100000000000
ll getmod(ll a,ll b,ll c)
{
	ll re=1;
	a%=c;
	while(b>0)
	{
		if(b&1)
		{
			re*=a;
			re%=c;
		}
		b=b>>1;
		a*=a;
		a%=c;
	}
	return re;
	
}
int main()
{
	ll t,a,b,c,mod;
	cin>>t;
	while(t--)
	{
		cin>>a>>b>>c;
		
		if(b<0)
		{ if(a==1&&c==1)
		cout<<"1"<<endl;
		else cout<<"0"<<endl;}
		else
		{	mod=getmod(a,b,c);
		 if(mod>c/2)
		 {mod=c-mod;
		cout<<getmod(a,b,lim)+mod<<endl;}
		else cout<<getmod(a,b,lim)-mod<<endl;
	}
	}
}