#include <iostream>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <vector>
#include <string>
#include <map>
#include <set>
#include <queue>
#include <algorithm>
#define lli long long int
#define pb push_back
#define mod 1000000007
#define pii pair<int,int>

using namespace std;
int arr[1002][1002];
int top[1002][1002] , rit[1002][1002];
int main()
{
    int n,m,i,j,k,a,b;
    cin>>n>>m;
    memset(top,0,sizeof(top));
    memset(rit,0,sizeof(rit));
    for(i=1;i<=n;i++){
        for(j=1;j<=m;j++){
            cin>>arr[i][j];
        }
    }
    for(i=1;i<=m;i++){
        top[1][i]=1;
        for(j=2;j<=n;j++){
            if(arr[j][i] == arr[j-1][i])top[j][i] = top[j-1][i] +1;
            else top[j][i] = 1;
        }
    }

    for(i=1;i<=n;i++){
        rit[i][m]=1;
        for(j=m-1;j>=1;j--){
            if(arr[i][j] == arr[i][j+1])rit[i][j] = rit[i][j+1] +1;
            else rit[i][j] = 1;
        }
    }
    int ans=0;
    for(i=1;i<=n;i++){
        for(j=1;j<=m;j++){
            ans = max(ans, top[i][j] + rit[i][j] -1);
            //cout<<rit[i][j]<<"  ";
        }
       // cout<<endl;
    }
    cout<<ans;




    return 0;
}

