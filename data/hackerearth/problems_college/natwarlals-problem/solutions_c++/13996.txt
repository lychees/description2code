#include <iostream>
#include <cstdio>
#include <cstring>
using namespace std;

int find(char mat[500][500], int findMat[500][500], int r, int c, char* input, int curr, int len, int N)
{
	if (r<0 || c<0 || r>=N || c>=N)
	  return 0;
	
	if (mat[r][c] !=input[curr])
	  return 0;
	
	if (curr == len-1)
	  return 1;

	// if (findMat[r][c] > 0)
	   // return findMat[r][c];

	/*
	findMat[r][c] +=find(mat, findMat, r-1, c-1, input, curr+1, len, N);
	findMat[r][c] +=find(mat, findMat, r-1, c+1, input, curr+1, len, N);
	findMat[r][c] +=find(mat, findMat, r+1, c-1, input, curr+1, len, N);
	findMat[r][c] +=find(mat, findMat, r+1, c+1, input, curr+1, len, N);
	
	return findMat[r][c];
	*/
	int temp = 0;
	temp +=find(mat, findMat, r-1, c-1, input, curr+1, len, N);
	temp +=find(mat, findMat, r-1, c+1, input, curr+1, len, N);
	temp +=find(mat, findMat, r+1, c-1, input, curr+1, len, N);
	temp +=find(mat, findMat, r+1, c+1, input, curr+1, len, N);
	
	return temp;
}

int main()
{
	int T, N;
	char input[500];
	//cin>>T;
	scanf("%d",&T);
	
	for (int i=0;i<T;i++)
	{	
		//cin>>N;
		scanf("%d",&N);
		char mat[500][500];
		for (int r = 0; r < N; r++)
		{
			for (int c = 0; c < N; c++)
			{
				cin>>mat[r][c];
				//scanf("%c",&mat[r][c]);
			}
		}
		//cin>>input;
		scanf("%s",input);

		int findMat[500][500];
		
		/*
		for (int r = 0; r < N; r++)
		{
			for (int c = 0; c < N; c++)
			{
				findMat[r][c] = 0;
			}
		}
		*/
		
		int count = 0;
		int len = strlen(input);

		for (int r = 0; r < N; r++)
		{
			for (int c = 0; c < N; c++)
			{
				if (mat[r][c] == input[0])
				{				
					count += find(mat, findMat, r, c, input, 0, len, N);
				}
			}
		}

		printf("%d\n",count);
	}	

	return 0;
}
