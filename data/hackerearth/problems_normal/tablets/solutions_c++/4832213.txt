#include <iostream>
using namespace std;
int arr[100001],N;
long long func();
void input();
int main()
{
	input();
	cout<<func();
	return 0;
}
void input()
{
	cin >> N;
	for(int i=0;i<N;i++)cin >> arr[i];
}
long long func()
{
	long long brr[N];
	//initialise
	for(int i=0;i<N;i++)brr[i]=1;
	for(int i=1;i<N;i++)
	{
		if(arr[i]>arr[i-1])brr[i]=brr[i-1]+1;
		else if(arr[i]<arr[i-1] and brr[i-1]<=brr[i])
		{
			int j=i-1;
		while(j>=0 && arr[j]>arr[j+1] and brr[j]<=brr[j+1])
		{
			brr[j]=brr[j+1]+1;
			j--;
		}
	}
	}
	long long sm=0;
	for(int i=0;i<N;i++)sm+=brr[i];
	return sm;
}