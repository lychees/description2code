#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
#include<cstring>
#include<stdlib.h>
#include <bits/stdc++.h>
 
using namespace std;
long long int gcd(long long int n,long long int m){
    if(m==0){
        return n;
    }
    else{
      return   gcd(m,n%m);
       
    }
}
long long int divisor(long long int  a){
 long long int i,c,v;
   c=0;
            v=sqrt(a);
          for(i=1;i*i<a;i++){
            
                 
                  if(a%i==0 ){
                      
                      c=c+2;
                  
                       
                  
       
              }
              
     
          }
            if(v*v==a){
                c=c+1;
            }
    return c;
}
            
 
int main() {
 long long int t,z,p,s,k,b;
   
long long     int  flag=0,ram,di;
               
         
      
        scanf("%lld%lld",&p,&t);
         di=divisor(p);
    while(t--){ 
        
        scanf("%lld%lld",&b,&z);
        
        if(b==1){
          s=gcd(z,p);  
        k=divisor(s);
        }
        if(b==2){
            if(p%z==0){
                k=divisor(p/z);
            }
            else{
                k=0;
            }
        }
        if(b==3){
            if(p%z==0){
                k=divisor(p/z);
            }
            else{
                k=0;
            }
            k=di-k;
            
        }
       printf("%lld\n",k);
       
       
    
 
    }
     
    
    return 0;
    
}     