#include<bits/stdc++.h>
using namespace std;
bool bound(long long x,long long y,long long int n,long long int m)
{
    return x<=n && y<=m && x>=1 && y>=1;
}
int main()
{
	
	int t;
	cin>>t;
	while(t--){
		int n,m;
    	cin>>n>>m;
    	long long curr_x=1;
    	long long curr_y=1;
    	int k;
    	cin>>k;
    	long long ans=0;
    	while(k--){
    		int A,B;
        	cin>>A>>B;
        	long long low=0;
			long long high=INT_MAX;
        	for(int i=0;i<50;i++){
            	long long mid=(low+high)/2;
	            if(bound(A*mid+curr_x,B*mid+curr_y,n,m))
                	low=mid;
            	else
                	high=mid;
        	}
        	curr_x=curr_x + low*A;
        	curr_y=curr_y + low*B;
        	ans=ans+low;
    	}
    	cout<<ans<<endl;
	}
	return 0;
}