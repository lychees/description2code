def sort_ordering(word_list, ordering):
   key = dict(((j, i) for i, j in enumerate(ordering)))
   reverse_key = dict((i, j) for i, j in enumerate(ordering))
   number_list = [tuple(key[i] for i in word) for word in word_list]
   number_list.sort()
   word_list = [''.join(reverse_key[i] for i in number) for number in number_list]
   return word_list
   
T = int(raw_input())
for i in xrange(T):
    ordering = raw_input()
    M = int(raw_input())
    word_list = []
    for i in xrange(M):
        word_list.append(raw_input())
    for word in sort_ordering(word_list, ordering):
        print word