#include <bits/stdc++.h>
using namespace std;
int n;
int check(int i,int j) {
	if(i>=1&&i<=n&&j>=1&&j<=n)
	return 1;
	return 0;
}
int main()
{
    scanf("%d",&n);
    int i,j,k;
    int a[n+1][n+1];
    int dp[n+1][n+1];
    memset(dp,0,sizeof(dp));
    for(i=1;i<=n;i++) {
    	for(j=1;j<=n;j++) {
    		scanf("%d",&a[i][j]);
    		if(i==1)
    		dp[i][j]=a[i][j];
    	}
    }
    for(i=1;i<n;i++) {
    	for(j=1;j<=n;j++) {
    		int o1 = j;
    		int o;
    		while(o1!=0) {
    		o = o1;
    		while(o<=n) {
    			dp[i+1][o] = max(dp[i][j]+a[i+1][o],dp[i+1][o]);
    			o = o*2;
    		}
    		o1=o1/2;
    		}
    	}
    	}
    int max3 = 0;
    for(j=1;j<=n;j++)
    max3=max(max3,dp[n][j]);
    printf("%d\n",max3);
    return 0;
}
