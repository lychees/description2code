#include<bits/stdc++.h>
#define mod 1000000007

using namespace std;

int p[100005];
int root(const int& i){
	return (p[i]==i) ? (i) : (p[i]=root(p[i]));
}

void merge(int x,int y){
	x=root(x);
	y=root(y);
	if(p[y]<p[x])
		swap(x,y);
	p[y]=x;
}

int main(){
	vector< pair< long long , pair<int,int> > > v;
	int m,n,ix,cnt,t;
	long long sum;
	cin >> t;
	while(t--){
		cin >> n >> m;
		v.resize(m);
		for(int i=1;i<=n;i++)
			p[i]=i;
		for(int i=0;i<m;i++){
			scanf("%d %d %lld",&v[i].second.first,&v[i].second.second,&v[i].first);
		}
		sort(v.begin(),v.end());
		cnt=0;
		sum=1;
		for(int i=0;i<m;i++){
			if(root(v[i].second.first)==root(v[i].second.second))
				continue;
			merge(v[i].second.first,v[i].second.second);
			cnt++;
			sum=(sum*v[i].first)%mod;
			if(cnt==n-1)
				break;
		}
		cout << sum << endl;
	}
	return 0;
}

