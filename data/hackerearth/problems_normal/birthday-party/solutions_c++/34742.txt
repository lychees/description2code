#include <cstdio>
#include <algorithm>
#include <cstring>
#include <set>
#include <vector>
#include <queue>
#include <map>
#include <iostream>
#include <cmath>

#define S(x) scanf("%d",&x)
#define P(x) printf("%d\n",x)
#define rep(i,a,b) for(int i=a;i<b;i++)
#define pb push_back
using namespace std;

typedef long long int LL;
typedef vector<int > VI;

int main() {
   int t;
   S(t);
   while(t--) {
      int P,M;
      S(P);S(M);
      int possibleSum[1001];
      memset(possibleSum,0,sizeof(possibleSum));
      possibleSum[0] = 1;
      while(M--) {
         int a;
         S(a);
         for(int i = 1000; i >= 0; i--) 
            if(i+a <= 1000 && possibleSum[i]) possibleSum[i+a] = 1;
      }
      int A[P];
      int cnt = 1;
      int ans = 0;
      rep(i,0,P) {
         S(A[i]);
         if(i) {
            if(A[i] == A[i-1]) {
               cnt++;
            } else {
               ans += possibleSum[cnt];
               cnt = 1;
            }
         }
      }
      ans += possibleSum[cnt];
      printf("%d\n",ans);
   }
   return 0;
}