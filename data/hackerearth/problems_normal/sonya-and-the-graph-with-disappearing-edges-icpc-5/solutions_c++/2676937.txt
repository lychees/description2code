#include <bits/stdc++.h>
#define ll long long int
#define sd(a) scanf("%d",&a)
#define sld(a) scanf("%lld",&a)
#define ss(a) scanf("%s",a)

#define pd(a) printf("%d ",a)
#define pld(a) printf("%lld ",a)
#define pn() printf("\n")
#define fb(i,n) for(i=0;i<n;i++)
#define fe(i,n)for(i=n-1;i>-1;i--)
#define pb(a) push_back(a)
#define w(t) while(t--)
#define lst1(a) (a&(-a))
using namespace std;

ll vis[100005],dist[100005],arr[100005][2];
map<pair<ll,ll>,ll >mp;
vector<ll>v[100005];
ll n,m,k;
void bfs(ll src)
{
    queue<ll>q;
        q.push(src);
    vis[src]=1;
    dist[src]=0;
    while(!q.empty())
    {
        ll a=q.front(),i;
        q.pop();
        if(a==n)
            break;
        fb(i,v[a].size())
        {
            ll j=v[a][i];
            pair<ll,ll>p;
            p.first=min(a,j);
            p.second=max(a,j);
            if(!vis[j]&&(mp[p]==0||mp[p]>dist[a]+1))
            {
                vis[j]=1;
                dist[j]=dist[a]+1;
                q.push(j);
            }
        }
    }
}

int main()
{
   //int t;sd(t);w(t){
   memset(vis,0,sizeof(vis));
   memset(dist,-1,sizeof(dist));
   //memset(det,-1,sizeof(det));
    int i;
   sld(n);sld(m);sld(k);
   fb(i,m)
   {
       ll a;
       ll b;
       sld(a);sld(b);
       v[a].push_back(b);
       v[b].push_back(a);
       if(a>b)
        swap(a,b);
       arr[i+1][0]=a;
       arr[i+1][1]=b;
   }
   w(k)
   {
       ll t,x;
       sld(t);sld(x);
       pair<ll,ll>p;
       p.first=arr[x][0];
       p.second=arr[x][1];
       mp[p]=t;
   }
   bfs(1);
   pld(dist[n]);
   pn();
    return 0;
}
