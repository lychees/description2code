#include<stdio.h>
#include<math.h>
#include<stdlib.h>
#include<algorithm>
using namespace std;
void work()
{
    int d,a,x,y,n,i,j,flag;
    scanf("%d%d",&d,&a);
    n=sqrt(d);
    int arr[a+1][2];

    int dp[d+1];
    dp[d]=0;

    for(i=1;i<=a;i++)
        scanf("%d%d",&arr[i][0],&arr[i][1]);


    for(i=d-1;i>=1;i--)
    {
        flag=0;
        dp[i]=1000000007;

        for(j=1;j<=a;j++)
        {

            if(arr[j][0]==i)
            flag=1,dp[i]=min(dp[i],dp[arr[j][1]]);
        }

        if(flag==0)
        for(j=i+2;j<=i+12;j++)
        {
            if(j<=d&&j>=1)
            {




                dp[i]=min(dp[i],1+dp[j]);
            }
        }
    }
    printf("%d\n",dp[1]);
}
int main()
{
    int ntc;
    scanf("%d",&ntc);
    while(ntc--)
    {

        work();
    }
}

