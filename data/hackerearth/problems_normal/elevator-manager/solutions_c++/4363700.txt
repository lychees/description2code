/*
   Mayank Pratap Singh
   MNNIT, 2nd year IT
   AC ho.
*/
#include<bits/stdc++.h>
using namespace std;
#define ff first
#define ss second
#define pb push_back
#define mp make_pair
#define MOD 1000000007

typedef long long ll;
typedef long double ld;

const int INF=(int)(1e9);
const ll INF64=(ll)(1e18);
const ld EPS=1e-9;
const ld PI=3.1415926535897932384626433832795;
typedef vector<int> vi;
typedef vector<pair<int,int> > vii;
typedef vector<list<int> > vl;
typedef vector<list<pair<int,int> > > vlp;
typedef vector<list<pair<int,double> > >vld;
typedef map<int,int> mi;
typedef map<string,int> ms;
typedef set<int> si;

bool isPerfectSquare(ll x){

   ll val=sqrt(x);
   return ((val*val)==x);

}

long long mulmod(ll a,ll b,ll c){

  __int128 res = a;
    res *= b;
    res %= c;
    a = res;
    return a;
}
long long modulo(ll a,ll b,ll c){

     long long x=1,y=a;

     while(b>0){

         if(b%2==1){

             x=mulmod(x,y,c);
         }
         y=mulmod(y,y,c);
         b/=2;
     }

     return x%c;

}
bool isPrime(long long p,int iteration){

    if(p<2)
       return false;

    if(p!=2 && p%2==0)
        return false;

    long long s=p-1;
    while(s%2==0)
        s/=2;

    for(int i=0;i<iteration;i++){
        long long a=rand()%(p-1)+1,temp=s;
        long long mod=modulo(a,temp,p);
        while(temp!=p-1 && mod!=1 && mod!=p-1){
            mod=mulmod(mod,mod,p);
            temp *= 2;
        }
        if(mod!=p-1 && temp%2==0){
            return false;
        }
    }
    return true;

}
int main(){

   ios_base::sync_with_stdio(0);

   ll n,q;
   cin>>n>>q;

   ll prev=1;

   ll dist=0;
   ll dudes=0;

   while(q--){

     ll t,k;
     ll f;

     cin>>t>>f>>k;

     if(t==1){

        if(isPrime(f+k,10)){
          dist+=abs(f-prev);
          dudes+=k;
          prev=f;
        }
     }
     else{

         if(isPerfectSquare(f+k)){
           dist+=abs(f-prev);
           dudes-=k;
           prev=f;
         }

     }

   }

   cout<<dist%MOD<<" "<<dudes<<"\n";

   return 0;
}
