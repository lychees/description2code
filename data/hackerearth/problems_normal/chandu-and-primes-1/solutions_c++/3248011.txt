#include <bits/stdc++.h>
 
using namespace std;
 
typedef long long ll;
typedef pair<int,int> pii;
 
#define PB push_back
#define MP make_pair
#define LB lower_bound
#define UB upper_bound
#define B begin()
#define E end()
#define F first
#define S second
#define MS(asd,p) memset(asd,p,sizeof(asd))
#define rep(i,a,b) for(i=a;i<=b;i++)
#define repr(i,a,b) for(i=a;i>=b;i--)
#define px(x) printf("%s = %d\n",#x,x)
#define px2(x,y) printf("%s %d %s %d\n",#x,x,#y,y)
#define px3(x,y,z) printf("%s %d %s %d %s %d\n",#x,x,#y,y,#z,z)
#define pxl(x) printf("%s = %lld\n",#x,x)
#define gc getchar_unlocked
#define pc putchar_unlocked
const ll mod=1000000007;
 
template < class T > void read(T &x) { register int c; while(c = gc(), c <= 32);  x = c&15; while(c = gc(), c > 32) x = (x<<3)+(x<<1) + (c&15); }
template < class T > void readi(T &x) { register int c, mi = 0; while(c = gc(), c <= 32); if(c == '-') mi = 1, x = 0; else x = c&15; while(c = gc(), c > 32) x = (x<<3)+(x<<1) + (c&15); if(mi == 1) x = -x; }
template < class T > void read(T &x, T &y) { read(x); read(y); }
template < class T > void read(T &x, T &y, T &z) { read(x, y); read(z); }
template < class T > void reada(T *a, int n) { for(int i = 0; i < n; ++i) read(a[i]); }
template < class T > void reada1(T *a, int n) { for(int i = 1; i <= n; ++i) read(a[i]); }
template < class T > void print(T x) { static char s[20]; register int pt = 0;while(!pt || x > 0) { s[++pt] = (char)(x % 10 + '0'); x /= 10; } while(pt > 0) pc(s[pt--]); }
template < class T > void printi(T x) { static char s[20]; register int pt = 0, mi = (x < 0); if(mi == 1) x = -x; while(!pt || x > 0) { s[++pt] = (char)(x % 10 + '0'); x /= 10; } if(mi == 1) pc('-'); while(pt > 0) pc(s[pt--]); }
template < class T > void print(T x, T y) { print(x); pc(' '); print(y); }
template < class T > void print(T x, T y, T z) { print(x, y); pc(' '); print(z); }
template < class T > void println(T x) { print(x); puts(""); }
template < class T > void printa(T a, int n) { for(int i = 0; i < n; ++i) { print(a[i]); pc(i + 1 == n ? '\n' : ' '); } }
template < class T > void printa1(T a, int n) { for(int i = 1; i <= n; ++i) { print(a[i]); pc(i == n ? '\n' : ' '); } }
template < class T > T gcd(T a, T b) { return b ? gcd(b, a % b) : a; }
template < class T > T lcm(T a, T b) { return a / gcd(a, b) * b; }
template < class T > T power(T a, T b) { T r = 1; while(b > 0) { if(b & 1) r = (r * a) % mod; a = (a * a) % mod; b >>= 1; } return r; }
 
//template ends here
 
#define MAXN 1000002
//#define LOCAL

int prime[MAXN];
int aprime[MAXN];
vector<pii>v;


int main(){
    #ifdef LOCAL
        freopen("input.txt","r",stdin);
	clock_t start1=clock();
    #endif
    int t;
	for(int i=2;i<=1000000;i++)
	    prime[i]=1;
	for(int i=2;i<=1000000;i++){
	    if(prime[i]==1)
	        for(int j=2;(i*j)<=1000000;j++)
	            prime[i*j]=0;
	}
	for(int i=2;i<=1000000;i++){
	    if(prime[i]==1){
	        aprime[i]=1;
	        continue;
	    }
	    int suffix=0;
	    int temp=i;
	    int cnt=1;
	    while(temp>0){
	        suffix=suffix+(temp%10)*cnt;
            //px(suffix);
	        if(prime[suffix]==1){
	            break;
	        }
	        temp/=10;
	        cnt*=10;
	    }
	    if(temp!=0)
	        aprime[i]=1;
        else 
	        aprime[i]=0;
	}
    int cnt=0;
	for(int i=2;i<=1000000;i++){
	    if(aprime[i]==1){
            v.PB(pii(i,cnt));
            cnt++;
        }
	}
	read(t);
	int l,r,a,b;
    vector<pii>::iterator it,it1;
	for(int i=1;i<=t;i++){
	    read(l,r);
        it=LB(v.B,v.E,pii(l,0));
        it1=LB(v.B,v.E,pii(r+1,0));
        a=it->S;
        b=it1->S;
        if(it1==v.E)
            b=v.size();
        if(it==v.E)
            a=v.size();
        printf("%d\n",b-a);
	}    
		  
    #ifdef LOCAL
        printf("%.3lf seconds\n",(double)(clock()-start1)/CLOCKS_PER_SEC);
    #endif
    return 0;
}   