#include<iostream>
#include<cstdio>
#include<cstdlib>
#include<vector>
#include<map>
#include<queue>
#include<cstring>
#include<cmath>
#include<algorithm>
using namespace std;
char a[3002];
int aa[3002];
int ans[1010][1010];
int main()
	{
	int i,j,k;
	int T;
	ios_base::sync_with_stdio(false);
	cin>>T;
	int N,K,S;
	while(T--)
		{
		cin>>N>>K>>S;
		for(i=1;i<=N;i++)
			{
			cin>>j;
			a[i]=j;
			}
		aa[1]=0;
		for(i=1;i<=S && i<=N;i++)
			{
			aa[1]+=a[i];
			}
		for(i=2;i<N-S+2;i++)
			{
			aa[i]=aa[i-1]+a[i+S-1]-a[i-1];
			}
		int l=N-S+2;
		if(l<=0)
			{
			cout<<0<<endl;
			continue;
			}
		for(i=0;i<l;i++)
			ans[i][0]=0;
		for(i=0;i<=K;i++)
			ans[0][i]=0;
		for(i=1;i<l;i++)
			{
			for(j=1;j<=K;j++)
				{
				ans[i][j]=max(ans[i-1][j],aa[i]);
				ans[i][j]=max(ans[i][j],ans[i][j-1]);
				if(i-S>=0)
					ans[i][j]=max(ans[i][j],ans[i-S][j-1]+aa[i]);
				}
			}
		cout<<ans[l-1][K]<<endl;
		}
	return 0;	
	}