#include <iostream>
#include<string.h>
using namespace std;
char arr[500][500];
char str[500];
int count;
void find_sequence(int i,int j,char *str,int n,int len,int x)
{
	if(x==len)
	{
		count++;
	}
	else{
	if( i<n-1 && j<n-1 && arr[i+1][j+1]==*(str+1) )
	  find_sequence(i+1,j+1,str+1,n,len,x+1);
	if( i<n-1 && j>0 && arr[i+1][j-1]==*(str+1))  
	  find_sequence(i+1,j-1,str+1,n,len,x+1);
	if( i>0 && j<n-1 && arr[i-1][j+1]==*(str+1))
	  find_sequence(i-1,j+1,str+1,n,len,x+1);
	if( i>0 && j>0 && arr[i-1][j-1]==*(str+1))
	  find_sequence(i-1,j-1,str+1,n,len,x+1);}
}	
int main()
{   
	int t,i,j,n,x,len;
	cin>>t;
	while(t--)
	{
		cin>>n;
		count=0;
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				cin>>arr[i][j];
			}
		}
		cin>>str;
		len=strlen(str);
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(*str==arr[i][j])
				{
					find_sequence(i,j,str,n,len,1);
				}
			}
		}
		cout<<count<<endl;
	}
    return 0;
}
