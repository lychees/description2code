A, B = map(int, raw_input().strip().split())
can_buy = raw_input()
prev = A
ans = 0
# import pdb
# pdb.set_trace()
for i in xrange(0, len(can_buy)):
    temp = prev % B
    square = temp * temp
    if can_buy[i] == "1":
        if i == 0:
            ans = (ans % B + temp) % B
        else:
            ans = (ans % B + square % B) % B
    if i == 0:
        prev = temp
    else:
        prev = square
print ans
