#include <iostream>
#include<vector>
#include<algorithm>
using namespace std;
#define mod 1000000007
int m[1000000];
long long fact[1000000];
long long po ( long long x, long long p ){
	long long y=1;
	while(p>0){
		if(p&1)
		y=(y*x)%mod;
		x=(x*x)%mod;
		p/=2;
	}
	return y;
}
int main()
{
    int n;
    cin >> n;
    long long ans = 1;
    fact[0]=1;
    int f = 0;
    for ( long long i = 1; i < 1000000; i++ ){
    	fact[i]=(fact[i-1]*i)%mod;
    }
    for ( int i = 0; i < n; i++ ){
    	scanf("%d",&m[i]);
    	f+=m[i];
    	ans=(ans*po((long long)fact[m[i]],mod-2))%mod;
    	vector<int> v1;
    	int x;
    	for ( int k = 0; k < m[i]; k++ ){
    		scanf("%d",&x);
    		v1.push_back(x);
    	}
    	sort(v1.begin(),v1.end());
    	int p;
    //	vector<int> v2;
    	long long ans1 = 1;
    	for ( int k = 0; k < m[i]; k=p ){
    		for ( p = k + 1;p<m[i]&&v1[p]==v1[k];p++ );
    		//v2.push_back(p-k);
    		long long u=p-k;
    		ans=(ans*fact[u])%mod;
    	}
    	//ans=(ans*po(ans1,mod-2))%mod;
    	//v.push_back(v2);
    }
    ans=(ans*fact[f])%mod;
    cout << ans << endl;
    return 0;
}
