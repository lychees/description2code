#include <bits/stdc++.h>
using namespace std;

int main()
{
    int T;
    scanf("%d", &T);
    
    while(T--) {
    	int N;
    	int K;
    	scanf("%d%d", &N, &K);
    	int Arr[N];
    	for(int i = 0; i < N; ++i) {
    		scanf("%d", &Arr[i]);
    	}
    	int i = 0;
    	int j = 0;
    	set<int> :: reverse_iterator it;
    	set<int> ST;
    	map<int, int> Map;
    	int ans = 0;
    	while(i < N && j < N) {
    		Map[Arr[j]]++;
    		ST.insert(Arr[j]);
    		it = ST.rbegin();
    		int mx = (*it);
    		if(mx > K) {
    			ans += (N - j);
    			while(i < N && i <= j) {
    				if(Map[Arr[i]] == 1) {
    					Map[Arr[i]]--;
    					ST.erase(Arr[i]);
    				} else
    					Map[Arr[i]]--;
    				if(ST.size() > 0) {
    					it = ST.rbegin();
    					mx = (*it);
    					if(mx > K) {
    						ans += (N - j);
    					}
    				}
    				i++;
    			}
    			if(i > j)
    				j = i;
    		} else {
    			j++;
    		}
    	}
    	printf("%d\n", ans);
    }
    return 0;
}
