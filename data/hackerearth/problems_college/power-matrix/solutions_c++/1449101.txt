#include <cstdio>
using namespace std;
int A[50][50];
void expo(int t,int n){
	if(t==1)
		return;
	int B[n][n];
	if(t&1){
		for(int x=0;x<n;x++)
			for(int y=0;y<n;y++)
				B[x][y]=A[x][y];
	}
	int C[n][n];
	for(int x=0;x<n;x++)
		for(int y=0;y<n;y++){
			C[x][y]=0;
			for(int z=0;z<n;z++){
				C[x][y]=(C[x][y]+(long long)A[x][z]*A[z][y])%1000000007;
			}
		}
	for(int x=0;x<n;x++)
		for(int y=0;y<n;y++)
			A[x][y]=C[x][y];
	expo(t>>1,n);
	if(t&1){
		for(int x=0;x<n;x++)
			for(int y=0;y<n;y++){
				C[x][y]=0;
				for(int z=0;z<n;z++){
					C[x][y]=(C[x][y]+(long long)A[x][z]*B[z][y])%1000000007;
				}
			}
		for(int x=0;x<n;x++)
			for(int y=0;y<n;y++)
				A[x][y]=C[x][y];
	}
}
int main() {
	int t;
	scanf("%d",&t);
	while (t--) {
		int n,m;
		scanf("%d%d",&n,&m);
		for (int i = 0; i < n; i++) {
			for (int j = 0; j < n; j++) {
				scanf("%d",&A[i][j]);
			}
		}
		expo(m,n);
		for (int i = 0; i < n; i++) {
			for (int j = 0; j < n; j++) {
				printf("%d ",A[i][j]);
			}
			printf("\n");
		}
	}
	return 0;
}