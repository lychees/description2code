#include <bits/stdc++.h>
#define ll long long int
using namespace std;
ll dp[2009][2009];
ll val;
ll a[100009],n;

ll memo(int i,int j)
{
	if(i>j)
	{
		return 0;

	}

	if(dp[i][j]!=-1)
		return dp[i][j];

    ll left;
	left=n-(j-i+1)+1;

	//printf("left=%lld i=%d j=%d\n",left,i,j);
	val=max(left*a[i]+memo(i+1,j),left*a[j]+memo(i,j-1));
	dp[i][j]=val;
	return val;
}
int main()
{
	int i,j;
    cin>>n;
    for(i=1;i<=n;i++)
    {
    	cin>>a[i];
    }
    for(i=1;i<=2008;i++)
    {

        for(j=1;j<=2008;j++)
        {
            dp[i][j]=-1;
        }
    }
    memo(1,n);
    cout<<dp[1][n];
    return 0;
}
