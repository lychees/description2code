#include<iostream>
#include<string.h>
#include<algorithm>

using namespace std;

int adj[33][33];
int a[23];
int n;

int sum(int i){
    int tmp = 0;
    for(int j = 0; j < n; j++){
        if(i & (1<<j)){
            tmp += a[j];
        }
    }
    return tmp;

}
bool same_group(int j, int k){
    if(adj[j][k]) return true;
    return false;
}
int ok(int i){
    for(int j = 0; j < n; j++){
        for(int k = j+1; k < n; k++){
            if((i & (1<<j)) && ((i & (1<<k)))){
                if(!same_group(j, k)) return false;
            }
        }
    }
    return true;

}
int main(){
    int t; cin >> t;
    while(t--){
        int w, m;
        cin >> n >> w >> m;
        memset(adj, 0, sizeof adj);
        for(int i = 0; i < n; i++){
            cin >> a[i];
        }
        for(int i = 0; i < m; i++){
            int x, y;
            cin >> x >> y;
            x--;
            y--;
            adj[x][y] = adj[y][x] = 1;
        }
        for(int k =0; k<n; k++){
            for(int i = 0; i < n; i++){
                for(int j = 0; j < n; j++){
                    adj[i][j] = adj[i][j] | (adj[i][k] & adj[k][j]);
                }
            }
        }

        int ans = 0;
        for(int i = 0; i < (1<<n); i++){
            if(sum(i) != w) continue;
            if(!ok(i)) continue;
            ans++;
        }
        cout << ans << endl;
    }
    return 0;
}
