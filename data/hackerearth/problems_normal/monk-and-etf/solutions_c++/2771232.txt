#include <bits/stdc++.h>
#define ll long long
#define mymax 1000001
using namespace std;
typedef struct node
{
	ll int val,n,p;
}node;
node a[mymax];
bool p[mymax];
int main()
{
	ll int i,j,xl,xr;
	memset(p,0,sizeof(p));
	for(i=2;i*i<mymax;i++)
	{
		if(p[i]!=0)
		continue;
		for(j=2;j*i<mymax;j++)
		{
			p[j*i]=1;//Not prime
		}
	}
	ll int test;
	cin>>test;
	while(test--)
	{
		ll int l,r,k;
		scanf("%lld%lld%lld",&l,&r,&k);
		for(i=0;i<(r-l+1);i++)
		{
			a[i].val=i+l;
			a[i].n=i+l;
			a[i].p=0;
		}
		for(i=2;i<mymax;i++)
		{
			if(p[i]!=0)
			continue;
			//~ a[i].val-= (a[i].val/i);
			xl=l/i;
			xr=r/i;
			for(j=xl;j<=xr;j++)
			{
				if((i*j)>=l && (i*j)<=r)
				{
					a[i*j-l].p=1; //Not prime
					a[i*j-l].val-= (a[i*j-l].val/i);
					while((a[i*j-l].n%i) ==0)
					{
						a[i*j-l].n/=i;
					}
				}
			}
		}
		ll int ms=0;
		for(i=0;i<(r-l+1);i++)
		{
			if(a[i].n!=1)
			{
				a[i].val-=(a[i].val/a[i].n);
			}
			//~ cout<<a[i].val<<endl;
			if((a[i].val%k) ==0)
			ms++;
		}
		double ans= (ms*1.0)/((r-l+1)*1.0);
		printf("%0.6lf\n",ans);
		//~ cout<<(r-l+1)<<" "<<ms<<endl;
	}
	return 0;
}
