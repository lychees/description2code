//kjbjkgjhcgh bvbkjkbjk
#include <iostream>
#include <vector>
#include <algorithm>
#include <stack>
#define MOD 1000000007
using namespace std;
 
vector<int> v[100001];
long long a[100001];
bool visit[100001];
stack<int> s;
vector<int> v2;
 
int dfs(int x)
{
	visit[x]=true;
	s.push(x);
	int b[100001];
	int k=1;
	b[0]=x;
	while(!s.empty())
	{
		int y=s.top();
		s.pop();
		for(int j=0;j<v[y].size();j++)
		{
			if(visit[v[y][j]]==false)
			{
				b[k++]=v[y][j];
				s.push(v[y][j]);
				visit[v[y][j]]=true;
			}
		}
	}
	long long max=a[b[0]];
	for(int i=1;i<k;i++)
	{
		if(a[b[i]]>max)
		   max=a[b[i]];
	}
	int count=0;
	for(int i=0;i<k;i++)
	{
		if(a[b[i]]==max)
		   count++;
	}
	return count;
}
 
 
int main()
{
    int n,m;
    cin>>n>>m;
    for(int i=1;i<=n;i++)
        cin>>a[i];
    while(m--)
    {
    	int x,y;
    	cin>>x>>y;
    	v[x].push_back(y);
    	v[y].push_back(x);
    }
    for(int i=1;i<=n;i++)
    {
    	if(visit[i]==false)
    	{
    		int l=dfs(i);
    		v2.push_back(l);
    	}
    }
    long long val=1;
    for(int i=0;i<v2.size();i++)
    {
    	val=((val%MOD)*(v2[i]%MOD))%MOD;
    }
    cout<<val;
    return 0;
}