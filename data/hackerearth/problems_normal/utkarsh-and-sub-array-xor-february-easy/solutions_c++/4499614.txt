#include<bits/stdc++.h>
#define MOD 1000000007
using namespace std;

long long power(long long x, long long y, long long mod){
	long long ret = 1;
	while(y){
		if(y&1) ret = ret*x % mod;
		x = x*x % mod;
		y>>=1;
	}
	return ret;
}


map<int, int> parent, rnk, vis;

int find(int x){
	vector<int> v;
	while(parent[x]){
		v.push_back(x);
		x = parent[x];
	}
	for(int i=0; i<v.size(); i++)
		parent[v[i]] = x;
	return x;
}

int join(int x, int y){
	int px = find(x);
	int py = find(y);
	if(px == py)return 0;
	if(rnk[x] < rnk[y])
		parent[px] = py;			
	else{
		parent[py] = px;
		if(rnk[x] == rnk[y])rnk[x]++;
	}
	return 1;
}

int main(){
	ios::sync_with_stdio(false);
	cin.tie(NULL);
	int n, q;
	cin>>n>>q;
	long long ans = 1;
	for(int i=0; i<n; i++)
		ans = (ans * 2) % MOD;
	long long inv = power(2, MOD-2, MOD);
	while(q--){
		int x, y;cin>>x>>y;
		y++;
		if(join(x, y))
			ans = (ans * inv)%MOD;	
		cout<<ans<<endl;
	}
	return 0;
}