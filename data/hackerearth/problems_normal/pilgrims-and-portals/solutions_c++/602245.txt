#include<iostream>
#include<map>
#define INF 1000000007
using namespace std;
int way[101][101];
int main()
{
	int t,n,m,k,a,b,c;
	cin>>t;
	while(t--){
	cin>>n>>m>>k;
	//initialising
	for(int i=0;i<=n;i++){
		for(int j=0;j<=n;j++){
			way[i][j]=(i==j)?0:INF;
		}
	}
	while(m--){
		cin>>a>>b>>c;
		way[a][b]=c;
		way[b][a]=c;
	}
	//Computing paths
	for(int k=1;k<=n;k++)
	{
		for(int i=1;i<=n;i++)
		{
			for(int j=1;j<=n;j++)
			{
				if(way[i][j]>(way[i][k]+way[k][j]))
				{
					way[i][j]=(way[i][k]+way[k][j]);
				}
			}
		}
	}
	int ans=0,v=1,ver=1,nver=1;
	map<int,int> vis;
	vis[1]=1;
	while(v<k){
		int min=1000000000;
		for(ver=1;ver<=k;ver++){
		
		for(int i=1;i<=k&&vis[ver]==1;i++){
			if(vis[i]!=1&&min>way[ver][i]){
				min=way[ver][i];
				nver=i;
			}
		}
		
		}
		//cout<<nver<<endl;
		ans+=min;
		vis[nver]=1;
		//ver=nver;
		v++;
	}
	cout<<ans<<endl;
	}
return 0;
}