#include<bits/stdc++.h>
#define pii pair<int, pair<int, int> >
#define MAX 1200000
using namespace std;
int g[510][510];
vector<int> a, p;
bool sieve[MAX + 1];
void pre()
{
    memset(sieve, true, sizeof sieve);
	for(int i = 2;i*i <= MAX; ++i)
        if(sieve[i])
                for(int j = i*i;j <= MAX;j += i)
                    sieve[j] = false;
    for(int i = 2;i <= MAX; ++i)
        if(sieve[i])
            p.push_back(i);

}
int calc(int a, int b){
    int ind = lower_bound(p.begin(),p.end(), a) - p.begin();
    if(b > p[ind + 1]){
        ind = lower_bound(p.begin(), p.end(), b) - p.begin();
        return ((p[ind - 1] - a) + (p[ind] - b));
    }
    return ((p[ind] - a) + (p[ind + 1] - b));
}
int main(){
    pre();
    int n;
    cin >> n;
    a.resize(n + 1);
    for(int i = 1;i <= n; ++i)
        cin >> a[i];
    for(int i = 1;i <= n; ++i)
        g[i][i] = 0;
    for(int l = 2;l <= n; l += 2){
        for(int i = 1;i <= (n - l + 1); ++i){
            int mi = calc(a[i],a[i + l - 1]);
            if(l > 2)
                mi += g[i + 1][i + l - 2];
            for(int j = i + 2;j <= min(n, (i + l - 2)); j += 2){
                mi = min(mi, g[i][j - 1] + g[j][i + l - 1]);
            }
            g[i][i + l - 1] = mi;
        }
    }
    cout << (g[1][n] + (n / 2)) << "\n";
    return 0;
}
