#include <bits/stdc++.h>

using namespace std;

#define rep(i, a, b) for(int i = (a); i < int(b); ++i)
#define rrep(i, a, b) for(int i = (a) - 1; i >= int(b); --i)
#define trav(it, v) for(typeof((v).begin()) it = (v).begin(); it != (v).end(); ++it)
#define all(v) (v).begin(), (v).end()

typedef double fl;
typedef long long ll;
typedef pair<int, int> pii;
typedef vector<int> vi;
typedef vector<pii> vpi;

int p[100005];
int q[100005];
int qinv[100005];

struct UF{
	int a[100005];
	void init(){
		rep(i,0,100005)
			a[i]=-1;
	}

	int find(int x){
		if(a[x] == -1)
			return x;
		return a[x] = find(a[x]);
	}

	void join(int x, int y){
		x=find(x);
		y=find(y);
		if(x == y)
			return;
		a[x]=y;
	}
} uf;

void solve(){
	uf.init();
	int N, M;
	scanf("%d%d", &N, &M);
	rep(i,0,N){
		scanf("%d", p+i);
	}
	rep(i,0,N){
		scanf("%d", q+i);
		qinv[q[i]]=i;
	}
	rep(i,0,M){
		int a, b;
		scanf("%d%d", &a, &b);
		--a;
		--b;
		uf.join(a,b);
	}
	rep(i,0,N){
		if(uf.find(i) != uf.find(qinv[p[i]])){
			puts("NO");
			return;
		}
	}
	puts("YES");
}

int main(){
	int T;
	scanf("%d",&T);
	while(T--)
		solve();
}
