#include <bits/stdc++.h>

#define MAXN 1111

using namespace std;

typedef vector < int > vi;

int T;
int N, M;
int A[MAXN];
bool vis[MAXN];
vector < vi > adj;

bool yolo(int source)
{
	if (vis[source]) return false;
	vis[source] = true;
	for (int i=0; i<adj[source].size(); i++) {
		if (A[adj[source][i]] == -1 || yolo(A[adj[source][i]])) {
			A[adj[source][i]] = source;
			return true;
		}
	}
	return false;
}

int main()
{
	cin >> T;
	
	while (T --) {
		adj.clear();
		
		cin >> N >> M;
		
		adj.assign(N, vi());
		
		int u, v;
		for (int i=0; i<M; i++) {
			cin >> u >> v;
			adj[u-1].push_back(v-1);
		}
		
		for (int i=0; i<N; i++) A[i] = -1;
		
		int MCBM = N;
		for (int i=0; i<N; i++) {
			memset(vis, false, sizeof vis);
			if (yolo(i)) {
				MCBM --;
			}
		}
		
		cout << MCBM-1 << endl;
	}
	return 0;
}
