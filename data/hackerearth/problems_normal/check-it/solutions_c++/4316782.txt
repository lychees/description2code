#include<iostream>
#include<vector>
#include<algorithm>
#include<set>
#include<utility>
using namespace std;
const int MAX=40000;
int nodes,edges,id[MAX];
pair<int,pair<int,int>>p[MAX];
int main()
{
	int t,x,y,z;
	cin>>t;
	while(t--)
		{
			cin>>nodes>>edges;
			vector<int>v;
			for(int i=0;i<edges;i++)
			{
				cin>>x>>y;
				p[i]=make_pair(i+1,make_pair(x,y));
			}
			for(int j=0;j<nodes-1;j++)
			{
				cin>>z;
				v.push_back(z);
			}
			//int j=0;
			vector<int>v2;
			for(int k=0;k<edges;k++)
				{
					if(find(v.begin(),v.end(),p[k].first)!=v.end())
						{
						v2.push_back(p[k].second.first);
						v2.push_back(p[k].second.second);
						}
				}
					set<int>s(v2.begin(),v2.end());
				if(s.size()<nodes)
				cout<<"NO\n";
				else cout<<"YES\n";
				v.clear();
				v2.clear();
				s.clear();
		}
}