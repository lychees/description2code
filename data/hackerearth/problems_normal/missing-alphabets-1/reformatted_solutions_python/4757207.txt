def lex_order(x, y, alphabet):
    if (len(x) < len(y)):
        smaller = x
        bigger = y
    else:
        smaller = y
        bigger = x
    for i in range(len(smaller)):
        if (smaller[i] != bigger[i]):
            if (alphabet.find(smaller[i]) < alphabet.find(bigger[i])):
                return (smaller, bigger)
            else:
                return (bigger, smaller)
    return (smaller, bigger)


num_tests = int(raw_input().rstrip("\n"))
for count_test in range(num_tests):
    alphabet = raw_input().rstrip("\n")
    num_cases = int(raw_input().rstrip("\n"))
    input_strings = []
    for count_input in range(num_cases):
        input_strings.append(raw_input().rstrip("\n"))

    for i in range(len(input_strings)):
        for j in range(i + 1, len(input_strings)):
            (x, y) = lex_order(input_strings[i], input_strings[j], alphabet)
            input_strings[i] = x
            input_strings[j] = y
    for sorted_strings in input_strings:
        print sorted_strings
