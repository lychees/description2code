#include <iostream>
using namespace std;

int main()
{
long long int a,b,c,A[10000000],B[10000000],n,loc4,loc3,loc1,loc2,i;
	cin>>a>>b>>c;
	cin>>n;
	A[0] = (a*c)%1000000007;
for(i=1 ; i<n ; i++)
{
    A[i] = (((((A[i-1]*a)%1000000007)*b%1000000007)*c%1000000007) + ((A[i-1]*a)%10000000070*b%1000000007) + ((A[i-1]*a)%1000000007*c)%1000000007)%1000000007;
  
}
B[0] = (b*c)%1000000007;
for(i=1 ; i<n ; i++)
{
  B[i] = (((((B[i-1]*a)%1000000007)*b%1000000007)*c%1000000007) + ((B[i-1]*a)%10000000070*b%1000000007) + ((B[i-1]*b)%1000000007*c)%1000000007)%1000000007;
   
}   

loc1=0;
for(i=1;i<n;i++)
{
	if(A[i]<A[loc1])
	{
	    loc1=i;
	}
}

loc2=0;
for(i=1;i<n;i++)
{
	if(B[i]<B[loc2])
	{
	    loc2=i;
	}
}

if(loc1!=loc2)
cout<<A[loc1]+B[loc2];
else
{
	loc3=0;
for(i=0;i<n;i++)
{  
	
	if(loc3==loc1)
    {
    	loc3++;
        continue;
    }
    
    if(i==loc1)
	continue;
    
	if(A[i]<A[loc3])
	{
	    loc3=i;
	}
	
}

loc4=0;
for(i=0;i<n;i++)
{   if(loc4==loc2)
    {
    	loc4++;
    	continue;
    }
    
    if(i==loc2)
	continue;
	
	if(B[i]<B[loc4])
	{
	    loc4=i;
	}
}


if(A[loc1]+B[loc4]>A[loc3]+B[loc2])
cout<<A[loc3]+B[loc2];
else
cout<<A[loc1]+B[loc4];
}
}
