#include <bits/stdc++.h>
using namespace std;
pair<int,int> A[1010][1010];
int main(){
    std::ios::sync_with_stdio(false);
	int i,j,k,n,a,b;
	int x,y;
	cin >> x >> y;
	cin  >> A[0][0].first;
	A[0][0].second = 0;
	
	for (int j = 1; j < y; j++)
	{
		cin >> A[0][j].first;
		if(A[0][j].first == A[0][j-1].first){
			A[0][j].second=A[0][j-1].second + 1;
		}
	}

	for (int i = 1; i < x; i++)
	{
		for (int j = 0; j < y; j++)
		{
			cin >> A[i][j].first;
			if(j!=0){
				int temp = 0;
				if(A[i][j].first == A[i][j-1].first){
					temp = A[i][j-1].second+1;
				}
				if( A[i][j].first == A[i-1][j].first ) {
					temp = (int)max(temp,A[i-1][j].second+1);
				}
				A[i][j].second = temp;
			}
			else{
				if(A[i][j].first == A[i-1][j].first){
					A[i][j].second = A[i-1][j].second+1;
				}
			}

		}
	}
	int maxVal = 0;
	for (int i = 0; i < x; i++)
	{
		for (int j = 0; j < y; j++)
		{
			if(A[i][j].second>maxVal){
				maxVal = A[i][j].second;
			}	
		}
	}
	cout << maxVal+1 << endl;
	return 0;
}
