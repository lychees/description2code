for _ in range(int(raw_input())):
    a = raw_input()
    n = int(raw_input())
    hh = []
    hhh = []
    d = dict(zip(list(a), range(len(a))))
    for i in range(n):
        z = raw_input()
        h = [d.get(z[x]) for x in range(len(z))]
        hh.append(h)
        hhh.append((h, z))
    hhh.sort()

    jk = [y for (x, y) in hhh]
    for k in jk:
        print(k)
