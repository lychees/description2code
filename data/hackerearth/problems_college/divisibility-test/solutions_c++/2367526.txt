#include <cstdio>

int  division(char* dividend,int a,int b,int divisor){
   
    int temp=0, i;
    
    for(i=a;i<=b;i++)
    {
         temp = (temp<<3)+(temp << 1) + (dividend[i] -'0');
         temp = temp % divisor;
    }
    
    return (temp == 0);
}

int main()
{
    int T, r1, r2, R, len, i, k, j;
    int count;
    char No[51];
    
    scanf("%d",&T);
    while(T--)
    {
     scanf("%s%d%d%d",No,&R,&r1,&r2);
      
      count=0;
      for(i=r1-1;i<r2;i++)
       for(j=i;j<r2;j++)
         if(division(No,i,j,R))
           count++;
           
      printf("%d\n",count);     
    }
    return 0;
}
