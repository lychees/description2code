#include <bits/stdc++.h>

using namespace std;
#define MAXN 1500005
#define DODAJ 500000
int n, q, x;
int A[MAXN], ft[MAXN], pos[MAXN];
char c[5];
long long res = 0;

void add(int idx, int val){
	for (int i = idx; i < MAXN; i += i & -i)
		ft[i] += val;
}

int sum(int idx){
	int cnt = 0;
	for (int i = idx; i > 0; i -= i & -i)
		cnt += ft[i];
	return cnt;
}

int main()
{
	scanf("%d %d", &n, &q);
	for (int i = 0; i < n; i++){
		scanf("%d", A + i);
		add(i + DODAJ, 1);
		pos[A[i]] = i + DODAJ;
	}
	int L = 1, R = 1;
	//cout << sum(MAXN -1) << endl;
	while (q--){
		scanf("%d", &x);
		scanf("%s", c);
		int l = sum(pos[x] - 1);
		int r = sum(MAXN - 1) - sum(pos[x]);
		res += min(l, r);
		if (c[0] == 'l'){
			// cout << "LEFT\n";
			add(pos[x], -1);
			pos[x] = DODAJ - L;
			add(pos[x], 1);
			L++;
		}
		else {
			//  cout << "RIGHT\n";
			add(pos[x], -1);
			pos[x] = DODAJ + n + R;
			add(pos[x], 1);
			R++;
		}
	}
	printf("%lld\n", res);
}

