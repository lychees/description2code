/*
*/

//#pragma comment(linker, "/STACK:16777216")
#include <fstream>
#include <iostream>
#include <string>
#include <complex>
#include <math.h>
#include <set>
#include <vector>
#include <map>  
#include <queue>
#include <stdio.h>
#include <stack>
#include <algorithm>
#include <list>
#include <ctime>
#include <memory.h>
#include <ctime> 
#include <assert.h>

#define y0 sdkfaslhagaklsldk
#define y1 aasdfasdfasdf
#define yn askfhwqriuperikldjk
#define j1 assdgsdgasghsf
#define tm sdfjahlfasfh
#define lr asgasgash

#define eps 1e-13
#define M_PI 3.141592653589793
#define bs 1000000007
#define bsize 512

const int N = 500005;

using namespace std;

int n;
int w[N];
vector<int> g[N];
int tests;
int done[N],dp[N];

int solve(int v,int par,int cmp)
{
	long long ret=1;
	if (w[v]<w[cmp]||(w[v]==w[cmp]&&v<cmp))
		return 0;
	for (int i=0;i<g[v].size();i++)
	{
		int to=g[v][i];
		if (to==par)
			continue;
		int R=solve(to,v,cmp);
		ret=ret*1ll*(R+1)%bs;
	}
	return ret;
}

int main(){
	//freopen("beavers.in","r",stdin);
	//freopen("beavers.out","w",stdout);
	//freopen("F:/in.txt","r",stdin);
	//freopen("F:/output.txt","w",stdout);
	ios_base::sync_with_stdio(0);
	//cin.tie(0);
	
	cin>>n;
	for (int i=1;i<=n;i++)
	{
		cin>>w[i];
	}
	for (int i=1;i<n;i++)
	{
		int a,b;
		cin>>a>>b;
		g[a].push_back(b);
		g[b].push_back(a);
	}
	
	cin>>tests;
	for( ;tests;--tests)
	{
		int W;
		cin>>W;
		for (int i=1;i<=n;i++)
			done[i]=dp[i]=0;
		int ans=0;
		for (int i=1;i<=n;i++)
		{
			if (w[i]==W)
			{
				ans+=solve(i,i,i);
				ans%=bs;
			}
		}
		cout<<ans<<endl;
	}
	
	return 0;
}