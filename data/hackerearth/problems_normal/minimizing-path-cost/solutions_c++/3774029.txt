#include<bits/stdc++.h>
#define ll long long
#define mod 100000
#define inf 1>>25
#define fr(i,a,n) for(int i=(a);i<=(n);i++)
#define s(n) scanf("%d",&(n))
#define sl(n) scanf("%lld",&(n))
#define pii pair<ll,int>
using namespace std;

//using namespace std;
 map<string,int> mp;
 
 int main(){
 	
 	int n,m;
 	s(n);
 	s(m); 
 	int dis[n+3][n+3];
 	fr(i,0,n)
 		fr(j,0,n)
 			dis[i][j] = 999999;
 	string s,d;
 	int w;
	fr(i,1,n){
		//cin>>s>>d>>w;
		cin>>s;
		mp[s] = i;
	}

	fr(i,0,m-1)
	{
		cin>>s>>d>>w;
		dis[mp[s]][mp[d]] = w;
		dis[mp[d]][mp[s]] = w;
	}
	fr(i,1,n)
		dis[i][i] = 0;
/// flloyd Warshall's Algo
	fr(k,1,n)
		fr(i,1,n)
			fr(j,1,n)
			{
				if(dis[i][k] + dis[k][j] < dis[i][j])
					dis[i][j]= dis[i][k] + dis[k][j];
			}

	int q;
	s(q);
	while(q--){
		cin>>s>>d;
		printf("%d\n",dis[mp[s]][mp[d]]);
	}


return 0;
 }