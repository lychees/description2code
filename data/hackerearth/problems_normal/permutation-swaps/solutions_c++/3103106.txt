#include <bits/stdc++.h>
using namespace std;
int pa[100005],n,m,pp[100005];
int t,p[100005],q[100005],p1,p2;
int findp(int k){
	if(pa[k]==k) return k;
	return pa[k]=findp(pa[k]);
}
int main(){
	scanf("%d",&t);
	while(t--){
		scanf("%d %d",&n,&m);
		for(int x=0;x<n;x++) pa[x]=x;
		for(int x=0;x<n;x++) scanf("%d",&p[x]);
		for(int x=0;x<n;x++) scanf("%d",&q[x]);
		for(int x=0;x<m;x++){
			scanf("%d %d",&p1,&p2);
			int a=findp(p1-1),b=findp(p2-1);
			if(a!=b) pa[a]=b;
		}
		for(int x=0;x<n;x++) pp[p[x]]=findp(x);
		bool fail=0;
		for(int x=0;x<n;x++){
			if(pa[x]!=pp[q[x]]){
				fail=1;
				break;
			}
		}
		if(fail) printf("NO\n");
		else printf("YES\n");
	}
	return 0;
}