

    #include<bits/stdc++.h>
    using namespace std;
    typedef long long LL;
    #define f_in(st) freopen(st,"r",stdin);
    #define f_out(st) freopen(st,"w",stdout);
    #define M 1000000007
    int main()
    {
    	//f_in("in10.txt");
        //f_out("in10out.txt");
    	LL t,n,d,i,j;
    	cin>>t;
    //	assert(t>=1 && t<=100);
    	while(t--)
    	{
    		cin>>n;
    		assert(n>=1 && n<=1000000000000000000);
    		if(n<=2)
    		{
    			cout<<"0"<<endl;
    		}
    		else
    		{
    			LL sum=0,m,k,count;
    			d=3;i=1;count=0;
    			while(d<=n)
    			{
    				sum=(sum+d)%M;
    				m=1;k=1;
    				//cout<<d<<" ";
    				for(j=1;j<i;j++)
    				{
    					//cout<<"yo"<<d+m<<" ";
    					if((d+m)<=n)
    					{
    						sum=(sum+d+m)%M;
    					}
    					else
    					{
    						break;
    					}
    					k=k*2;
    					m=m+k;
    					count++;
    				}
    				d=(d-1)*2+1;
    				i++;
    				count++;
    			}
    			cout<<sum<<endl;
    			//cout<<count<<endl;
    		}
    	}
    	return 0;
    }

