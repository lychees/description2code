#include <bits/stdc++.h>
 
using namespace std;
#define ll long long
 
template<class T> T nextInt() {
    T x = 0, p = 1;
    char c;
    do {
        c = getchar();
    } while (c <= 32);
    if (c == '-') {
        c = getchar();
        p = -1;
    }
    while (c >= '0' && c <= '9') {
        x = x * 10 + c - '0';
        c = getchar();
    }
    return x * p;
}
int arr[101][101];
int a1[101][101];
int a2[101][101];
int a3[101][101];

int n,m;
void r1(){
	for(int i = 0;i<n;i++){
		for(int j = 0;j<m;j++){
			a1[j][n-i-1] = arr[i][j];
		}
	}
}
void r2()
{
	for(int i = 0;i<m;i++){
		for(int j = 0;j<n;j++){
			a2[j][m-i-1] = a1[i][j];
		}
	}
}
void r3()
{
	for(int i = 0;i<n;i++){
		for(int j = 0;j<m;j++){
			a3[j][n-i-1] = a2[i][j];
		}
	}
}
void print0()
{
	for(int i = 0;i<n;i++){
		for(int j = 0;j<m;j++){
			printf("%d ",arr[i][j]);
		}
		printf("\n");
	}
}
void print1()
{
	for(int i = 0;i<m;i++){
		for(int j = 0;j<n;j++){
			printf("%d ",a1[i][j]);
		}
		printf("\n");
	}
}
void print2()
{
	for(int i = 0;i<n;i++){
		for(int j = 0;j<m;j++){
			printf("%d ",a2[i][j]);
		}
		printf("\n");
	}
}
void print3()
{
	for(int i = 0;i<m;i++){
		for(int j = 0;j<n;j++){
			printf("%d ",a3[i][j]);
		}
		printf("\n");
	}
}
int main()
{
	//int test;
	//test = nextInt<int>();
	//while(test--){
		n = nextInt<int>();
		m = n;
		int q = nextInt<int>();
		for(int i = 0;i<n;i++){
			for(int j = 0;j<m;j++){
				arr[i][j] = nextInt<int>();
			}
		}
		r1();
		r2();
		r3();
		while(q--){
			int thita;
			scanf("%d",&thita);
			thita = thita%360;
			thita /= 90;
			if(thita==0){
				print0();
			}
			else if(thita==1){
				print1();
			}
			else if(thita==2){
				print2();
			}
			else if(thita==3){
				print3();
			}
			printf("\n");
		}
	//}
}