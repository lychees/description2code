#include<bits/stdc++.h>
using namespace std;
#define MOD 1000000007

int power(int base,int exp){
	int res=1;
	while(exp){
		if(exp&1){
			res=(1ll*res*base)%MOD;
		}
		base=(1ll*base*base)%MOD;
		exp>>=1;
	}
	return res;
}

int main(){
	int n,q;
	scanf("%d%d",&n,&q);
	vector<int> v(n);
	for(int i=0;i<n;i++){
		scanf("%d",&v[i]);
	}
	sort(v.begin(),v.end());
	while(q--){
	string str;
	cin>>str;
	int total=power(2,n);
	int key;
	scanf("%d",&key);
	int lx,ux,res;
	switch(str[0]){
		case '=':
		    ux=upper_bound(v.begin(),v.end(),key)-v.begin();
		    lx=lower_bound(v.begin(),v.end(),key)-v.begin();
		    res=power(2,ux)-power(2,lx);
		   if(res<0)
			   res+=MOD;
		   printf("%d\n",res);
		   break;
		   case '<':
		    lx=lower_bound(v.begin(),v.end(),key)-v.begin();
		    res=power(2,lx);
		   printf("%d\n",res);
		   break;
		   case '>':
		   ux=upper_bound(v.begin(),v.end(),key)-v.begin();
		   res=total-power(2,ux);
		   if(res<0)
		   res+=MOD;
		   printf("%d\n",res);
	}
	}
}