#include <bits/stdc++.h>
using namespace std;
typedef pair<int, int> PII;

int main()
{
	int t;
	cin >> t;
	while (t--)
	{
		int n, m;
		int x, y, c;
		cin >> n >> m;
		vector<pair<PII, int>> e(m);

		int d[105][105];
		for (int v = 1; v <= n; v++)
		{
			for (int u = 1; u <= n; u++)
			{
				if (v == u)
					d[v][u] = 0;
				else
					d[v][u] = 10000005;
			}
		}

		for (int i = 0; i < m; i++)
		{
			cin >> x >> y >> c;
			d[y][x] = d[x][y] = min(d[x][y], c);
		}

		for (int k = 1; k <= n; k++)
		{
			for (int i = 1; i <= n; i++)
			{
				for (int j = 1; j <= n; j++)
				{
					d[i][j] = min(d[i][j], d[i][k] + d[k][j]);
				}
			}
		}

		int s, a, h;
		cin >> s >> a >> h;

		int ans = 0;
		for (int i = 1; i <= n; i++)
		{
			if (d[s][i] == 10000005 or d[a][i] == 10000005 or d[h][i] == 10000005)
				continue;
			if (i != a and i != h and i != s)
			{
				ans = max(ans, d[s][i] + (2 * d[a][i]) + d[i][h]);
			}
		}

		cout << ans << endl;
	}
}

