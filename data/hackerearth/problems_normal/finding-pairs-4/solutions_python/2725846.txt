import sys

t = int(sys.stdin.readline().split()[0])
while(t>0):
	t-=1
	n = int(sys.stdin.readline().split()[0])
	arr = sorted([i for i in enumerate(map(int,sys.stdin.readline().split()))],key=lambda x:x[1])
	#print arr
	count = n
	prev = arr[0][1]
	lc = 0
	for i in xrange(1,n):
		curr = arr[i][1]
		if(prev==curr):
			lc+=1
		else:
			count+=(lc*(lc+1))/2
			lc=0
			prev=curr
	count+=(lc*(lc+1))/2
	print count
	
	