#include <iostream>
#include<cstdio>
using namespace std;

int main() 
{
	long long int t,n;
	cin>>t;
	while(t--)
	{
		cin>>n;
		long long int arr[n],m[n];
		for(long long int i=0;i<n;i++)
		cin>>arr[i];
		m[n-1]=0; //nearest larger
		long long int maxm=0;
		
		for(long long int i=n-2;i>=0;i--)
		{
			
			m[i]=max(arr[i+1],m[i+1]);
			
		}
		/*for(int i=0;i<n;i++)
		cout<<m[i]<<" ";
		cout<<endl;*/
		long long int count=0,p=0;
		for(long long int i=1;i<n-1;i++)
		{
			if(arr[i-1]>arr[i] && arr[i]<m[i])
			{p=min(m[i],arr[i-1]);
			count=(count+p-arr[i])%1000000007;
			arr[i]+=p-arr[i];}
		}
		cout<<count%1000000007<<endl;
	}
	return 0;
}