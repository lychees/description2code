#include<bits/stdc++.h>
using namespace std;

#define  LL long long

int n,m;
int len,ren,pos[500005];
const int maxn = 500005 * 3;
int ft[maxn];
LL ans;

void point_update(int idx,int v)
{
	while(idx <= maxn)
	{
		ft[idx] += v;
		idx += (idx & (-idx));
	}
}

int query(int idx)
{
	int sum = 0;
	while(idx > 0)
	{
		sum += ft[idx];
		idx -= (idx & (-idx));
	}
	return sum;
}

int range_query(int a,int b)
{
	return query(b) - query(a-1);
}

int main()
{
	scanf("%d %d",&n,&m);

	len = 500005;
	ren = len + n - 1;

	int v;
	for(int i=0;i<n;i++)
	{
		scanf("%d",&v);
		pos[v] = len + i;
		point_update(pos[v],1);
	}

	int x;	
	char y;
	while(m--)
	{
		scanf("%d %c",&x,&y);
		ans += min( range_query(len,pos[x]) - 1, range_query(pos[x],ren) -1 );
		if(y == 'l')
		{
			point_update(pos[x],-1);
			len--;
			pos[x] = len;
			point_update(pos[x],1);
		}
		else
		{
			point_update(pos[x],-1);
			ren++;
			pos[x] = ren;
			point_update(pos[x],1);
		}		
	}
	cout << ans << endl;
	return 0;
}
