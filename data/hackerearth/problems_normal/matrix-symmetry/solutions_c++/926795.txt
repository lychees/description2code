#include <iostream>
using namespace std;

int main()
{
   // cout << "Hello World!" << endl;
    
    
    int t,n;
    cin>>t;
    while(t--)
    {
    	cin>>n;
    /*	char **a=new char*[n];
    	for(int i=0;i<n;i++)
    	{ a[i]=new char[n];
    		cin>>a[i];
    	}*/
    	char a[n][n];
    	for(int i=0;i<n;i++)
    		for(int j=0;j<n;j++)
    			cin>>a[i][j];
    
    	int flagH=0,flagV=0;
    	for(int i=0;i<n;i++)
    	{
    		for(int j=0;j<n;j++)
    		{
    			if(a[i][j]!=a[n-i-1][j])
    			flagH=1;
    			if(a[i][j]!=a[i][n-j-1])
    			flagV=1;
    			
    		}
    		if(flagH==1 && flagV==1)
    		break;
    	}
    	
    	if(flagH==0 && flagV==1)
    	{
    		cout<<"HORIZONTAL";
    	}
    	else if(flagH==1 && flagV==0)
    		cout<<"VERTICAL";
    	else if(flagH==1 && flagV==1)
    	cout<<"NO";
    	else
    	cout<<"BOTH";
    	cout<<"\n";
    /*	
    	for(int i=0;i<n;i++)
    	for(int j=0;j<n;j++)
    	cout<<a[i][j];
    */
    }
    return 0;
}
