/* My First Template  
   :P
*/
#include <bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define ll long long int
#define pb push_back
#define mk make_pair
ll power(ll a, ll b) {
ll x = 1, y = a;
    while(b > 0) {
        if(b%2 == 1) {
            x=(x*y);
            if(x>mod) x%=mod;
        }
        y = (y*y);
        if(y>mod) y%=mod;
        b /= 2;
    }
    return x;
}
vector<pair<int,int> >adj[3002];
int d1[3002];
priority_queue<pair<int,int>,vector<pair<int,int> >, greater<pair<int,int> > >pq;
int main()
{
	int t,n,m,i,j;
	cin>>t;
	while(t--) {
		cin>>n>>m;
		int u,v,w,s,x;
		for(i = 0; i <= n; i++) {
			d1[i] = mod;
			adj[i].clear();
		}
		while(m--) {
			cin>>u>>v>>w;
			u--;
			v--;
			adj[u].pb(make_pair(v,w));
			adj[v].pb(make_pair(u,w));
		}
		cin>>s;
		s--;
		d1[s] = 0;
  		pq.push({0,s});
  		while(!pq.empty()) {
    		w = pq.top().first;
    		u = pq.top().second;
    		pq.pop();
    		for(i = 0; i < adj[u].size(); i++) {
      			v = adj[u][i].first;
      			x = adj[u][i].second + w;
      			if(x < d1[v]) {
    				d1[v] = x;
    				pq.push({x,v});
      			}
    		}
  		}
  		for(i = 0; i < n; i++) {
  			if(i != s) {
  				if(d1[i] >= mod) d1[i] = -1;
  				cout<<d1[i]<<" ";
  			}
  		}
  		cout<<endl;
	}
	return 0;
}