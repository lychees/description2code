/**/
#define _USE_MATH_DEFINES
#include<bits/stdc++.h>
using namespace std;

#define pb push_back
#define For(i, begin, end) for (__typeof(end) i = (begin) - ((begin) > (end)); i != (end) - ((begin) > (end)); i += 1 - 2 * ((begin) > (end)))
#define all( v ) (v).begin(),(v).end()
template<typename T> using V = vector<T>;
typedef long long int ll;
typedef unsigned long long int ull;
/***********************************************/
/*      ____________
 *     /            \
 *    /  /\      /\  \
 *   /  /  \    /  \  \
 *   \                /
 *    \     \___/    /
 *     \____________/
 */
const ll mod = 1000000007;
ll Mul[262145],Add[262145];
size_t last[200010];
void upd(int ind,ll x,ll y){
	while(ind <= 262144){
		Mul[ind] += x;
		Add[ind] += y;
		ind += (ind & -ind);
	}
}
void updRng(int left,int right,ll val){
	upd(left,val,val * (left-1));
	upd(right+1,-val,-val * right);
}
ll qry(int ind){
	ll x = 0,y = 0,st = ind;
	while(ind > 0){
		x += Mul[ind];
		y += Add[ind];
		ind -= (ind & -ind);
	}
	return x * st - y;
}
int main(){
	ios_base::sync_with_stdio(false);
	cin.tie(nullptr);
	size_t N;
	ull res = 0,sum = 0;
	size_t a;
	cin>>N;
	For(i,1,N+1){
		cin>>a;
		sum = (sum + 2 * (qry(i) - qry(last[a])) + i - last[a])%mod;
		updRng(last[a]+1,i,1);
		last[a] = i;
		res = (res + sum)%mod;
	}
	cout<<res<<endl;
	return 0;
}
/**/