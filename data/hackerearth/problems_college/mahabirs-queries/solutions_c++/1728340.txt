#include <vector>
#include <list>
#include <forward_list>
#include <map>
#include <unordered_map>
#include <set>
#include <unordered_set>
#include <queue>
#include <deque>
#include <stack>
#include <string>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include <cstring>
#include <climits>
#include <cctype>
#include <cassert>

using namespace std;

#define Vdebug(i,sz,a) 				fr(i,0,sz){cout<<a[i]<<" ";}cout<<endl
#define sws     					ios_base::sync_with_stdio(false)
#define tc	     					int test_case;cin>>test_case;while(test_case--)
#define Vcase(x)					cout<<"Case #"<<x<<": "

// Input macros
#define s(n)						scanf("%d",&n)
#define sc(n)						scanf("%c",&n)
#define sl(n)						scanf("%lld",&n)
#define slu(n)						scanf("%llu",&n)
#define sf(n)						scanf("%lf",&n)
#define ss(n)						scanf("%s",n)

// Useful constants
#define mod       					1000000007
#define eps       					1E-10
#define pi  						acos(-1)

// Useful hardware instructions
#define bitcount1					__builtin_popcount1
#define gcd(a,b)					__gcd(a,b)

// Useful container manipulation / traversal macros
#define fr(i,a,n) 					for(auto i=(a);i<(n);++i)
#define rfr(i,a,n) 					for(auto i=(a);i>=(n);--i)
#define rng(a)						for(auto it : a)
#define all(a)						a.begin(), a.end()
#define rall(a)			            a.rbegin(), a.rend()
#define in(a,b)						((b).find(a) != (b).end())
#define pb(x)						push_back(x)
#define mem(a,v)     	            memset(a, v, sizeof a)
#define sz(a) 						a.size()
#define clr(a)  					a.clear()

// Some common useful functions
#define mp							make_pair

#define ull 						unsigned long long
#define ll 							long long
#define V(t) 						vector<t>
#define P(t1,t2)					pair<t1,t2>
#define F 							first
#define S 							second
#define gc							getchar_unlocked

// Relevant code begins here

const int MAX = 100;

void print0(int arr[][MAX], int n)
{
	fr(i,0,n)
	{
		fr(j,0,n)
			cout << arr[i][j] << " ";
		cout << "\n";
	}
	cout << "\n";
}

void print1(int arr[][MAX], int n)
{
	fr(j,0,n)
	{	
		rfr(i,n-1,0)
			cout << arr[i][j] << " ";
		cout << "\n";
	}
	cout << "\n";
}

void print2(int arr[][MAX], int n)
{
	rfr(i,n-1,0)
	{
		rfr(j,n-1,0)
			cout << arr[i][j] << " ";
		cout << "\n";
	}
	cout << "\n";
}

void print3(int arr[][MAX], int n)
{
	rfr(j,n-1,0)
	{
		fr(i,0,n)
			cout << arr[i][j] << " ";
		cout << "\n";
	}
	cout << "\n";
}

int main()
{
	sws;	
	int n, q;
	cin >> n >> q;

	int arr[MAX][MAX];
	
	fr(i,0,n)
		fr(j,0,n)
			cin >> arr[i][j];

	while (q--)
	{
		int x;
		cin >> x;
		int a = (x/90)%4;
		if (a == 0)
			print0(arr, n);
		else if (a == 1)
			print1(arr, n);
		else if (a == 2)
			print2(arr, n);
		else
			print3(arr, n);
	}
	return 0;
}