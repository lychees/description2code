#include <bits/stdc++.h>
#define ll long long
using namespace std;
vector<pair<ll int,ll int> > v; 
int main()
{
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	ll int n,on,test;
	cin>>n>>test;
	ll int i,s,mc,j,x=1ll,ans;
	on=n;
	bool flag=0;
	//All prime factors of n
	for(i=2;(i*i)<=n;i++)
	{
		flag=0;mc=0;
		while((on%i)==0)
		{
			flag=1;
			mc++;
			on/=i;
		}
		if(flag)
		{
			//~ cout<<i<<" "<<mc<<endl;
			v.push_back(make_pair(i,mc));
			x=x*(1+mc);
		}
	}
	if(on>1)
	x*=2ll;
	//~ cout<<x<<endl;
	s=v.size();
	while(test--)
	{
		ll int t,k;//type & k
		cin>>t>>k;
		if(t==1)
		{
			ans=1ll;
			for(i=0;i<s;i++)
			{
				mc=0;
				while((k%v[i].first)==0)
				{
					mc++;
					k/=v[i].first;
				}
				ans=ans*(min(v[i].second,mc)+1ll);
			}
		}
		else if(t==2)
		{
			if((n%k)==0)
			{
				ans=1ll;
				for(i=0;i<s;i++)
				{
					mc=0;
					while((k%v[i].first)==0)
					{
						mc++;
						k/=v[i].first;
					}
					ans=ans*(v[i].second-mc+1);
				}
			}
			else
			ans=0ll;
		}
		else
		{
			if((n%k)==0)
			{
				ans=1ll;
				for(i=0;i<s;i++)
				{
					mc=0;
					while((k%v[i].first)==0)
					{
						mc++;
						k/=v[i].first;
					}
					ans=ans*(v[i].second-mc+1);
				}
			}
			else
			ans=0ll;
			ans=x-ans;
		}
		cout<<ans<<endl;
	}
	return 0;
}
