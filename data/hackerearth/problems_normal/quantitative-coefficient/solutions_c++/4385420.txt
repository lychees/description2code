#include<bits/stdc++.h>
#define ll long long
using namespace std;
//g++ -std=c++11 your_file.cpp

std::vector< pair<ll, ll> > g, f;
bool vis[1503];
ll a[1503], mod = 1000000007;

ll capt(ll n){
	return a[n] == n ? n : a[n] = capt(a[n]);
}

int main()
{
	ios_base::sync_with_stdio(false);cin.tie(0);
 
	ll t,n,m,i,j;
	cin >> t;
	while(t--){
		cin >> n >> m;
		for(i=0;i<=n;i++){
			vis[i] = false;
			a[i] = i;
		}
		g.clear();
		f.clear();
		ll x, y, z, done = 0;
		for(i=0;i<m;i++){
			cin >> x >> y >> z;
			g.push_back({x, y});
			f.push_back({z, i});
		}
		sort(f.begin(), f.end());
		ll ans = 1;
		for(i=0;i<f.size();i++){
			x = g[f[i].second].first;
			y = g[f[i].second].second;
			ll cx = capt(x), cy = capt(y);
			if(cx == cy) continue;
			if(!vis[x]){
				vis[x] = true;
				done++;
			}
			if(!vis[y]){
				vis[y] = true;
				done++;
			}
			ans *= f[i].first;
			ans %= mod;
			a[cx] = cy;
		}
		cout << ans << endl;
	}
 
	return 0;
} 