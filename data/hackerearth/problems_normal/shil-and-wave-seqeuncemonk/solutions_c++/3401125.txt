
#include <bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define ll long long int
#define pb push_back
#define mk make_pair
#define max 100002
ll power(ll a, ll b) {
ll x = 1, y = a;
    while(b > 0) {
        if(b%2 == 1) {
            x=(x*y);
            if(x>mod) x%=mod;
        }
        y = (y*y);
        if(y>mod) y%=mod;
        b /= 2;
    }
    return x;
}
ll tree[max][3];
ll read(ll idx, ll i) {
	ll sum = 0;
	while (idx > 0) {
		sum += tree[idx][i];
		if(sum > mod) sum %= mod;
		idx -= (idx & -idx);
	}
	return sum;
}
void update(ll idx ,ll val, ll i) {
	while (idx <= max) {
		tree[idx][i] += val;
		if(tree[idx][i] > mod) tree[idx][i] %= mod;
		idx += (idx & -idx);
	}
}
int main() 
{
    ll n,i,j;
    cin>>n;
    ll a[n];
    for(i = 0; i < n; i++) {
    	cin>>a[i];
    }
    if(n == 1) {
    	puts("0");
    	return 0;
    }
    memset(tree,0,sizeof(tree));
    ll ans = 0;
    update(a[0],1,0);
    update(a[0],0,1);
    update(a[0],0,2);
    for(i = 1; i < n; i++) {
    	ll x,y;
    	x = (read(a[i]-1,1) + read(a[i]-1,0))%mod;
    	y = (read(max-1,2) - read(a[i],2) + read(max-1,0) - read(a[i],0) + mod)%mod;
    	ans = (ans + x + y)%mod;
		update(a[i],y,1);
		update(a[i],x,2);
		update(a[i],1,0);
    }
    cout<<ans<<endl;
	return 0;
}