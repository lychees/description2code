/**/
#define _USE_MATH_DEFINES
#include<bits/stdc++.h>
using namespace std;

#define pb push_back
#define For(i, begin, end) for (__typeof(end) i = (begin) - ((begin) > (end)); i != (end) - ((begin) > (end)); i += ((begin) > (end)?-1:1))
#define all( v ) (v).begin(),(v).end()
template<typename T> using V = vector<T>;
typedef long long int ll;
typedef unsigned long long int ull;
/***********************************************/
/*      ____________
 *     /            \
 *    /  /\      /\  \
 *   /  /  \    /  \  \
 *   \                /
 *    \     \___/    /
 *     \____________/
 */
const ll mod = 1000000007;
V<V<size_t> > cy;
V<size_t> b;
V<bool> vis;
map<size_t,pair<size_t,size_t> > c;
void dfs(size_t ind){
	vis[ind] = true;
	cy.back().pb(ind);
	c[ind] = {cy.size()-1,cy.back().size()-1};
	if(!vis[b[ind]-1])
		dfs(b[ind]-1);
}
int main(){
	ios_base::sync_with_stdio(false);
	cin.tie(nullptr);
	size_t N;
	ull T;
	cin>>N>>T;
	V<size_t> a(N);
	For(i,0,N)cin>>a[i];
	b.resize(N);
	For(i,0,N)cin>>b[i];
	vis.resize(N);
	V<size_t> em;
	For(i,0,N){
		if(!vis[i]){
			cy.pb(em);
			dfs(i);
		}
	}
	/*For(i,0,cy.size()){
		For(j,0,cy[i].size()){
			cout<<cy[i][j]<<" ";
		}
		cout<<endl;
	}*/
	For(i,0,N){
		size_t t = T%cy[c[i].first].size();
		size_t ind = cy[c[i].first][(t+c[i].second)%cy[c[i].first].size()];
		cout<<a[ind]<<" \n"[i == N-1];
	}
	return 0;
}
/**/
