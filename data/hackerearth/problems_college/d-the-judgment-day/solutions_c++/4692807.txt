#include<bits/stdc++.h>
using namespace std;
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
        int n,num,c=0,c1=0,c2=0,c3=0,c4=0,ans=0,crem=0,crem1=0,mini;
        cin>>n;
        for(int i=0;i<n;i++)
        {
            cin>>num;
            if(num==1)
                c1++;
            else if(num==2)
                c2++;
            else if(num==3)
                c3++;
            else
                c4++;
        }
        c=c+c4;
        mini=min(c1,c3);
        c=c+mini;
        c1-=mini;
        c3-=mini;
        c+=c2/2;
        c2=c2%2;
        if(c3>0)
            c=c+c3;
        else if(c1>0){
            if(c2>0){
                if(c1>=2){
                    c1-=2;
                }
                else{
                    c1-=1;
                }
                c2=0;
                c++;
            }
            c+=c1/4;
            if(c1%4!=0)
                c++;
        }
        c=c+(c2%2);
        cout<<c<<endl;
    }
}
