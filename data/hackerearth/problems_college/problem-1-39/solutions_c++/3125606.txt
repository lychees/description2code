#include <iostream>
using namespace std;
long long int fpow(long long int a,long long int b)
{
	long long int res=1;
	while(b>0)
{	if(b%2==1)
	res=(res*a)%1000000007;
	a=(a*a)%1000000007;
	b=b/2;
}
return res%1000000007;
}
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	long long int a,c,b,r,v1,v2,y,x;
    	cin>>a>>b>>c;
    	if(b<0)
    	{
    		if(a==1&&c==1)
    		cout<<"1\n";
    		else
    		cout<<"0\n";
    	}
    	else
    	{
    		r=fpow(a,b);
    		y=(long long int)r/c;
    		v1=c*y;
    		v2=c*(y+1);
    		x=(r-v1)<(v2-r)?v1:v2;
    		cout<<x<<endl;
    	}
    	
    }
    return 0;
}
