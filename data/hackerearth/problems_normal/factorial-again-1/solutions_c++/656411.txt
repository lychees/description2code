#include <iostream>
using namespace std;

#define LL long long int 

LL n, p;
LL ret;

LL Powermod(LL a, LL p, LL m){
	ret = 1;
	a %= m;
	while(p > 0){
		if(p & 1){
			ret *= a;
			ret %= m;
		}
		a *= a;
		a %= m;
		p >>= 1;
	}
	return ret;
}

inline void solve(){
	scanf("%lld %lld", &n, &p);
	if (n == 1){
		printf("1\n");
	}
	else if (3 * n >= p){
		if (p == 2){
			printf("0\n");
		}
		else if (p == 3){
			if(n == 2){
				printf("2\n");
			}
			else{
				printf("0\n");
			}
		}
		else{
			printf("0\n");
		}
	}
	else{
		int i, j;
		LL ans = 1;
		j = n * 3;
		for(i = p - 1; i > j; i--){
			ans *= i;
			ans %= p;
		}
		ans *= Powermod(6, n, p);
		ans = Powermod(ans, p - 2, p);
		ans = - ans;
		while(ans < 0){
			ans += p;
		}
		printf("%d\n", int(ans));
	}
}

int main()
{
    int t;
    cin>>t;
    while(t--){
    	solve();
    }
    return 0;
}
