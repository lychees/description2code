#include <bits/stdc++.h>
using namespace std;
#define REP(i,n) for(int i=n;i>=0;i--)
int main(void) {
    
    int T = 0;
    scanf("%d",&T);
    while(T--) {
    	string s;
    	stack<int> solve;
    	cin >> s;
    	int c = 0, sum = 0,i = 0;
    	REP(i,s.length() -1) {
    		if(s[i] == 'X') {
    			solve.push(1);
    			++c;
    		}
    		else{
    			if(s[i] == 'A') { 
    				int a = solve.top();	solve.pop();
    				int b = solve.top();	solve.pop();
    				solve.push(a + b);
    			}
    			else { 
    				int a = solve.top();	solve.pop();
    				int b = solve.top();	solve.pop();
    				solve.push(max(a, b));
    			}
    		}
    	}
    	vector<int> v1(c);
    	for(i = 0; i < c; ++i)	scanf("%d",&v1[i]);
    	sort(v1.begin(), v1.end(), greater<int>());
    	i = solve.top();
    	i -= 1;
    	
    	for(; i >= 0; --i)	sum += v1[i];
    	printf("%d\n",sum);
    }
    
    return 0;
}

