#include <iostream>
 
using namespace std;

int main(int argc, char const *argv[])
{
	long int A, B;
	int sum, i;
	string s;
	cin >> A >> B;
	cin >> s;
	sum = 0;
	i = 0;
	while(i < s.length()){
		if(s[i] == '1')
			sum = (sum % B + A % B) % B;
		A = ((A % B) * (A % B)) % B;
		i++;
	}
	cout << sum << endl;
	return 0;	
}