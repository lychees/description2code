#include <bits/stdc++.h>

using namespace std;

#define MOD 1000000007
#define ll long long int
#define ld long double
#define pb push_back
#define mkp make_pair

set <ll> se[100001];
ll ans[100001];
set <ll> :: iterator it;
ll arr[100001];

int main()
{
	ll n, i, j, k, a, b, c, x, y, z;
	cin >> n;
	for (i = 1; i <= n; ++i) {
		cin >> x;
		arr[i] = x;
		se[x].insert(i);
	}
	for (i = 1; i <= 100000; ++i) {
		if (se[i].size() > 0) {
			for (it = se[i].begin(); it != se[i].end(); ++it) {
				x = *it;
				if (arr[x-1] < arr[x] && arr[x+1] < arr[x]) {
					ans[x] = max(ans[x-1], ans[x+1])+1;
				} else if (arr[x-1] < arr[x]) {
					ans[x] = ans[x-1] + 1;
				} else if (arr[x+1] < arr[x]) {
					ans[x] = ans[x+1]+1;
				} else {
					ans[x] = 1;
				}
			}
		}
	}
	z = 0;
	//for (i = 1; i <= 3; ++i) cout << ans[i] << " "; cout << endl;
	for (i = 0; i <= 100000; ++i) z += ans[i];
	cout << z << endl;

	return 0;
}