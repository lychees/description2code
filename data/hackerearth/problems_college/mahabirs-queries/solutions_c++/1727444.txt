#include <iostream>
#define MAX 101
using namespace std;
	
int N, Q;

int matrix1[MAX][MAX];
int matrix2[MAX][MAX];
int matrix3[MAX][MAX];
int matrix4[MAX][MAX];

void rotateRight(int matrix[MAX][MAX], int from[MAX][MAX]) {
	for(int i=0;i<N;i++){
		for(int j=0;j<N;j++){
			matrix[j][N-1-i] = from[i][j];
		}
	}
}


void process() {
	rotateRight(matrix2,matrix1);
	rotateRight(matrix3,matrix2);
	rotateRight(matrix4,matrix3);
}


int main() {
	cin >> N >> Q;

	for(int i=0;i<N;i++){
		for(int j=0;j<N;j++){
			cin >> matrix1[i][j];
		}
	}
	process();

	for(int k=0;k<Q;k++){
		int angle; cin >> angle;
		angle = angle % 360;
		for(int i=0;i<N;i++){
			for(int j=0;j<N;j++){
				if(angle == 0){
					cout << matrix1[i][j] <<  " ";
				}
				else if (angle == 90) {
					cout << matrix2[i][j] <<  " ";
				}
				else if (angle == 180) {
					cout << matrix3[i][j] <<  " ";
				}
				else if (angle == 270) {
					cout << matrix4[i][j] <<  " ";
				}
			}
			cout << endl;
		}
		cout << endl;
	}

	return 0;
}
