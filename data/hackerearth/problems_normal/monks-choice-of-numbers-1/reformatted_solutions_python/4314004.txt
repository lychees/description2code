def one(x):
    cout = 0
    while x != 0:
        x = x & (x-1)
        cout += 1
    return cout


t = input()
for i in range(0, t):
    listmp = list(raw_input().split())
    n = int(listmp[0])
    k = int(listmp[1])
    lis = list(raw_input().split())
    bin = []
    for j in range(0, n):
        lis[j] = int(lis[j])
        bin.append(one(lis[j]))
    bin.sort(reverse=True)
    sum = 0
    for j in range(0, k):
        sum += bin[j]
    print sum
