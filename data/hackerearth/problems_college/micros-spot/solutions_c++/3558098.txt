#include <iostream>
#include<stdio.h>
using namespace std;

int main()
{
   int t;
   cin>>t;
   while(t--)
   {
   int n,m,flag=0,flag1=0;
 int a[1000][1000],b[1000][1000],count=0,k,i,j;
   scanf("%d%d",&n,&m);
   for(i=0;i<n;i++)
   {
   	for(j=0;j<m;j++)   scanf("%d",&a[i][j]);
   		
   }
    for(i=0;i<n;i++)
    {
   	for(j=0;j<m;j++)  scanf("%d",&b[i][j]);
   		
  	}
   	
   	
   	
   	
   	
   
   	
   	
   	for(i=0;i<n;i++)
   	{
   		
   		for(j=0;j<m;j++)
   		{
   			
   			
   			for(k=0;k<n;k++)
   			{
   			    
   			if(k!=i)
   			{
   			
   				if(a[i][j]>=a[k][j])
   				{flag=1;
   			}
   				else
   				{
   					flag=0;
   					break;
   					
   				}
   				
   			}
   				
   				
   			}
   			
   				
   			for(k=0;k<m;k++)
   			{
   				if(j!=k)
   				{
   				if(b[i][j]>=b[i][k])
   				{flag1=1;
   				//	cout<<b[i][k]<<endl;
   				}
   				else
   				{
   					flag1=0;
   				//	cout<<"haha"<<b[i][k]<<endl;
   					break;
   					
   				}
   				}
   				
   				
   				
   			}
   			if(flag==1&&flag1==1)
   			{count++;
   		//	cout<<i<<" "<<j<<endl;
   			flag=0;
   			flag1=0;}
   			
   			
   			
   		}
   		
   		
   		
   		
   	}
   	printf("%d\n",count);
   	count=0;
   	
   	
   }
    return 0;
}
