#include <iostream>
#include <math.h>
using namespace std;

/*long long int modRecursion(long long int a,long long int b,long long int c)
{
    if(b == 0)
    return 1;
    if(b == 1)
    return a%c;
    else if(b%2==0)                                          
    {
        return modRecursion((a*a)%c,b/2,c);
    }
    else                                                                   
    {
        return (a*modRecursion((a*a%c),b/2,c))%c;
    }
}*/

int main()
{
    long long int A,B;
    cin >> A >> B;
    string day;
    cin >> day;
    long long int ans=0;
    int l=0;
    int i;
    for(i=0;i<day.length();i++)
    {
    	if(day[i]=='1')
    	{
    		ans = (ans+A)%B;
    	}
    	A=A*A;
    	A=A%B;
    }
    cout << ans << endl;
    return 0;
}
