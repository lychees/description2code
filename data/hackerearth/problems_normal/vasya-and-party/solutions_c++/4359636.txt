#include <iostream>
using namespace std;

int arr[100001];
long long wrr[100001];
long long vrr[100001];
long long vorr[100001];
int n,m;
long long mod = 1000000007;
int parent(int a){
	if(arr[a] == a)
		return a;
	int par = parent(arr[a]);
	arr[a] = par;
	return par;
}
void uniona(int a,int b){
	int pa = parent(a);
	int pb = parent(b);
	if(pa == pb)
		return;
	arr[pa] = pb;
	return;
}
void paren(int a,int val){
	//cout<<wrr[a]<<" "<<val<<endl;
	if(arr[a] == a){
		
		if(vorr[a]<val){
			vorr[a] = val;
			vrr[a] = 1;
		}else if(vorr[a] == val){
			if(vrr[a]!=-1){
				vrr[a]++;
				vrr[a] = vrr[a]%mod;
			}else
				vrr[a] = 1;
		}
		
		return;
	
	}
	//int vol = val;
	//if(wrr[a]>=vol)
		//vol = wrr[a];
	//vrr[a] = 1;
	paren(arr[a],val);
}
int main()
{
    cin>>n>>m;
    for(int i=1;i<=n;i++){
    	long long val;
    	cin>>val;
    	arr[i] = i;
    	wrr[i] = val;
    	vorr[i] = val;
    	vrr[i] = -1;
    	
    }
    for(int i=0;i<m;i++){
    	int a,b;
    	cin>>a>>b;
    	uniona(a,b);
    }
    long long group = 1;
    for(int i=1;i<=n;i++){
    	//if(vrr[i]==-1){
    		paren(i,wrr[i]);
    	//}
    	
    }
    for(int i=1;i<=n;i++){
    	if(vrr[i]!=-1){
    		group = group*vrr[i];
    		group = group%mod;
    	}
    }
    cout<<group<<endl;
    return 0;
}
