#include <iostream>
#include <stdio.h>
#include <algorithm>
#include <vector>
#include <stdlib.h>
#include <math.h>
#include <string.h>
using namespace std;
int t,n,s,l;
int a[100011];
int main(){
    //freopen("A.inp","r",stdin);
    scanf("%d",&t);
    while (t){
        scanf("%d%d%d",&s,&n,&l);
        for (int i=1;i<=n;i++) scanf("%d",&a[i]);
        sort(a+1,a+n+1);
        int ans=0;
        for (int i=2;i<=n;i++){
            int sum=0;
            if (s-a[i]>l) sum=sum+i-1;
            else{
                int l1=0,r1=i-1;
                while (l1<r1){
                    int mid=((l1+r1)>>1)+1;
                    if (a[i]-a[mid]>l) l1=mid;
                    else r1=mid-1;
                }
                int l2=1,r2=i;
                while (l2<r2){
                    int mid=((l2+r2)>>1);
                    if (a[mid]>l) r2=mid;
                    else l2=mid+1;
                }
                //cout<<l1<<" "<<l2<<endl;
                if (l1!=0 || l2!=i){
                    if (l1!=0 && l2!=i){
                        if (l2<=l1) sum=sum+i-1;
                        if (l2>l1) sum=sum+i-1-(l2-l1-1);
                    }
                    else{
                        if (l1!=0) sum=sum+l1;
                        else sum=sum+i-l2;
                    }
                }
            }
            //cout<<sum<<endl;
            ans=ans+sum;
        }
        printf("%d\n",ans);
        t--;
    }
}
