for i in range(input()):
	n,m,z = map(int, raw_input().split())
	a = list(map(int, raw_input().split()))
	t = 0
	tmp=1
	for i in range(n-1,-1,-1):
		t+= (tmp) * a[i]
		tmp*=-1
	a.append(t)
	if n%2==1:
		a+=a
	else:
		a+=[-j for j in a]
	#print a, z, n, m
	print a[z%(2*(n+1))]%m