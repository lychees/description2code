#include <iostream>
using namespace std;
int a[100][100];
int n;
int col[100][100];
int co[100][100];
int s;
int agai(int i,int j)
{
	if(i==(n-1))
    {
        s=1;
        return s;
    }

	if(a[i+1][j]==1&&col[i+1][j]==0&&i+1<n)
	{
	    col[i+1][j]=1;
        agai(i+1,j);
	}
	if(a[i+1][j+1]==1&&col[i+1][j+1]==0&&i+1<n&&j+1<n)
    {
        col[i+1][j+1]=1;
        //cout<<"hi"<<endl;
		agai(i+1,j+1);
    }
    if(a[i-1][j+1]==1&&col[i-1][j+1]==0&&i-1>=0&&j+1<n)
    {
        //cout<<"hi"<<i-1<<j+1<<endl;
        col[i-1][j+1];
        agai(i-1,j+1);
    }
	if(a[i+1][j-1]==1&&col[i+1][j-1]==0&&i+1<n&&j>=0)
	{
	    col[i+1][j-1]=1;
        agai(i+1,j-1);
    }


	if(a[i][j+1]==1&&col[i][j+1]==0&&j+1<n)
    {
	    col[i][j+1]=1;
	    agai(i,j+1);
	}
	if(a[i][j-1]==1&&col[i][j-1]==0&&j>=0)
    {
        col[i][j-1];
        agai(i,j-1);
    }
    if(a[i-1][j-1]==1&&col[i-1][j-1]==0&&i>=0&&j>=0)
    {
        col[i-1][j-1];
        agai(i-1,j-1);
    }

    if(a[i-1][j]==1&&col[i-1][j]==0&&i-1>=0)
    {
        col[i-1][j];
        agai(i-1,j);
    }


	return s;


}
int r=0;
int aga(int i,int j)
{
    //cout<<i<<j;

	if(j==(n-1))
    {
        r=1;
        return r;
    }


	if(a[i+1][j]==2&&co[i+1][j]==0&&i+1<n)
	{
	    co[i+1][j]=1;
        aga(i+1,j);
	}
	if(a[i+1][j+1]==2&&co[i+1][j+1]==0&&i+1<n&&j+1<n)
    {
        co[i+1][j+1]=1;
        //cout<<"hi"<<endl;
		aga(i+1,j+1);
    }
    if(a[i-1][j+1]==2&&co[i-1][j+1]==0&&i-1>=0&&j+1<n)
    {
        //cout<<"hi"<<i-1<<j+1<<endl;
        co[i-1][j+1];
        aga(i-1,j+1);
    }
	if(a[i+1][j-1]==2&&co[i+1][j-1]==0&&i+1<n&&j>=0)
	{
	    co[i+1][j-1]=1;
        aga(i+1,j-1);
    }


	if(a[i][j+1]==2&&co[i][j+1]==0&&j+1<n)
    {
	    co[i][j+1]=1;
	    aga(i,j+1);
	}
	if(a[i][j-1]==2&&co[i][j-1]==0&&j>=0)
    {
        co[i][j-1];
        aga(i,j-1);
    }
    if(a[i-1][j-1]==2&&co[i-1][j-1]==0&&i-1>=0&&j-1>=0)
    {
        co[i-1][j-1];
        aga(i-1,j-1);
    }

    if(a[i-1][j]==2&&co[i-1][j]==0&&i-1>=0)
    {
        co[i-1][j];
        aga(i-1,j);
    }


	return r;


}


int main()
{
	//int n;
	cin>>n;
	for(int i=0;i<n;i++)
	{
		for(int j=0;j<n;j++)
		{
			cin>>a[i][j];
			col[i][j]=0;
			co[i][j]=0;
		}
	}
	int q=0,p=0;
	for(int i=0;i<n;i++)
    {
        if(a[i][0]==2)
        {
            co[i][0]=1;
            //cout<<"hi"<<endl;
            q=aga(i,0);
        }

    }
	for(int i=0;i<n;i++)
    {
        if(a[0][i]==1)
        {
            col[0][i]=1;
            p=agai(0,i);
        }

    }
    //cout<<q;
	if(p==1&&q==1)
    cout << "AMBIGUOUS" << endl;
    else if(q==1)
    cout << "2" << endl;
    else if(p==1)
    cout << "1" << endl;
    else
    cout<<"0"<<endl;
    return 0;
}
