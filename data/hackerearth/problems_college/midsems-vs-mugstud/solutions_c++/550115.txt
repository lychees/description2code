#include <iostream>
#include <cstdio>
#include <cmath>
#include <vector>
#include <set>
#include <cstring>
#include <queue>
#include <cassert>
#define mod 1000000007
using namespace std;

typedef long int ll;
typedef double ld;

int a[52][52][52],sol[52][52][52],ikj[52][52][52];
inline int Scan_f()
{
     int noRead=0;
    //register char p=getchar_unlocked();
    register char p=getc(stdin);
    //for(;p<48 || p>57;p=getchar_unlocked());
    for(;p<48 || p>57;p=getc(stdin));
    //while(p>47 && p<58){ noRead = (noRead << 3) + (noRead << 1) + (p - '0');p=getchar_unlocked();}
    while(p>47 && p<58){ noRead = (noRead << 3) + (noRead << 1) + (p - '0');p=getc(stdin);}
    return noRead;
};



int main()
{
    //freopen("input2.txt","r",stdin);
    int T,n,i,j,k,t,tsum;
    T = Scan_f();
    while(T > 0)
    {
     n = Scan_f();
     memset(a,0,sizeof(a));
     memset(sol,0,sizeof(sol));
     memset(ikj,0,sizeof(ikj));
     for(i=0;i<n;i++)
     {
      for(j=0;j<n;j++)
      {
       for(k=0;k<n;k++)
        a[i][j][k] = Scan_f();
      }
     }
     for(i=0;i<n;i++)
     {
      for(j=0;j<n;j++)
      {
       for(k=0;k<n;k++)
       {
        tsum = 0;
        if(i == 0)
        {
         if(j == 0 && k == 0)
            sol[i][j][k] = a[i][j][k];
         else if(j == 0)
            sol[i][j][k] = a[i][j][k] - a[i][j][k-1];
         else if(k == 0)
            sol[i][j][k] = a[i][j][k] - a[i][j-1][k];
         else
         {
            for(t=0;t<i;t++)
                tsum += ikj[t][k][j];
            tsum += ikj[i][k][j-1];
            sol[i][j][k] = a[i][j][k] - a[i][j][k-1] - tsum;
         }
        }
        else
        {
         if(j == 0 && k == 0)
            sol[i][j][k] = a[i][j][k] - a[i-1][j][k];
         else if(j == 0)
         {
            for(t=0;t<i;t++)
                tsum += ikj[t][k][j];
            tsum += ikj[i][k][j-1];
            sol[i][j][k] = a[i][j][k] - a[i][j][k-1] - tsum;
         }
         else if(k == 0)
         {
            for(t=0;t<i;t++)
                tsum += ikj[t][k][j];
            tsum += ikj[i][k][j-1];
            sol[i][j][k] = a[i][j][k] - tsum;
         }
         else
         {
            for(t=0;t<i;t++)
                tsum += ikj[t][k][j];
            tsum += ikj[i][k][j-1];
            sol[i][j][k] = a[i][j][k] - a[i][j][k-1] - tsum;
         }
        }
        if(j == 0)
         ikj[i][k][j] = sol[i][j][k];
        else
         ikj[i][k][j] = sol[i][j][k] + ikj[i][k][j-1];
       }
      }
     }
     for(i=0;i<n;i++)
     {
      for(j=0;j<n;j++)
      {
       for(k=0;k<n;k++)
        printf("%d ",sol[i][j][k]);
       printf("\n");
      }
     }

     T--;
    }

    return 0;
}
