#include <bits/stdc++.h>
 
using namespace std;
 
int main()
{
    long long a,b,c,m=1000000007;
    long long n;
    long long i;
    cin>>a>>b>>c>>n;
    long long d=((((a*b)%m)*c)%m);
    long long e=((a*b)%m);
    long long f=((a*c)%m);
    long long g=((b*c)%m);
    long long A[n],B[n];
    A[0]=f;
    B[0]=g;
    for(i=1;i<n;i++)
    {
        A[i]=(((A[i-1]*d)%m)+((A[i-1]*e)%m)+((A[i-1]*f)%m))%m;
    }
    for(i=1;i<n;i++)
    {
        B[i]=(((B[i-1]*d)%m)+((B[i-1]*e)%m)+((B[i-1]*g)%m))%m;
    }
    long long temp11=A[0],temp12,temp21=B[0],temp22,temp,j=0;
    
    for(i=1;i<n;i++)
    {
    	if(A[i]<temp11)
    	{
    		temp11=A[i];
    		j=i;
    	}
    }
    temp=A[0];
    A[0]=A[j];
    A[j]=temp;
    j=0;
    temp12=A[1];
    for(i=2;i<n;i++)
    {
    	if(A[i]<temp12)
    	temp12=A[i];
    }
    for(i=1;i<n;i++)
    {
    	if(B[i]<temp11)
    	temp21=B[i];
    }
    temp=B[0];
    B[0]=B[j];
    B[j]=temp;
    temp22=B[1];
    for(i=2;i<n;i++)
    {
    	if(B[i]<temp22)
    	temp22=B[i];
    }
    long long sum=temp11+temp22,sum1=temp12+temp21;
    if(sum<sum1)
    cout<<sum;
    else
    cout<<sum1;
   return 0;
}

