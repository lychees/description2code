#include <bits/stdc++.h>
using namespace std;

#define ll  long long int
#define max(a,b) (a>b)?a:b


int main() {
	// your code goes here
ll n,sum=0,i;
cin>>n;
ll ar[n+1];
ll dp[n+1];
memset(dp,0,sizeof(dp));
for(i=1;i<=n;i++)
 {
cin>>ar[i];     
 }
 
 ar[0]=0;
for(i=1;i<=n;i++)
 {
 if(ar[i-1]<ar[i])
  {
    dp[i]=dp[i-1]+1;  
  }
  else
   {
     dp[i]=1;  
   }
  // cout<<dp[i]<<ar[i]<<endl;
 }
for(i=n-1;i>=1;i--)
 {
  if(ar[i]>ar[i+1]&&dp[i]<=dp[i+1])
   {
     dp[i]=dp[i+1]+1;  
   }
 }

for(i=1;i<=n;i++)
 {
sum+=dp[i];     
 }
 cout<<sum;

return 0;
}
