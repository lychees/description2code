#include<bits/stdc++.h>
using namespace std;
#define M 1000000007
int a[1002][1002],b[1002][1002];
int sum;
int calc(int x,int y)
{
    int s=0;
    if(a[x][y]>a[x-1][y])
    {
        if(b[x-1][y]==0)
                b[x-1][y]=calc(x-1,y);
        s=((s%M)+(b[x-1][y]%M))%M;
    }
    if(a[x][y]>a[x+1][y])
    {
        if(b[x+1][y]==0)
            b[x+1][y]=calc(x+1,y);
        s=((s%M)+(b[x+1][y]%M))%M;
    }
    if(a[x][y]>a[x][y+1])
    {
        if(b[x][y+1]==0)
            b[x][y+1]=calc(x,y+1);
        s=((s%M)+(b[x][y+1]%M))%M;
    }
    if(a[x][y]>a[x][y-1])
    {
        if(b[x][y-1]==0)
            b[x][y-1]=calc(x,y-1);
        s=((s%M)+(b[x][y-1]%M))%M;
    }
    return (1+(s%M))%M;
}
int main()
{
    sum=0;
    int n;
    scanf("%d",&n);
    for(int i=0;i<=n+1;i++)
    {
        a[0][i]=INT_MAX;
        a[n+1][i]=INT_MAX;
    }
    for(int i=1;i<=n;i++)
    {
        a[i][0]=INT_MAX;
        a[i][n+1]=INT_MAX;
    }
    for(int i=0;i<=n+1;i++)
    {
        for(int j=0;j<=n+1;j++)
            b[i][j]=0;
    }
    for(int i=1;i<=n;i++)
    {
        for(int j=1;j<=n;j++)
        {
            scanf("%d",&a[i][j]);
        }
    }
    int temp;
    for(int i=1;i<=n;i++)
    {
        for(int j=1;j<=n;j++)
        {
            if(b[i][j]==0)
                b[i][j]=calc(i,j);
        }
    }
    for(int i=1;i<=n;i++)
    {
        for(int j=1;j<=n;j++)
        {
            //cout<<b[i][j]<<" ";
            sum=((sum%M)+(b[i][j]%M))%M;
        }
        //cout<<endl;
    }
    printf("%d\n",sum);
    return 0;
}
