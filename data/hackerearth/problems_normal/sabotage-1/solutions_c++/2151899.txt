#include <bits/stdc++.h>
using namespace std;

const int N = 1e5 + 5;

pair<int, int> yo[N];
stack<int> ans;
int p[N], h[N];

int par(int x){
	if(p[x] != x)	p[x] = par(p[x]);
	return p[x];
}

void join(int p1, int p2){
	if(h[p2] > h[p1])	swap(p1, p2);
	if(h[p1] == h[p2])	h[p1]++;
	p[p2] = p1;
}

int main(){
	for(int i = 0; i < N; i++)	p[i] = i;
	int n, m;
	cin>>n>>m;
	for(int i = 0; i < m; i++)	cin>>yo[i].first>>yo[i].second;
	for(int i = m - 1; i >= 0; i--){
		int p1 = par(yo[i].first), p2 = par(yo[i].second);
		if(p1 != p2)	join(p1, p2);
		else ans.push(i + 1);
	}
	cout<<m - (n - 1)<<endl;
	while(!ans.empty()){
		cout<<ans.top()<<endl;
		ans.pop();
	}
}