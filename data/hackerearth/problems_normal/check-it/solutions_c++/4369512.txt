#include <iostream>
#include<vector>
using namespace std;
vector <int> a[40001];
int vis[5001],i,j,n;

void intr(){
	for(i=1;i<=n;i++)
	vis[i]=0;
}


int main()
{
    int t,x,y,h,k;
    long int m;
    cin>>t;
    while(t--){
    	cin>>n>>m;
    	for(i=1;i<=m;i++)
    	
    	for(i=1;i<=m;i++){
    	cin>>x>>y;
    	a[i].clear();
    	a[i].push_back(x);
    	a[i].push_back(y);}
    	
    	intr();
    	
    	for(i=1;i<n;i++){
    		cin>>k;
    	for(j=0;j<a[k].size();j++)
    	vis[a[k][j]]=1;
    	}
    	h=0;
    	int r;
    	for(i=1;i<=n;i++)
    	if(vis[i]==0){
    	h=1;
    	r=i;
    	break;}
    	
    	if(h==1)
    	cout<<"NO"<<endl;
    	else
    	cout<<"YES"<<endl;
    }
}
