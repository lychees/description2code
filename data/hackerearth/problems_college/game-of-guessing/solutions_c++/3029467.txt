#include <cstdio>
#include <climits>
using namespace std;

int main()
{
	int iNumberOfTestcases;
	int iNumberOfHints;
	char cBoolResp[4];
	char cOperator[100000];
	int iCompVal[100000];
	bool bYesOrNo[100000];
	
	/*int iCheckVals[300000];
	int iCheckValCount = 0;*/

	scanf("%d", &iNumberOfTestcases);

	for(int tCase = 0; tCase < iNumberOfTestcases; tCase++)
	{
		int iMinHintVal = 1000000000;
		int iMaxHintVal = 0;
		// Read the inputs
		scanf("%d\n", &iNumberOfHints);

		for(int iHint = 0; iHint < iNumberOfHints; iHint++)
		{
			scanf("%c %d ", &cOperator[iHint], &iCompVal[iHint]);

			if(iCompVal[iHint] > iMaxHintVal)
				iMaxHintVal = iCompVal[iHint];

			if(iCompVal[iHint] < iMinHintVal)
				iMinHintVal = iCompVal[iHint];

			gets(cBoolResp);

			if(cBoolResp[0] == 'Y')
			{
				bYesOrNo[iHint] = true;
			}
			else
			{
				bYesOrNo[iHint] = false;
			}
		}

		if(iMinHintVal > 1)
		{
			iMinHintVal--;
		}

		if(iMaxHintVal < 1000000000)
		{
			iMaxHintVal++;
		}

		int iMaxTrue = 0;
		// Now process them
		for(int iCurValn = iMinHintVal; iCurValn <= iMaxHintVal; iCurValn++)
		{
			int iCurrentTrue = 0;

			for(int iHint = 0; iHint < iNumberOfHints; iHint++)
			{
				if(cOperator[iHint] == '<')
				{
					if(bYesOrNo[iHint] && iCurValn < iCompVal[iHint])
						iCurrentTrue++;
					else if(!bYesOrNo[iHint] && iCurValn >= iCompVal[iHint])
						iCurrentTrue++;
				}
				else if(cOperator[iHint] == '>')
				{
					if(bYesOrNo[iHint] && iCurValn > iCompVal[iHint])
						iCurrentTrue++;
					else if(!bYesOrNo[iHint] && iCurValn <= iCompVal[iHint])
						iCurrentTrue++;
				}
				else
				{
					if(bYesOrNo[iHint] && iCurValn == iCompVal[iHint])
						iCurrentTrue++;
					else if(!bYesOrNo[iHint] && iCurValn != iCompVal[iHint])
						iCurrentTrue++;
				}
			}

			if(iCurrentTrue > iMaxTrue)
				iMaxTrue = iCurrentTrue;
		}

		printf("%d\n", iNumberOfHints - iMaxTrue);
	}

	return 0;
}