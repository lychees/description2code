#include<bits/stdc++.h>
using namespace std;
int A[50][50];
int B[50][50];
void expo(long long t,int n){
	if(t==1)
		return;
	int B[n][n];
	if(t&1){
		for(int x=0;x<n;x++)
			for(int y=0;y<n;y++)
				B[x][y]=A[x][y];
	}
	int C[n][n];
	for(int x=0;x<n;x++)
		for(int y=0;y<n;y++){
			C[x][y]=0;
			for(int z=0;z<n;z++){
				C[x][y]=(C[x][y]+(long long)A[x][z]*A[z][y])%1000000007;
			}
		}
	for(int x=0;x<n;x++)
		for(int y=0;y<n;y++)
			A[x][y]=C[x][y];
	expo(t>>1,n);
	if(t&1){
		for(int x=0;x<n;x++)
			for(int y=0;y<n;y++){
				C[x][y]=0;
				for(int z=0;z<n;z++){
					C[x][y]=(C[x][y]+(long long)A[x][z]*B[z][y])%1000000007;
				}
			}
		for(int x=0;x<n;x++)
			for(int y=0;y<n;y++)
				A[x][y]=C[x][y];
	}
}
int main(){
	long long int t;
	scanf("%lld",&t);
	while(t--){
		long long int n,m;
		scanf("%lld%lld",&m,&n);
		long long int arr[m][m],i,j;
		for(i=0;i<m;i++){
			for(j=0;j<m;j++)
			scanf("%lld",&A[i][j]);
		}
		expo(n,m);
		for(i=0;i<m;i++){
			for(j=0;j<m;j++)
			cout<<A[i][j]<<" ";
			cout<<endl;
		}
	}
	return 0;
}