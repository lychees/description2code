#include <iostream>
using namespace std;
const int maxN = 1500100;
int T[maxN];

int sum (int r) {
	int result = 0;
	for (; r >= 0; r = (r & (r+1)) - 1)
		result += T[r];
	return result;
}

void inc (int i) {
	for (; i < maxN; i = (i | (i+1)))
		T[i] += 1;
}

void dec (int i) {
	for (; i < maxN; i = (i | (i+1)))
		T[i] -= 1;
}

int sum (int l, int r) {
	return sum (r) - sum (l-1);
}

int main() {
	int N,M,num; char ch;
	scanf("%d%d", &N, &M);
	int pos[500001];
	int l=500000, r=500000+N+1;
	long long ans(0);
	for (int i=1;i<=N;i++) {
		scanf("%d", &num);
		pos[num]=500000+i;
		inc(pos[num]);
	}
	for (int i=0;i<M;i++) {
		scanf("%d %c",&num, &ch);
		int leftA = sum(l,pos[num]-1),
			rightA = sum(pos[num]+1,r);
		ans+=min(leftA, rightA);
		dec(pos[num]);
		if (ch == 'l') 
			pos[num]=l--;
		else
			pos[num]=r++;
		inc(pos[num]);
	}
	printf("%lld\n", ans);
    return 0;
}
