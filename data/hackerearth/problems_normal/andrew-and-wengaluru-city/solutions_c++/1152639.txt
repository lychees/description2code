#include <iostream>
#include <cstdio>
using namespace std;
int A[100001];
long long int trap(int n) {
    long long int left=0; long long int right=n-1;
    long long int res=0;
    long long int maxleft=0, maxright=0;
    while(left<=right){
        if(A[left]<=A[right]){
            if(A[left]>=maxleft) maxleft=A[left];
            else res+=maxleft-A[left];
            left++;
        }
        else{
            if(A[right]>=maxright) maxright= A[right];
            else res+=maxright-A[right];
            right--;
        }
    }
    return res%1000000007;
}
int main()
{
 	long long int test,n,i;
 	cin >> test;
 	while ( test-- ) {
 		cin >> n;
 		for( i=0; i<n; i++) scanf("%d",&A[i]);
 		cout << trap(n) << endl;
 	}
    return 0;
}
