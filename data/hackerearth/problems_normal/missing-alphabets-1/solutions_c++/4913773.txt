#include<iostream>
#include<string.h>
using namespace std;

int min(int a,int b)
{
  if(a<=b)
    return a;
  return b;
  }



main()
{
  int t;
  cin>>t;
  for(int z=0;z<t;z++)
  {
char s[30];
int ar[26];
cin>>s;
for(int i=0;i<strlen(s);i++)
{
ar[s[i]-97]=i;
}

int n;
cin>>n;
char str[102][52];
for(int i=0;i<n;i++)
 { cin>>str[i];}
for(int i=0;i<n;i++)
{
  for(int j=i+1;j<n;j++)
   {
     int l1=strlen(str[i]);
     int l2=strlen(str[j]);
     char temp[52];
     int p=0; int l=0;
     for(int k=0;k<min(l1,l2);k++)
     {   //cout<<ar[str[i][k]-97]<<"   "<<ar[str[j][k]-97]<<endl;
        //cout<<str[i]<<"   "<<str[j]<<endl;
         if(ar[str[j][k]-97]<ar[str[i][k]-97])
          {
            strcpy(temp,str[i]);
            strcpy(str[i],str[j]);
            strcpy(str[j],temp);
          //cout<<str[i]<<"   "<<str[j]<<endl;
            p=1;
            break;
          }
         else if(ar[str[j][k]-97]>ar[str[i][k]-97])
         {
           l=1; break;
         }
     }
  if(p==0&&l==0&&l2<l1)
   {
    strcpy(temp,str[i]);
    strcpy(str[i],str[j]);
    strcpy(str[j],temp);
   }
  }
}
for(int i=0;i<n;i++)
  cout<<str[i]<<endl;
  }
}
