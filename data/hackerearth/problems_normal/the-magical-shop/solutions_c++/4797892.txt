#include <iostream>
#include<string.h>
using namespace std;

int main()
{
	unsigned long long int a, b, sum=0, i=0;
	char s[100000];
	cin>>a>>b>>s;
	for(i=0;i<strlen(s);i++)
	{
		if(s[i]=='1')
		{
			sum = (sum + a%b)%b;
		}
		a = (a*a)%b;
	}
	cout<<sum%b;
    return 0;
}