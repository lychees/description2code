#include <iostream>
#include<string.h>
#include<algorithm>

using namespace std;
string new_order;
bool cmp(const string s1,const string s2){
	int i;
		int s1_ind=-1,s2_ind=-1;
	for(i=0;i < min(s1.length(),s2.length());i++){
		if(s1.at(i)!=s2.at(i)){
			break;
		}
	}
	
	if(i >= min(s1.length(),s2.length())){
		if(s1.length() > s2.length())		
			return false;
		else
			return true;	
	}
	for(int j=0;j < new_order.length();j++){
		if(new_order.at(j)==s1.at(i)){
			s1_ind=j;
		}
		if(new_order.at(j)==s2.at(i)){
			s2_ind=j;
		}
		
	}
	return s1_ind < s2_ind;
}
int main()
{
	int cases;
	int num_of_string;
	string *arr=NULL;
	cin>>cases;
	for(int testc=0;testc<cases;testc++){
		cin>>new_order;
		cin>>num_of_string;
		arr=new string[num_of_string];
		for(int str_it=0;str_it < num_of_string;str_it++){
			cin>>arr[str_it];
		}
		sort(arr,arr+num_of_string,cmp);	
		for(int i=0;i<num_of_string;i++){
			cout<<arr[i]<<endl;
		}
	}
    return 0;
}
