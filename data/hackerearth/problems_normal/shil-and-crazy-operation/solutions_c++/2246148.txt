#include <iostream>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <limits.h>
#include <vector>
#include <queue>
#include <map>
#include <cstdlib>
#include <algorithm>
//psyduck
#define ll long long
#define S(x) scanf("%d",&x)
#define Sf(x) scanf("%f",&x)
#define Slf(x) scanf("%lf",&x)
#define Sl(x) scanf("%lld",&x)
#define P(x)  printf("%d\n", x)
#define Pf(x)  printf("%f\n", x)
#define Plf(x)  printf("%lf\n", x)
#define Pl(x)  printf("%lld\n", x)
#define mem(x,i) memset(x,i,sizeof(x))
using namespace std;
int a[100005];
int p[100005];
int state[100005];
int ans[100005];
int main()
{
    vector<int>v;
    int n,i,num,count,z,j,flag,h;
    ll int t;
    cin >> n;
    cin >> t;
    for(i = 1; i <= n; i++){
        cin >> a[i];
    }
    for (i = 1; i <= n; i++){
        cin >> p[i];
    }
    mem(state,0);
    for (i = 1; i <= n; i++){
        if(state[i] == 0){
            num = i;
            while(state[num] != 1){
                v.push_back(num);
                state[num] = 1;
                num = p[num];
              //  cout <<"asd";
            }
            flag = 1;
        }
        if(flag == 1){
            z = v.size();
            h = t%z;
            for (j = 0; j < v.size(); j++){
                 ans[v[j]] = a[v[(j+h)%z]];
            }
            //cout << endl;
        }
        flag = 0;
        v.clear();
    }
                for (j = 1; j <= n; j++){
                cout << ans[j]<<" ";
            }
            cout << endl;
}
