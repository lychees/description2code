//Pranet Verma
#include <bits/stdc++.h>
using namespace std;
int par[100001];
int fs(int u)
{
	return par[u]=(par[u]==u?u:fs(par[u]));
}
int main()
{
	std::ios::sync_with_stdio(false);
	cin.tie(0);
	int n,q;
	cin>>n>>q;
	for(int i=1;i<=n;++i)
		par[i]=i;
	while(q--)
	{
		int t,a,b;
		cin>>t>>a;
		if(t==1)
		{
			cin>>b;
			if(fs(a)!=fs(b))
				par[fs(a)]=fs(b);
		}
		else if(t==2)
			par[fs(a)]=a,par[a]=a;
		else
			cout<<fs(a)<<"\n";
	}	
}