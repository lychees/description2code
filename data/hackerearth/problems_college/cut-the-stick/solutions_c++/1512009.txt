#include <iostream>
#include <algorithm>
using namespace std;
typedef long long ll;
ll a[10001];
ll n,s,l;
 
int main()
{
	int t;
	cin>>t;
	while(t--){	
		scanf("%lld%lld%lld",&s,&n,&l);
		for(int i=0;i<n;i++) {
			scanf("%lld",&a[i]);		
		}
		
		ll ans = 0;
		int cnt = 0;
		sort(a,a+n);		
		
			for(int i=0;i<n-1;i++){			
				if (a[i]>l) {
					ans += n-1-(i+1)+1;
					continue;
				}
				int j = lower_bound(a+i+1,a+n,a[i]+l)-a;
				//cout << j << "; " << i << endl;
				if (j==n || (j==n-1 && a[j]==a[i]+l)){
					int kt = i+1;
					while (kt<n && s-a[kt]>l) ans++,kt++;
					continue;
				}
			if (a[j]==a[i]+l) j++;
				ans += n-j;
				
				int jj = lower_bound(a+i+1,a+j,s-l)-a-1;
				//cout << jj << endl;
				if (jj>=j || j<=i) continue;
				//if (a[jj]>=s-l) jj--;
				if (jj>i)
					ans += jj-i;
			}			
		
		printf("%lld\n",ans);
	}
    return 0;
}
