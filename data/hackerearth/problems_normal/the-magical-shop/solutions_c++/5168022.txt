#include <iostream>
using namespace std;
typedef long long ll;
ll a[100005];
int main()
{
   ll x,y,ans=0;
   string s;
   cin>>x>>y;
   cin>>s;
   a[0]=x;
   for(ll i=1;i<s.size();i++) {
   	a[i]=(a[i-1]*a[i-1])%y;
   	if(s[i]=='1')
   		ans+= a[i];
    }
    if (s[0]=='1'){
    	ans += a[0];
    }
  	cout << ans%y;
    return 0;
}
