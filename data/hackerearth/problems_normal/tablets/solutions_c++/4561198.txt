#include <iostream>
#include <vector>
using namespace std;

int main()
{
    int N;
    cin>>N;
    
    vector<int>healthScore(N,0);
    vector<int>dp(N,1);
    
    cin>>healthScore[0];
    dp[0]=1;
    for(int i=1;i<N;i++){
    	cin>>healthScore[i];
    	if(healthScore[i] > healthScore[i-1])
   			dp[i] =  (dp[i-1] + 1);
    }
    	
   	for(int i=N-2;i>=0;i--)
   		if(healthScore[i] > healthScore[i+1] && dp[i]<=dp[i+1])
   			dp[i] =  (dp[i+1] + 1);
   			
   	int sum = 0;
   	for(int i=0;i<N;i++)
   		sum += dp[i];
   	
   	cout<<sum<<endl;
    
    return 0;
}

