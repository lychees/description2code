#include<bits/stdc++.h>
using namespace std;
#define mod 1000000007
#define inf (1<<28)
#define pi 3.141593
#define pb push_back
#define mp make_pair
typedef long long ll;
int main()
{
	ios_base::sync_with_stdio(false);
	ll t;
	cin>>t;
	while(t--)
	{
		ll n,m;
		cin>>n>>m;
		ll p[n],q[n];
		ll i,j;
		for(i=0;i<n;i++)
		{
			cin>>p[i];
		}
		for(i=0;i<n;i++)
		{
			cin>>q[i];
		}
		vector<ll> v[n+1];
		for(i=0;i<m;i++)
		{
			ll a,b;
			cin>>a>>b;
			a--;b--;
			v[a].pb(b);
			v[b].pb(a);
		}
		ll temp;
		bool visit[n],ans=true;
		memset(visit,false,sizeof(visit));
		set<ll> check;
		for(i=0;i<n;i++)
		{
			if(!visit[i] && ans)
			{
				//cout<<"INSIDE\n";
				check.clear();
				check.insert(p[i]);
				check.insert(q[i]);
				queue<ll>q1;
				q1.push(i);
				visit[i]=true;
				temp=1;
				while(!q1.empty())
				{
					//cout<<"INSIDE INSIDE\n";
					ll r=q1.front();
					q1.pop();
					for(j=0;j<v[r].size();j++)
					{
						if(!visit[v[r][j]])
						{
							temp++;
							q1.push(v[r][j]);
							visit[v[r][j]]=true;
							check.insert(p[v[r][j]]);
				            check.insert(q[v[r][j]]);
						}
					}
				}
				//cout<<temp<<" "<<check.size()<<endl;
				if(check.size()!=temp)
				{
					ans=false;
					break;
				}
			}
		}
		if(ans)
		cout<<"YES\n";
		else
		cout<<"NO\n";
	}
    return 0;
}


