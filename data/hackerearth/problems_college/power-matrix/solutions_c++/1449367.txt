#include <bits/stdc++.h>
using namespace std;
#define SIZE 55
#define mod 1000000007
int sz;
void one(long long int a[SIZE][SIZE])
{
    for (int i = 0; i < SIZE; i++)
        for (int j = 0; j < SIZE; j++)
            a[i][j] = (i == j);
}
//Multiply matrix a to matrix b and print result into a
void mul(long long int a[SIZE][SIZE], long long int b[SIZE][SIZE])
{
    long long int res[SIZE][SIZE] = {{0}};

    for (int i = 0; i < SIZE; i++)
        for (int j = 0; j < SIZE; j++)
            for (int k = 0; k < SIZE; k++)
            {
                res[i][j] += (a[i][k] * b[k][j])%mod;
                res[i][j]%=mod;
            }

    for (int i = 0; i < SIZE; i++)
        for (int j = 0; j < SIZE; j++)
            a[i][j] = res[i][j];
}

//Caluclate a^n and print result into matrix res
void pow(long long int a[SIZE][SIZE], long long int n, long long int res[SIZE][SIZE])
{
    one(res);

    while (n > 0) {
        if (n % 2 == 1)
        {
             mul(res, a);
        }
         mul(a, a);
         n/=2;
    }
    for (int i = 0; i < sz; i++)
        {for (int j = 0; j < sz; j++)
        cout<<res[i][j]<<" ";
    cout<<endl;}
}
int main() {
	// your code goes here
	long long int a[SIZE][SIZE];
	long long int res[SIZE][SIZE];
	int t;
	cin>>t;
	while(t--)
	{

		int n;
		cin>>sz>>n;
		memset(a,0,sizeof a);
		memset(res,0,sizeof res);
		for(int i=0;i<sz;i++)for(int j=0;j<sz;j++) cin>>a[i][j];
		pow(a,n,res);
	}
	return 0;

}
