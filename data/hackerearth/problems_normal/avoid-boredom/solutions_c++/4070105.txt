#include <iostream>
#define MAX 105
 
using namespace std;
int main()
{
    unsigned T;
    cin>>T;
    long res[MAX][MAX];
    long arr[MAX];

    for(int i = 0; i < T; i++) {
        unsigned N, M;
        cin>>N>>M;

        for(int i = 0; i < N; i++)
            cin>>arr[i];

        for(int i = 0; i <= M; i++)
            for(int j = 0; j < N; j++)
                res[i][j] = 0;

        for(int i = 2; i <=M; i++) {
            for(int j = i-1; j < N; j++) {
                long max = 0;
                for(int k = i-2; k <= j-1; k++) {
                    long tmp = ((arr[j] - arr[k])<0 ? (arr[k]-arr[j]):(arr[j]-arr[k]))
                                        + res[i-1][k];
                    if(tmp > max)
                        max = tmp;
                }
                res[i][j] = max;
            }
        }

        long max = 0;
        for(int i = M-1; i <N; i++)
            if(res[M][i] > max)
                max = res[M][i];

        cout<<max;
        if(i < T-1)
            cout<<"\n";
    }

    return 0;
}
 
