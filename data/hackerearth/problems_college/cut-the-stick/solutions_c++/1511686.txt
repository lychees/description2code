#include<bits/stdc++.h>
using namespace std;
int arr[10009];
int find_n(int p,int q,int l) {
	int mid;
	while(p<=q) {
		mid = (p+q)/2;
		if(arr[mid]>=l) {
			if((mid-1)>=p&&arr[mid-1]>=l) {
				q=mid-1;
			}
			else {
				return mid;
			}
		}
    	else {
    		p=mid+1;
    	}
	}
	return -1;
}

int find_m(int p,int q,int r,int n) {
	int mid;
	while(p<=q) {
		mid = (p+q)/2;
		if(arr[mid]<=r) {
			if(mid+1<=q&&arr[mid+1]<=r) {
				p=mid+1;
			}
			else {
				return mid;
			}
		}
    	else {
    		q=mid-1;
    	}
	}
	return -1;
}

int main()
{
	int t,i,s,l,n,a1,a2;
	long long int tot;
	cin>>t;
	while(t--) {
		tot=0;
		scanf("%d%d%d",&s,&n,&l);
		for(i=0;i<n;i++) {
			scanf("%d",&arr[i]);
		}
		sort(arr,arr+n);
		for(i=0;i<n-1;i++) {
			if(arr[i]>l) {
				tot+=(n-i-1);
			}
			else {
				a1=find_n(i+1,n-1,arr[i]+l+1);
				//cout<<a<<endl;
				if(a1!=-1) {
					tot+=(n-a1);
				}
				a2=find_m(i+1,n-1,s-l-1,n);
				//cout<<a<<endl;
				if(a2!=-1) {
					tot+=(a2-i);
				}
				if(a1!=-1&&a2!=-1&&a1<=a2)
				tot=tot-abs(a2-a1+1);
			}
		}
		printf("%lld\n",tot);
	}
	return 0;
}