#include <iostream>
#include<string>
using namespace std;

int main()
{
    long t=0,n=0;
    cin>>t;
    string str="";
    while(t--)
    {
    	cin>>n;
    	cin>>str;
    	long i=0,j=0,cnt=0,k=0;
	for(i=0,j=0;i<n-1;i++)
    	{
    		if(str[i+1]>=str[i])
    		{
		}
    		else
    		{
    			k=i-j+1;
    			cnt+=(k*(k+1))/2;
    			j=i+1;
			
    		}
    	}
	k=n-j;	
	cnt+=(k*(k+1)/2);
    	cout<<cnt<<endl;
    	
    }
    return 0;
}
