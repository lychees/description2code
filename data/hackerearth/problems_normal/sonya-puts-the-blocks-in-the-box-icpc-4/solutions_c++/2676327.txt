#include <bits/stdc++.h>
#define LL long long int
#define mod 1000000007
#define maxn 100001
using namespace std;

int n,m;
LL b[101][1001] = {0}, dp[20][1001][1001] = {0},a[100001];

int main() {

    ios_base::sync_with_stdio(false);
    cin >> n >> m;

    for(int i=1;i<=n;i++){
        int sz;
        cin >> sz;

        for(int j=1;j<=sz;j++)
            cin >> a[j];


        for(int ii = 1;ii <= 1000; ii++){

            LL tot = 0,len = 0;

            if(ii>sz) b[i][ii] = b[i][sz];

            else
            for(int jj = 1;jj <= sz; jj++){

                if(len==ii) {
                    tot-=a[jj-len];
                    len--;
                }

                if(tot+a[jj]>a[jj]){
                    len++;
                    tot += a[jj];
                } else {
                    if(a[jj]>0){
                        len = 1;
                        tot = a[jj];
                    } else
                    tot = len = 0;
                }

                b[i][ii] = max(b[i][ii],tot);

                if(len) b[i][ii] = max(b[i][ii],b[i][ii-1]);

            }


        }

    }

    for(int i=1;i<=n;i++)
        for(int j=1;j<=m;j++)
            for(int k=1;k<=j;k++){
                int nw = i%2; int prev = (nw+1)%2;
                dp[nw][j][k] = max( dp [prev] [j] [k] , dp [nw] [j] [k-1] );
                dp[nw][j][k] = max( dp [nw] [j] [k] , dp [prev] [j-k] [j-k] + b[i][k]);
            }

    cout << dp[n%2][m][m] << endl;

	return 0;
}
