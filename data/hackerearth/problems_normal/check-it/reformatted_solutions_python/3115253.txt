try:
    num_testcases = int(raw_input())
    for tstcs in range(num_testcases):
        vertex_edges = raw_input().split(' ')
        num_vertices = int(vertex_edges[0])
        num_edges = int(vertex_edges[1])
        edges = []
        graph = [[]for i in range(num_vertices+1)]
        for each_edg in range(num_edges):
            edge = list(map(int, raw_input().split(' ')))
            edges.insert(each_edg, edge)
        inds = [int(i) for i in raw_input().split()]
        for each_ind in inds:
            a, b = edges[each_ind-1]
            graph[a].append(b)
            graph[b].append(a)
        flag = 0
        for each_ind in range(1, len(graph)):
            if len(graph[each_ind]) == 0:
                flag = 1
                print "NO"
                break
        if flag == 0:
            print "YES"

except ValueError:
    print("Wrong input Format")
