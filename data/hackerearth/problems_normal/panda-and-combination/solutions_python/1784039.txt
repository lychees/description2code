import math
for _ in xrange(input()):
	N,M = map(int, str(raw_input()).split())
	c = 0
	if M == 1:
		print N
	else:
		while(1):
			t = math.floor(math.log(N,M))
			c += 1
			r = N-M**t
			if r < M:
				c += r
				break
			else:
				N = r
		print int(c)
		
