#include <iostream>
#include <vector>
#include <stack>
#include <cmath>
#define lld long long
#define N 5001000
using namespace std;

unsigned int a[N/64];

bool check(int n){
	if( n%2==0)
		return true;
	int i = n/64;
	int j = (n%64)/2;
	return a[i]>>j & 1;
}
void Set(int n){
	int i= n/64;
	int j = (n%64)/2;
	a[i] |= 1<<j;
}

void sieve(){
	int i,j,k;
	k = sqrt(N);
	for(i=3;i<=k;i+=2){
		if(!check(i)){
			for(j= 3*i;j<=N;j+=2*i)
				Set(j);
		}
	}
}
int main(){
	lld t;
	sieve();
	cin>>t;
	while(t--){
		lld a,b;
		cin>>a>>b;
		stack<lld> s1,s2;
		while(a!=0){
			s1.push(a);
			a = a>>1;
		}
		while(b!=0){
			s2.push(b);
			b = b>>1;
		}
		lld c=s1.top();
		while(!s1.empty() && !s2.empty() && s1.top()==s2.top()){
			c=s1.top();
			s1.pop();
			s2.pop();
		}

		if((c==2 || !check(c)) && c!=1 )
			c= -c;
		int s = s1.size();
		for(int i=0;i<s;i++){
			if(  (s1.top()==2 || !check(s1.top())) && s1.top()!=1)
				c-=s1.top();
			else
				c+=s1.top();
			s1.pop();
		}
		s = s2.size();
		for(int i=0;i<s;i++){
			if( (s2.top()==2 || !check(s2.top())) && s2.top()!=1)
				c-=s2.top();
			else
				c+=s2.top();
			s2.pop();
		}
		cout<<c<<endl;
	}
}