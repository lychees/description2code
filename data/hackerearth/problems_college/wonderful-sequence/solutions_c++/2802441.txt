#include <iostream>
#include<limits.h>
using namespace std;

int main()
{
    int t;
    int n;
    cin>>t;
    for (int i=0;i<t;i++)
   {
   	cin>>n;
   	int a[n];
   	for (int j=0;j<n;j++)
   	{
   		cin>>a[j];
   	}
   	int k=INT_MIN;
   	int r=INT_MAX;
   	int c=0;
   	int m=0;
   	for (int j=0;j<n-1;j++)
   	{   
   		k=max(k,a[j]);
   		if (k>=a[j+1]) { k=k+1; c++;}
   		
   		r=min(r,a[n-j-1]);
   		if (r<=a[n-j-2]) { r=r-1; m++;}
   		
   	}
   	cout<<min(c,m)<<endl;
   	//cout<<c<<" "<<m<<endl;
   	
   }
    return 0;
}
