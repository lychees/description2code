#include<bits/stdc++.h>
#define ll long long
#define sl(x) scanf("%lld",&x)
#define INF 1000000000000
#define mp make_pair
#define pb push_back
#define REP(i,a,b) for(i=a;i<b;i++)
using namespace std;
ll hsh[100005] ;
ll vst[100005] ;
int main()
{
	ll n,m,k,i,j ,u,v;
	sl(n);sl(m);sl(k);
	vector<ll> vc[n+1];
	
	map< pair<ll,ll>,ll > mt;
	REP(i,1,m+1)
	{
		cin>>u>>v;
		mt[mp(u,v)] = i;
		mt[mp(v,u)] = i;
		hsh[i]= INF;
		vc[u].pb(v);
		vc[v].pb(u);
	}
	pair<ll,ll> d;
	queue< pair<ll,ll> > qp;
	ll t,x;
	while(k--)
	{
		cin>>t>>x;
		hsh[x] =t; 
	}
	if(n==1)
	{
		cout<<"0\n";
		return 0;
	}
	vst[1]=true;
	qp.push(mp(1,0));
	ll ctr=0,  res=INF, f=0;
	while(!qp.empty())
	{
		d= qp.front();
		//cout<<d.first<<" a\n";
		qp.pop();

		for(i=0;i< vc[d.first].size(); i++)
		{
			if(!vst[vc[d.first][i]])
			{
				if( hsh[ mt[mp(d.first, vc[d.first][i])]]  > d.second)
				{
					if(vc[d.first][i]==n)
					{
						res= min(res,d.second +1);
						f=1;
					}
					qp.push(mp(vc[d.first][i], d.second +1));
					vst[vc[d.first][i]]= true;
				}
				else
					continue;	
		
			}
		}
	}
	if(!f)
		cout<<"-1\n";
	else
		cout<<res<<endl;
	return 0;	
}