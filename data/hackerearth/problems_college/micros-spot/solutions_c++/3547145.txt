#include <bits/stdc++.h>

typedef long long int ll;

#define mod 1000000007
#define sl(x) scanf("%lld",&x)
#define s(x) scanf("%d",&x)
#define pb push_back
#define mp make_pair
#define INF 1000000000

using namespace std;

ll powr (ll a, ll b)
{
    if (b == 0)
        return 1;
    ll x = powr(a, b/2);
    if (b % 2 == 0)
        return (x*x)%mod;
    else
        return (((x*x)%mod)*a)%mod;
}

int a[1010][1010];
int b[1010][1010];
int bmax[1010];
int amax[1010];

int main()
{
    int t,m,n,i,j;
    s(t);
    while(t--) {
        s(n);
        s(m);
        for(i = 0; i < n; i++) {
            for(j = 0; j < m ; j++) {
                s(a[i][j]);
            }
        }
        for(i = 0; i < m; i++) {
            amax[i] = 0;
            for(j = 0; j < n; j++) {
                amax[i] = max(amax[i],a[j][i]);
            }
        }
        for(i = 0; i < n; i++) {
            bmax[i] = 0;
            for(j = 0; j < m ; j++) {
                s(b[i][j]);
                bmax[i] = max(bmax[i],b[i][j]);
            }
        }
        int ans = 0;
        for(i = 0; i < n; i++) {
            for(j = 0; j < m ; j++) {
                if(amax[j] == a[i][j] && bmax[i] == b[i][j]) {
                    ans++;
                }
            }
        }
        printf("%d\n",ans);
    }
    return 0;
}
