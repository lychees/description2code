for _ in range (int(raw_input())):
	o = 0
	z = 0
	n,k = map(int,raw_input().split())
	a = map(int,raw_input().split())
	for i in range(len(a)):
		if a[i] == 0:
			z += 1
		else:
			o += 1
	if o==k:
		print '0'
	elif k<=z:
		print o+k
	else:
		n = k-z
		if n%2:
			print o+z-1
		else:
			print o+z