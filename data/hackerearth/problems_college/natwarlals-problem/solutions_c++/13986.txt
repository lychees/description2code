#include<iostream>
#include<vector>
#include<algorithm>
#include<cstdio>
#include<cstring>

using namespace std;

int global;

void recurse(char matrix[500][500], int x, int y, char array[500], int position, int
n){

        if(array[position]!=matrix[x][y])
                return;
        position++;
        
        if(array[position]=='\0'){
                global++;
                return;
        }

        if(x-1>=0 && y-1>=0)
                recurse(matrix,x-1,y-1,array,position,n);
        if(x-1>=0 && y+1<n)
                recurse(matrix,x-1,y+1,array,position,n);
        if(x+1<n && y-1>=0)
                recurse(matrix,x+1,y-1,array,position,n);
        if(x+1<n && y+1<n)
                recurse(matrix,x+1,y+1,array,position,n);
        
}


int main(){

        int t,n;
        char array[500], matrix[500][500],dummy;
        scanf("%d",&t);

        while(t--){

                scanf("%d",&n);
                getchar();
                for(int i=0;i<n;i++){
                        int j;
                        for(j=0;j<n-1;j++){
                                scanf("%c ",&matrix[i][j]);
//                                getchar();
                        }
                        scanf("%c\n", &matrix[i][j]);
                        //scanf("%c",&matrix[i][n-1]);                        
                        //getchar();
                }
                
                scanf("%s",array);
                global=0;
                for(int i=0;i<n;i++){
                        for(int j=0;j<n;j++)
                                recurse(matrix,i,j,array,0,n);
                }
                cout<<global<<endl;

        }
        return 0;
}