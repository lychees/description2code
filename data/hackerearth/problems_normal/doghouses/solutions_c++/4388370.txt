#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
typedef vector<int> vi;
typedef vector<ll> vl;
typedef pair<int,int> pii;
typedef pair<ll,ll> pll;
typedef vector<pii> vpii;
typedef vector<pll> vpll;

#define ins insert
#define mp make_pair
#define pb push_back
#define ff first
#define ss second
#define rep(i,s,n) for(i=s;i<n;i++)
#define ms(x,y) memset(x, y, sizeof(x))
#define optimize ios_base::sync_with_stdio(0);cin.tie(0);cout.tie(0);
#define flsh fflush(stdout);
#define inf 100000000
#define bgn begin()
#define nd end()
#define itr iterator

#define mod 1000000007

int main()
{
    //optimize
    int i,j,k,n;
    cin>>n;
    int a[n];
    map<int,int> y,miny,maxy;
    set<int> prefix[n],suffix[n];
    rep(i,0,n)
    {
        cin>>k;
        if(y[k]==0)
        {
            miny[k]=i;
            maxy[k]=i;
        }
        else maxy[k]=i;
        y[k]++;
        a[i]=k;
        rep(j,i+1,n)
        {
            prefix[j].ins(k);
        }
        rep(j,0,i)
        {
            suffix[j].ins(k);
        }
    }
    int ans=0;
    rep(i,0,n)
    {
        rep(j,i,n)
        {
            int mini=min(miny[a[i]],miny[a[j]]);
            int maxi=max(maxy[a[i]],maxy[a[j]]);
            int t=y[a[i]];
            if(a[i]!=a[j])
            {
                t+=y[a[j]];
                if(prefix[mini].lower_bound(a[i])!=prefix[mini].lower_bound(a[j])) t++;
                if(suffix[maxi].lower_bound(a[i])!=suffix[maxi].lower_bound(a[j])) t++;
            }
            ans=max(t,ans);
        }
    }
    cout<<ans;
    return 0;
}
