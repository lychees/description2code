#include <bits/stdc++.h>
#define pii pair<long long,int>
#define MOD 1000000007
using namespace std;

int n,m;
vector<pii> edges[1510];
bool visited[1510];

void solve()
{
	scanf("%d %d",&n,&m);
	for(int i=1;i<=n;++i) visited[i]=0,edges[i].clear();
	int a,b,c;
	for(int i=1;i<=m;++i)
	{
		scanf("%d %d %d",&a,&b,&c);
		edges[a].push_back(make_pair(c,b));
		edges[b].push_back(make_pair(c,a));
	}
	priority_queue<pii,vector<pii>, greater<pii> > pq;
	pq.push(make_pair(1,1));
	long long ans=1;
	while(!pq.empty())
	{
		pii p=pq.top();
		pq.pop();
		int v=p.second;
		if(visited[v]) continue;
		
		visited[v]=1;
		ans*=p.first;
		ans%=MOD;
		for(int i=0;i<edges[v].size();++i)
		{
			if(!visited[edges[v][i].second]) pq.push(edges[v][i]);
		}
	}
	printf("%lld\n",ans);
}
int main()
{
    int t;
    scanf("%d",&t);
    while(t--) solve();
    return 0;
}
