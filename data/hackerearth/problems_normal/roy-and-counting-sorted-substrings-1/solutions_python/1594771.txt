def sorted_subparts(s, l):
	ret = [1]
	for i in xrange(1, l):
		if ord(s[i]) - ord(s[i-1]) >= 0 :
			ret[-1] = ret[-1] + 1
		else:
			ret.append(1)
	return ret

for lkj in xrange(int(raw_input())):
	l = int(raw_input())
	s = raw_input()
	print sum((x*(x+1))/2 for x in sorted_subparts(s,l))