#include <iostream>
#include <cstdio>
using namespace std;
typedef long long ll;

struct result
{
	ll ans,leftmost;
};

ll A[105];
ll dp[105][105];//,lf[105][105];

ll solve_dp(int p,int n,int m)
{
	if(dp[p][m]>=0)
	return dp[p][m];
	if(m==2)
	{
		for(int i=p+1;i<n;++i)
		{
			dp[p][m]=max(dp[p][m],abs(A[p]-A[i]));
		}
		return dp[p][m];
	}
	else
	{
		for(int i=p+1;i<=(n-m+1);++i)
		{
			dp[p][m]=max(dp[p][m],abs(A[p]-A[i])+solve_dp(i,n,m-1));
		}
		return dp[p][m];
	}
}

ll solve(int n,int m)
{
	if(m==1)
	return 0;
	for(int i=0;i<=n;++i)
	for(int j=0;j<=m;++j)
	dp[i][j]=-1;
	ll ans= solve_dp(0,n,m);
	//result r=solve_dp(0,n,m);
	for(int i=1;i<(n-m+1);++i)
	ans=max(ans,solve_dp(i,n,m));
	return ans;
}


int main()
{
	int t,n,m;
	cin>>t;
	while(t--)
	{
		cin>>n>>m;
		for(int i=0;i<n;++i)
		cin>>A[i];
		cout<<solve(n,m)<<endl;
/*		for(int i=0;i<n;++i)
		{
			for(int j=0;j<=m;++j)
			cout<<dp[i][j]<<"\t";
			cout<<endl;
		}*/
	}
//    cout << "Hello World!" << endl;
    return 0;
}
