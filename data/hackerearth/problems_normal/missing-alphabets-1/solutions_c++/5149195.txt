#include <iostream>
#include <string>
#include <algorithm>

using namespace std;

string order;

bool cpm(string a, string b)
{
    int lena = a.length(), lenb = b.length();
    for (int i = 0; i < lena && i < lenb; i++)
    {
        if (a[i] != b[i])
        {
            int posa = order.find(a[i]);
            int posb = order.find(b[i]);
            return posa < posb;
        }
    }
    
    if (lena != lenb) return lena < lenb;
    
    return false;
}

int main()
{
    int testcase;
    cin >> testcase;
    while (testcase--)
    {
        int setsize;
        cin >> order;
        cin >> setsize;
        string s[setsize];
        for (int i = 0; i < setsize; i++)
        {
            cin >> s[i];
        }
        sort(s, s + setsize, cpm);

        for (int i = 0; i < setsize; i++)
        {
            cout << s[i] << endl;
        }
    }
}
