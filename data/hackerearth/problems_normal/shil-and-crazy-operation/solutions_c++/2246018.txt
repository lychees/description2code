#include <bits/stdc++.h>
#define endl '\n'

using namespace std;

int n;
long long t;
bool used[1<<20];
int a[1<<20],p[1<<20],b[1<<20];
vector <int> curr;
vector < vector <int> > cycles;
long long ptr[1<<20];
int cycle[1<<20],cycles_count;
int pos[1<<20];

void next(int i) {
  ptr[i]++;
  if(ptr[i]==cycles[i].size()) ptr[i]=0;
}

void print(vector <int> a) {
  for(int i=0;i<a.size();i++) {
    if(i>0) printf(" ");
    printf("%d", a[i]);
  }
  printf("\n");
}

int main() {
  //ios_base::sync_with_stdio(false);
  //cin.tie(NULL);
  //freopen("test.txt","r",stdin);
  int i,j;
  
  scanf("%d %lld", &n, &t);

  for(i=1;i<=n;i++) scanf("%d", &a[i]);
  for(i=1;i<=n;i++) scanf("%d", &p[i]);

  for(i=1;i<=n;i++) {
    j=i;
    if(used[j]) continue;

    curr.clear();
    while(!used[j]) {
      used[j]=true;
      curr.push_back(j);
      pos[j]=curr.size()-1;
      cycle[j]=cycles_count;
      j=p[j];
    }
    cycles.push_back(curr);
    cycles_count++;
  }

  for(i=0;i<cycles_count;i++) {
    ptr[i]=t%cycles[i].size();
  }

  for(i=1;i<=n;i++) {
//    p[i]=cycles[cycle[i]][ptr[cycle[i]]];
    p[i]=cycles[cycle[i]][(ptr[cycle[i]]+pos[i])%cycles[cycle[i]].size()];
    //next(cycle[i]);
  }

  for(i=1;i<=n;i++) b[i]=a[p[i]];

  for(i=1;i<=n;i++) {
    if(i>1) printf(" ");
    printf("%d", b[i]);
  }
  printf("\n");
  
  return 0;
}