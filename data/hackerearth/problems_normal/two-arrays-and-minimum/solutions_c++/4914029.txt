
#include <iostream>
#include <cmath>
#define M 1000000007
using namespace std;
 
int main()
{
    unsigned long long a,b,c;
    cin >> a >> b >> c;
   	int n;
    cin >> n;
    long A[n+1], B[n+1];
    int i, indexA1=1, indexB1=1;
    
    A[1] = (((a%M)*c)%M)%M;
    unsigned long long Amin1=A[1], Amin2=M;
	for(i=2 ; i<=n ; i++)
	{
    	A[i] = ((((((A[i-1]*a)%M)*b)%M)*c)%M) + ((((A[i-1]*a)%M)*b)%M) + ((((A[i-1]*a)%M)*c)%M);
    	A[i] = A[i]%1000000007;
    	if(A[i]<Amin1){
    		Amin1 = A[i];
    		indexA1 = i;
    	} 
	}
	B[1] = (((b%M)*c)%M)%M;
	unsigned long long Bmin1=B[1], Bmin2=M;
	for(i=2 ; i<=n ; i++)
	{
    	B[i] = ((((((B[i-1]*b)%M)*c)%M)*a)%M) + ((((B[i-1]*b)%M)*a)%M) + ((((B[i-1]*b)%M)*c)%M);
    	B[i] = B[i]%1000000007;
    	if(B[i]<Bmin1){
    		Bmin1 = B[i];
    		indexB1 = i;
    	}
	}    
	
	if(indexA1!=indexB1){
		unsigned long long sum = Amin1+Bmin1;
		cout << sum;
	}
	else{
		for(i=1; i<=n; i++){
			if(A[i]<=Amin2 && i!=indexA1){
				Amin2 = A[i];
			}
			if(B[i]<=Bmin2 && i!=indexB1){
				Bmin2 = B[i];
			}
		}
		unsigned long long sum = (Amin1+Bmin2 <= Amin2+Bmin1) ? Amin1+Bmin2 : Amin2+Bmin1;
		cout << sum;
	}
 
}
