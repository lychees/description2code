#include <bits/stdc++.h>
#define ll long long int
using namespace std;

ll arr[100005], brr[100005];
ll crr[200005];

int main()
{
	ll n;
	ll m;
	ll index = 0;
	
	cin >> n >> m;
	
	for (ll i = 0; i < n; i++) {
		cin >> arr[i];
		crr[index] = arr[i];
		index++;
	}
	
	for (ll i = 0; i < n; i++) {
		crr[index] = arr[i];
		index++;
	}
	
	for (ll i = 0; i < n; i++) {
		cin >> brr[i];
	}
	
	ll left_rot_value = -1;
	for (ll i = 0; i < n; i++) {
		ll j;
		ll temp = i;
		for (j = 0; j < n; j++) {
			if (crr[temp] == brr[j]) {
				temp++;
			} else {
				break;
			}
		}
		if (j == n) {
			left_rot_value = i;
			break;
		}
	}
	
	if (left_rot_value == -1) {
		cout << "-1" << endl;
		return 0;
	}
	
	string upper_type = "";
	ll upper_rot_value = 0;
	
	ll flag = 0;
	
	for (ll i = 1; i <= m; i++) {
		string ch;
		ll rot;
		cin >> ch;
		cin >> rot;
		
		rot = rot % n;
		
		if (upper_type == ch) {
			upper_rot_value = (upper_rot_value % n + rot % n) % n;
		} else if (upper_type != "") {
			if (upper_rot_value > rot) {
				upper_rot_value = (upper_rot_value - rot) % n;
			} else if (upper_rot_value < rot) {
				upper_type = ch;
				upper_rot_value = (rot - upper_rot_value) % n;
			} else {
				upper_rot_value = 0;
			}
		} else {
			upper_type = ch;
			upper_rot_value = rot;
		}
		
		if (upper_type == "L") {
			if ((left_rot_value == upper_rot_value) && flag == 0) {
				cout << i;
				flag = 1;
			}
		} else {
			if ((n - left_rot_value == upper_rot_value) && flag == 0) {
				cout << i;
				flag = 1;
			}
		}
		
	}
	
	if (flag == 0) {
		cout << "-1";
	}
	
    return 0;
}
