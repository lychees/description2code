#include <iostream>
#include <math.h>
#include <cstring>

using namespace std;

int M,N,K;
int mat[100][100];
int val[501][100][100];


int maxorbs(int count,int i,int j){
	
	if(count>K){
		return -1;
	}
	if(i>=N || j>=M){
		return -1;
	}
	if(i==N-1 && j==M-1){
		if(count+mat[i][j]>K){
			return -1;
		}
		val[count][i][j]=count+mat[i][j];
		return count+mat[i][j];
	}
	if(val[count][i][j]==0){
		int maxval=max(maxorbs(count+mat[i][j],i+1,j),maxorbs(count+mat[i][j],i,j+1));
		maxval=max(maxval,maxorbs(count+mat[i][j],i+1,j+1));
		val[count][i][j]=maxval;
	}
	return val[count][i][j];
	
}


int main()
{
    int test;
    cin>>test;
    while(test--){
    	cin>>N;
    	cin>>M;
    	cin>>K;
    	for(int i=0;i<=500;i++){
    		for(int j=0;j<100;j++){
    			for(int k=0;k<100;k++){
    				val[i][j][k]=0;
    			}
    		}
    	}
    
    	for(int i=0;i<N;i++){
    		for(int j=0;j<M;j++){
    			cin>>mat[i][j];
    		}
    	}
    	cout<<maxorbs(0,0,0)<<endl;
    }
    return 0;
}
