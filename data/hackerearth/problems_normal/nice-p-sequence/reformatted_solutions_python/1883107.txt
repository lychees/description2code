from fractions import gcd


def MI(a, m):
    limit = p
    a1 = 1
    b1 = 0
    while (limit):
        div = a / limit
        rem = a % limit
        a = limit
        limit = rem
        xr = a1 - div * b1
        a1 = b1
        b1 = xr
    if a1 < 0:
        a1 += m
    return a1


for x in range(input()):
    a, p, n = map(long, raw_input().split())
    if gcd(a, p) > 1:
        print "-1"
    else:
        res = MI(a, p)
        print(((n - 1) / 2 + 1) * a + n / 2 * res)
