#include<bits/stdc++.h>                         //Author: Sharad Chandran
#define lld long long int                       //Handle: sharad07
#define llu unsigned long long int
#define pb(x) push_back(x)
#define pf(x) push_front(x)
#define pq priority_queue<int> 
#define mp(x,y) make_pair(x,y)
#define sz size()
#define sof(x) sizeof(x)
#define println(x) printf("%d\n",x)
#define _for(i,x,y) for(int i=x;i<y;i++)
using namespace std;
const int maxx=1e5+3;
int mod=1e9+7;
 
vector<vector<int>> g(maxx);
bool done[maxx];
int k[maxx],mx;
map<int,int> ctr;
 
void dfs(int x )
{
	  if(done[x]) return;
	  done[x] = 1 ;
	  mx = max ( mx ,k[x]);
	  ctr[k[x]]++;
	  mx = max(mx , k[x]) ; 
	  for (int i = 0 ; i < g[x].size() ; i++)
	  {
	  	  dfs(g[x][i]);
	  }
}
 
void solve()
{
    int n,m,x,y;
    cin>>n>>m;
    memset(done,0,sof(done));
    _for(i,1,n+1) cin>>k[i];  
    _for(i,0,m)
    {
        cin>>x>>y;
        g[x].pb(y);
        g[y].pb(x);
    }
    lld res=1LL;
    _for(i,1,n+1)
    {
        if(done[i]==0) 
        {
        	ctr.clear();
        	mx=0;
            dfs(i);
            res=(res*ctr[mx]*1LL)%mod;
        }
    }
    cout<<res;
}
 
int main()
{
    solve();
    return 0;
}