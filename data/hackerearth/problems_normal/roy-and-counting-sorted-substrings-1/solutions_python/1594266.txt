'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''

def getCountSortedSubString(N, S):
    l = 0
    index = 0
    startIndex = 0
    count = 0
    while l != N-1:
        if S[l] > S[l+1]:
            lastIndex = l
            sl = lastIndex - startIndex + 1
            #print sl, lastIndex, startIndex
            count += int(sl*(sl+1)/2)
            startIndex = l + 1
        else:
            index += 1
        l += 1
    sl = N - startIndex
    #print sl, index, startIndex 
    count += int(sl*(sl+1)/2)
    return count

    
T = int(raw_input().strip())
while T:
    N = int(raw_input().strip())
    S = raw_input().strip()
    print getCountSortedSubString(N, S)
    T = T -1
