#include<bits/stdc++.h>
#define ll long long
using namespace std;
//g++ -std=c++11 your_file.cpp

std::vector< pair<ll, ll> > g[10004];
bool vis[5003];
ll a[5003];

ll capt(ll n){
	return a[n] == n ? n : a[n] = capt(a[n]);
}

int main()
{
	ios_base::sync_with_stdio(false);cin.tie(0);
 
	ll t,n,m,i,j;
	cin >> t;
	while(t--){
		cin >> n >> m;
		for(i=0;i<=n;i++){
			vis[i] = false;
			a[i] = i;
		}
		for(i=0;i<10004;i++) g[i].clear();
		for(i=0;i<m;i++){
			ll u, v, x;
			cin >> u >> v >> x;
			g[x].push_back({u,v});
		}
		ll done = 0, ans = 0;
		for(i=10000;i>=1;i--){
			for(j=0;j<g[i].size();j++){
				pair<ll, ll> node = g[i][j];
				ll x = node.first, y = node.second;
				ll cx = capt(x), cy = capt(y);
				if(cx == cy) continue;
				if(!vis[x]){
					vis[x] = true;
					done++;
				}
				if(!vis[y]){
					vis[y] = true;
					done++;
				}
				a[cx] = cy;
				ans += i;
			}
		}
		cout << ans << endl;
	}
 
	return 0;
} 