#include <iostream>
#include<string>
#include <bits/stdc++.h>
using namespace std;
int BIT[100001];
int n=0;
void update(int x, int val)       //add "val" at index "x"
{
    for(; x <= n; x += x&-x)
          BIT[x] += val;
}
	 

void updateOdd(int x,int val){
		if(val==0){
			val=1;
		}
		else
		{
			val=0;
		}
	while(x<=n){
		BIT[x]=+val;
		x=+(x&-x);
		
	}
	 
}
int query(int x){
	int sum=0;
	for(;x>0;x-=(x&-x)){
		sum=sum+BIT[x];
	}
	return sum;
}
int main()
{
	
	cin>>n;
	int arr[n];
	for(int i=0;i<n;i++){
		cin>>arr[i];
		if(arr[i]&1){
			arr[i]=0;
			
		}
		else
		{
		arr[i]=1;	
		}
	}
	
	for(int i=0;i<n;++i){
		update(i+1,arr[i]);
	}

	// for(int i=0;i<n;i++){
	// 	cout<<arr[i];
	// }
	// cout<<endl;
	// for(int i=1;i<=n;i++){
	// 	cout<<BIT[i];
	// }
	int q=0;
	cin>>q;
for(int i = 0;i < q;++i)
    {
    	int c=0,x1=0,x2=0,idx=0,y=0;
        scanf("%d", &c);
        if(c==1)
        {
            scanf("%d %d ", &x1, &x2);
           int ans=query(x2)-query(x1-1);
           cout<<ans<<endl;
            
        }
        else if(c==2)
        {
        	  scanf("%d %d ", &x1, &x2);
           int ans=query(x2)-query(x1-1);
           ans=x2-x1+1-ans;
          cout<<ans<<endl;
        }
        
        else 
        {
            scanf("%d %d", &idx, &y);
           
            idx--;
            int old=arr[idx];
            if(y&1){
            	arr[idx]=0;
            }
            else
           {
           	arr[idx]=1;
           }
          int diff=arr[idx]-old;
           update(idx+1,diff);
    
        }
    }
	
	
	

    return 0;
}
