#include <bits/stdc++.h>
#define MOD 1000000007
#define LL long long
using namespace std;

// anot
vector<vector<LL> > mult(vector<vector<LL> > a, vector<vector<LL> > b)
{ 
  vector<vector<LL> > res;
  res.resize(a.size());
  for (int i=0;i<a.size();i++)
   res[i].resize(b[0].size());
  for (int i=0;i<a.size();i++)
   for (int j=0;j<b[0].size();j++)
    res[i][j]=0;
  
  for (int i=0;i<a.size();i++)
   for (int k=0;k<a[i].size();k++)
    for (int j=0;j<b[0].size();j++)
     res[i][j]=(res[i][j]+a[i][k]*b[k][j])%MOD;
  return res;
}

vector<vector<LL> > matp[50];
int main()
{
	vector<vector<LL> > orig;
	orig.resize(9);
	for(int i=0;i<9;++i) orig[i].resize(9);
	for(int i=0;i<9;++i)
	{
		int x=i/3,y=i%3;
		for(int j=0;j<9;++j)
		{
			int ii=j/3,jj=j%3;
			orig[i][j]=abs(ii-x)+abs(jj-y)+abs(ii+jj-x-y);
		}
	}
	matp[0]=orig;
	for(int i=1;i<50;++i) matp[i]=mult(matp[i-1],matp[i-1]);
    int t;
    scanf("%d",&t);
    long long n;
    while(t--)
    {
    	scanf("%lld",&n);
    	vector<vector<LL> > v;
    	v.resize(1);
    	v[0].resize(9);
    	for(int i=0;i<9;++i) scanf("%lld",&v[0][i]);
    	for(int i=49;i>=0;--i)
    	{
    		if(n&(1LL<<i)) v=mult(v,matp[i]);
    	}
    	for(int i=0;i<3;++i)
    	{
    		for(int j=0;j<3;++j)
    		{
    			printf("%lld ",v[0][i*3+j]);
    		}
    		printf("\n");
    	}
    }
    return 0;
}
