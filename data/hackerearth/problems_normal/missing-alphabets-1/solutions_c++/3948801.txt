#include <algorithm>
#include <vector>
#include <string>
#include <iostream>


using namespace std;
typedef pair<string , string> Pair;

string transform_str(string s, int *a)
{
    string ans= "";
    int i, l=s.length();
    char c;
    for(i=0;i<l;i++)
    {
        c=s[i];
        ans += (char)(a[c-'a'] + '0');
    }
    return ans;
}

int main()
{

    int t,i,m;
    cin>>t;
    string s, tmp, tmp_tr;
    char c;
    vector< Pair > v;

    while(t--)
    {
        int a[26]={0};/// a indicates priority
        cin>>s;
        for(i=0;i<26;i++)
        {
            c=s[i];
            a[c-'a']=i;
        }

        cin>>m;
        v.clear();

        for(i=0;i<m;i++)
        {
            cin>>tmp;
            tmp_tr=transform_str(tmp,a);

            v.push_back(make_pair(tmp_tr, tmp));///sort v later according to the first value of each pair
        }

        sort(v.begin(),v.end());

        for(i=0;i<m;i++)
        {
            cout<<v[i].second<<endl;
        }
    }
}
