#include <iostream>
#include <vector>
# include <cstring>
using namespace std;
vector<int> adj[100000];
bool v[1000000];
void dfs(int s)
{
		v[s]=1;
		int n=adj[s].size();
		for (int i=0;i<n;i++)
		{
			int e=adj[s][i];
			if (v[e])
			continue;
			dfs(e);
		}
}
int main()
{
    int t;
    cin>>t;
    while(t--)
    {
    	int n,f,s;
    	cin>>n>>f>>s;
    	for (int i=1;i<=n;i++)
    	{
    		adj[i].clear();
    		v[i]=0;
    	}
    	for (int i=0;i<f;i++)
    	{
    		int a,b;
    		cin>>a>>b;
    		adj[a].push_back(b);
    	}
    	for (int i=0;i<s;i++)
    	{
    		int k;
    		cin>>k;
    		if (!v[k])
    			dfs(k);
    	}
    	int ans=0;
    	for (int i=1;i<=n;i++)
    		ans+=v[i];
    	cout<<ans<<endl;
    }
}
