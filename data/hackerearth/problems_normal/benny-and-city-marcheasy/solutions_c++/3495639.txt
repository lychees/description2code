#include<bits/stdc++.h>
using namespace std;
#define ll long long
long long l,r,x,C,a[25][25],ma,n,m,q;
ll f[1005];
ll g[1005];
long long ans=-1000000000000000000LL;
main()
{
	cin>>n>>m>>C;
	for(int i=0;i<n;i++)
	for(int j=0;j<m;j++)cin>>a[i][j];
	
for(int bit=0;bit<(1<<n);bit++)
{
	for(int i=0;i<n;i++)f[i]=0;
	for(int i=0;i<n;i++)if(bit&(1<<i))f[i]=1;
	for(int i=0;i<m;i++)g[i]=0;
	
	
	int rao=__builtin_popcount(bit);
	long long sum=0;
	
	for(int i=0;i<n;i++)
	for(int j=0;j<m;j++)
	{
		if(!f[i])g[j]+=a[i][j];
	}
	
	
	for(int j=0;j<m;j++)if(-C>g[j])rao++;else sum+=g[j];
	
	ans=max(ans,sum-rao*C);
}
cout<<ans<<endl;
}