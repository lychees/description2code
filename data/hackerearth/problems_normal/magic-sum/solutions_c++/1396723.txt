#include <iostream>
using namespace std;
int v[600];
int n;
const int inf=1e9+9;
typedef long long LL;

int maximum(int a, int b)
{
	if(a>b)
	return a;
	else
	return b;
}
int maxmagicsum(int p)
{
	if(p>n)
	return 0;
	
	return v[p]+maximum(maxmagicsum(2*p),maxmagicsum(2*p+1));
}

int main()
{
   int t,i;
   cin>>t;
   while(t>0)
   {
   	 cin>>n;
   	 for(i=1;i<=n;i++)
   	   {
   	   	cin>>v[i];
   	   }
   	   
     LL max=-inf;
     for(i=1;i<=n;i++)
   	 max=maximum(max,LL(v[i]+maxmagicsum(2*i)+maxmagicsum(2*i+1)));
   	 
    printf("%lld\n",max);
   	 t--;
   }
    return 0;
}
