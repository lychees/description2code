#include<bits/stdc++.h>
#define mod 1000000007
using namespace std;

vector<long> v[2005];
long cur;
bool mark[2005][2005];
long arr[2005];
long dfs(long src, long par)
{
    long res=1;
    for(auto it = v[src].begin();it!=v[src].end();it++)
    {
        if(*it==par)
            continue;
       if(arr[cur]<arr[*it])
        res= (res * (dfs(*it,src)+1))%mod;
       else if(arr[cur]==arr[*it] && !mark[cur][*it])
       {
           res= (res* (dfs(*it,src)+1))%mod;
           mark[cur][*it]=true;
           mark[*it][cur]=true;
       }

    }
    return res;
}


int main()
{
    int n,q,a,b;
    map<long,long> mp;
    cin>>n;
    for(int i=0;i<n;i++)
    {


        cin>>arr[i];
        mp[arr[i]]=0;
    }
    for(int i=1;i<n;i++)
    {
        cin>>a>>b;
        a--;
        b--;
        v[a].push_back(b);
        v[b].push_back(a);
    }
    for(int i=0;i<n;i++)
    {
        cur=i;
        mp[arr[i]] = (mp[arr[i]] + dfs(i,-1))%mod;
    }
    cin>>q;
    while(q--)
    {
        cin>>n;
        if(mp[n])
            cout<<mp[n]<<"\n";
        else
            cout<<"0\n";
    }
}
