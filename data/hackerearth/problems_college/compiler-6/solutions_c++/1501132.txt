#include <iostream>
#include <vector>
#include <algorithm>
#include <cmath>
#include <queue>
#include <set>
#include <cstdio>
#include <cstdlib>
#include <stack>
#include <cstring>
#include <iomanip>
#include <cctype>
#include <map>
#include <ctime>

using namespace std;


long long solve(string &s) {
    if(!s.length()) return 0;
    int cb = 0;
    string t;
    long long ans = 0;
    for(int i = 0;i < s.length();i++) {
        if(s[i] == '{') cb++;
        else if(s[i] == '}') cb--;
        if(s[i] == ';') {
            if(cb == 0) {
                ans+=solve(t);
                t = "";
            }
            else {
                t+=s[i];
            }
        }
        else if(s[i] == '}' && cb == 0 && i != (s.length() - 1)) {
            t+=s[i];
            ans+=solve(t);
            t = "";
        }
        else {
            t+=s[i];
        }
        
    }
    if(t.length()) {
        if(t[0] == 'A') {
            ans++;
        }
        else {
            string t2 = "";
            int j = 0;
            for(j = 5;;j++) {
                if(t[j] == ')') break;
                else t2+=t[j];
            }
            long long mul = 0;
            for(int i = 0;i < t2.length();i++) {
                mul = mul * 10 + (t2[i] - '0');
            }
            t2 = "";
            for(int i = j + 2;i < (t.length() - 1);i++) {
                t2+=t[i];
            }
            ans+=mul * solve(t2);
        }
    }
    return ans;
}

int main() {
    int t; cin>>t;
    while(t--) {
        string s; cin>>s;
        cout<<solve(s)<<endl;
    }
    cout<<"Code completed, sir!"<<endl;
    
    
}