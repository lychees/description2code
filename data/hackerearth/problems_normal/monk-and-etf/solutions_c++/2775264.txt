#include<bits/stdc++.h>
#define sc(n) scanf("%d",&n);
#define ll long long
#define scL(n) scanf("%lld",&n);
#define pr(n) printf("%.6lf\n",n);
#define pb push_back
using namespace std;
ll int ph[100001],a[100001];
bool c[1000001];
vector<int> p;
int main()
{
    int t,k,num,s;
    ll int l,r,val;
    num=2;
    while(num<=1000)
    {
        for(int i=num*2;i<=1000000;i+=num)
            c[i]=1;
        num++;
        while(c[num])
            num++;
    }
    for(int i=2;i<=1000000;i++)
    {
        if(c[i]==0)
            p.pb(i);
    }
    sc(t);
    while(t--)
    {
        double ans=0;
        scL(l);
        scL(r);
        sc(k);
        for(ll int i=l;i<=r;i++)
        {
            ph[i-l]=i;
            a[i-l]=i;
        }
        s=sqrt(r);
        for(int i=0;i<p.size();i++)
        {
            num=p[i];
            if(num>s)
                break;
            val=(l/num)*num;
            if(val==l)
                val-=num;
            if(val<num)
                val=num;
            for(ll int j=val+num;j<=r;j+=num)
            {
                ph[j-l]-=(ph[j-l]/num);
                while(a[j-l]%num==0)
                    a[j-l]/=num;
            }
        }
        for(ll int i=l;i<=r;i++)
        {
            if(i!=1 && ph[i-l]==i)
                ph[i-l]=i-1;
            else if(a[i-l]!=1)
                ph[i-l]-=ph[i-l]/a[i-l];
            if(ph[i-l]%k==0)
                ans++;
        }
        ans/=(r-l+1);
        cout.precision(6);
        cout<<fixed<<ans<<endl;
    }
    return 0;
}
