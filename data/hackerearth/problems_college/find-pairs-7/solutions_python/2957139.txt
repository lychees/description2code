testCases = input()


for i in range(0,testCases):
	arrayLength = input()
	arrayAsString = raw_input()
	arrayList = arrayAsString.split(" ")
	numArray = [int(x) for x in arrayList]
	sortedArray = numArray.sort()
	startIndex=0
	endIndex=0
	resFromDups=0
	while endIndex < arrayLength:
		if numArray[startIndex]!=numArray[endIndex]:
			resFromDups +=((endIndex-startIndex)*(endIndex-startIndex-1))/2
			startIndex=endIndex
		endIndex+=1
	if numArray[startIndex]==numArray[endIndex-1]:
			resFromDups +=((endIndex-startIndex)*(endIndex-startIndex-1))/2		
	print arrayLength + resFromDups