def get(n):
    return (n*(n+1))/2


def solve(n, s):
    cnt = 0
    l = 0
    for i in xrange(n):
        if i == 0:
            l += 1
        else:
            if s[i] >= s[i-1]:
                l += 1
            else:
                cnt += get(l)
                l = 1
    if l != 0:
        cnt += get(l)
    return cnt


for _ in xrange(input()):
    n = input()
    s = raw_input()
    print solve(n, s)
