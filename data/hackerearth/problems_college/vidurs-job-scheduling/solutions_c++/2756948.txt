#include <bits/stdc++.h>

using namespace std;

long long arr [2000 + 10];
long long dp [2000 + 10][2000 + 10];
long long n;

long long rec (long long l , long long r){

    long long day = n - (r - l);
    if(day == n) return dp [l][l] = n * arr [l];
    if(dp[l][r] != -1) return dp [l][r];

    return dp [l][r] = max (day * arr[l] + rec(l + 1 , r) , day * arr[r] + rec(l , r - 1));
}

int main()
{

    long long   m , d ,  k , tem1 , tem2 , tem3 , sum = 0 , ans = 0;
    string s , c;

    cin >>  n       ;

    for(int i = 0; i < n; i++)
        cin >> arr[i];

    memset(dp , -1 , sizeof(dp));
    cout <<  rec(0 ,  n  -  1);

    return 0;
}
