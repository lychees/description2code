#include<iostream>
#include<stdlib.h>
#include<string.h>
#define MOD 1000000007
using namespace std;
typedef long long int ll;
int M;
ll r[100][100];
ll a[100][100];
ll c[100][100];
void ones(ll r[100][100])
{
	for(int i=0;i<M;i++)
	{
		for(int j=0;j<M;j++)
		{
			r[i][j]=(i==j);
		}
	}
}
void matmul(ll A[][100],ll B[][100])
{
	memset(c,0,sizeof(c));
	for(int i=0;i<M;i++)
	{
		for(int j=0;j<M;j++)
		{
			for(int k=0;k<M;k++)
			{
				c[i][j]=(c[i][j]+A[i][k]*B[k][j])%MOD;
			}
		}
	}
	//again restoring in same matrix
	for(int i=0;i<M;i++)
	{
		for(int j=0;j<M;j++)
		{
			A[i][j]=c[i][j];
		}
	}
}
void matpow(int k)
{
	ones(r);
	while(k)
	{
		if(k%2==0)
		{
			matmul(a,a);
			k=k/2;
		}
		else
		{
			matmul(r,a);
			k--;
		}
	}
}
int main()
{
	ios::sync_with_stdio(false);
	int tc=0;
	cin>>tc;
	while(tc-->0)
	{
		int n;
		cin>>M>>n;
		for(int i=0;i<M;i++)
		{
			for(int j=0;j<M;j++)
			{
				cin>>a[i][j];
			}
		}
		matpow(n);
		for(int i=0;i<M;i++)
		{
			for(int j=0;j<M;j++)
			{
				cout<<r[i][j]<<" ";
			}
			cout<<endl;
		}
	}
	return 0;
}
