#include <iostream>

using namespace std;

char ** graph ; 
int n ;

int util ()
{
	bool hor = true , ver = true ; 
	
	for(int i = 0 ; i < n ; i++)
	{
		for(int j = 0 ; j < n ; j++)
		{
			if (graph[i][j] != graph[n-1-i][j])
			{
				ver = false ;
			}
			if(graph[i][j] != graph[i][n-1-j])
			{
				hor = false ;
			}
		}
	}
	
	if(hor && ver)
	{
		return 3 ;
	}
	else if (hor && !ver)
	{
		return 2 ;
	}
	else if (!hor && ver)
	{
		return 1 ;
	}
	else 
	{
		return 0 ; 
	}
	
}

int main()
{
    int test ;
    scanf("%d",&test) ;
    
    while(test --)
    {
    	scanf("%d",&n) ; 
    	
    	graph = (char **)malloc(sizeof(char *)*n) ;
    	for(int i = 0 ;i < n ; i++)
    		graph[i] = (char *)malloc(sizeof(char)*n) ;
    	
    	getchar () ; 
    	for(int i = 0 ;i < n ; i++)
    	{
    		for(int j = 0 ; j < n ; j ++)
    		{
    			graph[i][j] = getchar() ; 
    			//cout << graph[i][j] ;
    		}
    		getchar() ;
    	}
    	
    	int ans = util() ;
    	
    	if(ans == 2)
    	{
    		printf("VERTICAL\n") ;
    	}
    	else if (ans == 1)
    	{
    		printf("HORIZONTAL\n") ;
    	}
    	else if (ans == 3)
    	{
    		printf("BOTH\n") ;
    	}
    	else 
    	{
    		printf("NO\n") ;
    	}
    }
    
    
    return 0;
}

