#include<bits/stdc++.h>
using namespace std;
#define s(x) scanf("%d",&x);
#define sl(x) scanf("%lld",&x);
#define p(x) printf("%d",x);
#define pl(x) printf("%lld",x);
#define fr(i,a,n) for(i=a;i<n;i++)
#define ln() printf("\n");
typedef long long ll;
ll mod=1000000007;
int visited[1000069]={},val[1000069]={},g[1000069],cnt=0,ans,minn=INT_MAX;
int dfs(int x)
{
    if(visited[x]==1)
    {
        if(val[x]!=0)
        {
            return val[x];
        }
        else
        {
            int ct=1;
            int tmp=g[x];
            while(tmp!=x)
            {
                ct++;
                tmp=g[tmp];
            }
            tmp=g[x];
            while(tmp!=x)
            {
                val[tmp]=ct;
                tmp=g[tmp];
            }
            return ct;
        }
    }
    visited[x]=1;
    cnt=1+dfs(g[x]);
    if(val[x]==0)
    {
        val[x]=cnt;
    }
    return val[x];
}
int main()
{
    int t;
    s(t);
    while(t--)
    {
        int n,pos,ans=0,i,x,j;
        s(n);
        for(i=0;i<n;i++)
        {
            visited[i]=0;
            val[i]=0;
            s(x);
            g[i]=x;
        }
        for(i=0;i<n;i++)
        {
            if(visited[i]==0)
            {
                dfs(i);
            }
        }
        minn=0;
        for(i=0;i<n;i++)
        {
            if(val[i]>val[minn])
                minn=i;
        }
        p(minn);
        ln();
        cnt=0;
    }
    return 0;
}
