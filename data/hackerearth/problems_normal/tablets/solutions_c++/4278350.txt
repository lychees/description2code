#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
using namespace std;
typedef vector <int> vi;

int main() {
                int t;
                cin>>t;
                int val; 
                vi ratings,tablet;
                for(int i=0;i<t;i++)
                {
                    cin>>val;
                    ratings.push_back(val);
                }
                int prev=1;
                tablet.push_back(prev);
                for(int i=1;i<ratings.size();i++)
                    {
                          prev=tablet[i-1];
                        if(ratings[i]>ratings[i-1])    
                            tablet.push_back(prev+1);
                        else tablet.push_back(1);
                }
                for(int i=ratings.size()-1;i>0;i--)
                    {
                        if(ratings[i]<ratings[i-1])    
                            {
                                if(tablet[i-1]>tablet[i])
                                    continue;
                                else tablet[i-1]=tablet[i]+1;
                        }
                }
                long long sum=0;
               /* for(int i=0;i<tablet.size();i++)
                    {
                        sum+=tablet[i];
                }
                cout<<sum<<endl;*/
                cout<<accumulate(tablet.begin(),tablet.end(),0)<<endl;
                
    return 0;
}