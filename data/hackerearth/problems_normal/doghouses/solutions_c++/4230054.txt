#include <iostream>
#include <vector>
using namespace std;

const int maxy = 1001;
int main()
{
	int N;
	cin >> N;
	int *A = new int[N];
	for(int i = 0; i < N; ++i)
	{
		cin >> A[i];
	}
	vector<int> *v = new vector<int>[maxy];
	for(int i = 0; i < N; ++i)
	{
		v[A[i]].push_back(i);
	}
	int maxlength = 0;
	for(int i = 0; i < maxy; ++i)
	{
		maxlength = (maxlength > v[i].size())?maxlength:v[i].size();
	}
	int *tmp = new int[maxlength+1];
	for(int i = 0; i <= maxlength; ++i)
	{
		tmp[i] = 0;
	}
	for(int i = 0; i < maxy; ++i)
	{
		++tmp[v[i].size()];
	}
	int totsize = 0;
	int tlength = maxlength;
	int level = 0;
	for(; tlength > 0; --tlength)
	{
		if (tmp[tlength] > 0)
		{
			totsize += tmp[tlength];
			++level;
		}
		if (totsize >= 2 && level >= 2)
		{
			break;
		}
	};
	//cout << tlength << "\t" << level << endl;
	vector<int> list;
	for(int i = 0; i < maxy; ++i)
	{
		if (v[i].size()>=max(tlength,1))
		{
			list.push_back(i);
		}
	}
	int MAXCOUNT = 2*maxlength + 2;
	//cout << tlength << endl;
	int maxc = 0;
	for(int i = 0; i < list.size(); ++i)
	{
		for(int j = i+1; j < list.size(); ++j)
		{
			int count = v[list[i]].size() + v[list[j]].size();
			int x1 = min(v[list[i]][0],v[list[j]][0]);
			int x2 = max(v[list[i]].back(),v[list[j]].back());
			int y1 = min(list[i],list[j]);
			int y2 = max(list[i],list[j]);
			for(int k = 0; k < x1; ++k)
			{
				if (A[k] > y1 && A[k] < y2)
				{
					++count;
					break;
				}
			}
			for(int k = x2+1; k < N; ++k)
			{
				if (A[k] > y1 && A[k] < y2)
				{
					++count;
					break;
				}
			}
			maxc = (maxc > count)?maxc:count; 
			if (maxc == MAXCOUNT)
			{
				break;
			}
		}
		if (maxc == MAXCOUNT)
		{
			break;
		}
	}
	int t1 = min(N,4);
	cout << max(maxc,t1) << endl;
    //cout << "Hello World!" << endl;
    return 0;
}
