#include <bits/stdc++.h>
using namespace std;
#define ll long long  int
#define pb push_back
#define f first
#define s second
#define mod 1000000007
#define inf 1e9

#define pi pair<ll,ll>
#define pii pair<pi,ll>
#define f first
#define mp make_pair
#define s second
#define rep(i,n) for(int i=0;i<n;i++)
#define forup(i,a,b) for(int i=a;i<=b;i++)
#define gd(v) scanf("%d",&v)
#define pd(v) printf("%d\n",v)
#define gl(v) scanf("%lld",&v)
#define pl(v) printf("%lld\n",v)

int bt[2000011];
int ind[500011];
int sz;
void update(int idx,int val){
	while(idx<=sz){
		bt[idx]+=val;
		idx+=(idx&-idx);
	}
}

int query(int idx){
	int ans=0;
	while(idx>0){
		ans+=bt[idx];
		idx-=(idx&-idx);
	}
	return ans;
}

int main(){
	int n,m;
	cin>>n>>m;
	sz=n+3*m+5;
	int cur=1;
	int p;

	rep(i,n){
		cin>>p;
		ind[p]=m+i+1;
		update(m+i+1,1);
	}

	int l=m+1;
	int r=n+m;
	int x,t;
	char c;
	ll ans=0;

	rep(i,m){
		cin>>x>>c;
		if(c=='r'){
			t=query(ind[x]);
			ans=ans+(ll)min(n-t,t-1);
			update(ind[x],-1);
			r++;
			ind[x]=r;
			update(ind[x],1);
		}
		else{
			t=query(ind[x]);
			ans=ans+(ll)min(n-t,t-1);
			update(ind[x],-1);
			l--;
			ind[x]=l;
			update(ind[x],1);
		}
	}

	cout<<ans;
}
