#include<iostream>
#include<cstring>
using namespace std;
int palin(string str)
{
  int l; //Hold length of string
    
    //finding length of string
    for(l = 0; str[l] != '\0'; l++);

    //Comparing first element with last element till middle of string 
    int i;
    for(i = 0; (i < l/2) && (str[i] == str[l - i - 1]); i++);

    if(i == l/2)
        return 1;
    else
        return -1;
	
    return 0;
}


int func(string x)
{
    int k;
    cin>>k;
    string stack[100];
    int top=0;
    int i,j=0;
    int y=0;
    for(i=0;i<x.length();i++)
    {
    if(x[i]!=32)
    {
    y++;
    }
    else
    {
    stack[top++] = x.substr(j,y);
    j = j+(y+1);
    y=0;
}
     }
     stack[top] = x.substr(j,x.length()-j);
    
    
     
     string min="z";
     string swap;
     int index;
     for(j=0;j<k;j++)
     {
     for(i=j;i<=top;i++)
     {
     if(min>stack[i])
     {
     min = stack[i];
     index=i;
     }
      }
     swap = stack[j];
     stack[j] = stack[index];
     stack[index] = swap;
      }
      
      for(i=0;i<=top;i++)
    {
    cout<<stack[i]<<" ";
     }
    return 0;
}



int main()
{
   int m;
   
    string x;
    int c=0;
    int d;
    getline(cin,x);
    
    cin>>m;
    while(m-->0)
    {

string inputs;
cin>>inputs;
char inputss[20];
string v="Wordrev";
string h="subpalin";
if(inputs == v)
{
    int y;
    cin>>y;
    int count=0;
    int i,j;
    char stack[30];
    int top=0;
    int res=0;
    for(i=0;i<x.length();i++)
    {
    int z=x[i];
    if(count<y)
    {
    if(z != 32)
    {
    stack[top++] = x[i];
    }
    else if(z == 32)
    {
    count++;
    for(j=top-1;j>=0;j--)
    {
    cout<<stack[j];
    res++;
                       }
    cout<<" ";
    res = res+1;
    top=0;
    
     }
     
    
}
     }
    
    
    cout<<x.substr(res,x.length()-res)<<endl;
    
    
}
    
    else if(inputs == h)
    {
    string next;
    next = x;
    string t;
    int k,i,j;
    cin>>k;
    int v=0;
    for(i=0;i<=next.length()-1;i++)
    {
    for(j=1;j<=next.length()-i;j++)
    {
    t = next.substr(i,j);
    if(palin(t) == 1 && t.length()!=1)
    {
    v++;
    if(v==k)
    {
    cout<<t<<endl;
}
    }
    
     }
         
}
}


else
{
    
func(x);
}

}
    return 0;
}



