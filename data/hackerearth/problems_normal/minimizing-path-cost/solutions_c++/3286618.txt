#include <bits/stdc++.h>
using namespace std;
map<string,int>m;
map<string,int>::iterator it;
int main()
{
	int n,m1,q,d;
	string s1,s2;
	scanf("%d%d",&n,&m1);
	int dist[110][110];
	for(int i=0;i<=105;i++)
	{
		for(int j=0;j<=105;j++)
		{
			if(i==j)
			dist[i][j]=0;
			else
			dist[i][j]=100000000;
		}
	}
	for(int i=1;i<=n;i++)
	{
		cin>>s1;
		m[s1]=i;
	}
    for(int i=1;i<=m1;i++)
    {
    	cin>>s1>>s2>>d;
    	it=m.find(s1);
    	int id1=it->second;
    	it=m.find(s2);
    	int id2=it->second;
    	dist[id1][id2]=d;
    	dist[id2][id1]=d;
    }
    for(int k=1;k<=n;k++)
    {
    	for(int i=1;i<=n;i++)
    	{
    		for(int j=1;j<=n;j++)
    		{
    			if(dist[i][k]+dist[k][j]<dist[i][j])
    			{
    				dist[i][j]=dist[i][k]+dist[k][j];
    			}
    		}
    	}
    }
    scanf("%d",&q);
    while(q--)
    {
    	cin>>s1>>s2;
    	it=m.find(s1);
    	int id1=it->second;
    	it=m.find(s2);
    	int id2=it->second;
    	cout<<dist[id1][id2]<<"\n";
    }
    return 0;
}