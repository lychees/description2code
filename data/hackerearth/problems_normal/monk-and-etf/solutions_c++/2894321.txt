#include <iostream>
#include <vector>
using namespace std;
typedef long long LL;
#define MAX 1000000
const int MOD = 1e9 + 7;
int t;
LL l,r,k;
long double a;

bool pr[1<<20];
vector<LL> v[1<<20];

void init(){
	pr[1]=true;
	for(int i=2;i*i<=MAX;++i){
		if(pr[i]==false){
			for(int j=i*i;j<=MAX;j+=i)
				pr[j]=true;
		}
	}
}


LL phi(LL x,vector<LL> &primes){
	LL r=x;
	for(int i=0;i<primes.size();++i){
		while(x%primes[i]==0)
			x/=primes[i];
		r=r/primes[i]*(primes[i]-1);
	}
	if(x>1)
		r-=r/x;
	return r;
}

int main()
{
	init();
    cin>>t;
    while(t--){
    	cin>>l>>r>>k;
    	for(LL i=l;i<=r;++i)
    		v[i-l].clear();
    	for(LL i=2;i<=MAX;++i){
    		if(pr[i])
    			continue;
    		for(LL j=max((LL)i*i,((l+i-1))/i*i);j<=r;j+=i)
				v[j-l].push_back(i);
    	}
    	a=0;
    	for(LL i=l;i<=r;++i){
    		LL x=phi(i,v[i-l]);
    		if(x%k==0)
    			++a;
    	}
    	cout.precision(6);
    	cout<<fixed<<(a/(r-l+1))<<"\n";
    }
    return 0;
}
