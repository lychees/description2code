#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define fr first
#define sc second
#define pb push_back
#define ARRS int(2e5+10)

ll a[ARRS],d,e,f,g,h,i,j,k,l,m,n,fx[ARRS],cfx[ARRS],o,p,ix[ARRS],ps,q,r,t,u,w,x,y,z,mx,mn;
vector<ll> v[ARRS];
set<ll> st;

char c;

void dfs(ll x){
    if(cfx[x])return;
    if(!fx[x])
        ps=min(ps,a[x]);
    cfx[x]=1;
    for(int i=0; i<v[x].size(); i++)
        dfs(v[x][i]);
}

int main(){
    cin>>n;
    for(int i=0; i<n; i++){
        cin>>a[i];
        ix[a[i]]=i;
    }
    for(int i=0; i<n; i++){
        for(int j=0; j<n; j++){
            cin>>c;
            if(c=='Y'){
                v[i].pb(j);
            }
        }
    }
    for(int i=0; i<n; i++){
        for(int i=0; i<=n; i++){
            cfx[i]=0;
        }
        ps=348728947934;
        dfs(i);
        fx[ix[ps]]=1;
        cout<<ps<<" ";
    }
    return 0;
}
