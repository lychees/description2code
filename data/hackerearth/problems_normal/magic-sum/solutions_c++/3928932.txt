/*    SHUBHAM SINHA    */
 
 
 
#include <cstdio>
#include <iostream>
#include <algorithm>
#include <string.h>
#include <vector>
#include <set>
#include <map>
#include <queue>
#include <list>
#include <math.h>
 
#define ll long long int
#define maxN 511
#define maxVal 100000000
#define minVal -10000000000000000LL
#define mod 1000000007LL
 
#define gcd(a,b) __gcd(a,b)
 
using namespace std;
 
ll a[maxN+5];

ll lca(int i,int j)
{
	if(i==j)
		return a[i];
	return a[i]+a[j]+lca((i-1)/2,(j-1)/2);
}

int main()
{
	int t,n,i,j;
	ll k,ans;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%d",&n);
		for(i=0;i<n;i++)
			scanf("%lld",&a[i]);
		ans=(ll)-1000000000000000000;
		for(i=(n/2);i<n;i++)
		{
			for(j=i;j<n;j++)
			{
				k=lca(i,j);
				//printf("%d %d %d\n",i,j,k);
				ans=max(ans,k);
			}
		}
		printf("%lld\n",ans);
	}
    return 0;
}