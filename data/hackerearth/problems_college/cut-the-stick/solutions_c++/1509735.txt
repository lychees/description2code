#include <bits/stdc++.h>
using namespace std;

#define FOR(i, a, b) for (int (i) = (a); (i) < (b); (i)++)
#define REP(i, n) FOR(i, 0, n)

typedef long long LL;

const int MAXN = (int) 1e5 + 15;
int a[MAXN];

int main() {
	int T;
	scanf("%d", &T);
	while (T--) {
		int len, n, L;
		scanf("%d %d %d", &len, &n, &L);
		REP(i, n) scanf("%d", &a[i]);
		sort(a, a + n);
		LL ans = 0;
		REP(i, n) {
			if (a[i] > L) ans += (n - i - 1);
			else {
				LL d = 2 * L - len + a[i];
				//cout << "here " << d << " " << n << endl;
				if (d < 0) ans += (n - i - 1);
				else {
					int idx1 = lower_bound(a + i + 1, a + n, len - L) - a;
					int idx2 = upper_bound(a + i + 1, a + n, L + a[i]) - a;
					int rem = abs(idx1 - idx2);
					int bruteRem = 0;
					//cout << a[i] << " " << idx1 << " " << idx2 << endl;
					//FOR(j, i + 1, n) if (a[j] - a[i] <= L && len - a[j] <= L) bruteRem++;
					//cout << "hey bro " << rem << " " << bruteRem << endl;
					//assert(rem == bruteRem);
					//cout << "rem " << a[i] + L << " " << a[i] + L - d << " " << rem << endl;
					ans += (n - i - 1 - rem);
				}
			}
		}
		printf("%lld\n", ans);
	}
	return 0;
}