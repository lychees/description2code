#include<bits/stdc++.h>

using namespace std;

int main() {
  
   int a, b, i;
   long long int count = 0, var = 0;
   string s;
   
   cin >> a >> b;
   cin >> s;
   var = a;
   for(i = 0; i < s.length(); i++) {
         
         if(s[i] == '1') 
           
            count = ((count % b) + (var % b)) % b;

        var = ((var % b) * (var % b)) % b;
    }
  cout << count << "\n";

 return 0;
}
