#include<iostream>
using namespace std;
int ver(char a[50][50],int n)
{
	int i,j;
	for(i=0;i<n;i++)
		for(j=0;j<n/2;j++)
			if(a[i][j]!=a[i][n-1-j])
				return 0;
	return 1;	
}
int hor(char a[50][50],int n)
{
	int i,j;
	for(i=0;i<n/2;i++)
		for(j=0;j<n;j++)
			if(a[i][j]!=a[n-1-i][j])
				return 0;
	return 1;	
}
int main()
{
	char a[50][50];
	int tc,i,j,n,h,v;
	cin>>tc;
	while(tc--)
	{
		cin>>n;
		for(i=0;i<n;i++)
			for(j=0;j<n;j++)
				cin>>a[i][j];
		h=hor(a,n);
		v=ver(a,n);
		if(h==1 && v==1)
			cout<<"BOTH\n";
		else if(h==0 && v==1)
			cout<<"VERTICAL\n";
		else if(h==1 && v==0)
			cout<<"HORIZONTAL\n";
		else
			cout<<"NO\n";
	}
	return 0;
}