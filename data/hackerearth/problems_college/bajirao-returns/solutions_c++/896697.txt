#include<cstdio>
int ar[101][101];

int main()
{
	int n,i,j,k,c,l,p;
	scanf("%d",&n);
	for(i=1;i<=n;i++)
		for(j=1;j<=n;j++)
			scanf("%d",&ar[i][j]);
	for(i=n;i>=2;i--)
		for(j=1;j<=n;j++)
		{
			c=0;
			k=j;
			for(l=k;l<=n;l=l<<1)
				if(ar[i][l]>c)
					c=ar[i][l];
			for(l=k;l>=1;l=l>>1)
			{	if(ar[i][l]>c)
					c=ar[i][l];
				for(p=l;p<=n;p=p<<1)
				if(ar[i][p]>c)
					c=ar[i][p];
			}
			ar[i-1][j]+=c;
		}
	c=0;
	for(i=1;i<=n;i++)
		if(c<ar[1][i])
			c=ar[1][i];
	printf("%d\n",c);
	return 0;
}