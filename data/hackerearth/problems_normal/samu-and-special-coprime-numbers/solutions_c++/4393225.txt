#include <bits/stdc++.h>
using namespace std;

#define TRACE
#ifdef TRACE
#define TR(...) __f(#__VA_ARGS__, __VA_ARGS__)
template <typename Arg1>
void __f(const char* name, Arg1&& arg1){
  cerr << name << " : " << arg1 << std::endl;
}
template <typename Arg1, typename... Args>
void __f(const char* names, Arg1&& arg1, Args&&... args){
  const char* comma = strchr(names + 1, ',');cerr.write(names, comma - names) << " : " << arg1<<" | ";__f(comma+1, args...);
}
#else
#define TR(...)
#endif

typedef long long                LL;
typedef vector < int >           VI;
typedef pair < int,int >         II;
typedef vector < II >            VII;

#define MOD                      1000000007
#define EPS                      1e-12
#define N                        200100
#define PB                       push_back
#define MP                       make_pair
#define F                        first 
#define S                        second
#define ALL(v)                   v.begin(),v.end()
#define SZ(a)                    (int)a.size()
#define FILL(a,b)                memset(a,b,sizeof(a))
#define SI(n)                    scanf("%d",&n)
#define SLL(n)                   scanf("%lld",&n)
#define PLLN(n)                  printf("%lld\n",n)
#define PIN(n)                   printf("%d\n",n)
#define REP(i,j,n)               for(LL i=j;i<n;i++)
#define PER(i,j,n)               for(LL i=n-1;i>=j;i--)
#define endl                     '\n'
#define fast_io                  ios_base::sync_with_stdio(false);cin.tie(NULL)

LL dp[20][200][1500];
int a[20];

LL go(int n , int sum , int sqsum , bool eq) {
  if(n == 20) return (__gcd(sum , sqsum) == 1);
  if(dp[n][sum][sqsum] != -1 && !eq) return dp[n][sum][sqsum];
  LL ret = 0;
  if(!eq)
    REP(i,0,10)
      ret += go(n + 1 , sum + i , sqsum + i * i , 0);
  else {
    REP(i,0,a[n])
      ret += go(n + 1 , sum + i , sqsum + i * i , 0);
    ret += go(n + 1 , sum + a[n] , sqsum + a[n] * a[n] , 1);
  }
  if(!eq) 
    dp[n][sum][sqsum] = ret;
  return ret;
}

LL solve(LL x) {
  REP(i,0,20) a[i] = 0;
  PER(i,0,20) {
    if(x == 0) break;
    a[i] = x % 10;
    x /= 10;
  }
  return go(0 , 0 , 0 , 1);
}

int main() {
  int t; SI(t);
  FILL(dp , -1);
  while(t --) {
    LL l , r;
    SLL(l); SLL(r);
    PLLN(solve(r) - solve(l-1));
  }
  return 0;
}
