#include <iostream>
#include<stdio.h>
#include<iomanip>
using namespace std;
double a[1003][1003],p[1003][1003],ans=1;
long i,j,k,n,m,t;
void process()
{
    for(i=1;i<=n;i++)
    {
        for(j=1;j<=m;j++)
        {
            scanf("%lf",&a[i][j]);
        }
    }
}
void fill_p()
{
    p[1][1]=1;
    for(i=2;i<=m;i++)
    {
        p[1][i]=p[1][i-1]*a[1][i-1];
        ans+=p[1][i];

    }
    for(i=2;i<=n;i++)
    {
        p[i][1]=p[i-1][1]*(1-a[i-1][1]);
        ans+=p[i][1];
    }
    for(i=2;i<=n;i++)
    {
        for(j=2;j<=m;j++)
        {
            p[i][j]=p[i][j-1]*a[i][j-1]+p[i-1][j]*(1-a[i-1][j]);
            ans+=p[i][j];
        }
    }
}
int main()
{
    cin>>t;
    while(t--)
    {
       scanf("%ld %ld",&n,&m);
       process();
       ans=1;
       fill_p();
        cout<<fixed<<setprecision(6)<<ans<<"\n";
    }

}
