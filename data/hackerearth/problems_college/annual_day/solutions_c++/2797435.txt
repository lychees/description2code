#include <bits/stdc++.h>
using namespace std;




int setbits(int n)
{
	int count=0;
	while(n>0)
	{
		count++;
		n&=(n-1);
	}
	return count;
}

bool sortbysetbits(int a,int b)
{
	return a>b;
}

int main()
{
    int t,n,k,x,sum;
    cin>>t;
    while(t--)
    {
    	cin>>n>>k;
    	vector<int> sai;
    	for(int i=0;i<n;i++)
    	{
    		cin>>x;
    		sai.push_back(setbits(x));
    	}
    sort(sai.begin(),sai.end(),sortbysetbits);
    sum=0;
    for(int i=0;i<k;i++)
    sum+=sai.at(i);
    cout<<sum<<endl;
    	
    }
    return 0;
}
