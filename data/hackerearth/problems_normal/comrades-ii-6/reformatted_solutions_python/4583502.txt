from collections import deque


def calculate(tree):
    queue = deque(tree[0])
    handshakes = fistpumps = nodes = level = 0
    while queue:
        for _ in xrange(len(queue)):
            root = queue.popleft()
            handshakes += level
            fistpumps += nodes - level
            nodes += 1
            queue.extend(tree[root])
        level += 1
    return handshakes, fistpumps


t = input()
for _ in xrange(t):
    n = input()
    superiors = [int(v) for v in raw_input().split()]
    tree = {i: [] for i in xrange(n+1)}
    [tree[s].append(i+1) for i, s in enumerate(superiors)]
    handshakes, fistpumps = calculate(tree)
    print handshakes, fistpumps
