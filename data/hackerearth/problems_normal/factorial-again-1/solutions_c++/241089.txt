#include<stdio.h>
#include<iostream>
#include<string.h>
#include<algorithm>
#include<math.h>
#include<iomanip>
using namespace std;
#define getchar_unlocked getchar
#define ll long long int
inline long long int in()
{
   long long int n=0;
   long long int ch=getchar_unlocked();
   long long int sign=1;
   while( ch < '0' || ch > '9' )
   {
   	if(ch=='-')sign=-1; ch=getchar_unlocked();
	   }
 
   while(  ch >= '0' && ch <= '9' )
           n = (n<<3)+(n<<1) + ch-'0', ch=getchar_unlocked();
   return n*sign;
}

ll expo(ll a,ll b,ll m)
{
	ll result=1;
	while(b)
	{
		if(b&1)
		result*=a,result%=m;
		
		a*=a;
		a%=m;
		b>>=1;
	}
	return result%m;
}


ll inv_modulo(ll a,ll b)
{
	return expo(a,b-2,b);
}

int main(void)
{
	ll t;
	t=in();
	while(t--)
	{
		ll n,p;
		n=in();
		p=in();
		if(3*n>=p)
		cout<<"0\n";
		else
		{
			ll ans=1,ans2=1;
			for(ll i=3*n+1;i<p;i++)
			ans=(ans*i)%p;
		//	cout<<"ans before inverse:"<<ans<<"\n";
			ans=inv_modulo(ans,p);
		//	cout<<"ans after inverse:"<<ans<<"\n";
			ans*=-1;
			ans=(ans+p)%p;     ////add p
			ans2=expo(6,n,p);
		//	cout<<"ans22 before inverse:"<<ans2<<"\n";
			ans2=inv_modulo(ans2,p);
		//	cout<<"ans22 after inverse:"<<ans2<<"\n";
			cout<<(ans*ans2)%p<<"\n";
		}
	}
}