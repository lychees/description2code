#include <bits/stdc++.h>
using namespace std;

const int mx = 1000006;
char s1[mx], s2[mx];
int special[256];

int main()
{
    int t, n, l, r, k;
    scanf("%d", &t);
    while(t--) {
    	scanf("%d %d %d %d", &n, &k, &l, &r);
    	scanf("%s %s", s1, s2);
    	for(int i = 0; i < 256; ++i) special[i] = 0;
    	for(int i = 0; i < k; ++i) special[s2[i]] = 1;
    	int s = 0, ans = 0;
    	vector<int> pos;
    	for(int i = 0; i < n; ++i) {
    		if(special[s1[i]]) {
    			++s;
    			pos.push_back(i);
    		}
    		if(s >= l) {
    			int till = 0, from = i;
    			if(s - r - 1 >= 0) till = pos[s - r - 1] + 1;
    			if(l > 0) from = pos[s - l];
    			ans += from - till + 1;
    			//cout << i << " " << ans << endl;
    		}
    	}
    	
    	printf("%d\n", ans);
    }
    return 0;
}
