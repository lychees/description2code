#include <bits/stdc++.h>
using namespace std;

#define MOD 1000000007LL
#define ll long long

#define MAXN 1000010
#define MAXV 100010
bool prime[MAXN];
vector<int> pr;
ll sieve[MAXV],rem[MAXV];

int main()
{
	for(int i=2;i*i<MAXN;++i)
		if(!prime[i])
			for(int j=i*i;j<MAXN;j+=i)
				prime[j] = true;
	for(int i=2;i<MAXN;++i)
		if(!prime[i])
			pr.push_back(i);
	cin.tie(0);
	ios::sync_with_stdio(false);
	int t;
	cin >> t;
	while(t--)
	{
		ll l,r,k;
		cin >> l >> r >> k;
		for(ll i=l;i<=r;++i)
		{
			sieve[i-l] = rem[i-l] = i;
//			cout << i << " : " << sieve[i-l] << endl;
		}
		for(int i=0;i<pr.size();++i)
		{
			ll prVal = pr[i], divi;
			divi = ((l+prVal-1)/prVal)*prVal;
			if(divi<=r)
			{
//				cout << prVal << " : " << divi << endl;
				while(divi<=r)
				{
					sieve[divi-l] -= sieve[divi-l]/prVal;
					while(rem[divi-l]%prVal==0)
						rem[divi-l] /= prVal;
					divi += prVal;
				}
			}
		}
		int cnt = 0;
		for(ll i=l;i<=r;++i)
		{
			if(rem[i-l]!=1)
				sieve[i-l] -= sieve[i-l]/rem[i-l];
//			cout << i << " : " << sieve[i-l] << endl;
			if(sieve[i-l]%k==0)
				++cnt;
		}
		double res = cnt*1.0/(r-l+1);
		printf("%.6lf\n",res);
	}
	return 0;
}