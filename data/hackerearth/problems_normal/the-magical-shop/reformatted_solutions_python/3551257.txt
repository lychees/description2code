def p(x, p):
    old = x
    new = old
    L[0] = x
    for i in range(1, p+1):
        new = (old ** 2) % B
        old = new
        L[i] = old
    return


A, B = map(int, raw_input().split())
s = raw_input()
L = {}
p(A, 10**5)
a = 0
for i, v in enumerate(s):
    if v == '1':
        temp = L[i]
        a = (a + temp) % B  # % B   #(A**(2**i))
print a
