#include<bits/stdc++.h>
int main()
{
	long long int t;
	scanf("%lld",&t);
	while(t--)
	{
		int x;
		char s[1000005];
		long long int key,i,n,j,l;
		scanf("%lld",&key);
		scanf("%s",s);
		for(i=0;s[i]!='\0';i++)
		{
				if(s[i]=='.')
					s[i]=' ';
				else if((s[i]>='a'&&s[i]<='z')&&(key>=0&&key<=25))
				{
						s[i]=((s[i]-'a'+key)%26)+'a';
				}
				else if((s[i]>='A'&&s[i]<='Z')&&(key>=0&&key<=25))
				{
						s[i]=((s[i]-'A'+key)%26)+'A';
				}
			   else if((s[i]>='a'&&s[i]<='z')&&(key>=26&&key<=51))
				{
						s[i]=((s[i]-'a'+key)%26)+'A';
				}
				else if((s[i]>='A'&&s[i]<='Z')&&(key>=26&&key<=51))
				{
						s[i]=((s[i]-'A'+key)%26)+'a';
				}
		}
		puts(s);
	}
	return 0;
}