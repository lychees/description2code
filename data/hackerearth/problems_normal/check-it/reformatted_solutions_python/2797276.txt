if __name__ == '__main__':
    for _ in range(int(raw_input())):
        N, M = map(int, raw_input().split())
        edgeList = [(map(int, raw_input().split())) for _ in range(M)]
        marked = [False for _ in range(N)]
        for edge in map(int, raw_input().split()):
            either, other = edgeList[edge - 1]
            marked[either - 1], marked[other - 1] = True, True
        print 'YES' if all(marked) else 'NO'
