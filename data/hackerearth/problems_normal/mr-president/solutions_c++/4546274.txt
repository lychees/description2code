//Sinha Saab
//NARUTO Fan



#include <cstdio>
#include <iostream>
#include <algorithm>
#include <string.h>
#include <vector>
#include <set>
#include <map>
#include <queue>
#include <list>
#include <math.h>

#define ll long long int
#define maxN 1000000
#define maxVal 100000000
#define minVal -100000000
#define mod 1000000007LL

#define gcd(a,b) __gcd(a,b)

using namespace std;

int parent[maxN+5];
vector<pair<ll,pair<int,int> > > edge;
vector<ll> f;

int get(int i)
{
	if(i!=parent[i])
		parent[i]=get(parent[i]);
	return parent[i];
}

int main()
{
    int i,n,m,u,v,x,y,p=0;
    ll k,w,s=0;
    scanf("%d%d%lld",&n,&m,&k);
    while(m--)
    {
    	scanf("%d%d%lld",&u,&v,&w);
    	edge.push_back(make_pair(w,make_pair(u,v)));
    }
    for(i=1;i<=n;i++)
    	parent[i]=i;
    sort(edge.begin(),edge.end());
    for(i=0;i<(int)edge.size();i++)
    {
    	u=edge[i].second.first;
    	v=edge[i].second.second;
    	w=edge[i].first;
    	x=get(u);
    	y=get(v);
    	if(x!=y)
    	{
    		parent[x]=parent[y];
    		f.push_back(w);
    		s=s+w;
    	}
    }
    i=(int)f.size()-1;
    while(s>k&&i>=0)
    {
    	s=s-f[i]+1;
    	i--;
    	p++;
    }
    if(s>k)
    	p=-1;
    m=0;
    for(i=1;i<=n;i++)
    	if(parent[i]==i)
    		m++;
    if(m!=1)
    	p=-1;
    printf("%d\n",p);
    return 0;
}