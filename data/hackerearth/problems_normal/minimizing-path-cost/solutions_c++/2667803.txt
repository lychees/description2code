#include <iostream>
#include<map>
#include<vector>
#include<string.h>
#include<limits.h>
using namespace std;


 int d[100][100]; 

void dist(int n ){
	
	
	
	
	}

int main()
{
   int n,m,t;
   
   map<string , int> hash;
   // memset(graph,INT_MAX,100*100*sizeof(int));
   //int m, n;
   cin>>n>>m;
   //int d[n][n];
    for(int k=0;k<n;k++){
	for(int i=0;i<n;i++){ d[k][i]= 10000000;}}
   string city;
   for(int i=0;i<n;i++){
   	
   	d[i][i]=0;
   	cin>>city;
   	hash[city]=i;
   }
   
   string c; int dis;
   for(int i=0;i<m;i++){
   	cin>>city>>c;
   	cin>>dis;
   	d[hash[city]][hash[c]]=dis;
   	d[hash[c]][hash[city]]=dis;
   	
   	
   }
   for(int k=0;k<n;k++){
	for(int i=0;i<n;i++){
		
		for(int j=0;j<n;j++)
		
	{	
	 d[i][j]=min(d[i][j],d[i][k]+d[k][j]);
	
	
	}
	}}
   
   cin>>t;
   while(t--){
   	cin>>c>>city;
   	cout<<d[hash[c]][hash[city]]<<endl;
   }
   
   
   
   }
