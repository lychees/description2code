#include<iostream>
using namespace std;
long long int exp(long long int a, long long int p ,long long int mod)
{
    long long int result = 1;
        if(p==0)
        return 1;
    if(p==1)
        return a;
    while(p)
    {
        if(p&1)
            result *= a;
        result%=mod;
        p>>=1;
        a*=a;
        a%=mod;
    }
    return result;
}
int main()
{
    long long int i,n,t,p,result;
    cin>>t;
    while(t--)
    {
        result=1;
        cin>>n>>p;
        if(3*n>=p)
       {
           for(i=0;i<=3*n-p;i++)
       {
           result=((result%p)*((3*n-i)%p))%p;
       }
       result=(result*(p-1))%p;
       }
       else {
         for(i=1;i<=p-1-3*n;i++)
         {
         	result=((result%p)*(exp(3*n+i,p-2,p)%p))%p;
         }
         result=(result*(p-1))%p;
       }
       result=(result*exp(6,n*(p-2),p))%p;
       cout<<result<<"\n";
    }
    return 0;
}
