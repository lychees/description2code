#include <iostream>
#include <vector>
#include <queue>
#include <cstring>
using namespace std;
struct node
{
int id;
int dist;
};
static vector<int>adj[10000];

int main()
{
    int t,n,m,a,b,i,j,f;
    cin>>t;
    for(i=0;i<t;i++)
    {
    	f=0;
    	cin>>n>>m;
    	for(j=0;j<m;j++)
    	{
    		cin>>a>>b;
    		a--;
    		b--;
    		adj[a].push_back(b);
    		adj[b].push_back(a);
    	}
    	queue <node *>q;
        struct node *n0=new node();
    	struct node *n1;
    	n0->dist=0;
    	n0->id=0;
    	q.push(n0);
    	while(!q.empty())
    	{
    		struct node *x=q.front();
    		q.pop();
    		int xid=x->id;
    		int xdist=x->dist;
    	//	cout << x->dist <<"x"<<endl;
    		for(j=0;j<adj[xid].size();j++)
    		{
    			n1=new node();
    			n1->id=adj[xid][j];
    			n1->dist=xdist+1;
    			if(n1->id==n-1)
    			{
    				f=1;
    				break;
    			}
    			q.push(n1);
    		}
    		if(f)
    		break;
    	}
    	for(j=0;j<n;j++)
    	{
    		adj[j].clear();
    	}
    	cout<<n1->dist<<endl;
    }
    
    return 0;
}
