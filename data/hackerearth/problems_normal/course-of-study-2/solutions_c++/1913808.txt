#include <bits/stdc++.h>
using namespace std;

#define ll long long int 
#define mod 1000000007
ll fact[1000003];
void comp(){
		
		for (ll i = 2;i < 1000002;i++){
				
				fact[i] = ((i % mod) * (fact[i-1] % mod)) % mod;
		}
}

ll factorial (ll n){
		
		if (n < 1000000){
				
				return fact[n];
		}
		
		else {
			ll ans;
			ans = ((n % mod) * (factorial(n-1) % mod)) % mod;
			return ans;
		}
}

ll power ( ll m, ll n){
		
		if (n == 0){
				
				return 1;
		}
		else if (n == 1){
				
				return (m % mod);
		}
		
		else {
				
				ll temp = power(m, n/2);
				temp = ((temp % mod) * (temp % mod)) % mod;
				
				if (n % 2 == 0){
						
						return temp;
				}
				
				else {
						
						return ((m % mod) * (temp % mod)) % mod;
				}
				
		}
}

ll ncr (ll n, ll r){
		
		ll ans = 1;
		ll temp = 1;
		
		ans = ((ans) * (factorial(n) % mod)) % mod;
		temp = ((factorial(n-r) % mod) * (factorial (r) % mod)) % mod;
		temp = power (temp, mod-2) % mod;
		
		//cout << ans << "y "<< temp<< endl;
		
		ans = (ans * temp) %mod;
		return ans;
}

int main(){
		
		
	ll n;
	ll sum = 0;
	fact[0] = 1;
	fact[1] = 1;
	comp();
	
	vector <vector <ll> > v;
	vector < ll >  temp;
	ll ans = 1;
	
	cin >> n;
	
	for (ll j = 0; j < n;j++){
			
			ll m;
			cin >> m;
			temp.clear();
			for (ll i = 0; i < m;i++){
					
					ll value;
					cin >>value;
					temp.push_back(value);
			}
			sort(temp.begin(), temp.end());
			
			v.push_back(temp);
			sum = sum + m;
	}
	
	//cout << sum << endl; 
	for (ll i = 0; i < n;i++){
			
			vector <ll> temp;
			ll count = 1;
			ll size = v[i].size();
			
			ans = ((ans % mod) * (ncr(sum, size) % mod) % mod);
			
			//cout << ncr(sum,size)<< " x "<< ans<< endl;
			
				for (ll j = 1; j < size; j++){
					
					if (v[i][j-1] == v[i][j]){
							
							count++;
					}
					
					else {
							
							temp.push_back(count);
							count = 1;
					}
			}
			
			temp.push_back(count);
			
			for (ll j = 0; j < temp.size(); j++){
					
					ans = ((ans % mod) * (factorial(temp[j] % mod)) %mod);
			}
			sum = sum - size;
	}
	cout << ans<< endl;
}