#include <bits/stdc++.h>
using namespace std;

int cnt[10000001];

int main()
{
    int tt, tot = 0;
    memset(cnt, 0, 40000004);
    for (cin >> tt; tt > 0; tt--)
    {
    	int t, n;
    	cin >> t >> n;
    	if (t == 0)
    	{
    		tot++;
    		while (n > 0)
    		{
    			cnt[n]++;
    			n >>= 1;
    		}
    	}
    	else if (t == 1)
    	{
    		tot--;
    		while (n > 0)
    		{
    			cnt[n]--;
    			n >>= 1;
    		}
    	}
    	else
    	{
    		if (n == 0)
    			cout << tot << endl;
			else
				cout << cnt[n] << endl;
    	}
    }
    
    return 0;
}
