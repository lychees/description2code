#include <iostream> 
#include <cstdio>
#include <cstdlib>

using namespace std ;

struct node 
{
	int in ;
	node *l,*r; 
	int c;
} ; 

void   insert(node **t,int x) 
{
	
	if(*t==NULL) 
	{
		node *r = new node ; 
		r->in =x; 
		r->l=NULL ;
		r->r=NULL ;
		r->c =0;  
		
		*t=r ; 
		return  ; 
	}
	
	node *r =*t ;
	node *r2 =r;
	
	while(r!=NULL) 
	{
	 r2=r; 
	 if(r->in>x) 
	   r=r->l ; 
	 else if(r->in<x) 
	  r=r->r; 
	  else  
		 {
		 	(r->c)++; 
		 	return ;
		 } 
	}
	r=new node ; 
	r->in =x ; 
	r->l=NULL ;
	r->r= NULL ; 
	r->c=0 ; 
	if(r2->in<x) 
	 	r2->r= r; 
	 else  
	    r2->l=r; 
	    
} 

void  count (node *t,unsigned long long int  &c) 
{
	if(t==NULL)
	  return ; 
     c += (t->c) *((t->c)+1)/2; 
     count(t->l,c) ;
     count(t->r,c) ; 
}
int main()
{
	
	int t1; 
	node *t=NULL;
	unsigned long long  int c =0 ; 
	
	int n; 
	cin>>t1; 
	for(int i1=0;i1<t1;i1++) 
	{
	//dt(t) ; 
	t=NULL ; 
	
	cin>>n ; 
	int m ; 
	c=0 ; 
	for(int i=0;i<n;i++)
	{
		cin>>m ; 
	// m =rand()%1000000; 
	  insert(&t,m) ;	
	}
	count(t,c) ; 
	c+=n; 
	
	cout<<c<<endl; 
    }
	return 0 ; 
	
}