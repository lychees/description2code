#include <bits/stdc++.h>
#define MAX(a,b) (a>b?a:b)
#define MIN(a,b) (a<b?a:b)
#define UP upper_bound
#define LB lower_bound
#define LL long long 
#define Pi 3.14159265358
#define si size()
#define en end()
#define be begin()
#define fi first
#define se second
#define pb push_back
#define mp make_pair
#define ii set<int>::iterator
#define Tree int ind, int L, int R
#define Left 2*ind,L,(L+R)/2
#define Right 2*ind+1,(L+R)/2+1,R
using namespace std;
const int m7=1000000007;
bool f[100001];
map < int , int > res;
pair < int , int > a[100001];
int n, m, k, i, j, x, y, q;
vector < int > g[100001];
int dfs(int v, int p)
{
	int cur=1; 
	for(int j=0;j<g[v].si;j++)
	  if(g[v][j]!=p && !f[g[v][j]])
	    cur=(1ll*cur*(1ll*dfs(g[v][j],v)+1ll))%m7;
	return cur;    
}
main(){
	   cin>>n;
	   for(i=1;i<=n;i++)
	    {
	     cin>>a[i].fi;
		 a[i].se=i;	
		}
	   sort(a+1,a+n+1);	
	   for(i=1;i<n;i++)
	    {
	     cin>>x>>y;
		 g[x].pb(y);
		 g[y].pb(x);	
		}	
	   for(i=1;i<=n;i++)
	    {
	     //cout<<dfs(a[i].se,0)<<endl;
	     res[a[i].fi]=(1ll*res[a[i].fi]+1ll*dfs(a[i].se,0))%m7;	
	     f[a[i].se]=1;
		}
	   cin>>q;
	   while(q--)
	    {
	     cin>>x;
		 cout<<res[x]<<endl;	
		}  
       }

