#include<bits/stdc++.h>
using namespace std;
#define ll long long 
#define max 100000
ll  n,q;
ll  bit1[max+3];//normal
ll  bit2[max+3];// a[i]*i one
ll read(ll *bit,ll at)
{
	ll sum=0;
	for(ll i=at;i>=1;i-=i&(-i))
		sum+=bit[i];
	return sum;
}
void update(ll *bit,ll at,ll by)
{
	for(ll i=at;i<=n;i+=i&(-i))
		bit[i]+=by;
} 
ll rangequery(ll *bit,ll i,ll j)
{
	return read(bit,j)-read(bit,i-1);
}
int main()
{
	cin>>n>>q;
	for(ll  i=1;i<=n;++i)
	{
		ll temp;
		cin>>temp;
		update(bit1,i,temp);
		update(bit2,i,temp*i);
	}
	while(q--)
	{
		ll  temp;
		cin>>temp;
		if(temp==1)
		{
				ll k,l,r;
			cin>>k>>l>>r;
			ll ans=0;
			if(k<=l)
			{
				ans=rangequery(bit2,l,r)-k*rangequery(bit1,l,r);
			}
		else if(k<=r)
			{
				ans=k*rangequery(bit1,l,k)-rangequery(bit2,l,k)+
					rangequery(bit2,k,r)-k*rangequery(bit1,k,r);
			}
			else
			{
				ans=k*rangequery(bit1,l,r)-rangequery(bit2,l,r);
			}
			printf("%lld\n",ans);
		}
		else if(temp==2)
		{
			ll k,s;
			cin>>k>>s;
			update(bit1,k,s);
			update(bit2,k,s*k);
		}
	}
	return 0;
}
