for i in range(input()):
	ne=[]
	su=0
	n,k=map(int,raw_input().split())
	a=map(int,raw_input().split())
	for j in range(n):
		bi=bin(a[j])[2:]
		c=bi.count('1')
		ne.append(c)
	ne.sort(reverse=True)
	for j in range(k):
		su+=ne[j]
	print su	