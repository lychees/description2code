#include <bits/stdc++.h>
#define SI set<int> 
#define VI vector<int> 
#define ull unsigned long long 
#define inint(a) scanf("%d",&a)
#define input(a) cin>>a
#define ll long long 
#define print(a) cout<<a
#define printn(a) cout<<a<<"\n"
#define f first
#define s second
#define len(s) s.length()
#define range(a,b,n) for(int i=a;i<b;i+=n)
using namespace std;

int main()
{
    //cout << "Hello World!" << endl;
    int l,d,n;
    inint(l);
    inint(d);
    inint(n);
    set <string> se;
    for(int i=0;i<d;i++){
    	string s;
    	input(s);
    	se.insert(s);
    }
    
    
    for(int i=0;i<n;i++){
    	vector <char> v[500];
    	int pos=0;
    	string sh;
    	input(sh);
    	//cout<<sh<<"\n";
    	int flag=0;
    	for(int j=0;j<len(sh);j++){
    		//cout<<sh[j]<<" "<<flag<<" ";;
    		if(sh[j]=='('){
    		flag=1;	
    		}
    		else if(sh[j]==')'){
    			flag=0;
    			pos++;
    		}
    		else{
    			v[pos].push_back(sh[j]);
    			if(flag==0)pos++;
    			}
    		}
    		/*for(int k=0;k<5;k++){
    		for(int j=0;j<v[k].size();j++){
    			cout<<v[k][j]<<" ";
    		}
    		cout<<"\n";*/
    		ll count=0;
    		//int f=0;
    		for(set<string>::iterator k=se.begin();k!=se.end();k++){
    			string test=*k;
    			int f=0;
    			for(int j=0;j<len(test);j++){
    				if(find(v[j].begin(),v[j].end(),test[j])!=v[j].end()){
    				}
    				else {f=1;break;}
    			}
    			if(!f)count++;
    		}
    		
    		cout<<count<<"\n";
    	for(int i=0;i<500;i++){
    		v[i].clear();
    	}
    	}
    	
    	
    return 0;
}
