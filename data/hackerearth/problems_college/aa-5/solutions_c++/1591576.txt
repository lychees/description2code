#include <bits/stdc++.h>
#define _ ios_base::sync_with_stdio(false);cin.tie(0);
using namespace std;
#define pb push_back
#define pob pop_back
#define pf push_front
#define pof pop_front
#define mp make_pair
#define all(a) a.begin(),a.end()
#define bitcnt(x) __builtin_popcountll(x)
#define MOD 1000000007
#define MAXN 100005
typedef unsigned long long int uint64;
typedef long long int int64;

set<int>s[5010];
int col[5010][5010];
set<int>::iterator it,it1;
struct node{
	int x1,y1,x2,y2,c;
};
vector<node>v;
int main(){
	int i,j,n,k,r1,r2,c1,c2;
	cin>>n>>k;
	for(i=1;i<=n;i++){
		for(j=1;j<=n+1;j++){
		s[i].insert(j);
		col[i][j]=1;}
	}
	node tmp;
	char ch;
	for(i=0;i<k;i++){
		scanf("%d%d%d%d%d",&tmp.x1,&tmp.y1,&tmp.x2,&tmp.y2);
		cin>>ch;
		if(ch=='w')
		tmp.c=1;
		else
		tmp.c=0;
		v.pb(tmp);
	}

	for(i=v.size()-1;i>=0;i--){
		tmp=v[i];
		c1=min(tmp.y1,tmp.y2);
		c2=max(tmp.y1,tmp.y2);
		r1=min(tmp.x1,tmp.x2);
		r2=max(tmp.x1,tmp.x2);
		for(j=r1;j<=r2;j++){
			it=s[j].lower_bound(c1);
			if(it==s[j].end())
			continue;
			if((*it)>c2)
			continue;
			int val=*it;
			while(val<=c2){
				col[j][val]=tmp.c;
				it1=it;
				it++;
				val=*it;
				s[j].erase(it1);
			}
		}
	}
	int ans=0;
	for(i=1;i<=n;i++)
	for(j=1;j<=n;j++)
	ans+=col[i][j];
	cout<<ans;
	return 0;
}