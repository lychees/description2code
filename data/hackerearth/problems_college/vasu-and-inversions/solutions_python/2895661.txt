t=input()
for i in range(t):
	n,k=map(int,raw_input().split())
	ar=raw_input().split()
	no=ar.count('1')
	n1=no
	z=ar.count('0')
	if z>=k:
		no+=k
	else:
		no+=z
		no=no-((k-z)%2)
	print no