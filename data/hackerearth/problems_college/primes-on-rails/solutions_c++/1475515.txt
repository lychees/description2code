#include<bits/stdc++.h>
using namespace std;
#define mod 1000000007
typedef long long ll;

ll a[100008];

void sieve()
{	ll i,c;
	a[0]=1;
	a[1]=1;
	for(i=2;i<100000;i++){
		if(a[i]==0){
			c=2*i;
			while(c<100000){
				a[c]=1;
				c+=i;
			}
		}
	}
}

vector<ll>v1,v2;

int main(){
	sieve();
	
	ll n,i,j,h,m,s;
	cin>>n;
	
	for(i=0;i<n;i++){
		cin>>h>>m>>s;
		ll st,en;
		st=3600*h+60*m+s;
		if(a[st]==0)
			en=st+300;
		else{
			if(st&1)
				en=st+180;
			else
				en=st+120;
		}
		v1.push_back(st);
		v2.push_back(en);
	}
	sort(v1.begin(),v1.end());
	sort(v2.begin(),v2.end());
	
	ll co=1,max=1;
	i=1,j=0;
	while(i<n && j<n){
		if(v1[i]<v2[j]){
			co++;
			i++;
			if(co>max)
				max=co;
		}
		else{
			co--;
			j++;
		}
	}
	cout<<max<<endl;
	
	return 0;
}
