#include <iostream>
#include<algorithm>
using namespace std;

int main()
{
   // cout << "Hello World!" << endl;
    int n;
    cin>>n;
    long int arr[101][101];
    for(int i=1;i<=n;i++)
    {
    	for(int j=1;j<=n;j++)
    	{cin>>arr[i][j];
    	if(j%2==0)
    	{
    	for(int k=j/2;k>=1;k=k/2)
    	{
    		if(arr[i][k]>=arr[i][j])
    		arr[i][j]=arr[i][k];
    		else
    		arr[i][k]=arr[i][j];
    		if(k%2!=0)
    		break;
    	}
    	}
    
    	}
   
    }
    /*for(int i=1;i<=n;i++)
    {cout<<"\n";
    	for(int j=1;j<=n;j++)
    	cout<<arr[i][j]<<" ";
    }*/
    long long int ans_old[101]={0};
    long long int ans_new[101]={0};
    
	for(int i=n;i>=1;i--)
	{
		for(int j=1;j<=n;j=j+2)
		{
			
				if(j/2<1)
				ans_new[j]=arr[i][j]+ans_old[j];
				else
				{
					for(int k=j/2;k>=1;k=k/2)
					{
						if(k%2!=0)
						{
							if(arr[i][j]+ans_old[j]<arr[i][k]+ans_old[k])
							{arr[i][j]=arr[i][k];
							ans_old[j]=ans_old[k];
							}
						}
					}
				ans_new[j]=arr[i][j]+ans_old[j];
				}
				
			
		}
		
		for(int j=1;j<=n;j=j+2)
		{ans_old[j]=ans_new[j];
		//cout<<ans_old[j]<<" ";
		}
		
	}
sort(ans_old+1,ans_old+n+1);
cout<<ans_old[n];
}