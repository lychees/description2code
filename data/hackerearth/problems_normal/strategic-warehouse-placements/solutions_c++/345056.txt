#include <vector>
#include <list>
#include <map>
#include <set>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include <cstring>
using namespace std;

#define PB push_back
#define ALL(A) A.begin(), A.end()
vector<int> adj[1010];
int deg[1010];
int main()
{
	int i,j,k,l,m,n,lar;
	cin>>i>>j;
	for(k=0;k<j;k++)
	{
		cin>>l>>m;
		adj[l].PB(m);
		adj[m].PB(l);
		deg[l]++;
		deg[m]++;
	}
	int ans=0;
	while(1)
	{
		lar=-1;
		for(k=1;k<=i;k++)
		{
			if(deg[k]>lar)
			{
				lar=deg[k];
				l=k;
			}
		}
		if(lar==-1)
		break;
		deg[l]=-1;
		for(k=0;k<adj[l].size();k++)
		{
			deg[adj[l][k]]=-1;
			for(m=0;m<adj[adj[l][k]].size();m++)
			{
				deg[adj[adj[l][k]][m]]--;
			}
		}
	//	cout<<lar<<" "<<l<<endl;
		ans++;
	}
	cout<<min(ans,3)<<endl;
	return 0;
}