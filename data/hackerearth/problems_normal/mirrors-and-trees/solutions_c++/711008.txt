#include <iostream>
using namespace std;
#define sz 1000010
int main()
{
    //cout << "Hello World!" << endl;
   int t;
   cin>>t;
   while(t--)
   {
   	int n,a[sz],pr[sz],i,j,min,max;
   	cin>>n;
   	a[0]=0;
   	for(i=1;i<=n;i++)
   	{cin>>a[i];
   	pr[i]=0;
   	}
   	j=1;
   	pr[1]=1;
   	while(j<=n)
   	{
   		j<<=1;
   		if(j>n)
   		break;
   		max=(((2*j-1)<n)?(2*j-1):n);
   		min=((j<n)?j:n);
   		while(min<=max)
   		{
   		   
   		   if(a[max]!= 0)
   		   {
   		   	pr[max]=1;
   			break;
   		   }
   		   max--;
   		}
   		max--;
   		while(min<=max)
   		{
   		   
   		   if(a[min]!=0)
   		   {pr[min]=-1;
   			break;
   		   }
   		   min++;
   		}
   	
   	}
   	
   	for(i=1;i<=n;i++)
   	if(pr[i]==1)
    cout<<a[i]<<"\n";
   	for(i=1;i<=n;i++)
   	if(pr[i]==-1)
   	cout<<a[i]<<"\n";
   	
   cout<<"\n";	
   
   }
   
   return 0;
}
