#include <bits/stdc++.h>
#define rf freopen("inp.in", "r", stdin)
using namespace std;
const int MAX = 1000050;
int T, N, M, P, X, F[MAX], G[MAX], res = 0;
string S;
int main(){
 	
 	//rf;
 	cin.tie(0), ios::sync_with_stdio(0);
	cin >> T;

	while(T--){

		cin >> N >> M >> P >> X >> S;
		for(int i = 0 ; i < M ; i++) F[i] = S[i] - '0';		
		res = 0;

		for(int i = 30 ; i >= 0 ; i--){
			if(res + (1 << i) >= N) continue;
			res += (1 << i);
			for(int j = 0 ; j < M ; j++){
				long long idx = j + 1000000000LL*M - ( (1 << i) * 1LL * P );
				idx %= M;
				G[j] = (F[j] ^ X ^ F[idx]);
			}
			for(int j = 0 ; j < M ; j++) F[j] = G[j];
		}

		for(int i = 0 ; i < M ; i++) cout << F[i];
		cout << '\n';
	}
}  