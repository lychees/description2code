#include <iostream>
#include <string>
using namespace std;

int main()
{
    int n, ans, out, out1, t;
    cin >>t;
    char a[50][50];
    for(int m=0; m<t; m++)
    {cin >> n;
    for(int i=0; i<n; i++)
    {
        cin >> a[i];
    }
    out=0;
    for(int j=0; j<n/2; j++)
    {
        ans=0;
        for(int k=0; k<n; k++)
        {
            if(a[j][k]==a[n-j-1][k])
            {
                ans=ans+1;
            }
        }
        if(ans==n)
        {
            out=out+1;
        }
    }
    out1=0;
    for(int j=0; j<n/2; j++)
    {
        ans=0;
        for(int k=0; k<n; k++)
        {
            if(a[k][j]==a[k][n-j-1])
            {
                ans=ans+1;
            }
        }
        if(ans==n)
        {
            out1=out1+1;
        }
    }
    if(out==n/2 && out1!=n/2)
    {
        cout << "HORIZONTAL"<<endl;
    }
    if(out1==n/2 && out!=n/2)
    {
        cout << "VERTICAL"<<endl;
    }
    if(out==n/2 && out1==n/2)
    {
        cout << "BOTH"<<endl;
    }
    if(out!=n/2 && out1!=n/2)
    {
        cout << "NO"<<endl;
    }}
    return 0;
}
