#include<bits/stdc++.h>
using namespace std;


bool ok[252];
int dp[10002];

int main(){
	int t,n,m,left,right;
	string s,s2;
	int ans;
	cin >> t;
	
	while(t--){
		memset(ok, false, sizeof(ok));
		cin >> n >> m >> left >> right;
		cin >> s >> s2;
		
		for(int i=0;i<s2.size();i++){
			ok[s2[i]] = true;
		}
		
		dp[0] = 0;
		ans = 0;
		for(int i=1;i<=n;i++){
			dp[i] = dp[i-1] + ok[s[i-1]];
		}
		
		for(int i=1;i<=n;i++){
			int lf,rt,md,fs=-1,sc=n+1;
			lf = i, rt = n, md = -1;
			
			while(lf<=rt){
				md = (lf+rt)/2;
				int val = dp[md] - dp[i-1];
				if(val>=left){
					fs = md;
					rt = md-1;
				}
				else if(val<left) lf = md+1;
			}
			
			if(fs == -1 ) continue;
			lf = i,rt = n, md = -1;
			while(lf<=rt){
				md = (lf+rt)/2;
				int val = dp[md] - dp[i-1];
				if(val>right){
					sc = md;
					rt = md-1;
				}
				else lf = md+1;
			}
			
			ans += sc-fs;
		}
		
		cout << ans << endl;
	}
	
	return 0;
}