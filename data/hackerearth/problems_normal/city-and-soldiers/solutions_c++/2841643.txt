#include<bits/stdc++.h>
using namespace std;
int a[100001],n,q;
int root(int x)
{
    if(a[x]==x)
        return x;
    else
        a[x]=root(a[x]);
    return a[x];
}
int main()
{
    int i,j,k,type,x,y;
    scanf("%d",&n);
    for(i=1;i<=n;i++)
        a[i]=i;
    scanf("%d",&q);
    while(q--)
    {
        scanf("%d",&type);
        if(type==1)
        {
            scanf("%d",&x);
            scanf("%d",&y);
            x=root(x);
            y=root(y);
            a[x]=y;
        }
        else if(type==2)
        {
            scanf("%d",&x);
            y=root(x);
            a[y]=x;
            a[x]=x;
        }
        else if(type==3)
        {
            scanf("%d",&x);
            y=root(x);
            printf("%d\n",y);
        }
    }
}
