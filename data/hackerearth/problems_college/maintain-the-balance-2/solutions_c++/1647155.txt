#include <iostream>
#include<stack>
using namespace std;

int main()
{
    string str;
    char ch;
    stack<char> st;
    int t,c,i,count;
    cin>>t;
    while(t--)
    {
    	getline(cin,str,'.');
    	c=0;
    	for(i=0;i<str.size();i++)
    	{
    		
    		if(str[i]=='{')
    		  st.push('{');
    		else if(str[i]=='}'&& !st.empty() && st.top()=='{')
    		{
    			   st.pop();	   
    		}
    		else if(str[i]=='}')
    		{
    			c++;
    			st.push('{');
    		}
    	}
    	
    	if(st.empty())
          cout<<"0\n";
        else
        {
            count=0;
        	while(!st.empty())
        	{
        		count++;
        		st.pop();
        	}
        	//cout<<count<<" ";
        	if(count%2==0)
        	{
        		cout<<c+count/2<<endl;
        	}
        	else
        	  cout<<"-1\n";
        }
       }
    return 0;
}

