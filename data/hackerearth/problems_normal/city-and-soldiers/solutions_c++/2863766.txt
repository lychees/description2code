#include <bits/stdc++.h>
using namespace std;
int par[100005];

int find_par(int x)
{
    if(par[x]==x)
        return x;
    return par[x]=find_par(par[x]);
}

void uni(int a,int b)
{
	int p1=find_par(a);
	int p2=find_par(b);
	if(p1==p2)
	return ;
	par[p1]=p2;
}

int n,q,a,b,ch,i;
int main()
{
   scanf("%d %d",&n,&q);
   
   for(i=1;i<=n;i++)
   	par[i]=i;
   	
   while(q--)
   {
   	scanf("%d",&ch);
   	switch(ch)
   	{
   		case 1: scanf("%d %d",&a,&b);
   				uni(a,b);
   				break;
   		case 2: scanf("%d",&a);
   				par[find_par(a)]=a;
   				par[a]=a;
   				break;
   		case 3: scanf("%d",&a);
   				printf("%d\n",find_par(a));
   	}
   }
    return 0;
}
