#include <iostream>
#include <cstdio>
#include <algorithm>
using namespace std;

int bitcounts(int n){
	int count=0;
	while(n){
		n=n&(n-1);
		count++;
	}
	return count;
}
int main()
{
    int t,n,k,maxcakes=0;
    scanf("%d",&t);
    while(t--){
    	maxcakes=0;
    	scanf("%d%d",&n,&k);
    	int a[n],b[n],c[n];
    	for(int i=0;i<n;i++){
    		scanf("%d",&a[i]);
    		b[i]=bitcounts(a[i]);
    	}
    	sort(b,b+n);
    	for(int i=n-1;i>=n-k;i--){
    		maxcakes+=b[i];
    	}
    	printf("%d\n",maxcakes);
    }
    return 0;
}
