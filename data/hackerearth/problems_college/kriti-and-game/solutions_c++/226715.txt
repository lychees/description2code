#include<iostream>
#include<algorithm>
using namespace std;
//-------------------------------------
long long dp[100001];
#define MOD 10000007
int main()
{
	int k,s;
	cin>>k>>s;
	int arrk[k+1];
	int arrs[s+1];
	for(int i=0;i<k;i++)
		cin>>arrk[i];
	sort(arrk,arrk+k);
	for(int i=0;i<s;i++)
		cin>>arrs[i];
	sort(arrk,arrk+k);
	sort(arrs,arrs+s);
	int q;
	cin>>q;
	
	char ans[100000][3];
	for(int i=0;i<100000;i++)
	{
		for(int j=0;j<2;j++)
		{
			ans[i][j]='u';
		}
	}
	
	for(int i=0;i<k;i++)
		ans[arrk[i]][0]='w';
	for(int i=0;i<s;i++)
		ans[arrs[i]][1]='w';
		
	for(int i=0;i<arrk[0];i++)
		ans[i][0]='l';
	
	for(int i=0;i<arrs[0];i++)
		ans[i][1]='l';
		
	for(int i=0;i<100000;i++)
	{
		if(ans[i][0]=='u')
		{
			for(int j=0;j<k;j++)
			{
				if(i<arrk[j])
					break;
				if(ans[i-arrk[j]][1]=='l')
				{
					ans[i][0]='w';
					break;
				}
			}
			if(ans[i][0]=='u')
				ans[i][0]='l';
		}
		
		if(ans[i][1]=='u')
		{
			for(int j=0;j<s;j++)
			{
				if(i<arrs[j])
					break;
				if(ans[i-arrs[j]][0]=='l')
				{
					ans[i][1]='w';
					break;
				}
			}
			if(ans[i][1]=='u')
				ans[i][1]='l';
		}
	}
	
	while(q--)
	{
		int n;
		char c;
		cin>>n>>c;
		if(c=='K')
		{
			if(ans[n][0]=='l')
				cout<<"YES\n";
			else
				cout<<"NO\n";
		}
		if(c=='S')
		{
			if(ans[n][1]=='w')
				cout<<"YES\n";
			else
				cout<<"NO\n";
		}
	}
}