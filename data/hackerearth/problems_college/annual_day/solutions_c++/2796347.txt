#include<iostream>
#include<algorithm>
using namespace std;
int bin(int a)
{
	int c=0;
	while(a>0)
	{
		c++;
		a=a&a-1;
	}
	
	return c;
}
int main()
{
	int tc;
	cin>>tc;
	while(tc--)
	{
		int n,k,i,a;
		cin>>n>>k;
		int arr[n];
		long long sum=0;
		for(i=0;i<n;i++)
		{
			cin>>a;
			arr[i]=bin(a);
			//cout<<arr[i]<<" ";
		}
		sort(arr,arr+n);
		for(i=n-k;i<n;i++)
		{
			sum+=arr[i];
		}
		cout<<sum<<endl;
	}
}