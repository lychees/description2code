#include<iostream>
#include<cstdio>
using namespace std;
long long int power(long long int a,long  long int b,long long int MOD){
			if(b==0) return 1;
			long long int d=power(a,b/2,MOD)%MOD;
			return (((d*d)%MOD)*((b&1?a:1)%MOD))%MOD;}
			
int main(){
	int t;
	scanf("%d",&t);
	while(t--){
		long long int n,p;
		scanf("%lld%lld",&n,&p);
		if(3*n-p>0) {printf("0\n");continue;}
		long long int i,fact=1,req;
		req=p-1;
		for(i=3*n+1;i<p;i++)
		req=((req)*power(i,p-2,p))%p;
		
		req=(req*power(power(6,n,p),p-2,p))%p;
		printf("%lld\n",req);
	}
	return 0;
}