#include<bits/stdc++.h>
using namespace std;
inline void fast_and_furious() {
	ios_base::sync_with_stdio(0);
	cin.tie(NULL);cout.tie(NULL);
}

typedef long long ll;
const int N=100005;

int n,k,i,j,flag,ans,p;
int a[6][1005],pre[6][1005],f[1005];
int main()
{
  cin>>n>>k;
  for (i=1;i<=k;i++)
    for (j=1;j<=n;j++){
      cin>>a[i][j];
      pre[i][a[i][j]]=j;
    }
  for (i=1;i<=n;i++){
    f[i]=1;
    for (j=1;j<i;j++){
      flag=1;
      for (p=2;p<=k;p++)
        if (pre[p][a[1][j]]>pre[p][a[1][i]]) flag=0;
      if (!flag) continue;
      f[i]=max(f[i],f[j]+1);
    }
    ans=max(f[i],ans);
  }  
 cout<<ans;
 return 0;
}