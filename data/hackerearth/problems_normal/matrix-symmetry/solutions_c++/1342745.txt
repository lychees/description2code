#include <iostream>
using namespace std;

int main()
{
 	int t;
 	cin>>t;
 	int n;
 	char arr[50][50];
 	while(t--)
 	{
 		cin>>n;
 		for(int i=0;i<n;i++)
 			for(int j=0;j<n;j++)
 				cin>>arr[i][j];
 				
// 		Check for Horizontal
		bool horizontal = true;
 		for(int i=0;i<(n/2);i++)
 		{
 			for(int j=0;j<n;j++)
 				if(arr[i][j] != arr[n-i-1][j])
 				{
 					horizontal = false;
 					break;
 				}
 			if(!horizontal)
 				break;
 		}
 		
// 		Check for Vertical
		bool vertical = true;
 		for(int i=0;i<(n/2);i++)
 		{
 			for(int j=0;j<n;j++)
 				if(arr[j][i] != arr[j][n-i-1])
 				{
 					vertical = false;
 					break;
 				}
 			if(!vertical)
 				break;
 		}
 		
 		
 		if(horizontal && vertical)
 			cout<<"BOTH";
 		else if(horizontal)
 			cout<<"HORIZONTAL";
 		else if(vertical)
 			cout<<"VERTICAL";
 		else
 			cout<<"NO";
 		cout<<endl;
 	}
 	return 0;
}
