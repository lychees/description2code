#include<bits/stdc++.h>
using namespace std;
#define f first
#define s second
#define pii pair<int,int>
#define mp make_pair
#define pb push_back
#define ll long long
#define mod 1000000007LL
ll modulo(ll a,ll b,ll c)
{
    ll x=1LL,y=a; // long long is taken to avoid overflow of intermediate results
    while(b > 0LL)
    {
        if(b%2LL == 1LL)
        {
            x=(x*y)%c;
        }
        y = (y*y)%c; // squaring the base
        b /= 2LL;
    }
    return x%c;
}

int main()
{
    string s;
    cin>>s;
    int i,j,n=s.size();
    ll ans=0LL,u=0LL,fac=0LL,tot=0LL;
    for(i=0; i<n; i++)
    {
        if(s[i]==';')
        {
            for(j=i;j<n;j++)
                if(s[j]=='_')
                    break;
            ans=ans+(ll)(j-i)*(ll)(u-tot);
            fac=(ll)(j-i);
            tot+=(ll)(j-i);
            i=j-1;
        }
        else
        {
            for(j=i;j<n;j++)
                if(s[j]==';')
                    break;
            u=((u+fac)*modulo(2LL,(ll)(j-i),mod))%mod;
            i=j-1;
        }
        //printf("%d\n",i);
        u%=mod;
        fac%=mod;
        ans%=mod;
    }
    printf("%lld\n",ans);

    return 0;
}
