#include<bits/stdc++.h>
using namespace std;
#define ll int
#define xx first
#define yy second
#define mod 1000000007
#define pb push_back
ll modpow ( ll a , ll b )
{
ll res =1;
while ( b )
{
if ( b &1) res =( res * a )  ;
a =( a * a ) ;
b >>=1;
}
return res ;
}
ll n,m,i,j,k,ans=0,sum=0,x,y,t,r,h,w,b,c,d,z;
vector<ll> v,q,p;
vector<vector<ll> >v1;
stack<ll> s;
void dfs(ll x){
  q[x]=1;
  ll y= v[x];
  if(q[y]==-1)dfs(y);
  s.push(x);

}
ll dfs2(ll x,vector<ll> &p){
  ll count=1;
  p.pb(x);
  q[x]=1;
  for(ll i =0;i<v1[x].size();i++){
    if(q[v1[x][i]]==-1){
      count+=dfs2(v1[x][i],p);
    } 
  }
  
  return count;
}
void dfs3(ll x){
  ll y = v[x];
  if(p[y]==-1)dfs3(y);
  p[x]=1+p[y];
}
int main(){
  
 
    scanf("%d",&t);
    while(t--){
      scanf("%d",&n);
      v.clear();
      v.resize(n);
      v1.clear();
      v1.resize(n);
      q.clear();
      q.resize(n,-1);
      p.clear();
      p.resize(n,-1);
      for(i=0;i<n;i++){
        scanf("%d",&v[i]);
        v1[v[i]].pb(i);
      }
      for(i=0;i<n;i++){
        if(q[i]==-1)dfs(i);
      }
      q.clear();
      q.resize(n,-1);
      while(!s.empty()){
        x=s.top();
        s.pop();

        if(q[x]==-1){
          vector<ll> l;
          ll y = dfs2(x,l);
          if(y==1){
            if(v[x]==x){
              p[x]=1;
            }
          }
          else {
            for(i=0;i<y;i++){
              p[l[i]]=y;
            }
            
          }
        }
      }
      ans=0;sum=0;
      for(i=0;i<n;i++){
        if(p[i]==-1){
         dfs3(i);
        }
        x=p[i];
        if(x>sum){
            ans=i;sum=x;
          }
      }
      printf("%d\n",ans);

    }
    
  return 0;
    
    
}