#include <iostream>
using namespace std;

int N,M,f[100010],sz[100010],u[100010],v[100010],K,ans[100010];

int fth(int x){
    if (f[x]==x) return x;
    return (f[x]=fth(f[x]));
}

bool comb(int x, int y){
    x=fth(x),y=fth(y);
    if (x==y) return 0;

    if (sz[x]<sz[y]) f[x]=y;
    else f[y]=x;

    if (sz[x]==sz[y]) sz[x]++;
    return 1;
}

int main(){
    cin >> N >> M;

    int i;
    for (i=1; i<=N; i++) f[i]=i;
    for (i=1; i<=M; i++) cin >> u[i] >> v[i];

    for (i=M; i>0; i--)
        if (!comb(u[i],v[i])) ans[++K]=i;

    cout << K << "\n";
    for (i=K; i>0; i--) cout << ans[i] << "\n";

    return 0;
}