#include <iostream>
#include <algorithm>
#include <cmath>
#include <cstdio>
#include <set>
#include <map>
#include <vector>
#include <queue>
#include <string>
#include <iomanip>

using namespace std;
typedef long long ll;

ll big = 1000000007ll;
ll bp = 1168195727ll;



ll m,n,k;

std::vector<std::vector<ll> > C(100001 , std::vector<ll>());
std::vector<ll> A;
std::vector<ll> B;
std::vector<ll> deg;

std::vector<ll> mark;

std::vector<ll> T;

std::vector<ll> tid;

ll oth(ll i,ll a)
{
    if(A[i] == a){return B[i];}else{return A[i];}
}

ll bfs()
{

    std::queue<ll> Q;
    ll t=0;
    ll a,b,c,d;
    mark[0]=1;
    tid[0]=0;
    ll c1;
    for(c1=0;c1<deg[0];c1++)
    {
        if(T[C[0][c1]] > 0){
        a=oth(C[0][c1],0);
        Q.push(a);
        mark[a]=1;;
        tid[a]=1;
        }
    }

    while(Q.size() != 0)
    {

        a=Q.front();
        Q.pop();
        //std::cout << a << "\n";
        for(c1=0;c1<deg[a];c1++)
    {
        b=oth(C[a][c1],a);



        if(T[C[a][c1]] > tid[a] && mark[b]==0){
        Q.push(b);

        mark[b]=1;
        tid[b]=tid[a]+1;
        }
    }



    }


    return tid[n-1];


}


int main()
{
    ll c1,c2,c3,c4,c5,c6;
    ll a,b;
    std::cin >> n >> m >> k;
    for(c1=0;c1<n;c1++){deg.push_back(0);mark.push_back(0);tid.push_back(-1);}
    for(c1=0;c1<m;c1++)
    {
        std::cin >> a >> b;
        a--;
        b--;
        A.push_back(a);
        B.push_back(b);
        C[a].push_back(c1);
        C[b].push_back(c1);
        deg[a]++;
        deg[b]++;
        T.push_back(13333337ll);
    }
    for(c1=0;c1<k;c1++)
    {
        std::cin >> a >> b;
        b--;
        T[b]=a;
    }
    std::cout << bfs() << "\n";


    return 0;
}
