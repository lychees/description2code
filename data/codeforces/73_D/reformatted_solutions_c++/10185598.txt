// Be name Doost

#include <algorithm>
#include <cmath>
#include <cstdio>
#include <cstring>
#include <iostream>
#include <map>
#include <queue>
#include <set>
#include <stack>
#include <vector>

using namespace std;

int n, m, k, a, b, ans;
vector<int> adj[1000002];
bool vis[1000002];

void DFS(int r) {
  vis[r] = 1;
  a++;
  for (int i = 0; i < adj[r].size(); i++) {
    if (!vis[adj[r][i]])
      DFS(adj[r][i]);
  }
}

int main() {
  cin >> n >> m >> k;
  for (int i = 0; i < m; i++) {
    scanf("%d%d", &a, &b);
    adj[a].push_back(b);
    adj[b].push_back(a);
  }
  b = 0;
  for (int i = 1; i <= n; i++)
    if (!vis[i]) {
      a = 0;
      DFS(i);
      ans += min(k, a);
      b++;
    }
  ans = max(0, ans);
  if (k == 1)
    printf("%d", max(0, b - 2));
  else
    printf("%d", max(0, b - 1 - ans / 2));
  return 0;
}
