  	#include<bits/stdc++.h>
     
    using namespace std;
     
    #define M 1000000007
    #define N 100000
     
    typedef long long ll;
    ll f[N + 5];
     
    ll p(ll a, ll b) 
    {
    	if (b == 0) 
    		return 1;
    	ll q = p(a,b/2) % M;
    	if (b % 2 == 0) 
    		return (q * q)%M;
    	else 
    		return (a * ((q * q) % M)) % M;
    }
    int main()
    {
    	ios_base::sync_with_stdio(true);
    	f[0] = 1;
    	f[1] = 1;
    	for (int i = 2; i <= N; i++) {
    		f[i] = (i * f[i-1]) % M; 
    	}
     
    	int n;
    	cin>>n;
    	ll sum = 0, prod = 1, prod1 = 1;
    	while (n--) {
    		int m;
    		cin>>m;
    		sum += m;
    		prod = (prod * f[m]) % M;
    		map <int, int> count;
    		map <int, int> :: iterator j;
    		for (int i = 0 ; i < m ; i++) {
    			int a;
    			cin>>a;
    			count[a]++;
    		}
    		ll tmp = 1;
    		for (j = count.begin(); j != count.end(); j++) {
    			tmp = (tmp * f[j->second]) % M;
    		}
    		// cout<<"p1 = "<<prod1<<endl;
    		prod1 = (prod1 * tmp) % M;
    	}
    	// cout<<sum<<" "<<prod1<<" "<<prod<<endl;
    	ll ans = (f[sum] * prod1) % M;
    	ll mod_inv =  p(prod,M-2) % M;
    	ans = (ans * mod_inv) % M;
    	cout<<ans<<endl;
    	return 0;
    }