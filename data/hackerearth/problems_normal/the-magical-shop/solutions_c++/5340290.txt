#include <cstdio>
using namespace std;

void potMain()
{
    int A, B;
    scanf("%d%d", &A, &B);
    char days[1000001];
    scanf("%s", days);
    unsigned long long potions = 0;
    unsigned long long potStore[1000001];

    potStore[0] = A % B;
    for(int i = 0; days[i] != '\0'; i++)
    {
    	unsigned long long cur = potStore[i];
        potStore[i+1] = (cur * cur) % B;
        if(days[i] == '1')
        {
        	potions += cur;
        	potions %= B;
        }
    }

    printf("%llu\n", potions);
}

int main()
{
    potMain();
    return 0;
}

