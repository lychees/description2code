#include <iostream>
using namespace std;

int main()
{
    long int t,n,v[520];
    long int mx;
    long int rsum[520]; //max one way sum with root at this node
   
    cin>>t;
    for(int i=0;i<t;i++)
    {
    	cin>>n;
    	for(int j=0;j<n;j++)
    		cin>>v[j];
    	mx = -5e6;
    	for(int j=n-1; j>=0; j--)
    	{
    		long int maxOneway = 0;
    		long int maxTwoway = v[j];
    		if(2*j+1 < n)
    		{
    			maxTwoway += rsum[2*j+1 ];
    			maxOneway =  rsum[2*j+1 ];
    		}
    		
    		if(2*j+2 < n)
    		{
    			maxTwoway += rsum[2*j+2 ];
    			maxOneway = max(maxOneway, rsum[2*j+2]);
    		}
    		maxOneway += v[j];
    		rsum[j] = maxOneway;
    		mx = max(mx, maxTwoway);
    	}
    	
    	cout<<mx<<endl;
    }
    return 0;
}
