#include<iostream>
#include<cstdio>
#include<vector>
#include<algorithm>

using namespace std;

int a[102];

vector <int> adj[102];

int vis[102];

vector <int> id,val;


void dfs(int node)
{
     int i;
     
     id.push_back(node);
     val.push_back(a[node]);
     
     for(i=0;i<adj[node].size();i++)
     {
         if(!vis[adj[node][i]])
         {
           vis[adj[node][i]] = 1;
           dfs(adj[node][i]);
         }
     }
}
char s[102][102];

int main()
{
    int i,n,m,j;
              scanf("%d",&n);
              for(i=0;i<n;i++)
              {
                 scanf("%d",&a[i]);
              }
              //cout<<"A";
              for(i=0;i<n;i++)
              scanf("%s",s[i]);
              int u,v;
              
              for(i=0;i<n;i++)
              {
              	for(j=0;j<n;j++)
              	{
              		if(s[i][j]=='Y')
              		adj[i].push_back(j);
              	}
              }
              
              
              
              for(i=0;i<n;i++)
              {
                 
                 if(!vis[i])
                 {
                    
                    id.clear();
                    val.clear();
                    
                    vis[i] = 1;
                    dfs(i);
                    
                    sort(id.begin(),id.end());
                    sort(val.begin(),val.end());
                    
                    for(j=0;j<id.size();j++)
                    {
                        a[id[j]] = val[j];      
                    }       
                 
                 }
              }
              //cout<<"O";
              for(i=0;i<n;i++)
              {
                 printf("%d ",a[i]);
              }
              printf("\n");
        
    return 0;
}
