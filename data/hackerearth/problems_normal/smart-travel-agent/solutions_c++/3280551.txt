#include <bits/stdc++.h>
using namespace std;
int main()
{
	int n,m,t,s,d,x,y,z;
	scanf("%d%d",&n,&m);
	vector<pair<int,int> >v[n+1];
	for(int i=1;i<=m;i++)
	{
		scanf("%d%d%d",&x,&y,&z);
		v[x].push_back(make_pair(y,z));
		v[y].push_back(make_pair(x,z));
		
	}
	scanf("%d%d%d",&s,&d,&t);
	int par[n+1];
	memset(par,0,sizeof par);
	
	queue<int>q;
	q.push(s);
	int visit[n+1];
	memset(visit,0,sizeof visit);
	visit[s]=INT_MAX;
	par[s]=-1;
	while(!q.empty())
	{
		int x=q.front();
		q.pop();
		for(int i=0;i<v[x].size();i++)
		{
			pair<int,int>node=v[x][i];
			int a=node.first;
			int p=node.second;
			
			if(min(visit[x],p)>visit[a])
			{
				visit[a]=min(visit[x],p);
				q.push(a);
				par[a]=x;
			}
		}
	}
	vector<int>res;
	res.push_back(d);
	int k=par[d];
	while(par[k]>0)
	{
		res.push_back(k);
		k=par[k];
	}
	res.push_back(s);
	for(int i=res.size()-1;i>=0;i--)
	{
		cout<<res[i]<<" ";
	}
	cout<<"\n";
	int x1=visit[d]-1;
	cout<<ceil(t/(x1*1.0));
	return 0;
}