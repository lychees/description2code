

    #include <iostream>
    using namespace std;
     
    long long a, b, c;
    long long A1, A2, B1, B2;
    long long uno, dos, tresA, tresB;
    int indA1, indA2, indB1, indB2;
    long long menorA1, menorA2, menorB1, menorB2;
    	
    void generar(int n ){//long int A[], long int B[], int n){
    	A1 = (a*c) %1000000007;
    	menorA1 = A1;
    	menorA2 = 1000000006;
        indA1 = 1;
        indA2 = 0;
        uno = (a*b) % 1000000007;
        dos = (uno * c) % 1000000007;
        tresA = A1;  
        B1 = (b*c)%1000000007;
        menorB1 = B1;
        menorB2 = 1000000006;
        indB1 = 1;
        indB2 = 0;
        tresB = B1;
          
    	for(int i=2 ; i<=n ; i++)
    	{
        	A2 = (A1*(( uno + dos + tresA )%1000000007)) % 1000000007;
        	//A[i] = A[i]%1000000007;
        	if(A2 < menorA1){
        		menorA2 = menorA1;
        		indA2 = indA1;
        		menorA1 = A2;
        		indA1 = i;
        	}else{
        		if(A2 < menorA2){
        			menorA2 = A2;
        			indA2 = i;
        		}
        	}
    		A1 = A2;
    		B2 = (B1*((uno + dos + tresB)%1000000007)) %1000000007;
    	 	//B[i] = B[i]%1000000007;
    	 	if(B2 < menorB1){
        		menorB2 = menorB1;
        		indB2 	= indB1;
        		menorB1 = B2;
        		indB1 	= i;
        	}else{
        		if(B2 < menorB2){
        			menorB2 = B2;
        			indB2 	= i;
        		}
        	}
        	B1 = B2;
     	} 
    }
     
    int main()
    {
    	int  n;
    	long int menor;
    	cin >> a >> b >> c >> n;
        a = a % 1000000007;
        b = b % 1000000007;
        c = c % 1000000007;
        //cout << a << " "<< b <<" "<< c <<" "<< n <<endl;
    	//long int A[n+1]; long int B[n+1];
    	//generar(A, B, n);
    	generar(n);
    	menor = 1000000006;
    	//cout << "menores " << menorA1 <<", "<<menorA2<<", "<< menorB1 << ", " << menorB2 << endl;
        //cout << "indices " << indA1 <<", "<<indA2<<", "<< indB1 << ", " << indB2 << endl;
        
    	if(indA1 != indB1) 
            menor = 	(menorA1 + menorB1)%1000000007;
    	else{ 
     
    		if((menorA1 + menorB2) %1000000007 < (menorA2 + menorB1) %1000000007 ) 
                menor = (menorA1 + menorB2) %1000000007;
            else menor = (menorA2 + menorB1) %1000000007 ;
    		if(indA2 != indB2)
    			if((menorA2 + menorB2) %1000000007 < menor)
                    menor =  (menorA2 + menorB2) %1000000007 ;
    	}
        cout << menor << endl;
        return 0;
    }