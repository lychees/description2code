#include <stdio.h>
int main()
{
	int t,n,m,maxr,maxc;
	scanf("%d",&t);
	while(t--)
	{
		scanf("%d %d",&n,&m);
		long long int arr[n][m],brr[n][m],r[n],c[m],count;
		for(int i=0; i<n; ++i)
		{
			for(int j=0; j<m; ++j)
			{
				scanf("%lld",&arr[i][j]);
			}
		}
		for(int k=0; k<m; ++k)
		{
			maxc=0;
			for(int i=0; i<n; ++i)
			{
				if(arr[i][k]>maxc)
					maxc=arr[i][k];
			}
			c[k]=maxc;
		}
		for(int i=0; i<n; ++i)
		{
			maxr=0;
			for(int j=0; j<m; ++j)
			{
				scanf("%lld",&brr[i][j]);
				if(brr[i][j]>maxr)
					maxr=brr[i][j];
			}
			r[i]=maxr;
		}
		
		count=0;
		for(int i=0; i<n; ++i)
		{
			for(int j=0; j<m; ++j)
			{
				if(brr[i][j]>=r[i] && arr[i][j]>=c[j])
					count++;
			}
		}
		
		printf("%lld\n",count);
	}
	
}
