#include <iostream>
#include <bits/stdc++.h>
using namespace std;
int calc(long long m, long long n)
{
	double d = floor(((double)log(n)/(double)log(m)));
	return (int)d;
}
long long po(long long m,int x) //m^x
{
	long long prod=1;
	while(x>0)
	{
		if(x%2==1)
		{
			prod=prod*m;
		}
		x=x/2;
		m=m*m;
	}
	return prod;
}
int main()
{
    int t;
    scanf("%d",&t);
    while(t--)
    {
    	long long n,m;
    	scanf("%lld %lld",&n,&m);
    	
    	if(m>n || m==1)
    	printf("%lld\n",n);
    	else if(m==n)
    	printf("1\n");
    	else
    	{
    		long long c=0;
    		while(n>0)
    		{
    			int x=calc(m,n);
    			long long p=po(m,x);
    			c= c+ n/p;
    			n=n%p;
    			
    			
    		}
    		printf("%lld\n",c);
    	}
    }
    return 0;
}
