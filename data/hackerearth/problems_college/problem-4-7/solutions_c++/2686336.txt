#include <algorithm>
#include <vector>
#include <stack>
#include <queue>
#include <map>
#include <set>
#include <utility>
#include <algorithm>
#include <sstream>
#include <iostream>
#include <cstdio>
#include <cmath>
#include <cstring>
#include<iomanip>
#include <climits>
#define LLMAX 1000000000000000000
#define LL long long
#define LD long double
#define mod 1000000007
#define fore(a,b,c)  for(int a=b;i<c;i++)
#define pb push_back
#define fs first
#define sc second
#define mp make_pair

#define sq 317

using namespace std;

multimap <pair <int,int>,int> m[sq];


// use pass by reference for faster result but make adjustments carefully.

int dp[100001];
int main () {

    ios_base::sync_with_stdio(false);
   // freopen("input1.txt","r",stdin);
   int n,t;
   string s;
   cin >> n >> t >> s;


   map <pair<char,char>,int> m;

   string ts;
   int val;

   for(int i=0;i<t;i++){
    cin >> ts >> val;
    pair <char,char> pp = make_pair(ts[0],ts[1]);
    m[pp] = max(m[pp],val);
   }

   if(n==1){
     cout << "1";
    return 0;
   }

   dp[0] = 1;
    pair <char,char> pp = make_pair(s[0],s[1]);
   dp[1] = max(2,m[pp]);
   //// cout << dp[1] << endl;
   
    for(int i=2;i<n;i++){
        pp = make_pair(s[i-1],s[i]);
       // // cout << m[pp] << " ";
        dp[i] = max(dp[i-1]+1,dp[i-2]+m[pp]);
      //  // cout << dp[i] << endl;
   }

     cout << dp[n-1];


    return 0;

}
