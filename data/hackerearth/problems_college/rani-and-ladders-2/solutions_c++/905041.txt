#include <iostream>
#include <climits>
#include <cstring>
using namespace std;

int dp[160010];
int lad[500];
int bottom[160010];
int upper[160010];
int main()
{
	int t,n,l,b,u;
	cin>>t;
	while(t--){
	cin>>n>>l;
	for(int i=1;i<=l;++i)
	{
		cin>>b>>u;
		bottom[u]=i;
		//upper[u]=i;
		//lad[i][0]=b;
		lad[i]=b;
	}
	dp[n]=0;
	dp[n-1]=n;
	for(int i=n-2;i>=1;i--)
	{
		if(dp[i]!=0) continue;
		dp[i]=INT_MAX;
		for(int j=i+2;j<=n && j<=i+12;++j)
		{
			dp[i]=min(dp[i],dp[j]);
		}
		dp[i]++;
		if(bottom[i]!=0)
		{
			dp[lad[bottom[i]]]=dp[i];
		}
		//cout<<i<<" "<<dp[i]<<endl;
	}
	cout<<dp[1]<<endl;
	memset(dp,0,sizeof(dp));
	memset(bottom,0,sizeof(bottom));
	memset(lad,0,sizeof(lad));
	}
    return 0;
}
