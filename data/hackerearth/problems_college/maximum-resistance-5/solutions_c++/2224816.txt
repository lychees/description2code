#include <iostream>
#include <stack>
#include <vector>
#include <algorithm>
using namespace std;

int main()
{
    int t;
    cin>>t;

    while(t--){
   		string s;
   		cin>>s;
   		stack<int> st;
		int count = 0,i,a,b;

		for(i = s.length()-1;i>=0;--i){
			if(s[i] == 'X'){
				st.push(1);
                ++count;
			}
			else if(s[i] == 'A'){
                a = st.top();
				st.pop();
				a += st.top();
				st.pop();
				st.push(a);
			}
			else{
				a = st.top();
				st.pop();
				a = max(a, st.top());
				st.pop();
				st.push(a);

			}
		}
		vector<int> vt(count);
		for(int i =0;i<count;i++)
			cin>>vt[i];
		sort(vt.begin(),vt.end(),greater<int>());
		int ans = 0;

		for(int i = 0;i<st.top();i++){
			ans+=vt[i];
		}
		cout<<ans<<endl;

    }
    return 0;
}
