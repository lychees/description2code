#include <iostream>
#include <queue>
#include <algorithm>
#include <climits>
#include <cstdio>
#include <cstdlib>
#include <cmath>
#include <fstream>
#include <string.h>
#include <vector>
#include <set>
#include <stdlib.h>
#include <set>
#include <map>
#define ll long long int
#define IN_M 1061109567
#define get getchar

using namespace std;

int main()
{
	ll n;
	ll q;
	
	cin >> n >> q;
	
	ll arr[105][105];
	
	for (ll i = 1; i <= n; i++) {
		
		for (ll j = 1; j <= n; j++) {
			cin >> arr[i][j];		
		}
	}
	
	while (q--) {
		ll n1;
		
		cin >> n1;
		
		n1 = n1 / 90;
		n1 = n1 % 4;
		
		
		if (n1 == 1) {
			for (ll j = 1; j <= n; j++) {
		
				for (ll i = n; i >= 1; i--) {
					cout << arr[i][j] << " ";		
				}
				
				cout << endl;
			}
			cout << endl;
		}
		
		else if (n1 == 2) {
			for (ll i = n; i >= 1; i--) {
		
				for (ll j = n; j >= 1; j--) {
					cout << arr[i][j] << " ";		
				}
				
				cout << endl;
			}
			cout << endl;
			
		}
		
		else if (n1 == 3) {
			for (ll j = n; j >= 1; j--) {
		
				for (ll i = 1; i <= n; i++) {
					cout << arr[i][j] << " ";		
				}
				
				cout << endl;
			}
			cout << endl;
		}
		
		else if (n1 == 0) {
			
			for (ll i = 1; i <= n; i++) {
		
				for (ll j = 1; j <= n; j++) {
					cout << arr[i][j] << " ";		
				}
				
				cout << endl;
			}
			cout << endl;
			
		}
		
	}
	return 0;
}
