#include<iostream>
#include<stdio.h>
#define ll long long
#define upperlimit 1000005
#define segment 100005
using namespace std;
bool prime[upperlimit+1];
int primes[upperlimit/10];
ll phi[segment+1];
ll t[segment+1];
int main()
{
    int i,j,k=1;
    primes[0]=2;
    for(i=3;i*i<upperlimit;i+=2)
        if(!prime[i])
            for(j=i*i;j<=upperlimit;j+=2*i)
                prime[j]=true;
    for(i=3;i<upperlimit;i+=2)
        if(!prime[i])primes[k++]=i;
    ll a,b;
    int temp;
    double ans;
    int count;
    int ts,in;
    cin>>ts;
    while(ts--){
	    scanf("%lld%lld%d",&a,&b,&in);
	    count=0;
	    int gap = (int)(b-a);
	    // cout<<a%primes[3];
	    for(i=0;i<=gap;i++){
	        phi[i]=i+a;
	        t[i]=i+a;
	    }
	    for(i=0;i<k;i++)
	    {
	    	if((ll)primes[i]*primes[i]>b)break;
	        temp = (int)(a%primes[i]);
	        temp = (primes[i]-temp)%primes[i];
	        // cout<<(a%primes[i])<<"\n";
	        for(j=temp;j<=gap;j+=primes[i]){
	            phi[j] = (phi[j]/primes[i])*(primes[i]-1);
	            while(t[j]%primes[i]==0)t[j]/=primes[i];
	        }
	    }
	    for(i=0;i<=gap;i++)
	    {
	        if(t[i]>1)phi[i] = (phi[i]/t[i])*(t[i]-1);
	        if(phi[i]%in==0)count++;
	    }
	    ans = (1.0*count)/(gap+1);
	    printf("%.6f\n",ans);
    }
}