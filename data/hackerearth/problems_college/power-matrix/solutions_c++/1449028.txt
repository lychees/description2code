#include<stdio.h>
#include<stdlib.h>
long long int mod = 1000000007;
long long int** powerofmatrix(long long int**,long long int m,long long int n);
long long int** powerofmatrix(long long int **a,long long int m,long long int n){
   long long int i,j,k,**b,**c,**d,sum;
        if(n==1){
                return(a);
        }
        b=powerofmatrix(a,m,n/2);
        c=(long long int**)malloc(m*sizeof(long long int*));
        d=(long long int**)malloc(m*sizeof(long long int*));
        for(i=0;i<m;i++){
            c[i]=(long long int*)malloc(m*sizeof(long long int));
            d[i]=(long long int*)malloc(m*sizeof(long long int));
        }
        for (i = 0; i < m; i++) {
             for (j = 0; j < m; j++) {
                  sum = 0;
                  for (k = 0; k < m; k++) {
                        sum = sum + b[i][k] * b[k][j];
                        sum%=mod;
                  }
                  c[i][j] = sum;
              }
        }
        b=c;
        if(n%2==1){
                for (i = 0; i < m; i++) {
                     for (j = 0; j <m; j++) {
                        sum = 0;
                        for (k = 0; k < m; k++) {
                            sum = sum + c[i][k] * a[k][j];
                            sum%=mod;
                         }
                        d[i][j] = sum;
                     }
                }
               b=d;
        }
        return(b);
}
int main()
{
        long long int **a,**b,t,i,j,n,m,s1,s2,s;
        scanf("%lld",&t);
        while(t--){
        	 scanf("%lld%lld",&m,&n);
             a=(long long int**)malloc(m*sizeof(long long int*));
                 b=(long long int**)malloc(m*sizeof(long long int*));
            for(i=0;i<m;i++){
                  a[i]=(long long int*)malloc(m*sizeof(long long int));
                  b[i]=(long long int*)malloc(m*sizeof(long long int));
            }
          
           for(i=0;i<m;i++){
           	for(j=0;j<m;j++){
           		scanf("%lld",&a[i][j]);
        	}
          }
          a=powerofmatrix(a,m,n);
          for(i=0;i<m;i++){
          	for(j=0;j<m;j++){
          		printf("%lld ",a[i][j]);
          	}
          	printf("\n");
          }
       }
       return 0;
}
 
 
 

