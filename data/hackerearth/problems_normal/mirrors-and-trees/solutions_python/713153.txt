t=input()
while(t>0):
	t-=1
	n=input()
	a=[int(u) for u in raw_input().split()]
	a=[0]+a
	sp=2
	ind=2
	print a[1]
	while(ind<n):
		i=ind+sp-1
		
		while(i>=ind):
			if(a[i]!=0):
				print a[i]
				break
			i-=1
		ind+=sp
		sp=sp<<1;
	
	ind=2
	sp=2	
	while(ind<n):
		i=ind
		tt=False
		while(i<ind+sp):
			if(a[i]!=0):
				j=i+1
				while(j<ind+sp):
					if(a[j]!=0):
						tt=True
						break
					j+=1
				if(tt==True):
					print a[i]
				break
			i+=1
		ind+=sp
		sp=sp<<1;
	print ""