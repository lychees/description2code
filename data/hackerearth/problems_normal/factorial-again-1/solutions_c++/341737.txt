
#include<bits/stdc++.h>
using namespace std;
#define ll long long
ll pow(ll a,ll b,ll mod){
  ll res=1;
  while(b>0){
   if(b&1) res=(res*a)%mod;
   b/=2;
   a=(a*a)%mod;
  }
  return res;
}

int main(){
 int tc;
 cin>>tc;
 while(tc--){
   ll n,p;
   cin>>n>>p;
   ll deno=pow(6,n,p);
   deno=pow(deno,p-2,p);
   ll num=p-1;
   ll cald=1;
   ll calm=1;
   if((3*n)<p){
     for(int j=3*n+1;j<p;j++){
      cald=(cald*j)%p;
     }
   }else{
     for(int j=p;j<=3*n;j++){
      calm=(calm*j)%p;
     }
   }
   cald=pow(cald,p-2,p);
   num=(num*calm)%p;
   num=(num*deno)%p;
   num=(num*cald)%p;
   cout<<num<<endl;
}
return 0;
}
