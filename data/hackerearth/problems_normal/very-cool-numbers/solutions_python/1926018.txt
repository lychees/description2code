def checker(s):
	count = 0
	for i in range(len(s)):
		if s[i] == '1':
			if s[i : i + 3] == '101':
				count += 1
	return count

cases = int(raw_input())

x = {}

for case in range(cases):
	count = 0
	R, K = map(int, raw_input().split())
	if (R, K) in x:
		print x[(R, K)]
	else:
		for i in xrange(1, R + 1):
			if checker(bin(i)) >= K:
				count += 1
		print count
		x[(R, K)] = count