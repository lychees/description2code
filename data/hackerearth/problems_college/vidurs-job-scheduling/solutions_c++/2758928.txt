#include<bits/stdc++.h>
using namespace std;
#define ll long long

ll dp[2010][2010];
ll arr[2010];

ll solve(int idx,int ridx,int age){
	if(idx==ridx) return age*arr[idx];
	if(dp[idx][ridx]!=-1) return dp[idx][ridx];
	ll ans=-1;
	ans=max(solve(idx+1,ridx,age+1)+age*arr[idx],solve(idx,ridx-1,age+1)+age*arr[ridx]);
	return dp[idx][ridx]=ans;
}



int main()
{
    int n;
    cin>>n;
    memset(dp,-1,sizeof(dp));
    for(int i=1;i<=n;i+=1)
    	scanf("%lld",&arr[i]);
    cout<<solve(1,n,1)<<endl;
    return 0;
}
