#include<iostream>
#include<bits/stdc++.h>
using namespace std;
long long dp[3000][3000];
long long a[3000];
long long find(long long s,long long e,long long age)
{
	if(dp[s][e]!=-1) 
		return dp[s][e];
	if(s==e)
		return dp[s][e]=a[s]*age;
	return dp[s][e]=max(a[s]*age+find(s+1,e,age+1),a[e]*age+find(s,e-1,age+1));	
}
main()
{
	long long n;
	cin>>n;
	memset(dp,-1,sizeof dp);
	for(int i=0;i<n;i++)
		cin>>a[i];
	cout<<find(0,n-1,1)<<endl;
}