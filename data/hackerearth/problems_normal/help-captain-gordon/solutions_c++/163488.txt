#include<bits/stdc++.h>
using namespace std;
#define MAXV 1000009
long long int dataMul[MAXV];
long long int dataAdd[MAXV];
void internalUpdate(long long int at, long long int mul, long long int add) {
    while (at < MAXV) {
	dataMul[at] += mul;
	dataAdd[at] += add;
	at |= (at + 1);
    }
}

void update(long long int left, long long int right, long long int by) {
    internalUpdate(left, by, -by * (left - 1));
    internalUpdate(right, -by, by * right);
}


long long int query(long long int at) {
    if(at==0)return 0;
    long long int mul = 0;
    long long int add = 0;
    long long int start = at;
    while (at >= 0) {
	mul += dataMul[at];
	add += dataAdd[at];
	at = (at & (at + 1)) - 1;
    }
    return mul * start + add;
}
int main()
{
    long long int n,m,fl,x,y,v,i;
    cin >> n >> m;
    for(i=0; i<m; i++)
    {
	scanf("%lld",&fl);
	if(fl==1)
	{
	    scanf("%lld%lld%lld",&x,&y,&v);
	    update(x,y,v);
	}
	else
	{
	    scanf("%lld%lld",&x,&y);
	    printf("%lld\n",query(y)-query(x-1));
	}
    }
    return 0;
}
