//#pragma comment(linker, "/STACK:16777216")
#include <cstdio>
#include <iostream>
#include <iomanip>
#include <algorithm>
#include <string>
#include <cstring>
#include <vector>
#include <stack>
#include <queue>
#include <deque>
#include <map>
#include <set>
#include <limits>
#include <climits>
#include <cmath>
#include <functional>
#include <ctime>
#include <cstdlib>
#include <fstream>
#include <typeinfo>
#include <cassert>

#define endl '\n'
#define remainder safdskhaslfa
#define pow aafkhffhlgsdas
#define distance dagkjsdsdsara
#define left askfjasieqwskajdaks
#define right sakjjlkjlkjlashfjas
#define y0 kshjlhlliahjajkdhkasfdg
#define y1 kjlajhjaskhajkhjfkahgjahjkas

using namespace std;

int tests,n,m;
double a[1024][1024];

bool used[1024][1024];
double state[1024][1024];

double recurse(int curr_a, int curr_b) {
	if(curr_a==n+1 || curr_b==m+1) return 0;
	if(used[curr_a][curr_b]) return state[curr_a][curr_b];
	double ans=1+(a[curr_a][curr_b]*(recurse(curr_a,curr_b+1)) +
	(1.0-a[curr_a][curr_b])*recurse(curr_a+1,curr_b));
	used[curr_a][curr_b]=true;
	state[curr_a][curr_b]=ans;
	return ans;
}

int main() {
  //ifstream cin("test.txt");
  //freopen("test.txt","r",stdin);
  int i,j;

  scanf("%d", &tests);
  while(tests--) {
		memset(used,0,sizeof(used));
		scanf("%d %d", &n, &m);
		for(i=1;i<=n;i++) for(j=1;j<=m;j++) scanf("%lf", &a[i][j]);
		printf("%.6lf\n", recurse(1,1));
	}
}
