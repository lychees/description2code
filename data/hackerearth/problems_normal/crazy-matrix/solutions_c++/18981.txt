#include<iostream>
#include<queue>
#include<string.h>
using namespace std;

typedef struct
{
	int i,j;
}ver;
int min(int a,int b)
{
	return (a>b)?b:a;
}
int max(int a,int b)
{
	return (a>b)?a:b;
}

int main()
{
	int n,mat[100][100],ai,aj,bi,bj;
	bool m[100][100],m2[100][100],r1=false,r2=false;
	ver v;
	
	cin>>n;
	for(int i=0;i<n;++i)
		for(int j=0;j<n;++j)
			cin>>mat[i][j];
	
	for(int i=0;i<n;++i)
		for(int j=0;j<n;++j)
			m[i][j]=false;
	//for(int i=0;i<n;++i)
				//memset(m[i],false,n*sizeof(bool));
			queue<ver> q;
			
	for(int j=0;j<n;++j)
	{
		if(mat[0][j]==1)
		{
			v.i=0;
			v.j=j;
			m[0][j]=true;
			q.push(v);
		}
			while(!q.empty())
			{
				v=q.front();
				q.pop();
				ai=max(v.i-1,0);
				aj=max(v.j-1,0);
				bi=min(v.i+2,n);
				bj=min(v.j+2,n);
				for(int k=ai;k<bi;++k)
				{
					for(int l=aj;l<bj;++l)
						if(mat[k][l]==1 && m[k][l]==false)
						{
							if(k==n-1)
							{
								r1=true;
								break;
							}
							v.i=k;
							v.j=l;
							q.push(v);
							m[k][l]=true;
						}
					if(r1==true)
						break;
				}
				if(r1==true)
						break;
			}
		
		if(r1==true)
			break;
	}
	
	
	//queue<ver> q;
	for(int i=0;i<n;++i)
		for(int j=0;j<n;++j)
			m[i][j]=false;
	//for(int j=0;j<n;++j)
		//		memset(m2[j],false,n*sizeof(bool));
			queue<ver> q2;
			
	for(int i=0;i<n;++i)
	{
		if(mat[i][0]==2)
		{
			v.i=i;
			v.j=0;
			m2[i][0]=true;
			q2.push(v);
		}
			while(!q2.empty())
			{
				v=q2.front();
				q2.pop();
				ai=max(v.i-1,0);
				aj=max(v.j-1,0);
				bi=min(v.i+2,n);
				bj=min(v.j+2,n);
				for(int k=ai;k<bi;++k)
				{
					for(int l=aj;l<bj;++l)
						if(mat[k][l]==2 && m2[k][l]==false)
						{
							if(l==n-1)
							{
								r2=true;
								break;
							}
							v.i=k;
							v.j=l;
							q2.push(v);
							m2[k][l]=true;
						}
					if(r2==true)
						break;
				}
				if(r2==true)
						break;
			}
		
		if(r2==true)
			break;
	}
	if(r1==false && r2==false)
		cout<<"0"<<endl;
	else if(r1==true && r2==false)
		cout<<"1"<<endl;
	else if(r1==false && r2==true)
		cout<<"2"<<endl;
	else
		cout<<"AMBIGUOUS"<<endl;
	//cout<<r1<<r2<<endl;
	return 0;
}
