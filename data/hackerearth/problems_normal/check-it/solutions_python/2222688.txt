c = int(raw_input())
for i in range(c):
	i1 = map(int, raw_input().split(' '))
	E = []
	
	for j in range(i1[1]):
		E. append(map(int,raw_input().split(' ')))
	
	T = []
	T = map(int,raw_input().split(' '))
	L = set()
	
	for j in range(len(T)): 
		L.add( E[T[j]-1][0] )
		L.add( E[T[j]-1][1] )
	
	if len(L) == i1[0]:
		print "YES"
	else:
		print "NO"