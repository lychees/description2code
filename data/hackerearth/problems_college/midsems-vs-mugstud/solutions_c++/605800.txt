#include <iostream>
using namespace std;

#define MAX 55

int A[MAX][MAX][MAX],B[MAX][MAX][MAX];

int main()
{
    int t,i,j,k,n;
    scanf("%d",&t);
    while(t--){
    	scanf("%d",&n);

    	for(i=0;i<=n+1;i++){
    		for(j=0;j<=n+1;j++){
    			A[i][j][0] = 0;
    			A[i][j][n+1]=0;
    		}
    	}
    	for(j=0;j<=n+1;j++){
    		for(k=0;k<=n+1;k++){
    			A[0][j][k] = 0;
    			A[n+1][j][k]=0;
    		}
    	}
    	for(i=0;i<=n+1;i++){
    		for(k=0;k<=n+1;k++){
    			A[i][0][k] = 0;
    			A[i][n+1][k]=0;
    		}
    	}
    	
    	for(i=1;i<=n;i++){
    		for(j=1;j<=n;j++){
    			for(k=1;k<=n;k++){
    				scanf("%d",&B[i][j][k]);
    			}
    		}
    	}
    	
    	for(i=1;i<=n;i++){
    		for(j=1;j<=n;j++){
    			for(k=1;k<=n;k++){
    				A[i][j][k] = B[i][j][k] - B[i][j][k-1] - B[i-1][j][k] + B[i-1][j][k-1] - ( B[i][j-1][k] - B[i][j-1][k-1] - B[i-1][j-1][k] + B[i-1][j-1][k-1]);
    			}
    		}
    	}
    	for(i=1;i<=n;i++){
    		for(j=1;j<=n;j++){
    			for(k=1;k<=n;k++){
    				if(k<n) printf("%d ",A[i][j][k]);
    				else printf("%d\n",A[i][j][k]);
    			}
    		//	printf("\n");
    		}
    	//	printf("\n");
    	}
    	
    }
    return 0;
}
