from collections import Counter
t=input()
while t:
	t-=1
	n=input()
	lst=map(int,raw_input().split())
	c=Counter(lst)
	ans=0
	for k,v in c.most_common(1000000):
		if v!=0 or v!=1:
			ans+=(v)*(v-1)/2
	
	print ans+n
			