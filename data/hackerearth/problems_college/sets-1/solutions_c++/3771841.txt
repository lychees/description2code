    #include <iostream>
    #include <algorithm>
    using namespace std;
     
    int main()
    {
    	long n,q,k,mS[500001],i,m=1e9+7,pos1,pos2;
    	long final[500001],ans;
    	char s[2];
    	scanf("%d %d",&n,&q);
    	for(i=0;i<n;i++){
    		scanf("%d",&mS[i]);
    	}
    	sort(mS,mS+n);
    	final[0]=1;
    	for(i=1;i<=n;i++)
    		final[i]=(final[i-1]+final[i-1])%m;
    	while(q--){
    		ans=0;
    		scanf("%s%d", &s, &k);
    		switch(s[0]){
    			case '=':
    				pos1=upper_bound(mS,mS+n,k)-mS;
    				pos2=lower_bound(mS,mS+n,k)-mS;
    				if(mS[pos2]==k)
    					ans=final[pos1]-final[pos2];
    				if( ans < 0 )
                        ans += m;
    				break;
    			case '<':
    				pos1=upper_bound(mS,mS+n,k-1)-mS;
    				ans=final[pos1];
    				break;
    			case '>':
    				pos1=upper_bound(mS,mS+n,k)-mS;
    				ans=final[n]-final[pos1];
    				if( ans < 0 )
                        ans += m;
    				break;
    		}
    		printf("%ld\n",ans);
    	}
        return 0;
    }