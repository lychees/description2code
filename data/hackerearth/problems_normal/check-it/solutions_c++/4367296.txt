#include <bits/stdc++.h>

using namespace std;


int main()
{
    
    int t;
    cin >> t;
    
    while(t--)
    {
    	int n,m;
    	
    	cin >> n >> m;
    	
   		vector<pair<int,int>> edges(m+1);
   		int i=1;
   		
   		int node1,node2;
   		
   		while(i<=m)
   		{
   			cin >> node1 >> node2;
   			edges[i]=(make_pair(node1,node2));
   			i++;
   		}
   		
   		
   		
   		
   	
   		
   		
   	
   		int mst[n-1];
   		unordered_set<int> us;
   		for(i=0;i<n-1;i++)
   		{
   			cin >> mst[i];
   			us.insert(edges[mst[i]].first);
   			us.insert(edges[mst[i]].second);
   		}
   		
   		if(us.size()==n)
   		cout << "YES" << endl;
   		else
   		cout << "NO" << endl;
   		
   		
   		
    }
    return 0;
}
