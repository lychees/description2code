#include<bits/stdc++.h>
#define ll long long
using namespace std;
char str[1000005];
int main()
{
	int t;
	scanf("%d",&t);
	while(t--)
	{
		ll n, ans = 0;
		scanf("%lld%s",&n,str);
		ll s = 0, e = 0;
		while(e < n)
		{
			while(str[e + 1] >= str[e] && e < n - 1)
			{
				e++;
			}
			ans += ( (e - s + 2)*(e - s + 1) )>>1;
			s = e + 1;
			e = s;
		}
		printf("%lld\n",ans);
	}
	return 0;
}