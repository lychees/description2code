/*
rona lis=>partial
     lcs=>complete
*/
#include<bits/stdc++.h>
#include<algorithm>
using namespace std;
#define fr(i,a,b) for(int i=a;i<b;i++)
#define frn(i,a,b) for(int i=a;i>b;i--)
#define si(x) scanf("%d",&x)
#define sll(x)  scanf("%lld",&x)
#define pln printf("\n")
#define pi(x) printf("%d",x)
#define pll(x) printf("%lld",x)
#define mp make_pair
#define pb push_back
#define x first
#define y second
typedef long long ll;
ll MOD=1000000007;
ll pw(ll a,ll b){
  ll r=1;
  while(b>0){
     if(b&1){
       r=(r*a)%MOD;
        }
     b=b>>1;
     a=(a*a)%MOD;
  }
return r;
}

int main(){
    //freopen("termin.txt","r",stdin);

    int t;
    si(t);
    while(t--){
        int n,pos[1010],pos2[1010];
        //int lis[1010];
        int lcs[1010][1010]={{}};
        si(n);
        int in;
        fr(i,0,n){
           si(in);
           pos[in]=i;
           si(in);
           pos2[in]=i;
        //   lis[i]=1;
        }
      /*  int ans=1;
       fr(i,0,n){
            fr(j,0,i){
               if((pos[i]>pos[j])&&(pos2[i]>pos2[j])&&(lis[j]+1>lis[i])){
                  lis[i]=lis[j]+1;
               }
            }
              if(lis[i]>ans){
                    ans=lis[i];
                 }
       }
       pi(ans);pln;
      */
      fr(i,1,n+1){
          fr(j,1,n+1){
               if(pos[i]==pos2[j]){
                  lcs[i][j]=lcs[i-1][j-1]+1;
               }
               else{
                  lcs[i][j]=lcs[i-1][j];
                  if(lcs[i][j-1]>lcs[i][j]){
                      lcs[i][j]=lcs[i][j-1];
                  }
               }
          }
      }
     pi(lcs[n][n]);pln;
    }

return 0;
}
