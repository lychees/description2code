#include <iostream>
#include<bits/stdc++.h>
using namespace std;
long n,m;
long no;
vector<pair<long,long> > adj[1001010];
vector<pair<long,long> > tsort;
int indeg[1001010];
bool vis[1001010];
long seq=1;
long long dp[1001010];
void dfs(long src)
{
    vis[src]=true;
    for(long i=0;i<adj[src].size();i++)
    {
        if(vis[adj[src][i].second]==false)
            dfs(adj[src][i].second);
    }
    tsort.push_back(make_pair(seq,src));
    seq++;
}
int main()
{
    long i,u,v,k,w,j;
    scanf("%ld %ld",&n,&m);
    for(i=0;i<n+10;i++)
    {
        adj[i].clear();
        vis[i]=false;
        dp[i]=-1000000000;
        tsort.clear();
    }
    for(i=0;i<m;i++)
    {
        scanf("%ld %ld %ld",&u,&v,&k);
        adj[u].push_back(make_pair(k,v));
    }
    for(i=1;i<=n;i++)
    {
        if(vis[i]==false)
            dfs(i);
    }
    sort(tsort.begin(),tsort.end());
    no=tsort.size();
    long long ans=0;
    for(i=0;i<no;i++)
    {
        u=tsort[i].second;
        if(adj[u].size()==0)
        {
            dp[u]=0;
            continue;
        }
        for(j=0;j<adj[u].size();j++)
        {
            v=adj[u][j].second;
            w=adj[u][j].first;
            dp[u]=max(dp[u],2+dp[v]+w);
        }
        ans=max(ans,dp[u]);
    }
    printf("%lld\n",ans);
    return 0;
}
