#include <bits/stdc++.h>
using namespace std;
int p[100009],q[100009];
int vis[100009];
int indx[100009],in = 0;


void dfs(int n,vector<int> gr[])
{
	indx[in++] = n;
	vis[n] = 1;
	for(vector<int>:: iterator it=gr[n].begin();it!=gr[n].end();it++)
	{
		if(!vis[*it])
			dfs(*it,gr);
	}
}
int main()
{
    int T,N,M,a,b;
    //freopen("file1.txt","r",stdin);
    cin>>T;
    while(T--)
    {
    	cin>>N>>M;
    	vector<int> gr[N+1];
    	for(int i=1;i<=N;i++)
    	{
    		cin>>p[i];
    		vis[i] = 0;
    	}
    	for(int i=1;i<=N;i++)
    		cin>>q[i];
    	for(int i=1;i<=M;i++)
    	{
    		cin>>a>>b;
    		gr[a].push_back(b);
    		gr[b].push_back(a);
    	}
    	int f=1;
    	set<int> hsh;

    	for(int i=1;i<=N;i++)
    	{

    		if(!vis[i])
    		{

    			in = 1;
    			dfs(i,gr);

    			for(int j=1;j<in;j++)
    			{

    				hsh.insert(p[indx[j]]);
    			}

    			for(int j=1;j<in;j++)
    			{
    			    if(hsh.find(q[indx[j]])==hsh.end())
    				{

    				    f=0;
    					break;
    				}
    				hsh.erase(hsh.find(q[indx[j]]));
    			}
    			if(f==0)
    				break;
                hsh.clear();

    		}
    	}
    	if(f)
    		cout<<"YES";
    	else cout<<"NO";
    	cout<<endl;

    }
}
