#include <iostream>
#include <string.h>
#define ll long long int
using namespace std;

ll dp[20][180][1800];
int digits[20];

ll gcd(ll x,ll y){
	if(y==0)
        return x;
    else
        return gcd(y, x % y);
}

ll sol(int index,ll digSum,ll sqSum,bool isLess){
	if(index==-1){
		if( digSum==0 )
		 return 0;
		 
		
		return gcd(sqSum,digSum)==1;
	}
	
	if(isLess==true && dp[index][digSum][sqSum]!=-1)
		return dp[index][digSum][sqSum];
		
	ll ans=0;
	int goTill=isLess?9:digits[index];
	
	for(int i=0;i<=goTill;i++)
		ans+=sol(index-1,digSum+i,sqSum+i*i,i!=goTill || isLess);
	
	if(isLess==true)
		dp[index][digSum][sqSum]=ans;
	return ans;
}

ll sol_wrapper(ll num){
	
	if(num==0)
		return 0;
	int len=0;
	while(num){
		digits[len++]=num%10;
		num/=10;
	}
	return sol(len-1,0,0,false);
}

int main()
{
    //cout << "Hello World!" << endl;
    memset(dp,-1,sizeof(dp));
    ll t,r,l;
    cin >> t;
    while(t--){
  		cin >> l >> r;
    	cout << sol_wrapper(r)-sol_wrapper(l-1) << endl;
    }
    return 0;
}
