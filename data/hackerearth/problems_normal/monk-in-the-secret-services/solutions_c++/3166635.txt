#include<bits/stdc++.h>
 
using namespace std;
 
#define rep(i,n) for(i=0;i<n;i++)
#define ll long long
#define elif else if
#define pii pair<int,int>
#define mp make_pair
#define pb push_back
#define gc getchar_unlocked
int lim=1000000000;
int main()
{
    //freopen("in","r",stdin);
    //freopen("out","w",stdout);
    int t;
    cin>>t;
    assert(1<=t && t<=10);
    while(t--)
    {
        int i,j,k,n,m,x,c,y;
        cin>>n>>m;
        assert(1<=n && n<=100);
        assert(1<=m && m<=100000);
        int adj[101][101];
        rep(i,n+1)
        {
            rep(j,n+1)
            {
              adj[i][j]=lim;
            }
            adj[i][i]=0;
        }  
        rep(i,m)
        {
            cin>>x>>y>>c;
            assert(1<=x && x<=n);
            assert(1<=y && y<=n);
            assert(1<=c && c<=100);
            adj[x][y]=min(adj[x][y],c);
            adj[y][x]=adj[x][y];
        }
        int s,h,a,ans=0;
        cin>>s>>a>>h;
        for(i=1;i<=n;i++)
        {
          for(j=1;j<=n;j++)
          {
            for(k=1;k<=n;k++)
            {
              adj[j][k]=min(adj[j][i]+adj[i][k],adj[j][k]);
            }
          }
        }
        for(i=1;i<=n;i++)
        {
          if(i==s || i==a || i==h)continue;
          if(adj[s][i]==lim || adj[i][a]==lim || adj[i][h]==lim)
            assert(0);
          ans=max( adj[s][i]+ 2*adj[i][a] + adj[i][h],ans);
        }
        cout<<ans;
        if(t>0)cout<<"\n";
   }
   return 0;
}  