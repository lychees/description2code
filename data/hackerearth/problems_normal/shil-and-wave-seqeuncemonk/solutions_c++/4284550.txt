#include <iostream>
#include <bits/stdc++.h>
#define MAXN 100010
#define MOD 1000000007
using namespace std;
int n, tmp;

int t[2][MAXN]; //0 - poslednje manje // 1 - poslednje vece
int cnt[MAXN];

void update(int a[], int idx, int val) {
	while(idx <= MAXN) {
		a[idx] = (a[idx]+val)%MOD;
		idx+=idx&-idx;
	}
}
int query(int a[], int idx) {
	int rez; while(idx > 0) {
		rez = (rez+a[idx])%MOD;
		idx-=idx&-idx;
	} return rez;
}

int main()
{
    scanf("%d", &n);
    scanf("%d", &tmp); update(cnt, tmp, 1);
    long long rez;
    for(int i = 1; i < n; i++) {
    	scanf("%d", &tmp); int tmp0, tmp1;
    	tmp1 = ( query(cnt, tmp-1) + query(t[0], tmp-1) ) % MOD;
    	tmp0 = ( query(cnt, MAXN-1) - query(cnt, tmp) + query(t[1], MAXN-1) - query(t[1], tmp) ) % MOD;
    	if(tmp0 < 0) tmp0+=MOD;
		rez = (rez+tmp0+tmp1)%MOD;
    	update(t[0], tmp, tmp0);
    	update(t[1], tmp, tmp1);
    	update(cnt, tmp, 1);
    }
    printf("%lld", rez);
    return 0;
}
