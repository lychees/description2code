//Sinha Saab
//NARUTO Fan



#include <cstdio>
#include <iostream>
#include <algorithm>
#include <string.h>
#include <vector>
#include <set>
#include <map>
#include <queue>
#include <list>
#include <math.h>

#define ll long long int
#define maxN 100000
#define maxVal 100000000
#define minVal -100000000
#define mod 1000000007LL

#define gcd(a,b) __gcd(a,b)

using namespace std;

int n;
int parent[maxN+5];
map<int,int> m;

int get(int i)
{
	if(i!=parent[i])
		parent[i]=get(parent[i]);
	return parent[i];
}

int main()
{
    int i,q,c,u,v,x,y;
    scanf("%d%d",&n,&q);
    for(i=1;i<=n;i++)
    {
    	parent[i]=i;
    	m[i]=i;
    }
    while(q--)
    {
    	scanf("%d",&c);
    	if(c==1)
    	{
    		scanf("%d%d",&u,&v);
    		x=get(u);
    		y=get(v);
    		u=m[x];
    		v=m[y];
    		if(u!=v)
    			parent[x]=y;
    	}
    	else if(c==2)
    	{
    		scanf("%d",&u);
    		x=get(u);
    		m[x]=u;
    	}
    	else
    	{
    		scanf("%d",&u);
    		x=get(u);
    		x=m[x];
    		printf("%d\n",x);
    	}
    }
    return 0;
}