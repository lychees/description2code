/* Sahil Prakash */

#include<bits/stdc++.h>

using namespace std;

#define ull unsigned long long
#define ll long long int
#define si(x) scanf("%d",&x)
#define sull(x) scanf("%llu",&x)
#define sll(x) scanf("%lld",&x)
#define sch(x) scanf("%c",&x)
#define sstr(s) scanf("%s",s)
#define pri(x) printf("%d",x)
#define pch(x) printf("%c",x)
#define pull(x) printf("%llu",x)
#define pll(x) printf("%lld",x)
#define pstr(s) printf("%s",s)
#define nl printf("\n")
int a[1001][1001]={0};
int solve(int a[][1001], int des, int src)
{
    ll mn=10000000000000000ll;
    int k=0;
    int m=src-1,flag=0;
    for(;m>=des;--m)
    {
	if(a[src][m]==0)
	    flag=1;
    }
    if(flag==0)
	return 0;
    if(a[src][des]==0)
	return 1;
    int j,x=0;
    for(j=src-1;j>=des;j--)
    {
	x=solve(a,1,j);
	if(x<mn && (x))
	    mn=x;
    }
    return mn+1;
}
int main()
{
    int n,m,i;
    si(n); si(m);
    int x,y;
    for(i=0;i<m;++i)
    {
	si(x); si(y);
	a[x][y]=a[y][x]=1;
    }
    int ans=solve(a,1,n);
    if(ans==0)
	pstr("HOHA HOHA");
    else
	pri(ans);
    nl;
    return 0;
}
