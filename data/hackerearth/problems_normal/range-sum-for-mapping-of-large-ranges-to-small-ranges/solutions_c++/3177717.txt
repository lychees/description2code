#include <bits/stdc++.h>
using namespace std;

const long int N=1e5+5;
int t;
long int n,k;
long int a[N];
long int check[N];
const long long int mod=1000000007;
long int find(long int value){
	if(a[value]==value){
		return value;
	}
	return a[value]=find(a[value]);
}

void join(long int x,long int y){
	long int value1=find(x);
	long int value2=find(y);
	if(a[value1]==a[value2]){
		return;
	}
	a[value1]=value2;
}

map<long int,long int> mymap;
map<long int,long int>:: iterator it;

int main()
{
	int t;
	scanf("%d",&t);
	while(t--){
		scanf("%ld%ld",&n,&k);
		for(long int i=1;i<=n;i++){
			a[i]=i;
		}
		for(long int i=0;i<k;i++){
			long int l,r;
			scanf("%ld %ld",&l,&r);
			join(l,r);
		}
		for(long int i=1;i<=n;i++){
			check[i]=find(i);
		}
		int hope=1;
		while(hope){
			hope=0;
		for(long int i=1;i<=n;i++){
			long int rank=find(i);
			if(check[i]!=rank){
				hope=1;
			}
			check[i]=rank;
		}
		}
		for(long int i=1;i<=n;i++){
			mymap[check[i]]++;
		}
		long long int ans=1,temp;
		for(it=mymap.begin();it!=mymap.end();it++){
			if(it->second == 1 ) continue;
			if(it->second & 1){
				temp=(it->second-1)/2;
				ans=(ans*temp*(it->second))%mod;
			}
			else{
				temp=(it->second)/2;
				ans=(ans*temp*(it->second-1))%mod;
			}
		}
		printf("%lld\n",ans%mod);
		mymap.clear();
	}
    return 0;
}
