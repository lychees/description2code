#include <bits/stdc++.h>

using namespace std;

#define fi first
#define se second
#define mp make_pair
#define pb push_back
#define pf push_front
#define iter(v, i) for (__typeof__((v).begin()) i = (v).begin(); i != (v).end(); i++)
#define all(v) (v).begin(), (v).end()

typedef long long ll;
typedef pair<int, int> ii;
typedef vector<int> vi;
typedef vector<ii> vii;

const double eps = 1e-9;
const double pi = 3.141592653589793238462;

#define MAXN 10005

char str[MAXN], special[MAXN];

int main() {
	int t;
	scanf("%d", &t);
	
	while (t--) {
    	int n, k, lneed, rneed;
    	scanf("%d %d %d %d", &n, &k, &lneed, &rneed);
    	scanf("%s %s", str, special);
    	for (int i = 0; i < n; i++) {
    		if (count(special, special + k, str[i]) > 0)
    			str[i] = '-';
    	}
    	int ans = 0;
    	
    	int l = -1, lcnt = 0;
    	int r = -1, rcnt = 0;
    	for (int i = 0; i < n; i++) {
    		while (l < n && lcnt < lneed) {
    			l++;
    			if (str[l] == '-') lcnt++;
    		}
    		
    		while (r < n-1 && rcnt <= rneed) {
    			r++;
    			if (str[r] == '-') rcnt++;
    		}
    		if (str[r] == '-' && rcnt > rneed) r--, rcnt--;
    		
    		if (lneed == 0) ans += r - i + 1;
    		else ans += r - l + 1;
    		
			if (str[i] == '-') lcnt--, rcnt--;
    	}
    	
    	printf("%d\n", ans);
	}
    
    return 0;
}
