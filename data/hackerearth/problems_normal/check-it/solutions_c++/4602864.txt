

    #include <bits/stdc++.h>
    using namespace std;
    
	
    /*bool poss(int ran, int *arr, int n, int k)
    {
    	int ind=arr[1];
    	ran=2*ran;
    	int i,j=1;
    	for(i=1;i<=k;i++)
    	{
    		ind=ind+ran;
    		while(j<=n && ind>=arr[j])
    			j++;
    		if(j>n)
    			return true;
    		ind=arr[j];
		}
		return false;
	}
	 
    int search(int start, int end, int *arr, int n, int k)
    {
		int pos=-1;
        while(start>=end)
        {
        	//printf("%d %d \n",start, end);
            int mid=end+(start-end)/2;
            if(poss(mid,arr,n,k)){
            	pos=mid;
            	start=mid-1;
            	//printf("came in %d\n",mid);
			}
            else
                end=mid+1;
        }
        return pos;
    }
    
    
    int calc(int st, int end, int k)
    {
    	int ran=end-st+1;
    	ran=ran/k;
    	ran++;
    	ran/=2;
    	return ran+1;
	}*/
	
    int main()
    {
        int t;
        cin>>t;
        while(t--){
     		
            int n,m;
            cin >>n;
     		cin>>m;
     		vector<pair<int, int> > v(m+1);
     		int mark[n+1];
     		for(int i=1;i<=n;i++)
     		{
     			mark[i]=0;
			 }
     		for(int i=1;i<=m;i++)
     		{
     			int a,b;
     			cin>>a>>b;
     			pair<int, int> p;
     			p=make_pair(a,b);
     			v[i]=p;
			}
			 
			for(int i=1;i<=n-1;i++)
			{
				int a,b,k;
				cin>>k;
				
				a=v[k].first;
				b=v[k].second;
				//cout<<a<<b<<endl;
				mark[a]=1;
				mark[b]=1;
			} 
			int cnt=0;
			for(int i=1;i<=n;i++)
			{
				if(mark[i]==1)
					cnt++;
			}
			if(cnt==n)
				printf("YES\n");
			else
				printf("NO\n");
     		
        }
        
        return 0;
    }

