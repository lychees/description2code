#include <bits/stdc++.h>
using namespace std;
int indeg[1000009];long long lvl[1000009],mx;

int main()
{
    int R,P,a,b,c,v;
    cin>>R>>P;
    vector<pair<int,int> > gr[R+1];
    
    for(int i=0;i<R;i++)
    {
    	indeg[i+1] = 0;
    	lvl[i+1] = 0;
    }
    for(int i=0;i<P;i++)
    {
    	cin>>a>>b>>c;
    	gr[a].push_back(make_pair(b,c));
    	indeg[b]++;
    }
    queue<int> q;
    for(int i=1;i<=R;i++)
    {
    	if(indeg[i]==0)
    		q.push(i);
    }
    
    while(!q.empty())
    {
    	v = q.front();
    	q.pop();
    	for(vector<pair<int,int> >::iterator it=gr[v].begin();it!=gr[v].end();it++)
    	{
    		lvl[it->first]=max(lvl[it->first],it->second+lvl[v]+2);
    		if(--indeg[it->first]==0)
    			q.push(it->first);
    	}
    }
    mx=-1;
    for(int i=1;i<=R;i++)
    {
    	if(lvl[i]>mx)
    		mx = lvl[i];
    }
    cout<<mx;
    
}
