
// rishabhtw07 (Pyazz_Kachori)
#include<bits/stdc++.h>

using namespace std;

#define FOR(i,a,b) for(i=a;i<b;++i)
#define FORD(i,a,b) for(i=a;i>=b;--i)
#define ll long long
#define mp make_pair
#define pb push_back
#define MOD 1000000007
#define infi 1000000007
#define s(x) scanf("%d", &x)
#define sl(x) scanf("%lld", &x)
#define sd(x) scnaf("%lf", &x)
#define fi first
#define se second
#define p(x) printf("%d",x)
#define pl(x) printf("%lld", x)
#define pd(x) printf("%lf", x)
#define pn() printf("\n")


int n, m;
int A[1005][1005];
int B[1005][1005];
int mr[1005];
int mc[1005];

int main()
{
    int i, j, k, t;
    cin >> t;
    while(t--) {
        cin >> n >> m;
        FOR(i, 0, n ) {
            FOR(j, 0, m) {
                s(A[i][j]);
            mr[i] = -1;
            mc[j] = -1;
            }
        }
        FOR(i , 0, n) {
            FOR(j, 0, m)
                s(B[i][j]);
        }

        FOR(i, 0, n) {
            FOR(j, 0, m) {
                mr[i] = max(mr[i], B[i][j]);
                mc[j] = max(mc[j], A[i][j]);
            }
        }

        int ans = 0;
        FOR(i, 0, n ){
            FOR(j, 0, m) {
                if(mr[i] == B[i][j]  && mc[j] == A[i][j])
                    ans++;
            }
        }
        cout << ans << endl;
    }
}
