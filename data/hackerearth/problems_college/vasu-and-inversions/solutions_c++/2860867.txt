#include<bits/stdc++.h>

using namespace std;

int main(){
long long t,n,k;
int a=0;
long long num_0=0,num_1=0;
cin >> t;

while(t--)
{

    cin >> n >> k;
    long long b=0;
    b = n;
    num_0=0;
    while(b--)
    {
        scanf("%d",&a);
        if(a==0)
        {
            num_0++;
        }
        num_1=n-num_0;
    }
    if(num_0>k)
    {
        cout << num_1+k << '\n';
    }
    else{
        long long c;
        c=k-num_0;
        if(c%2==0)
        {
            cout << n<<'\n';
        }
        else{
            cout << n-1<<'\n';
        }
    }

}
return 0;
}
