from math import factorial as f
for _ in xrange(input()):
    n = input()
    x = raw_input()
    i = 0
    res = 0
    while i < n:
        s = 1
        while i < n-1 and x[i] <= x[i+1]:
            i += 1
            s += 1
        res += ((s*(s+1))/2)
        i += 1
    print res
