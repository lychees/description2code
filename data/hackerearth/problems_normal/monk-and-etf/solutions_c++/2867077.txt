#include <bits/stdc++.h>
using namespace std;

int prime[1000006];
long long A[100005], prime_checker[100005];

int main()
{
    int T;
    scanf("%d", &T);
    
    for(int i=2; i<=1000; i++)
    {
    	if(!prime[i])
    	{
    		for(int j=i*i; j<=1000000; j+= i)
    			prime[j] = 1;
    	}
    }
    
    while(T--)
    {
    	long long L, R, K;
    	scanf("%lld %lld %lld", &L, &R, &K);
    	
    	for(long long i=L; i<=R; i++)
    		A[i-L] = prime_checker[i-L] = i;
    	
    	for(int i=2; i<=1000000; i++)
    	{
    		if(!prime[i])
    		{
    			long long x = L/i*i;
    			
    			if(x<L)
    				x+= i;
    			
    			for(; x<=R; x+= i)
    			{
    				A[x-L] = A[x-L]/i*(i-1);
    				
    				while(prime_checker[x-L]%i==0)
    					prime_checker[x-L]/= i;
    			}
    		}
    	}
    	
    	for(long long i=L; i<=R; i++)
    	{
    		if(prime_checker[i-L]>1)
    		{
    			A[i-L] = A[i-L]/prime_checker[i-L]*(prime_checker[i-L]-1);
    		}
    	}
    	
    	int ans = 0;
    	
    	for(long long i=L; i<=R; i++)
    		if(A[i-L]%K==0)
    			ans++;
    	
    	printf("%lf\n", (double)ans/(R-L+1));
    }
    
    return 0;
}
