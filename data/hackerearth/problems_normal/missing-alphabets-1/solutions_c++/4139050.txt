#include <bits/stdc++.h>
#define ll long long int
#define MOD 1000000007
using namespace std;
vector<int> seq(26);
bool comp(string a,string b)
{
	int l1=a.length();
	int l2=b.length();
	int i=0;
	while(i<l1 && i<l2)
	{
		if(seq[a[i]-97]<seq[b[i]-97])
			return true;
		else if(seq[a[i]-97]>seq[b[i]-97])
			return false;
		i++;
	}
	if(i==l1)
		return true;
	return false;
}
int main()
{
    int t,m,l,i;
    string alpha;
    cin>>t;
    while(t--)
    {
    	cin>>alpha;
    	for(i=0;i<26;i++)
    		seq[alpha[i]-97]=i;
    	cin>>m;
    	vector<string> v(m);
    	for(i=0;i<m;i++)
    		cin>>v[i];
    	sort(v.begin(),v.end(),comp);
    	for(i=0;i<m;i++)
    		cout<<v[i]<<endl;
    }
    return 0;
}
