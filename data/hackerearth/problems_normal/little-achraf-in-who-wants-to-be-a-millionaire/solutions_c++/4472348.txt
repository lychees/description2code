#include<iostream>
#include<cstdio>
#include<string>
#include<vector>
#include<cstring>
#include<iomanip> 
#include<utility> 
#include<climits>
#include<cmath>
#include<algorithm>


using namespace std;


#define LL long long int
#define sc1(x) scanf("%d", &x)
#define sc2(x, y) scanf("%d%d", &x, &y)
#define sc3(x, y, z) scanf("%d%d%d", &x, &y, &z)
#define pr1(x) printf("%lld\n", x)
#define FOR(i, a, n) for(int i=a;i<n;i++)
#define pp pair<int, int>
#define pb push_back 

#define MAX 101
#define MOD 1000000007LL

int arr[MAX];
char str[10];
int limit;

LL mat[301];

void offline(int l) {

	FOR(i, 1, l+1) mat[i] = 1;

	FOR(i, l+1, 301) {
		FOR(j, i-l, i) {
			mat[i] += mat[j];
			if(mat[i] > 1e18) {
				limit = i - l;
				break;
			}
		}
	}
}


void func(int l, LL x, LL n, char ch) {

	LL y = x % l;

	while(y < limit) {
		y += l;
	}

	y = min(y, x);

	while(y > l) {
		FOR(i, y-l, y) {
			if(mat[i] < n) {
				n -= mat[i];
			} else {
				y = i;
				break;
			}
		}
	}

	y--;

	if(arr[y] == -1) arr[y] = ch;
	else if(arr[y] != ch) arr[y] = 0;
}


int main() {

	FOR(i, 0, MAX) arr[i] = -1;

	int l, c;
	LL n, x;

	sc2(l, c);

	offline(l);
	FOR(i, 0, c) {
		scanf("%lld%lld%s", &n, &x, str);
		func(l, x, n, str[0]);
	}

	LL result = 1;
	FOR(i, 0, l) {
		if(arr[i] == -1) result = (result * 62) % MOD;
		else if(arr[i] == 0) result = 0;
	}

	pr1(result);

	return 0;
}







