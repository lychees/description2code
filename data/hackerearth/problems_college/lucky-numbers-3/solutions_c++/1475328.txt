/*
*/
 
//#pragma comment(linker, "/STACK:16777216")
#include <fstream>
#include <iostream>
#include <string>
#include <complex>
#include <math.h>
#include <set>
#include <vector>
#include <map>
#include <queue>
#include <stdio.h>
#include <stack>
#include <algorithm>
#include <list>
#include <ctime>
#include <memory.h>
#include <ctime> 
 
#define y0 sdkfaslhagaklsldk
#define y1 aasdfasdfasdf
#define yn askfhwqriuperikldjk
#define j1 assdgsdgasghsf
#define tm sdfjahlfasfh
#define lr asgasgash
 
#define eps 1e-9
//#define M_PI 3.141592653589793
#define bs 1000000007
#define bsize 256
#define right adsgasgadsg
#define free adsgasdg
#define MAG 10000

using namespace std;

long win[1000][1000];
long cut[1<<21];

int main(){
//freopen("evacuation.in","r",stdin);
//freopen("evacuation.out","w",stdout);
//freopen("C:/input.txt","r",stdin);
//freopen("C:/output.txt","w",stdout);
ios_base::sync_with_stdio(0);
//cin.tie(0);

for (int i=1;i<=100;i++)
 for (int j=1;j<=100;j++)
 {
  if (i>0)for (int q=1;q*i<j;q++)
   if (win[i][j-q*i]==0)
    win[i][j]=1;
    
  if (j>0)for (int q=1;q*j<i;q++)
   if (win[i-q*j][j]==0)
    win[i][j]=1;
 }

/*for (int i=1;i<=40;i++)
 for (int j=1;j<=i;j++)
  if (win[i][j]==0&&win[i][j-1]==1)
   cout<<i<<"   "<<j<<endl;
*/
cut[1]=1;
cut[2]=2;
for (long i=3;i<=1000000;i++)
{
    long t=cut[i-1];
    while (cut[t]<=i-t)++t;
    cut[i]=t;
//    cout<<i<<" "<<t<<endl;
//    cin.get();
}   
/*for (int i=1;i<=40;i++)
 cout<<i<<"    "<<cut[i]<<endl;
 */
 
 long tests;
cin>>tests;
long long ans=0;
long p1,p2,q1,q2,l,r;

for (;tests;--tests)
{
    cin>>p1>>p2;
    cin>>q1>>q2;
    ans=0;
    for (int i=p1;i<=p2;i++)
    {
     l=cut[i];
     r=i;
     l=max(l,q1);
     r=min(r,q2);
     if (r>=l)ans+=r-l+1;
    }
    for (int i=q1;i<=q2;i++)
    {
     l=cut[i];
     r=i-1;
     l=max(l,p1);
     r=min(r,p2);
     if (r>=l)
      ans+=r-l+1;
    }
    cout<<1ll*(p2-p1+1)*(q2-q1+1)-ans<<endl;
}
cin.get();cin.get();
return 0;}
