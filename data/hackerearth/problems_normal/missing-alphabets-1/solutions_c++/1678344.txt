#include <stdio.h>
#include <bits/stdc++.h>

using namespace std;

string st [1001];
int o [26];
string s;
int q [1001];

bool compare (int a, int b) {
	
	int i;
	
	for (i = 0; st [a] [i] != '\0'; i++) {
		if (o [st [a] [i] - 'a'] < o [st [b] [i] - 'a']) {
			return true;
		} else if (o [st [a] [i] - 'a'] > o [st [b] [i] - 'a']) {
			return false;
		} else {
			continue;
		}
	}
}

int main ()
{
	int t, i, m, j;
	scanf ("%d", &t);
	
	while (t--) {
		cin >> s;
		
		for (i = 0; i < 26; i++) {
			o [s [i] - 'a'] = i + 1;
		}
		
		scanf ("%d", &m);
		
		for (i = 0; i < m; i++) {
			cin >> st [i];
			q [i] = i;
		}
		
		sort (q, q + m, compare);
		
		for (i = 0; i < m; i++) {
			cout << st [q [i]] << endl;
		}
	}
	
	return 0;
}