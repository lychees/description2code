#include<iostream>
using namespace std;
int main()
{
	long int n,i;
	cin>>n;
	long int rating[n],t[n];
	for(i=0;i<n;i++)
	{
		cin>>rating[i];
		t[i]=1;
	}
	for(i=0;i<n-1;i++)
	{
		if(rating[i+1]>rating[i])
		t[i+1]=t[i]+1;
	}
	for(i=n-1;i>0;i--)
	{
		if(rating[i-1]>rating[i] && t[i-1]<=t[i])
		t[i-1]=t[i]+1;
	}
	long long int sum=0;
	for(i=0;i<n;i++)
	sum=sum+t[i];
	cout<<sum<<endl;
}