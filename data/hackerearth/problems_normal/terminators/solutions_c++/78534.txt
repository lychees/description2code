#include <vector>
#include <list>
#include <map>
#include <set>
#include <queue>
#include <deque>
#include <stack>
#include <bitset>
#include <algorithm>
#include <functional>
#include <numeric>
#include <utility>
#include <sstream>
#include <iostream>
#include <iomanip>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>
#include <cstring>

using namespace std;

#define vi vector<int>
#define vii vector< vector<int> >
#define ii pair<int,int>
#define pb push_back
#define FOR(i,j,k) for(int i = (j) ; i <= (k) ; i++ )
#define FORN(i,j,k) for(int i = (j) ; i >= (k) ;i--)
#define FORI(xx,x,it) for(xx::iterator it = x.begin() ; it != x.end() ; it++)
#define FORNI(xx,x,it) for(xx::reverse_iterator it = x.rbegin() ; it != x.rend() ; it++)
#define si size()
#define MAX 1010

int dp[MAX][MAX] = {0};

void LCS(int *s1,int *s2,int n) {
	int row = n;
	int col = n;

	FOR(i,1,row) {
		FOR(j,1,col) {
			if(s1[i] == s2[j])	
				dp[i][j] = dp[i-1][j-1] + 1;
			else 
				dp[i][j] = max(dp[i][j-1], dp[i-1][j]);
		}
	}

	cout << dp[row][col] << "\n";
	return;
}

int main() {
	int test,n;
	int s1[1010] = {0}, s2[1010] = {0};

	cin >> test;

	while(test--) {
		cin >> n;
		
		int a,b;

		FOR(i,1,n){
			scanf("%d%d",&a,&b);
			s1[a] = i;
			s2[b] = i;
		}

		LCS(s1,s2,n);
	}

	return 0;
}
