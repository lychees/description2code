#include<bits/stdc++.h>
#define pb push_back
#define F first
#define S second
#define mp make_pair
#define lli long long int
#define INF 1000000000000
#define MOD 1000000007
#define FOR(name,initial,final) for(int name=initial;name<final;name++)
using namespace std;
bool myComp(const lli a,const lli b)
{
	return a>b;
}
lli countsetbits(int n)
{
	int ans=0;
	while(n)
	{
		n=n&(n-1);
		ans++;
	}
	return ans;
}
int main()
{
	int t,n,k,temp;
	cin>>t;
	while(t--)
	{
		
		vector<lli> v;
		cin>>n>>k;
		FOR(i,0,n)
		{
			cin>>temp;
			v.pb(countsetbits(temp));
		}
		sort(v.begin(),v.end(),myComp);
		lli ans=0;
		FOR(i,0,k)
			ans+=v[i];
		cout<<ans<<endl;
		
	}

}