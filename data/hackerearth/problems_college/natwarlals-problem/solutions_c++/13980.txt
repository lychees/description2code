#include <iostream>
#include <cstdio>
#include <cmath>
#include <vector>
#include <cstring>

#define MOD 1000000007
#define s(n) scanf("%d",&n);

using namespace std;

int n;
char array[501][501];
int count,len;
char str[505];

void func(int i, int j, int length, char str1[]){
	if(length>len)
		return;
		
	if(str1[length-1]!=str[length-1])
		return;
		
	if(length==len)
		++count;
		
	if(i>0 && j>0){
		str1[length++] = array[i-1][j-1];
		str1[length] = '\0';
		func(i-1,j-1,length,str1);
		str1[--length]='\0';
	}
	
	if(i>0 && j<n-1){
	str1[length++] = array[i-1][j+1];
	str1[length] = '\0';
	func(i-1,j+1,length,str1);
	str1[--length]='\0';
	}
	
	if(i<n-1 && j>0){
	str1[length++] = array[i+1][j-1];
	str1[length] = '\0';
	func(i+1,j-1,length,str1);
	str1[--length]='\0';
	}
	
	if(j<n-1 && i<n-1){
	str1[length++] = array[i+1][j+1];
	str1[length] = '\0';
	func(i+1,j+1,length,str1);
	str1[--length]='\0';
	}
}

int main(){
	int test;
	scanf("%d",&test);
	char str1[501];

	while(test--){
		count = 0;
		scanf("%d",&n);
		getchar();
		for(int i=0;i<n;++i){
			for(int j=0;j<n;++j){
				scanf("%c",&array[i][j]);
				getchar();
			}
		}
		scanf("%s",str);
		len = strlen(str);		
		for(int i=0;i<n;++i){
			for(int j=0;j<n;++j){
				str1[0]=array[i][j];
				str1[1]='\0';
				func(i,j,1,str1);
			}
		}
		printf("%d\n",count);
	}

	return 0;
}
