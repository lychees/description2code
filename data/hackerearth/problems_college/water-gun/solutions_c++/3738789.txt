#include<iostream>
#include<algorithm>
#include<vector>

using namespace std;

typedef long long ll;

const ll MOD = 1e9 + 7;

ll pw(ll a, ll b){
	ll ret = 1;
	while (b){
		if (b & 1)
			ret = (ret * a) % MOD;
		b >>= 1;
		a = (a * a) % MOD;
	}
	return ret;
}

int main(){
	ios::sync_with_stdio(false);
	cin.tie(0);
	ll te;	cin >> te;
	while (te--){
		ll n, k;	cin >> k >> n;
		if (k == 1){
			cout << "0\n";
			continue;
		}

		ll ret = k * pw(k - 1, n) % MOD;
		ret = (ret - k * (k - 1)/ 2) % MOD;
		if (ret < 0)	ret += MOD;

		if (k >= 3){
			ll z = pw(3, n) % MOD;
			z = (z + MOD - (3LL * pw(2,n)) % MOD) % MOD;
			z = (z + 3) % MOD;
			ll x = k * (k - 1) * (k - 2)/ 6LL;
			x %= MOD;
			ret = (ret + z * x) % MOD;
		}

		cout << ret << "\n";
	}
	return	0;
}
