#include <iostream>
using namespace std;
struct ans {
	int top, left;
};
int main()
{
	int r, c;
	cin>>r>>c;
	int num[r][c];
	ans dp[r][c];
	for(int i=0;i<r;i++) {
		for(int j=0;j<c;j++) {
			cin>>num[i][j];
			dp[i][j].top = 1;
			dp[i][j].left = 1;
		}
	}
	for(int i=0;i<r;i++) {
		for(int j=0;j<c;j++) {
			if(i==0 && j==0) {
				
			}
			else if(i==0) {
				dp[i][j].left = (num[i][j] == num[i][j-1]) ? (dp[i][j-1].left + 1) : 1;
			}
			else if(j==0) {
				dp[i][j].top = (num[i][j] == num[i-1][j]) ? (dp[i-1][j].top + 1) : 1;
			}
			else {
				dp[i][j].left = (num[i][j] == num[i][j-1]) ? (dp[i][j-1].left + 1) : 1;
				dp[i][j].top = (num[i][j] == num[i-1][j]) ? (dp[i-1][j].top + 1) : 1;
			}
			//cout<<dp[i][j].left<<" "<<dp[i][j].top<<"  ";
		}
		//cout<<endl;
	}
	int maxLen = 0, len = 0;
	for(int i=r-1;i>=0;i--) {
		for(int j=c-1;j>=0;j--) {
			len = dp[i][j].left + dp[i][j-dp[i][j].left+1].top - 1;
			if(len > maxLen) maxLen = len;
		}
	}
	cout<<maxLen<<endl;
	
    return 0;
}
