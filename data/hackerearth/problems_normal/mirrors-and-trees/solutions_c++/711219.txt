#include <vector>
#include <list>
#include <map>
#include <set>
#include <queue>
#include <stack>
#include <algorithm>
#include <sstream>
#include <iostream>
#include <numeric>
#include <cstdio>
#include <cmath>
#include <cstdlib>
#include <ctime>

using namespace std;

typedef vector<int> vi; 
typedef vector<vi> vvi; 
typedef pair<int,int> ii; 

#define sz(a) int((a).size()) 
#define pb push_back 
#define all(c) (c).begin(),(c).end() 
#define tr(c,i) for(typeof((c).begin() i = (c).begin(); i != (c).end(); i++) 
#define present(c,x) ((c).find(x) != (c).end()) 
#define cpresent(c,x) (find(all(c),x) != (c).end()) 
#define rep(i,n) for(int i=0;i<(n);i++)
#define mp make_pair

int main()
{
	int t;
	cin >> t;
	while(t--)
	{
		int n;
		cin >> n;
		vi v(n+1),ar,al;
		deque<int> a,b;
		for(int i=1;i<=n;i++)
		{
			cin >> v[i];
		}
		a.push_back(1);
		while(a.size() !=0 || b.size() !=0)
		{
			if(b.size() ==0)
			{
				if(a.size()==1)
				{
					ar.pb(v[a[0]]);
				}
				else
				{
					al.pb(v [ a[0] ]);ar.pb( v [ a[a.size()-1] ]);
				}
				for(int i=0;i<a.size();i++)
				{
				  if(a[i]*2 <=n)	
				   if(v[a[i]*2] !=0)
				  	b.push_back(a[i]*2);
				  if (a[i]*2+1 <=n)
				    if(v[a[i]*2+1] !=0)
				  	  b.push_back(a[i]*2+1);
				}
				a.clear();
			}
			else if(a.size() ==0)
			{
				if(b.size()==1)
				{
					ar.pb(v[b[0]]);
					 
				}
				else
				{
					al.pb(v [ b[0] ]);ar.pb(v[b [ b.size()-1] ] );
				}
				for(int i=0;i<b.size();i++)
				{
				   if(b[i]*2 <=n)	
				    if(v[b[i]*2] != 0)
				  	a.push_back(b[i]*2);
				  if(b[i]*2+1 <=n)	
				    if(v[b[i]*2+1] !=0)
				  	  a.push_back(b[i]*2+1);
				}
				b.clear();
			}
		}
		rep(i,ar.size()) 
		    cout << ar[i]<<"\n";
		rep(i,al.size()) 
		    cout << al[i]<<"\n";

		cout <<"\n"; 
	}
}