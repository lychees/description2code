#include <iostream>
using namespace std;

int main()
{
     int N,M;
    cin>>N;
    cin>>M;
    char* str=new char[N];
    cin>>str;
    int** Values;
    Values=new int*[26];
    for(int i=0;i<26;i++){
    	Values[i]=new int[26];
    	for(int j=0;j<26;j++){
    		Values[i][j]=1;
    	}
    }
    int* ValuesSingle;
    ValuesSingle=new int[26];
    for(int i=0;i<26;i++)
    	ValuesSingle[i]=1;
    for(int i=0;i<M;i++){
    	string s;
    	int value;
    	cin>>s;
    	cin>>value;
    	if(s.length()==2)
    		Values[s[0]-'a'][s[1]-'a']=value;
    	if(s.length()==1)
    		ValuesSingle[s[0]-'a']=value;
    }
    int* Table=new int[N];
    Table[0]=ValuesSingle[str[0]-'a'];
    Table[1]=(Table[0]+ValuesSingle[str[1]-'a'],Values[str[0]-'a'][str[1]-'a']);
    for(int i=2;i<N;i++){
    	Table[i]=max(Table[i-1]+ValuesSingle[str[i]-'a'],Table[i-2]+Values[str[i-1]-'a'][str[i]-'a']);
    }
    cout<<Table[N-1]<<endl;
    return 0;
}
