#include <iostream>
#include <cmath>
#define M 1000000007
using namespace std;
int main()
{
    long a,b,c;
    int i,i1a=1,i1b=1,i2a,i2b;
    long s1a,s2a;
    long s1b,s2b;
      cin>>a>>b>>c;
    long n;
    cin>>n;
    unsigned int A[n+1],B[n+1];
     A[1] = (((a%M)*c)%M)%M;
    s1a=A[1];
    s2a=M;
    i1a=1;
  // cout<<"\nvalues of A[0] and s1a "<<A[0]<<s1a<<"\n"; 
   for(i=2 ; i<=n ; i++)
   {
    A[i] = ((((((A[i-1]*a)%M)*b)%M)*c)%M) + ((((A[i-1]*a)%M)*b)%M) + ((((A[i-1]*a)%M)*c)%M);
    A[i] = A[i]%1000000007;
   if((i==2)&&(s1a<A[i]))
    {   
        s2a=A[2];
        i2a=2;
    }
    //printf("\nvalues of A[i] %d %d\n",A[i],s1a);
     if(s1a>A[i])
    {   //printf("\ntrue in A");
    	//s2a=s1a;
    	//i2a=i1a;
    	s1a=A[i];
    	i1a=i;
    }
    else if((s2a>A[i])&&(s1a<A[i]))
    {
        s2a=A[i];
        i2a=i;
    }
   }
   B[1] = (((b%M)*c)%M)%M;
    s1b=B[1];
    s2b=M;
    i1b=1;
    //cout<<"\n s1b "<<s1b<<"\n";
    //printf("\nvalues of B[0] and s1b %d %d\n",B[0],s1b);
  for(i=2 ; i<=n ; i++)
  {
    B[i] = ((((((B[i-1]*b)%M)*c)%M)*a)%M) + ((((B[i-1]*b)%M)*a)%M) + ((((B[i-1]*b)%M)*c)%M);
    B[i] = B[i]%1000000007;
    // printf("\nvalues of B[i] %d\n",B[i]);
    if((i==2)&&(s1b<B[i]))
    {   
        s2b=B[2];
        i2b=2;
    }
    if(s1b>B[i])
    {
    	//s2b=s1b;
    	//i2b=i1b;
    	s1b=B[i];
    	i1b=i;
    }
    else if((s2b>B[i])&&(s1b<B[i]))
    {
        s2b=B[i];
        i2b=i;
    }
  }  
  //printf("\nValues of s1a,s2a,s1b,s2b are %d %d %d %d\n",s1a,s2a,s1b,s2b);
  if(i1a!=i1b)
  {
  	unsigned long long sum = s1a+s1b;
		cout << sum;
  }
  /*else{
		for(i=1; i<=n; i++){
			if(A[i]<=s2a && i!=i1a){
				s2a = A[i];
			}
			if(B[i]<=s2b && i!=i1b){
				s2b = B[i];
			}
		}*/
  else if(((A[i1a]+B[i2b])%M)<((B[i1b]+A[i2a])%M))
  {  cout<<A[i1a]+B[i2b];
  }
  else if(((A[i1a]+B[i2b])%M)>=((B[i1b]+A[i2a])%M))
  {
  	cout<<B[i1b]+A[i2a];
  }
  /*unsigned long long sum = (s1a+s2b<=s1b+s2a) ?s1a+s2b : s1b+s2a;
		cout << sum;}*/
    return 0;
  }
