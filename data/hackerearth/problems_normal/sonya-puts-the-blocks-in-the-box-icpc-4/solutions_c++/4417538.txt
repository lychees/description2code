#include<bits/stdc++.h>
using namespace std;
#define ll long long
static ll int dp[2][100001],ele[100001];
int main(){
	int n,m;
	scanf("%d %d",&n,&m);
	ll int sum = -1;
	static ll int pre[100001],p=0;
	for(int i=0;i<n;i++){
		int len;
		scanf("%d",&len);
		for(int j=0;j<len;j++){
			pre[p] = sum;
			scanf("%lld",&ele[p++]);
		}
		sum+=len;
	}
	int ind = 1;
   // printf("%d\n",sum);
	for(int i=0;i<=sum;i++){
		dp[0][i] = ele[i];
	}
	ll int ans=0;
	for(int i=2;i<=m;i++){
		ll int pre_block=0;
		for(int j=0;j<=sum;j++){
			dp[ind][j] = ele[j];
		//	if(i==4&&j==11)
		//	    printf("%d %d %d\n",i,j,dp[ind][j]);
			if(j>0)
				dp[ind][j] = max(dp[ind][j],ele[j]+dp[!ind][j-1]);
		//	if(i==4&&j==11)
		//	    printf("%d %d %d\n",i,j,dp[ind][j]);
				dp[ind][j] = max(dp[ind][j],pre_block+ele[j]);
		//		printf("%d\n",j);
			
		//	if(j>0)
		//	dp[ind][j] = max(dp[ind][j],dp[ind][j-1]);
			
			ans = max(ans,dp[ind][j]);
		//	if(i==4&&j==11)
		//	    printf("%d %d %d\n",i,j,dp[ind][j]);
		//	if(dp[ind][j]==269){
		//		printf("%d %d\n",i,j);
		//	}
		//	if(j==6&&i==4)
		//	    printf("%d\n",dp[ind][j]);
		    //printf("%d %d %d\n",i,j,dp[ind][j]);
			if(j+1<=sum&&pre[j+1]!=pre[j]){
				//printf("%d\n",j);
				int ma = 0;
				int k = j;
				int x = pre[j];
				while(k>=0&&pre[k]==x){
					pre_block = max(pre_block,dp[!ind][k]);
				//	printf("k = %d\n",k);
					k--;
				}
			//	printf("Mohib = %d\n",pre_block);
			}
		}
		ind = !ind;
	}
	cout<<ans<<" ";
	return 0;
}