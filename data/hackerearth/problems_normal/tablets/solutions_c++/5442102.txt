#include <bits/stdc++.h>
using namespace std;

int main()
{
	int n; cin >> n;
	vector<pair<int, int>>v;
	vector<int> score;
	for(int i=0;i<n;i++)
	{
		int x; cin >> x;
		score.push_back(x);
		v.push_back({x, i});
	}
	sort(v.begin(), v.end());
	
	vector<int>total(n, 0);
	int j, cur, count = 0;
	
	for(int i=0;i<n;i++)
	{
		j = v[i].second;
		cur = 0;
		if(j > 0 && score[j] > score[j-1]) cur = total[j-1];
		if(j<n-1 && score[j] > score[j+1]) cur = max(cur, total[j+1]);
		
		total[j] = cur+1;
		count += total[j];
	}
	cout << count;
}
