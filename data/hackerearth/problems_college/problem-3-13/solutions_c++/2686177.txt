#include<cstdio>
#include<iostream>
#include<cstring>
using namespace std;
typedef int w;
typedef long long l;
w n,m;
w a[1007][1007];
w c[1007][1007];
w r[1007][1007];


void solve(){
     cin>>n>>m;
     for(int i=1;i<=n;++i){
        for(int j=1;j<=m;++j){
            cin>>a[i][j];
            c[i][j]=1;
            r[i][j]=1;
            if(a[i][j]==a[i-1][j]) c[i][j]+=c[i-1][j];
           // cout<<c[i][j]<<" ";
        }
        //cout<<endl;
     }
     w res=0;
     for(int i=1;i<=n;++i){
        for(int j=m;j>=1;--j){
            if(a[i][j]==a[i][j+1]) r[i][j]+=r[i][j+1];
            res=max(res,c[i][j]+r[i][j]-1);
        }
     }
     cout<<res<<endl;

}

int main(){
    ios_base::sync_with_stdio(false);
   //freopen("in","r",stdin);
   solve();
}
 