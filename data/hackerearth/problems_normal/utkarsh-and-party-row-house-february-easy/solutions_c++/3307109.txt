#include <bits/stdc++.h>
using namespace std;
#define pb push_back
#define mk make_pair
typedef long long ll;
typedef unsigned long long ull;

ll a[1000000],f[1000000],f1[1000000],n,f2[1000000];
void up(ll in,ll v)
{
        for(ll i=in;i<=n+1;i+=(i&-i))
        f[i]+=v;
}
void up1(ll in,ll v)
{
        for(ll i=in;i<=n+1;i+=(i&-i))
        f1[i]+=v;
}
void up2(ll in,ll v)
{
        for(ll i=in;i<=n+1;i+=(i&-i))
        f2[i]+=v;
}
ll qq(ll x)
{
ll sum=0;
        for(ll i=x;i>0;i-=(i&-i))
        sum+=f[i];
        return sum;
}
ll qqq(ll x)
{
ll sum=0;
        for(ll i=x;i>0;i-=(i&-i))
        sum+=f1[i];
        return sum;
}
ll qqqq(ll x)
{
ll sum=0;
        for(ll i=x;i>0;i-=(i&-i))
        sum+=f2[i];
        return sum;
}
int main()
{
        ll q,i,ty,k,l,r,s;
        cin>>n>>q;
        for(i=0;i<n;i++)
        cin>>a[i];
        for(i=0;i<n;i++){
        up(i+1,a[i]*(i+1));
        up1(i+1,a[i]);
        up2(i+1,a[i]*(n-i+1));
        }
        while(q--)
        {
                cin>>ty;
                if(ty==1)
                {
                        cin>>k>>l>>r;
                       if(k<=l||k>=r)
                       cout<<abs((qq(r)-qq(l-1))-k*(qqq(r)-qqq(l-1)))<<endl;
                       //else if(k>=r)
                      // cout<<abs((qqqq(r)-qqqq(l-1))-k*(qqq(r)-qqq(l-1)))<<endl;
                       else
                       {
                        ll p=(qq(r)-qq(k))-k*(qqq(r)-qqq(k));
                        ll q=(k*(qqq(k-1)-qqq(l-1))-(qq(k-1)-qq(l-1)));
                        cout<<p+q<<endl;
                       }
                }
                else
                {
                        cin>>k>>s;
                        up(k,k*s);
                        up1(k,s);
                        up2(k,s*(n-k+1));
                        a[k-1]+=s;
                }
        }
}
