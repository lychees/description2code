#include <iostream>
using namespace std;
int mod(int a, int b) {
  return ((a%b)+b)%b;
}
long long int extended_euclid(long long int a, long long int b, long long int &x,long long  int &y) {  
  long long int xx = y = 0;
  long long int yy = x = 1;
  while (b) {
    int q = a/b;
    int t = b; b = a%b; a = t;
    t = xx; xx = x-q*xx; x = t;
    t = yy; yy = y-q*yy; y = t;
  }
  return a;
}
long long int mod_inverse(long long int a, long long int n) {
  long long int x, y;
  long long int d = extended_euclid(a, n, x, y);
  if (d > 1) return -1;
  return mod(x,n);
}

int main()
{
	long long int t,a,p,n,b,ans;
    cin>>t;
	while (t)
	{
		t-=1;
		cin>>a>>p>>n;
		b=mod_inverse(a,p);
		if (b==-1)
		{
			cout<<-1<<endl;
		}
		else
		{
			if (n%2==0)
				ans=(a+b)*(n/2);
			else
				ans=a*((n+1)/2)+b*((n-1)/2);
			cout<<ans<<endl;
			
		}
	}
    return 0;
}
