#include <iostream>
#include <algorithm>
using namespace std;

int countOnes(int n) {
	int ans = 0;
	while(n>0) {
		ans += n&1;
		n >>= 1;
	}
	return ans;
}

int main()
{
    int n, k, ans;
    int t, i;
    pair<int, int> a[100001];
    cin>>t;
    
    while(t--) {
    	ans = 0;
    	cin>>n>>k;
    	for(i=0;i<n;i++) {
    		cin>>a[i].second;
    		a[i].first = countOnes(a[i].second);
    	}
    	sort(a, a+n);
    	for(i=0;i<k;i++) 
    		ans += a[n-1-i].first;
    	cout<<ans<<endl;
    }
    return 0;
}
