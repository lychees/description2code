# https://www.hackerearth.com/code-monk-number-theory-i/algorithm/the-magical-shop/

a,b = map(int, raw_input().split())

if a <= 10**9 and b <= 10**9:

    c = raw_input()
    c = list(c)
    if len(c) <= 10**5:
        c = map(int, c)

        count = 0

        for i in c:

            if i == 1:
                count = count + a
                count = count % b
            a = (a*a)%b


        print count
