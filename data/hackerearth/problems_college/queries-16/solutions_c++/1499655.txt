#include <iostream>
using namespace std;
int qq[10000001];
int u_s[10000001];
int h=0;
int main()
{
	int cc=0;
    int q;
    scanf("%d",&q);
    int ty=0;
    while(q--){
    	h++;
    	scanf("%d",&ty);
    	if(ty==0){
    		cc++;
    		long long int n;
    		scanf("%lld",&n);
    		long long int val=1;
    		
    		while(val<=n){
    			if(u_s[n/val]!=h){
    			qq[n/val]++;
    				u_s[n/val]=h;
    			}
    			val*=2LL;
    		}
    		
    	}
    	if(ty==1){
    		cc--;
    		long long int n;
    		scanf("%lld",&n);
    		long long int val=1;
    		while(val<=n){
    			if(u_s[n/val]!=h){
    			qq[n/val]--;
    			u_s[n/val]=h;
    			}
    			val*=2;
    		}
    	}
    	if(ty==2){
    		int n;
    		scanf("%d",&n);
    		if(n==0){
    			printf("%d\n",cc);
    			continue;
    		}
    		printf("%d\n",qq[n]);
    	}
    }
   // if(ty==3){
    //		printf("%d\n",qq[q]);
    //	}
    return 0;
}
