#include <iostream>
#include<bits/stdc++.h>
using namespace std;
int arr[10001];
int visited[10001];
int helper(vector<vector<int> > &res, int n){
	memset(arr,0,sizeof(arr));
	memset(visited,0,sizeof(visited));
	queue<int> q;
	q.push(1);
	visited[1] = 1;
	while(!q.empty()){
		int curr = q.front();
		q.pop();
		if(curr==n)
		break;
		for(int i=0; i<res[curr].size(); i++){
			if(!visited[res[curr][i]]){
				visited[res[curr][i]] = 1;
				q.push(res[curr][i]);
				arr[res[curr][i]] = arr[curr] + 1;
			}
		}
	}
	return arr[n];
}
int main()
{
    int t;
    cin>>t;
    while(t--){
    	int v,e;
    	cin>>v>>e;
    	vector<vector<int> > res(v+1,vector<int>());
    	int v1,v2;
    	for(int i=0; i<e; i++){
    		cin>>v1>>v2;
    		res[v1].push_back(v2);
    		res[v2].push_back(v1);
    	}
    	cout<<helper(res,v)<<endl;
    }
    return 0;
}
