#include <iostream>
#include <vector>
#include <algorithm>
#include <map>
#include <string>
#include <set>
#include <stack>
#include <queue>
#include <cmath>
using namespace std;

#define T int t;cin>>t;while(t--)
#define L long long n;cin>>n;
#define rep(i,n) for(i=0;i<n;i++)
#define repi(i,a,n) for(i=a;i<n;i++)
#define elif else if
#define ll long long
#define vi vector<int>
#define pii pair<int,int>
#define mp make_pair
#define pb push_back
#define len(s) s.length()
#define ff first
#define ss second


int main()
{
    //cout << "Hello World!" << endl;
   	ll a,b; cin>>a>>b;
   	string s;cin>>s;
   	ll n=len(s);
   	ll i;
   	ll tot=0;
   	ll curr=a;
   	rep(i,n){
   		
   		if(s[i]=='1'){
   			tot+=(curr)%b;
   		}
   		curr=((curr%b)*(curr%b))%b;
   	}
   	cout<<tot%b<<endl;
    return 0;
}
