#include <bits/stdc++.h>
using namespace std;

int main() {
	// your code goes here
	int n,i,j,t;
	char A[51][51];
	cin>>t;
	while(t--)
	{
	    cin>>n;
	    for(i=0;i<n;i++)
	    {
	        cin>>A[i];
	    }
	  int vert=1,hor=1;
	  for(i=0;i<n;i++)
	  {
	      for(j=0;j<n;j++)
	      {
	          if(A[i][j]!=A[n-i-1][j])
	          hor=0;
	          if(A[i][j]!=A[i][n-j-1])
	          vert=0;
	      }
	  }
	  if(hor && vert)
	  cout<<"BOTH"<<endl;
	  else if(hor && vert==0)
	  cout<<"HORIZONTAL"<<endl;
	  else if(vert && hor==0)
	  cout<<"VERTICAL"<<endl;
	  else
	  cout<<"NO"<<endl;
	  
	}
	return 0;
}
