#include <bits/stdc++.h>

#define ll long long 
#define vi vector<int>
#define pii pair<int,int>
#define si set<int>
#define qi queue<int>

#define inf (1000000000+7)
#define pb push_back
#define mp make_pair
#define sz size()
#define set(a,x) memset(a,x,sizeof(a))
#define all(a) a.begin(),a.end()
#define fr first
#define se second

using namespace std;

pii edge[100001];
int p[100001];
vi ans;

void make_set(int node) {
    p[node] = node;
}

int find_set(int node)  {
    if(p[node] != node)   return p[node] = find_set(p[node]);
    return node;
}

int main()  {
    //freopen("input.txt","r",stdin);
    int n,m;
    cin >> n >> m;


    for(int i=1;i<=m;i++)   {
        int u,v;
        cin >> u >> v;
        edge[i].fr = u,edge[i].se = v;
    }

    for(int i=1;i<=n;i++)   make_set(i);
    
    for(int i=m;i>=1;i--)   {
        int s1 = find_set(edge[i].fr);
        int s2 = find_set(edge[i].se);
		//cout << s1 << ' ' << s2 << "\n";
        
        if(s1 != s2)    {
        	p[s1] = s2;
        }
        else    ans.pb(i);    
    }

    cout << ans.sz << "\n";

    for(int i=ans.sz-1;i >=0;i--)   cout << ans[i] << "\n";
    return 0;
}