'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''


def convertAlphabet(s, fromAlphabet, toAlphabet):
    newWord = []
    fromAlphaList = dict(zip(list(fromAlphabet), [i for i in range(26)]))
    toAlphaList = dict(zip([i for i in range(26)], list(toAlphabet)))
    for c in list(s):
        newWord.append(toAlphaList[fromAlphaList[c]])
    return "".join(newWord)


def main():
    rightOrder = 'abcdefghijklmnopqrstuvwxyz'
    t = int(raw_input())
    for i in range(t):
        listOfStrings = []
        changedAlphabet = raw_input()
        m = int(raw_input())
        for j in range(m):
            listOfStrings.append(
                convertAlphabet(
                    raw_input(),
                    changedAlphabet,
                    rightOrder))
        listOfStrings.sort()
        for s in listOfStrings:
            print convertAlphabet(s, rightOrder, changedAlphabet)


main()
