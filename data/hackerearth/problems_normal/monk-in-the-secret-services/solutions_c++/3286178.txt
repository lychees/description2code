#include <bits/stdc++.h>

using namespace std;

const int oo = INT_MAX/2 - 1;
int graph[101][101];
int main(){
//    freopen("in.txt","r",stdin);
	int T,n,m,u,v,w,s,a,h;
	cin >> T;
	while(T--){
		cin >> n >> m;
		for(int i=0; i<n; ++i)
			for(int j=0; j<n; ++j)
				if(i == j) graph[i][j] = 0;
				else graph[i][j] = oo;

		while(m--){
			cin >> u >> v >> w;
			u--; v--;
			graph[u][v] = graph[v][u] = min(graph[u][v],w);
		}

		cin >> s >> a >> h;
		s--; a--; h--;

		for(int k=0; k<n; k++){
			for(int i=0; i<n; i++){
				for(int j=0; j<n; j++){
					graph[i][j] = min(graph[i][j], graph[i][k] + graph[k][j]);
				}
			}
		}


		int ans = -oo;
		for(int i=0; i<n; i++){
			if(i == s || i == a || i == h) continue;
			ans = max( ans, graph[s][i] + graph[i][a] + graph[a][i] + graph[i][h] );
		}

		cout << ans << endl;

	}

    return 0;
}
