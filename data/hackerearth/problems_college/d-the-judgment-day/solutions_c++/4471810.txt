#include<bits/stdc++.h>
using namespace std;
int main()
{	int t;
	cin>>t;
	while(t--)
	{	int n;
		cin>>n;

		vector<int> v(5,0);
		for(int i=0;i<n;i++)
		{	int value;
			cin>>value;
			v[value]++;
		}
		int ans=0;
		ans+=v[4];
		if(v[1]==v[3])
		{	ans+=v[1];
			v[1]=0;
			v[3]=0;
		}
		else	if(v[1]<v[3])
			{	ans+=v[1];
				
				v[3]-=v[1];
				v[1]=0;
				ans+=v[3];
				v[3]=0;

			

			}
			else
			{	ans+=v[3];
				v[1]-=v[3];
				v[3]=0;
			}
		
		if(v[2]%2==0)		
		{	ans+=(v[2]/2);

		}
		else	
		{	ans=ans+v[2]/2;
			v[2]%=2;
			//cout<<ans<<endl;
			if(v[2]==1)
			{	ans++;
				v[2]=0;
				v[1]-=2;
			}
		}
	
		if(v[1]>0)ans+=(v[1]/4);
		
		v[1]%=4;
		if(v[1]>0)ans++;

		cout<<ans<<endl;
	}
	return 0;
}