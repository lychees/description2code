def recur(num, n, l):
    if num > n:
        return -1
    else:
        return max(l[num], recur(num*2, n, l), recur(num*2+1, n, l))


N = int(raw_input())
f = [0] * (N+1)
for i in range(N):
    P = [int(_) for _ in raw_input().split()]
    tmp = [0] * (N+1)
    for j in range(1, N+1):
        num = j
        while num % 2 == 0:
            num /= 2
        tmp[j] = recur(num, N, f)
    for j in range(1, N+1):
        f[j] = tmp[j] + P[j-1]
print max(f)
