#include <iostream>
#define M 1000000007
using namespace std;
 
int main()
{
	ios::sync_with_stdio(false);
	cin.tie(NULL);
	long long a, b, c, N;
    cin>>a>>b>>c>>N;
  //  a=a%M; b=b%M; c=c%M;
   	unsigned long long int A[N+1], B[N+1];
   	A[1] = (a*c), B[1] = (b*c);
   	A[1] = A[1]%M;
   	B[1] = B[1]%M;
   	unsigned long long int Amin1=A[1], Amin2=1000000006, Bmin1=B[1], Bmin2=1000000006;
   	int indexAmin=1, indexBmin=1;
    for(int i=2 ; i<=N ; i++)
     {
       A[i] = (((((A[i-1]*a)%M)*b)%M)*c)%M + (((A[i-1]*a)%M)*b)%M + (((A[i-1]*a)%M)*c)%M;
                A[i] = A[i]%M;
       if(A[i]<Amin1){
       Amin1=A[i];
       indexAmin=i;
       }
     }
     for(int i=2 ; i<=N ; i++)
      {
         B[i] = (((((B[i-1]*b)%M)*c)%M)*a)%M + (((B[i-1]*b)%M)*a)%M + (((B[i-1]*b)%M)*c)%M;
                B[i] = B[i]%M;
        if(B[i]<Bmin1){
          Bmin1=B[i];
          indexBmin=i;
        }
      }
      unsigned long long int Sum = Amin1 + Bmin1;
      if(indexAmin!=indexBmin)
      cout<<Sum;
      else{
      for(int i=1; i<=N;i++)
    {
    	if(A[i]>=Amin1 && A[i] < Amin2 && i!=indexAmin)
    	Amin2=A[i];
    	if(B[i]>=Bmin1 && B[i] < Bmin2 && i!=indexBmin)
    	Bmin2=B[i];
    }
    	unsigned long long int Sum1 = Amin1 + Bmin2;
    	unsigned long long int Sum2 = Amin2 + Bmin1;
    	if(Sum1 < Sum2)
    	cout<<Sum1;
    	else
    	cout<<Sum2;
      }
    return 0;
}