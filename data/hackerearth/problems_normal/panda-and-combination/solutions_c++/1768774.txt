/*
*	By manrajsingh
*	Do not copy -_-
*	Question:
*/
#include<bits/stdc++.h>
using namespace std;
#define ll long long
#define gc getchar_unlocked
#define pc(x) putchar_unlocked(x)
#define debug(x){cout<<#x<<" = "<<x<< endl;}
int read_i(){char c=gc();while(c<'0' || c>'9'){c = gc();}int ret = 0;while(c>='0' && c<='9'){ret=10*ret+c-48;c=gc();}return ret;}
#define mod 1000003

ll a[100];

int main(){
	ios_base::sync_with_stdio(0);
	cin.tie(0);
	ll n,m;
	#ifdef test
	freopen("input.txt","r",stdin);
	#endif
	double power;
	int po,t;
	ll ctr;
	scanf("%d",&t);
	while(t--){
		scanf("%lld%lld",&n,&m);
		ctr=0;
		a[0]=1;
		for(int i=1;a[i]<1000000000000000000&&i<65;i++){
			a[i]=m*a[i-1];
		}
		if(m>n){
			printf("%lld\n",n);
			continue;
		}
		if(m==n){
			printf("1\n");
			continue;
		}
		while(n!=0){
			power=(double)(log(n)/log(m));
			po=floor(power);
			if(po==0){
				ctr+=(n);
				break;
			}
			n=n-a[po];
			ctr++;
		}
		printf("%lld\n",ctr);
	}
	return 0;
}
