#include <iostream>
#include <climits>
using namespace std;

void magic(int* a ,int n,int i,int sum,int &max){
	if(i>=n)
	{
		if(max < sum )
			max = sum;
		return ;
	}
	magic(a, n,(i*2)+1,sum+a[i],max);
	magic(a, n,(i*2)+2,sum+a[i],max);
}
void maxmagic(int* a, int n,int i,int& max)
{
	int lmax,rmax;
	for(int j=0;j<n;j++)
	{	
		lmax=INT_MIN;
		rmax=INT_MIN;
		magic(a,n,(j*2)+1,0,lmax);
		magic(a,n,(j*2)+2,0,rmax);
		if(max < lmax+rmax+a[j])
			max = lmax+rmax+a[j];
		//cout<<"j"<<j<<"a"<<j<<"  left:"<<lmax<<"  right:"<<rmax<<"\n";
	}
}

int main()
{
	int t,n,max;
	cin >>t;
	while(t--){
		max = INT_MIN;
		cin >> n;
		int a[n];
		for(int i=0;i<n;i++)
			cin >>a[i];
		maxmagic(a,n,0,max);
		cout<<max<<"\n";
	}
    return 0;
}
