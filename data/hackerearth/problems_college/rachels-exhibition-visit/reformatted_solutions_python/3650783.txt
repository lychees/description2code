for _ in xrange(int(raw_input())):
    a = str(raw_input()).split()
    N, K, L, R = map(int, a)
    dress = str(raw_input())
    sp = str(raw_input())
    arr = [0]*N

    cnt = 0

    for i in range(N):
        if dress[i] in sp:
            arr[i] = 1

    for i in range(N):
        s = arr[i]
        if s >= L and s <= R:
            cnt += 1
        for j in range(i+1, N):
            s += arr[j]
            if s >= L and s <= R:
                cnt += 1
    print cnt
