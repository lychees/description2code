#include<bits/stdc++.h>
using namespace std;
int bit[400005][2],arr[100005],n;
vector<int>v,q;
struct qry
{
	int type;
	int x,y;
};
void update(int index,int type,int val)
{
	while(index<=n)
	{
		bit[index][type]+=val;
		index+=index&(-index);
	}
}
int query(int index, int type)
{
	int ans=0;
	while(index)
	{
		ans+=bit[index][type];
		index-=index&(-index);
	}
	return ans;
}
int main()
{
	int k,i;
	scanf("%d",&n);
	for(i=1;i<=n;i++)
	{
		int type;
		scanf("%d",&arr[i]);
		type=arr[i]%2;
		update(i,type,1);
	}
	int q,cnt;
	scanf("%d",&q);
	while(q--)
	{
		int type;
		scanf("%d",&type);
		int x,y,ans=0;
		switch(type)
		{
			case 1:
				scanf("%d%d",&x,&y);
				ans=query(y,0)-query(x-1,0);
				printf("%d\n",ans);
				break;
			case 2:
				scanf("%d%d",&x,&y);
				ans=query(y,1)-query(x-1,1);
				printf("%d\n",ans);
				break;
			case 0:
				scanf("%d%d",&x,&y);
				update(x,arr[x]%2,-1);
				arr[x]=y;
				update(x,arr[x]%2,1);
		}
	}
	return 0;
}
