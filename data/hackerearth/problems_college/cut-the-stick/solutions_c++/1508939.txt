#include <iostream>
#include <vector>
#include <cstdio>
#include <sstream>
#include <map>
#include <string>
#include <algorithm>
#include <queue>
#include <cmath>
#include <set>
using namespace std;

int main(){
	int T;
	cin >> T;
	int S,N,L;
	while(cin >> S >> N >> L){
		vector<int> A(N);
		for(int i=0; i<N; i++){
			scanf("%d", &A[i]);
		}
		sort(A.begin(), A.end());

		long long ans = 0;

		for(int i=0; i<N; i++){
			if(A[i]>L){
				ans += N - (i+1);
			}else{
				int x = S - A[i];
				if(x > 2*L){
					ans += N - (i+1);
				}else if(x>L){
					int left = lower_bound(A.begin(), A.end(), A[i]+x-L) - A.begin();
					int right = upper_bound(A.begin(), A.end(), A[i]+L) - A.begin();
					ans += N-(i+1) - (right - left);
				}
			}
		}
		cout << ans << endl;
	}
	return 0;
}