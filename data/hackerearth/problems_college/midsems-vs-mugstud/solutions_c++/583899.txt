#include<bits/stdc++.h>
using namespace std;
int t , n;
long long a[52][52][52] , b[52][52][52];
int main()
{
    scanf("%d",&t);
    while(t--) {
        scanf("%d",&n);
        for(int i=0;i<n;i++) {
            for(int j=0;j<n;j++) {
                for(int k=0;k<n;k++) scanf("%lld",&b[i][j][k]);
            }
        }
        for(int i=0;i<n;i++) {
            for(int j=0;j<n;j++) {
                for(int k=0;k<n;k++) {
                    a[i][j][k] = b[i][j][k];
                    if(i > 0 && j > 0 && k > 0) a[i][j][k] -= b[i-1][j-1][k-1];
                    if(i > 0 && j > 0) a[i][j][k] += b[i-1][j-1][k];
                    if(j > 0 && k > 0) a[i][j][k] += b[i][j-1][k-1];
                    if(k > 0 && i > 0) a[i][j][k] += b[i-1][j][k-1];
                    if(i > 0) a[i][j][k] -= b[i-1][j][k];
                    if(j > 0) a[i][j][k] -= b[i][j-1][k];
                    if(k > 0) a[i][j][k] -= b[i][j][k-1];
                }
            }
        }
        for(int i=0;i<n;i++) {
            for(int j=0;j<n;j++) {
                for(int k=0;k<n;k++) printf("%lld ",a[i][j][k]);
                puts("");
            }
        }
    }
}
