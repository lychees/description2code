#include <iostream>
using namespace std;

int mat[101][101];
int dest[101][101];
int a[201];
int main()
{
    int n, q;
    cin >> n >> q;
    for (int i = 0; i < n; i++) {
    	for (int j = 0; j < n; j++) {
    		cin >> mat[i][j];
    	}
    }
    int angle;
    for (int i = 0; i < q; i++) {
    	cin >> angle;
    	if (angle % 360 == 0) {
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				cout << mat[i][j] << " ";
    			}
    			cout << endl;
    		}	
    		cout << endl;
    	} else if (angle % 360 == 270) {
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				dest[n - j - 1][i] = mat[i][j];
    			}
    		}
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				cout << dest[i][j] << " ";
    			}
    			cout << endl;
    		}	
    		cout << endl;
    	} else if (angle % 360 == 180) {
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				dest[n - i - 1][n - j - 1] = mat[i][j];
    			}
    		}
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				cout << dest[i][j] << " ";
    			}
    			cout << endl;
    		}	
    		cout << endl;
    	} else {
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				dest[j][n - i - 1] = mat[i][j];		
    			}
    			
    		}	
    		
    		for (int i = 0; i < n; i++) {
    			for (int j = 0; j < n; j++) {
    				cout << dest[i][j] << " ";
    			}
    			cout << endl;
    		}	
    		cout << endl;
    		
    	}
    }
    
    return 0;
}
