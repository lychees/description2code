#include <bits/stdc++.h>

#define pld(x) printf("%lld", x)
#define pldn(x) printf("%lld\n", x)
#define pd(x) printf("%d", x)
#define pdn(x) printf("%d\n", x)
#define ps(x) printf("%s", x)
#define psn(x) printf("%s\n", x)
#define sd(x) scanf("%d", &x)
#define sld(x) scanf("%lld", &x)
#define ss(x) scanf("%s", &x)
#define mp make_pair
#define pb(x) push_back(x)
#define ll long long

using namespace std;


map<char, int> m;

bool myfunction(string a, string b) {

    int i;
    for(i=0; i < a.length() && i < b.length(); i++) {
        if(a[i] == b[i]) {
            continue;
        } else {
            return m[a[i]] < m[b[i]];
        }
    }
    if(i == a.length()) {
        return true;
    } else {
        return false;
    }
}
int main()
{

    int t,n,i;

    sd(t);

    char c;
    string al,s;
    vector<string>v;

    while(t--) {
        v.clear();
        m.clear();

        cin>>al;

        for(i=0;i<al.size();i++) {
            m[al[i]] = i;
        }

        sd(n);

        for(i=0;i<n;i++) {
            cin>>s;
            v.push_back(s);
        }

        sort(v.begin(), v.end(), myfunction);

        for(i=0;i<n;i++) {
            //cout<<"teas"<<endl;
            cout<<v[i]<<endl;
        }
    }
    return 0;
}
