for _ in range(input()):

    # reference array
    art = list(raw_input())
    # dictionary
    arr = []
    for x in range(input()):
        a = list(raw_input())
        i = 0
        for item in a:
            a[i] = art.index(item)
            i = i+1

        arr.append(a)

    final = sorted(arr)

    for it in final:
        j = 0
        for key in it:
            it[j] = art[key]
            j = j+1
        print ''.join(it)
