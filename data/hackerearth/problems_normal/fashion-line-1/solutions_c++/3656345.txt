#include <bits/stdc++.h>
using namespace std;
int a[10005];
int h[200];
int main()
{	int* it,*pt;
    int t,n,k,l,r,i,j;
    string s,p;
    cin>>t;
    while(t--)
    {	int ans=0;
    	cin>>n>>k>>l>>r;
    	cin>>s>>p;
    	for(i=0;i<k;i++)
    	h[p[i]]=1;
    	for(i=1;i<=n;i++)
    	{
    		
    		if(h[s[i-1]]==1)
    		a[i]=a[i-1]+1;
    		else a[i]=a[i-1];
    	}
    	a[n+1]=INT_MAX;
    	for(i=0;i<=n;i++)
    	{
    		it=lower_bound(a+i+1,a+n+2,a[i]+l);
    		
    		pt=upper_bound(a+i+1,a+n+2,a[i]+r);
    		//cout<<it-a<<" "<<pt-a<<endl;
    		//if(it-pt==0)continue;
    		ans+=pt-it;
    		
    	}
    	memset(a,0,10004*4);
    	memset(h,0,200*4);
    	cout<<ans<<endl;
    }
    return 0;
}
