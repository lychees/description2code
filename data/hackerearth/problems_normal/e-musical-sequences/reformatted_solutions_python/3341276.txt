for i in range(int(raw_input())):
    n, m, z = map(int, raw_input().split(' '))
    l = list(map(int, raw_input().split(' ')))
    a = 0
    s = 0
    for k in l:
        a += 1
        if a % 2 == 1:
            s += k
        else:
            s -= k
        s %= m
    if (n % 2 == 0):
        l.append((-s) % m)
    else:
        l.append(s)
    if n % 2 == 1:
        print(l[z % (n+1)])
    else:
        for i in range(n+1):
            l.append((-l[i]) % m)
        print(l[z % (2*(n+1))])
