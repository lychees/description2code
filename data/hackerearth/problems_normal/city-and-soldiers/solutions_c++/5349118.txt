#include <iostream>
#define ui unsigned int

using namespace std;

ui n,q,id[100000],a,b;

ui root(ui x)
{
	while (x != id[x])
	{
		id[x] = id[id[x]];
		x = id[x];
	}
	return x;
}

int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0);
    cout.tie(0);
    
    int c;
    cin >> n >> q;
    for (ui i = 1; i <= n; i++)
      id[i] = i;
    while (q--)
    {
    	cin >> c >> a;
    	if (c == 1)
    	{
    		cin >> b;
    		a = root(a);
    		b = root(b);
    		if (a != b)
    		  id[a] = id[b];
    	}
    	else if (c == 2)
    	{
    		b = root(a);
    		id[b] = id[a] = a;
    	}
    	else 
    	{
    		b = root(a);
    		cout << b << "\n";
    	}
    }
    return 0;
}
