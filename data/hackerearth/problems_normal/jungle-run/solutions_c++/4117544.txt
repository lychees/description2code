#include <bits/stdc++.h>
using namespace std;

#define ll int

ll visited[40][40];
ll ctr=-1,ans=1000000;

void dfs(ll startx,ll starty,char str[][40],ll n)
 {

 
      ll i=startx;
      ll j=starty;
    
if(str[i][j]=='E')
 {
 if(ans>ctr)
  {
     ans=ctr; 
  }
  
  return;
 }
   visited[startx][starty]=1;
 ctr++;
     if((str[i-1][j]=='P'||str[i-1][j]=='E')&&visited[i-1][j]==0&&i-1>=0)
      {
       dfs(i-1,j,str,n);     
      }  
      if((str[i][j-1]=='P'||str[i][j-1]=='E')&&visited[i][j-1]==0&&j-1>=0)
      {
       dfs(i,j-1,str,n);  
      }
    if((str[i+1][j]=='P'||str[i+1][j]=='E')&&visited[i+1][j]==0&&i+1<n)
      {
      dfs(i+1,j,str,n);
      }
    if((str[i][j+1]=='P'||str[i][j+1]=='E')&&visited[i][j+1]==0&&j+1<n)
      {
      dfs(i,j+1,str,n);
      }
     visited[i][j]=0;
     ctr--;
   return;
 }
 
 
int main() {
	// your code goes here
ll n,i,startx,starty,j;
cin>>n;
char str[40][40];
memset(visited,0,sizeof(visited));

for(i=0;i<n;i++)
 {
 for(j=0;j<n;j++)
  {
  cin>>str[i][j];
  }
 }
for(i=0;i<n;i++)
 {
 for(j=0;j<n;j++)
  {
  if(str[i][j]=='S')
    {
      startx=i;
      starty=j;
     break;
    }
   }
  }
 // cout<<startx<<starty;
  ctr=0;
dfs(startx,starty,str,n);
cout<<ans;

	return 0;
}
