#include<bits/stdc++.h>
using namespace std;
map<string,bool> m;
static char m1[100010];
int solve(int cur,char* mohib,int p){
	if(p>15)
		return 0;
	if(cur==strlen(m1)){
		//cout<<mohib<<endl;
		return (m[string(mohib)]);
	}
	if(m1[cur]=='('){
		int ans=0;
		int j = cur+1;
		while(m1[j]!=')')
			j++;
		for(int i=cur+1;i<j;i++){
			mohib[p] = m1[i];
			ans += solve(j+1,mohib,p+1);
		}
		return ans;
	} else 
	if(m1[cur]>='a'&&m1[cur]<='z'){
		mohib[p] = m1[cur];
		return solve(cur+1,mohib,p+1);
	}
}
int main(){
	int l,d,n;
	scanf("%d %d %d",&l,&d,&n);
	static char str1[5001][16];
	for(int i=0;i<d;i++){
	//	string str;
		scanf("%s",str1[i]);
	//	m[string(str1)] = true;
	}
	int ans = 0;
	char mohib[16];
	for(int i=0;i<n;i++){
		scanf("%s",m1);
		int ans = 0;
		for(int j=0;j<d;j++){
			int p = 0;
			bool on = false;
			for(int len=0;len<strlen(m1);len++){
				if(m1[len]=='('){
					on = true;
					continue;
				}
				if(m1[len]==')'){
					on = false;
					continue;
				}
				if(m1[len]==str1[j][p]){
					p++;
					if(on){
						while(m1[len]!=')')
							len++;
						on = false;
					}
				}
			}
			if(p==l){
				ans++;
			}
		}
		printf("%d\n",ans);
	}
	//printf("%d\n",ans);
	return 0;
}