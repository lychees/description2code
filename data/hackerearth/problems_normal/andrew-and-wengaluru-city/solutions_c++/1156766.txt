#include <iostream>
using namespace std;

long maxWater(long arr[],long n){
	
	long l = 0 , r = n-1;
	long res = 0;
	long ml = 0 , mr = 0;
	
	while(l<=r){
		
		if(arr[l]<=arr[r]){
			if(arr[l]>=ml) ml = arr[l];
			else res = (res+ml-arr[l])%1000000007;
			l++;
		}
		else{
			if(arr[r]>=mr) mr = arr[r];
			else res = (res+mr-arr[r])%1000000007;
			r--;
		}
		
	}
	
	return res;
}

int main()
{
    int t;
    long n,arr[100000];
    cin>>t;
    
    while(t--){
    	
    	cin>>n;
    	
    	for(long i=0;i<n;i++)
    		cin>>arr[i];
    		
    	cout<<maxWater(arr,n)<<endl;
    }
    return 0;
}
