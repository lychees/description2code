'''
# Read input from stdin and provide input before running code

name = raw_input('What is your name?\n')
print 'Hi, %s.' % name
'''
T = input()
for testcase in xrange(T):
	N = input()
	S = raw_input()
	res = 0
	i = 0
	while i < N:
		c = 1
		while i < N-1 and S[i] <= S[i+1]:
			i += 1
			c += 1
		res += ((c*(c+1))/2)
		i += 1
	print res


