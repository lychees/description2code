#include <iostream>
#include <cstdio>
#include <algorithm>
#include <cmath>
#include <string>
#include <vector>
#include <stack>
#include <queue>
#include <set>
#include <cstring>
#include <map>
#include <cstdlib>
#include <ctime>
#define f first
#define s second
#define ll long long
#define ull unsigned long long
#define mp make_pair
#define pb push_back
#define vi vector <int>
#define pii pair<int, int>
using namespace std;          
const int N = int(1e6) + 500, M = 505, inf= int(1e9); 
ll dp[M][M];
ll res;
bool u[N+10];
int n,a[M];
bool was[M][M];
int p[N],pn,num[N+10],l[N];

int f(int c,int b){
	int x = p[l[b]];
	if(p[l[b]-1] >= a[c]){
		return p[l[b]] + p[l[b] - 1] - a[c] - a[b];
	}
	return p[l[c]] + p[l[c] + 1] - a[c] -a[b];
}

ll calc(int l,int r){
	if(was[l][r]){
		return dp[l][r];
	}
	was[l][r] = 1;
	if(r - l == 1) return dp[l][r] = f(l,r);
	ll res = inf;
	for(int i=l+1;i<r;i+=2){
		res = min(res, calc(l,i) + calc(i+1,r));		
	}
	res = min(res, calc(l+1,r-1) + f(l,r));
	return dp[l][r] = res;
}

int main () {
	for(int i=4;i<=N;i+=2) u[i] = 1;
	int K = int(sqrt(N + 2.0));
	for(int i=3;i<=K;i+=2) if(!u[i]){
		for(int j=i*i;j<=N;j+=(i+i)) u[j] = 1;
	}
	for(int i=2;i<=N;i++){
		if(!u[i]){
			p[++pn] = i;
			num[i] = pn;
		}
	}
	scanf("%d",&n);
	if(!n){
		cout << 0;
		return 0;
	}
	int x =0;
	u[1] = 1;
	for(int i=1;i<=n;i++){
		scanf("%d",&a[i]);
		x = a[i];
		while(u[x]) x++;
		l[i] = num[x];

	}
	cout << calc(1,n) + n / 2 << endl;;
	           
return 0;
}
