#include<bits/stdc++.h>
using namespace std;
#define ll long long

ll n, q;
ll bit[2][100100];

void update(ll x, ll val1, ll val2){
	while(x <= n){
		bit[0][x]+=val1;
		bit[1][x]+=val2;
		x+=(x&(-x));
	}
}

pair<ll, ll> query(ll x){
	pair<ll, ll> ret = make_pair(0,0);
	while(x){
		ret.first += bit[0][x];
		ret.second += bit[1][x];
		x-=(x&(-x));
	}
	return ret;
}

int main(){
	
	cin>>n>>q;
	for(int i=1; i<=n; i++){
		ll temp;cin>>temp;
		update(i, temp*i, temp);
	}
	
	while(q--){
		ll type;cin>>type;
		if(type == 1){
			ll k, l, r;
			cin>>k>>l>>r;
			pair<ll, ll> lres=query(l-1);
			pair<ll, ll> rres=query(r);
			pair<ll, ll> kres=query(k);
			ll ans=0;
			if(k < l){
				ans=(rres.first-lres.first)-(rres.second-lres.second)*k;
			}
			else if(k > r){
				ans=(rres.second-lres.second)*k - (rres.first-lres.first);
			}
			else{
				ans+=(rres.first-kres.first)-(rres.second-kres.second)*k;
				ans+=(kres.second-lres.second)*k-(kres.first-lres.first);
			}
			cout<<ans<<endl;
		}
		else{
			ll k, s;
			cin>>k>>s;
			update(k, k*s, s);
		}
	}
	return 0;
}