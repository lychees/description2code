#include<iostream>
#include<bits/stdc++.h>
using namespace std;
vector<int > tree;
int maxx;
int cal(int idx,int ss,int se){

 if(ss==se){
  maxx=max(maxx,tree[idx]);
  return tree[idx];
 }
 int mid=(ss+se)>>1;
 int a=cal(2*idx+1,ss,mid);
 int b=cal(2*idx+2,mid+1,se);
 maxx=max(maxx,a+b+tree[idx]);
 return max(a+tree[idx],b+tree[idx]);
}
int main(){

 int t;
 cin>>t;
 while(t--){
  int n;
  cin>>n;
  tree.resize(n);
  for(int i=0;i<n;i++) cin>>tree[i];
  maxx=INT_MIN;
  cal(0,0,(n+1)/2-1);
  cout<<maxx<<endl;
  tree.clear();
 }
 return 0;
}
