#include <bits/stdc++.h>

using namespace std;

long long gcd(long long a, long long b) {
  if(a == 0) return b;
  return gcd(b % a, a);
}

long long inv(long long a, long long p) {
    long long baru = 1, old = 0, q = p, r, h;
    int pos = 0;
    while (a > 0) {
        r = q%a;
        q = q/a;
        h = q*baru + old;
        old = baru;
        baru = h;
        q = a;
        a = r;
        pos = !pos;
    }
    return pos ? old : (p - old);
}

int main() {
  //ios_base::sync_with_stdio(false);
  
  int t;
  cin >> t;
  while(t--) {
    long long a, p, n;
    cin >> a >> p >> n;
    if(gcd(a, p) != 1) {
      puts("-1");
      continue;
    }
    long long b = inv(a, p);
    //cout << a << ' ' << b << endl;
    cout << a * (n / 2) + b * (n / 2) + (n % 2? a : 0) << endl;
  }
  
  return 0;
}
