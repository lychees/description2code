#include <iostream>
using namespace std;

void solve(){
	int c1,c2,c3;
	char c;
	cin>>c;
	c1 = c2 = c3 = 0;
	do{
		c1++;
		if(c=='{') c2++;
		else{
			if(c2>0) c2--;
			else c2 = 1, c3++;
		}
		//cout<<c<<" "<<c1<<" "<<c2<<" "<<c3<<endl;
		c = getchar();
		c = getchar();
	}while(c!='.');
	if(c1%2) cout<<-1<<endl;
	else cout<<c3+c2/2<<endl;
}

int main()
{
    int t;
    cin>>t;
    while(t--) solve();
    return 0;
}
