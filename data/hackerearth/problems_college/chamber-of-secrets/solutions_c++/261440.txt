#include <iostream>
#include <cstdio>

using namespace std;

typedef long long LL;

#define MAX 100007
#define MOD 1000000007LL

int N, T, Q;
LL num[MAX], num1[MAX], dp[MAX], sum[MAX], sum1[MAX];

int main()
{
	scanf("%d", &T);
	while (T--)
	{
		scanf("%d %d", &N, &Q);	
		for (int i=1 ; i<=N ; i++)
			scanf("%lld", &num[i]);
			
		sum[0] = sum1[0] = 0;
		for (int i=1 ; i<=N ; i++)
		{
		    num1[i] = (i * num[i]) % MOD;
			sum[i] = sum1[i] = 0;
			sum[i] = (sum[i-1] + num[i]) % MOD;
			sum1[i] = (sum1[i-1] + num1[i]) % MOD;
		}
		
		for (int q=1 ; q<=Q ; q++)
		{
			int w, x, y, z;
			scanf("%d %d %d %d", &w, &x, &y, &z);
			LL ans = (sum1[x+z] - sum1[x+y-1] + ((w-x)*(sum[x+z] - sum[x+y-1]))%MOD)%MOD;
			printf("%lld\n", (ans + MOD)%MOD);
		}
	}
    return 0;
}
