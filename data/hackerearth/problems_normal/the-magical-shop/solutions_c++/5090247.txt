#include<bits/stdc++.h>
using namespace std;
/*unsigned long long int modexp(unsigned long long int x, unsigned long long int y, unsigned long long int c)
{
	unsigned long long int res;
	res = 1;
	x = x%c;
	while(y > 0) {
			if(y % 2 != 0) {
					res = (res * x) % c;
			}
			y /= 2;
			x = (x * x) % c;
		
	}
	return res;
}*/
main()
{
	unsigned long long int k, m, c,l,t = 1,sum = 0,j;
	string s;
	cin >> k;
	cin >> m;
	cin >> s;
	c = 0;
	l = s.length();
	while(c < l) {
			if(s[c] == '1') {
					
					sum = ((sum % m) +( k % m))%m;
					
			}
			k = ((k % m) * (k % m)) % m; 
			c++;
	}

	
	cout << sum;
	
}