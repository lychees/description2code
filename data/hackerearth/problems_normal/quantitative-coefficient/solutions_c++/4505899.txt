#include <iostream>
#include<stdio.h>
#include<math.h>
#include<algorithm>
#include<string.h>
#include<stack>
#include<vector>
#include<set>
#include<queue>
#include<list>
#include<string>
#include<iterator>
#include <utility>
#include<math.h>
#define ll long long int
using namespace std;
ll arr[2000];
void initialize(ll n)
{
    ll i;
    for(i=0;i<=n;i++)
    {
        arr[i]=i;
    }
}
long long int root(ll n)
{
    while(n!=arr[n])
    {
        n=arr[n];
    }
    return n;
}
long long int uni(ll w,pair< ll,pair<ll,ll> > rel[])
{
    ll ans=1;
    ll i,num1,num2;
    for(i=1;i<=w;i++)
    {
        num1=rel[i].second.first;
        num2=rel[i].second.second;
        if(root(num1)!=root(num2))
        {
            arr[root(num1)]=root(num2);
            ans=ans*rel[i].first;
            ans=ans%1000000007;
        }
    }
    return ans;
}
int main()
{
    ll tc;
    cin>>tc;
    while(tc--)
    {
        pair< ll,pair<ll,ll> > rel[31320];
        ll n,m;
        cin>>n>>m;
        ll i;
        ll num1,num2,w;
        for(i=1;i<=m;i++)
        {
            cin>>num1>>num2>>w;
            rel[i]=make_pair(w,make_pair(num1,num2));
        }
        w=m+1;
        rel[0]=make_pair(0,make_pair(0,0));
        sort(rel,rel+w);
        initialize(n);
        ll ans;
        ans=uni(w,rel);
        cout<<ans<<endl;
    }
    return 0;
}
