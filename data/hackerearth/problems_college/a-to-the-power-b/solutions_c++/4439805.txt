#include<bits/stdc++.h>
#define ll long long
using namespace std;
ll power(ll x,ll pow,ll mod)
{
	ll res=1;
	while(pow)
	{
		if(pow&1)
			res=(res*x)%mod;
		pow>>=1;
		x=(x*x)%mod;
	}
	return res;
}
int tuotient(int n)
{
        int result=n;
        for(int i=2;i*i<=n;i++)
        {
                if(n%i==0)
                {
                        while(n%i==0)n/=i;
                        result-=result/i;
                }
        }
        if(n>1)
                result-=result/n;
        return result;
}
int main()
{
	ios::sync_with_stdio(false);
	cin.tie(NULL);
	int n,x,m;
	cin>>n>>x>>m;
	int tuo=tuotient(m);
	ll pow=1;
	for(int i=0;i<n;i++)
	{
		ll temp;
		cin>>temp;
		temp%=tuo;
		pow=pow*temp;
		pow%=tuo;
	}
	x%=m;
	cout<<power(x,pow,m)<<endl;
	return 0;
}