#include <cstdio>
#include <iostream>
#include <cmath>
#include <algorithm>
#include <string.h>
#include <stdlib.h>
#include <vector>
#include <stack>
#include <queue>

#define foru(i, l, r) for(int i = l; i <= r; ++i)
#define ford(i, r, l) for(int i = r; i >= l; --i)

using namespace std;

typedef long long ll;

int a[50005], sum[50005], n, s, l, b[10005];

int main () {
    //freopen ("CUT.INP", "r", stdin);
    //freopen ("CUT.OUT", "w", stdout);
    int t; scanf ("%d", &t);
    while (t--) {
        scanf ("%d%d%d", &s, &n, &l);
        foru (i, 0, s + 1) a[i] = sum[i] = 0;
        foru (i, 1, n) {
            scanf ("%d", &b[i]);
            a[b[i]] = 1;
        }
        foru (i, 1, s) sum[i] = sum[i - 1] + (a[i] == 1);
        int res = 0;
        sort (b + 1, b + n + 1);
        foru (i, 1, n) {
            if (b[i] > l) res += n - i;
            else {
                if (b[i] + l + 1 <= s - 1) res += sum[s] - sum[b[i] + l];
                if (s - l - 1 > b[i]) res += sum[s - l - 1] - sum[b[i]];
                if (b[i] + l + 1 < s - l - 1) res -= sum[s - l - 1] - sum[b[i] + l];
            }
        }
        printf ("%d\n", res);
    }
    //fclose(stdin);
    //fclose(stdout);
}
