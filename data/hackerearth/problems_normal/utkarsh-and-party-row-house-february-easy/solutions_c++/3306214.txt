#include<bits/stdc++.h>
#define pb push_back
#define mp make_pair
#define ll long long int
using namespace std;

ll MOD = 1000000007,n;

ll raise(ll b, ll exp)
{
    ll r=1;
    while(exp)
    {
        if(exp&1)r=(r*b)%MOD;
        b=(b*b)%MOD;
        exp>>=1;
    }
    return r;
}

ll a[100001],bit[100001],bit2[100001];

void update(int i,ll v)
{
    while(i<=n)
    {
        bit[i]+=v;
        i=i+(i&(-i));
    }
}

void cbit()
{
    int i;
    for(i=1;i<=n;i++)
    {
        update(i,1LL*i*a[i]);
    }
}

ll q(int i)
{
    ll s=0;
    while(i)
    {
        s+=bit[i];
        i=i-(i&(-i));
    }
    return s;
}

void update2(int i,ll v)
{
    while(i<=n)
    {
        bit2[i]+=v;
        i=i+(i&(-i));
    }
}

void cbit2()
{
    int i;
    for(i=1;i<=n;i++)
    {
        update2(i,a[i]);
    }
}

ll q2(int i)
{
    ll s=0;
    while(i)
    {
        s+=bit2[i];
        i=i-(i&(-i));
    }
    return s;
}

int main()
{
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    //freopen("input.txt","r",stdin);
    ll query,type,l,k,r,s;
    cin>>n>>query;
    for(int i=1;i<=n;i++)
        cin>>a[i];
    cbit();
    cbit2();
    while(query--)
    {
        cin>>type;
        if(type==1)
        {
            cin>>k>>l>>r;
            if(k<=l)
            {
                cout<<q(r)-q(l-1)-k*q2(r)+k*q2(l-1)<<endl;
            }
            else if(k>=r)
            {
                cout<<k*q2(r)-k*q2(l-1)-(q(r)-q(l-1))<<endl;
            }
            else
            {
                cout<<q(r)-q(k)-k*q2(r)+k*q2(k)+k*q2(k-1)-k*q2(l-1)-(q(k-1)-q(l-1))<<endl;
            }
        }
        else
        {
            cin>>k>>s;
            update2(k,s);
            update(k,(1LL)*k*s);
        }
    }
    return 0;
}


// ^_^ \\
