#include <cstdio>
#include <cstring>
#include <string>
#include <iostream>
#include <cmath>
#include <vector>
#include <queue>
#include <algorithm>
#include <set>
#define md int(1e7+100)
#define modul int(1e9+7)
#define FOR(i,a,b) for(int i=(a),_b=(b); i<=_b; i++)
#define DOW(i,a,b) for(int i=(a),_b=(b); i>=_b; i--)

using namespace std;

typedef pair<int, int> II;
typedef vector<II> vi;
typedef long long ll;

ll n, m, p, res, t;

int main()
{
    ios::sync_with_stdio(0);
    //freopen("inp.txt", "r", stdin);
    cin >> t;
    while (t--) {
        cin >> n >> m;
        if (m == 1 || n < m) {
            cout << n << endl;
            continue;
        }
        if (n == m) {
            cout << 1 << endl;
            continue;
        }
        p = 1;
        res = 0;
        while (p <= 1e14/m && p <= n) p = p * m;
        if (p > n) p = p / m;
        while (n > m) {
            if (p > n) p = p / m;
            else {
                n = n - p;
                res++;
            }
        }
        if (n < m) res += n;
        else res++;
        cout << res << endl;
    }
    return 0;
}
