n=int(raw_input())
for j in range(n):
	n,k=map(int,raw_input().split())
	s=map(int,raw_input().split())
	zero=s.count(0)
	if k<=zero:
		print s.count(1)+k
	else:
		k-=zero
		if k%2==0:
			print s.count(1)+zero
		else:
			print s.count(1)+zero-1
		
		