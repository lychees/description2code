#include <iostream>
int main()
{
    int64_t a,b;
    std::cin>>a>>b;
    std::string input;
    std::cin>>input;
    int64_t potions=a%b,answer=0;
    if(input[0]=='1') answer=potions%b;
    //std::cout<<answer<<" ";
    for(int64_t i=1;i<input.length();i++)
    {
        potions=((potions%b)*(potions%b))%b;

        if(input[i]=='1') answer=((answer%b)+(potions%b))%b;

    }
    std::cout<<answer%b;
    return 0;
}
