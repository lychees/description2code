#include <bits/stdc++.h>
using namespace std;
int a[520], n;
long func(int x, long& msum);

int main(){
int test_case;
scanf("%d", &test_case);
while(test_case--){
	scanf("%d", &n);
	for(int i=0; i<n; i++){
		scanf("%d", &a[i]);
	}
	long msum=INT_MIN;
	func(0, msum);
	printf("%ld\n", msum);
}
}
long func(int x, long& msum){
	int l = (x<<1) + 1;
	int r = (x<<1) + 2;
	long left=0, right=0;
	if(l<n)
		left=func(l, msum);

	if(r<n)
		right=func(r, msum);

	if((left+right+a[x])>msum){
		msum=(left+right+a[x]);
	}

	return (max(left, right)+a[x]);
}
