t=int(input())
while t>0:
	t-=1
	aux=[]
	vertices=[]
	n,m=raw_input().split()
	n=int(n)
	m=int(m)
	while m>0:
		m-=1
		u,v=raw_input().split()
		u=int(u)
		v=int(v)
		d={}
		d[u]=v
		aux.append(d)
	arr=raw_input().split()
	arr=map(int,arr)
	for e in arr:
		d=aux[e-1]
		for key,value in d.iteritems():
			vertices.append(key)
			vertices.append(value)
	vertices=list(set(vertices))
	if len(vertices) == n:
		print "YES"
	else:
		print "NO"
	
