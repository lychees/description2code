#include <bits/stdc++.h>
#define ll long long
#define pb(x) push_back(x)
#define pi pair<int,int>
#define mp(x) make_pair(x)
#define f first
#define s second
#define mod (int)1e9 + 7
using namespace std;

map<char,int> d;
int read()
{
    int x;
    scanf("%d",&x);
    return x;
}

bool cmp(string a,string b)
{
    int i=0;
    int l = min(a.length(),b.length());
    while(i<l)
    {
        if(d[a[i]] != d[b[i]]) return d[a[i]] < d[b[i]];
        else i++;
    }
    if(i==l && l == a.length()) return true;
    else return false; 
}
int main()
{
   int t = read();
   while(t--)
   {
      string perm;
      cin >> perm;
      for(int i=0;i<perm.length();i++) d[perm[i]] = i;
      
      int n = read();
      vector<string> b(n);
      for(int i=0;i<n;i++) cin >> b[i];
      sort(b.begin(),b.end(),cmp);
      
      for(int i=0;i<n;i++) cout << b[i] << endl;
      
    }
    return 0;
}
