#include <iostream>
using namespace std;

int main()
{
	typedef long long int lli;
	lli n, m, a[100000], t[100000];
	cin >> n >> m;
	for(lli i=0; i<n; ++i)
		cin >> a[i];
	for(lli i=0; i<n; ++i)
		cin >> t[i];
	/*
	4 4
	2 1 3 4
	3 4 2 1
	R 1
	L 2
	L 1
	L 5
	//
	2 1 3 4 9
	3 4 9 2 1
	*/
	bool gotit=false;
	lli fi, fj;
	for(lli i=0; i<n; ++i)
	{
		for(lli j=i; j<n; ++j)
		{
			lli notimes=0;
			for(lli k1=i, k2=j; notimes<n; ++notimes)
			{
				if(a[k1]!=t[k2])
					break;
				++k1;
				++k2;
				if(k1==n)
					k1=0;
				if(k2==n)
					k2=0;
			}//f kk
			if(notimes==n)
			{
				fi=i, fj=j;
				gotit=true;
				break;
			}
		}//f j
		if(gotit)
			break;
	}//f i
							//cout << "fi:" << fi << ", fj:" << fj << " ";
	/*bool isleft=false;
	if(fi<fj)//0,2->L2
		isleft=true;
	lli diff=fi-fj, newdiff;
	if(diff<0)
		newdiff=diff+n;
	else
		newdiff=diff-n;*/
	lli diff=fj-n, newdiff=diff+n;
	diff*=-1;
							//cout << "diff:" << diff << ", newdiff:" << newdiff << "\n";
	// diff=2 with isleft=true in default testcase
	lli param1=0;
	char ch;
	lli num;
	lli i;
	for(i=1; i<=m; ++i)
	{
		cin >> ch >> num;
		/*if(ch=='L')
			param1+=(num%n);
		else
			param1-=(num%n);
							cout << "i:" << i << ", param1:" << param1 << "\n";
		if(diff==(-1*param1) || newdiff==(-1*param1))
			break;*/
										//cout << "i:" << i << ", diff:" << diff << "\n";
		if(ch=='L')
			diff-=(num%n);
		else
			diff+=(num%n);
		if(diff>0)
			diff%=n;
		if(diff==0)
			break;
		else if(diff<0)
			diff=n+diff;
	}
	if(i==(m+1))
		cout << "-1";
	else
		cout << i;
    return 0;
}

